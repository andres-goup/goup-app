(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uy={exports:{}},uh={},zy={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function TR(){if(Lb)return bt;Lb=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function E(Y){return Y===null||typeof Y!="object"?null:(Y=T&&Y[T]||Y["@@iterator"],typeof Y=="function"?Y:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,U={};function H(Y,ge,Le){this.props=Y,this.context=ge,this.refs=U,this.updater=Le||A}H.prototype.isReactComponent={},H.prototype.setState=function(Y,ge){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ge,"setState")},H.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function W(){}W.prototype=H.prototype;function G(Y,ge,Le){this.props=Y,this.context=ge,this.refs=U,this.updater=Le||A}var $=G.prototype=new W;$.constructor=G,D($,H.prototype),$.isPureReactComponent=!0;var se=Array.isArray,oe=Object.prototype.hasOwnProperty,ee={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function j(Y,ge,Le){var qe,Oe={},De=null,dt=null;if(ge!=null)for(qe in ge.ref!==void 0&&(dt=ge.ref),ge.key!==void 0&&(De=""+ge.key),ge)oe.call(ge,qe)&&!F.hasOwnProperty(qe)&&(Oe[qe]=ge[qe]);var gt=arguments.length-2;if(gt===1)Oe.children=Le;else if(1<gt){for(var Nt=Array(gt),Qt=0;Qt<gt;Qt++)Nt[Qt]=arguments[Qt+2];Oe.children=Nt}if(Y&&Y.defaultProps)for(qe in gt=Y.defaultProps,gt)Oe[qe]===void 0&&(Oe[qe]=gt[qe]);return{$$typeof:t,type:Y,key:De,ref:dt,props:Oe,_owner:ee.current}}function V(Y,ge){return{$$typeof:t,type:Y.type,key:ge,ref:Y.ref,props:Y.props,_owner:Y._owner}}function B(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function z(Y){var ge={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Le){return ge[Le]})}var M=/\/+/g;function k(Y,ge){return typeof Y=="object"&&Y!==null&&Y.key!=null?z(""+Y.key):ge.toString(36)}function le(Y,ge,Le,qe,Oe){var De=typeof Y;(De==="undefined"||De==="boolean")&&(Y=null);var dt=!1;if(Y===null)dt=!0;else switch(De){case"string":case"number":dt=!0;break;case"object":switch(Y.$$typeof){case t:case e:dt=!0}}if(dt)return dt=Y,Oe=Oe(dt),Y=qe===""?"."+k(dt,0):qe,se(Oe)?(Le="",Y!=null&&(Le=Y.replace(M,"$&/")+"/"),le(Oe,ge,Le,"",function(Qt){return Qt})):Oe!=null&&(B(Oe)&&(Oe=V(Oe,Le+(!Oe.key||dt&&dt.key===Oe.key?"":(""+Oe.key).replace(M,"$&/")+"/")+Y)),ge.push(Oe)),1;if(dt=0,qe=qe===""?".":qe+":",se(Y))for(var gt=0;gt<Y.length;gt++){De=Y[gt];var Nt=qe+k(De,gt);dt+=le(De,ge,Le,Nt,Oe)}else if(Nt=E(Y),typeof Nt=="function")for(Y=Nt.call(Y),gt=0;!(De=Y.next()).done;)De=De.value,Nt=qe+k(De,gt++),dt+=le(De,ge,Le,Nt,Oe);else if(De==="object")throw ge=String(Y),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.");return dt}function me(Y,ge,Le){if(Y==null)return Y;var qe=[],Oe=0;return le(Y,qe,"","",function(De){return ge.call(Le,De,Oe++)}),qe}function ve(Y){if(Y._status===-1){var ge=Y._result;ge=ge(),ge.then(function(Le){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Le)},function(Le){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Le)}),Y._status===-1&&(Y._status=0,Y._result=ge)}if(Y._status===1)return Y._result.default;throw Y._result}var Ee={current:null},J={transition:null},xe={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:J,ReactCurrentOwner:ee};function he(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:me,forEach:function(Y,ge,Le){me(Y,function(){ge.apply(this,arguments)},Le)},count:function(Y){var ge=0;return me(Y,function(){ge++}),ge},toArray:function(Y){return me(Y,function(ge){return ge})||[]},only:function(Y){if(!B(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},bt.Component=H,bt.Fragment=n,bt.Profiler=i,bt.PureComponent=G,bt.StrictMode=r,bt.Suspense=f,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,bt.act=he,bt.cloneElement=function(Y,ge,Le){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var qe=D({},Y.props),Oe=Y.key,De=Y.ref,dt=Y._owner;if(ge!=null){if(ge.ref!==void 0&&(De=ge.ref,dt=ee.current),ge.key!==void 0&&(Oe=""+ge.key),Y.type&&Y.type.defaultProps)var gt=Y.type.defaultProps;for(Nt in ge)oe.call(ge,Nt)&&!F.hasOwnProperty(Nt)&&(qe[Nt]=ge[Nt]===void 0&&gt!==void 0?gt[Nt]:ge[Nt])}var Nt=arguments.length-2;if(Nt===1)qe.children=Le;else if(1<Nt){gt=Array(Nt);for(var Qt=0;Qt<Nt;Qt++)gt[Qt]=arguments[Qt+2];qe.children=gt}return{$$typeof:t,type:Y.type,key:Oe,ref:De,props:qe,_owner:dt}},bt.createContext=function(Y){return Y={$$typeof:u,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:a,_context:Y},Y.Consumer=Y},bt.createElement=j,bt.createFactory=function(Y){var ge=j.bind(null,Y);return ge.type=Y,ge},bt.createRef=function(){return{current:null}},bt.forwardRef=function(Y){return{$$typeof:h,render:Y}},bt.isValidElement=B,bt.lazy=function(Y){return{$$typeof:v,_payload:{_status:-1,_result:Y},_init:ve}},bt.memo=function(Y,ge){return{$$typeof:_,type:Y,compare:ge===void 0?null:ge}},bt.startTransition=function(Y){var ge=J.transition;J.transition={};try{Y()}finally{J.transition=ge}},bt.unstable_act=he,bt.useCallback=function(Y,ge){return Ee.current.useCallback(Y,ge)},bt.useContext=function(Y){return Ee.current.useContext(Y)},bt.useDebugValue=function(){},bt.useDeferredValue=function(Y){return Ee.current.useDeferredValue(Y)},bt.useEffect=function(Y,ge){return Ee.current.useEffect(Y,ge)},bt.useId=function(){return Ee.current.useId()},bt.useImperativeHandle=function(Y,ge,Le){return Ee.current.useImperativeHandle(Y,ge,Le)},bt.useInsertionEffect=function(Y,ge){return Ee.current.useInsertionEffect(Y,ge)},bt.useLayoutEffect=function(Y,ge){return Ee.current.useLayoutEffect(Y,ge)},bt.useMemo=function(Y,ge){return Ee.current.useMemo(Y,ge)},bt.useReducer=function(Y,ge,Le){return Ee.current.useReducer(Y,ge,Le)},bt.useRef=function(Y){return Ee.current.useRef(Y)},bt.useState=function(Y){return Ee.current.useState(Y)},bt.useSyncExternalStore=function(Y,ge,Le){return Ee.current.useSyncExternalStore(Y,ge,Le)},bt.useTransition=function(){return Ee.current.useTransition()},bt.version="18.3.1",bt}var jb;function Qv(){return jb||(jb=1,zy.exports=TR()),zy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function ER(){if(Db)return uh;Db=1;var t=Qv(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,_){var v,T={},E=null,A=null;_!==void 0&&(E=""+_),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(A=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(T[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)T[v]===void 0&&(T[v]=f[v]);return{$$typeof:e,type:h,key:E,ref:A,props:T,_owner:i.current}}return uh.Fragment=n,uh.jsx=u,uh.jsxs=u,uh}var Mb;function SR(){return Mb||(Mb=1,Uy.exports=ER()),Uy.exports}var m=SR(),N=Qv();const Lt=Kv(N);var bm={},By={exports:{}},ui={},$y={exports:{}},Hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function CR(){return Ob||(Ob=1,function(t){function e(J,xe){var he=J.length;J.push(xe);e:for(;0<he;){var Y=he-1>>>1,ge=J[Y];if(0<i(ge,xe))J[Y]=xe,J[he]=ge,he=Y;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var xe=J[0],he=J.pop();if(he!==xe){J[0]=he;e:for(var Y=0,ge=J.length,Le=ge>>>1;Y<Le;){var qe=2*(Y+1)-1,Oe=J[qe],De=qe+1,dt=J[De];if(0>i(Oe,he))De<ge&&0>i(dt,Oe)?(J[Y]=dt,J[De]=he,Y=De):(J[Y]=Oe,J[qe]=he,Y=qe);else if(De<ge&&0>i(dt,he))J[Y]=dt,J[De]=he,Y=De;else break e}}return xe}function i(J,xe){var he=J.sortIndex-xe.sortIndex;return he!==0?he:J.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],_=[],v=1,T=null,E=3,A=!1,D=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(J){for(var xe=n(_);xe!==null;){if(xe.callback===null)r(_);else if(xe.startTime<=J)r(_),xe.sortIndex=xe.expirationTime,e(f,xe);else break;xe=n(_)}}function se(J){if(U=!1,$(J),!D)if(n(f)!==null)D=!0,ve(oe);else{var xe=n(_);xe!==null&&Ee(se,xe.startTime-J)}}function oe(J,xe){D=!1,U&&(U=!1,W(j),j=-1),A=!0;var he=E;try{for($(xe),T=n(f);T!==null&&(!(T.expirationTime>xe)||J&&!z());){var Y=T.callback;if(typeof Y=="function"){T.callback=null,E=T.priorityLevel;var ge=Y(T.expirationTime<=xe);xe=t.unstable_now(),typeof ge=="function"?T.callback=ge:T===n(f)&&r(f),$(xe)}else r(f);T=n(f)}if(T!==null)var Le=!0;else{var qe=n(_);qe!==null&&Ee(se,qe.startTime-xe),Le=!1}return Le}finally{T=null,E=he,A=!1}}var ee=!1,F=null,j=-1,V=5,B=-1;function z(){return!(t.unstable_now()-B<V)}function M(){if(F!==null){var J=t.unstable_now();B=J;var xe=!0;try{xe=F(!0,J)}finally{xe?k():(ee=!1,F=null)}}else ee=!1}var k;if(typeof G=="function")k=function(){G(M)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,me=le.port2;le.port1.onmessage=M,k=function(){me.postMessage(null)}}else k=function(){H(M,0)};function ve(J){F=J,ee||(ee=!0,k())}function Ee(J,xe){j=H(function(){J(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,ve(oe))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(J){switch(E){case 1:case 2:case 3:var xe=3;break;default:xe=E}var he=E;E=xe;try{return J()}finally{E=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,xe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=E;E=J;try{return xe()}finally{E=he}},t.unstable_scheduleCallback=function(J,xe,he){var Y=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Y+he:Y):he=Y,J){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=he+ge,J={id:v++,callback:xe,priorityLevel:J,startTime:he,expirationTime:ge,sortIndex:-1},he>Y?(J.sortIndex=he,e(_,J),n(f)===null&&J===n(_)&&(U?(W(j),j=-1):U=!0,Ee(se,he-Y))):(J.sortIndex=ge,e(f,J),D||A||(D=!0,ve(oe))),J},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(J){var xe=E;return function(){var he=E;E=xe;try{return J.apply(this,arguments)}finally{E=he}}}}(Hy)),Hy}var Vb;function IR(){return Vb||(Vb=1,$y.exports=CR()),$y.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function PR(){if(Fb)return ui;Fb=1;var t=Qv(),e=IR();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,l){u(s,l),u(s+"Capture",l)}function u(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},T={};function E(s){return f.call(T,s)?!0:f.call(v,s)?!1:_.test(s)?T[s]=!0:(v[s]=!0,!1)}function A(s,l,d,y){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,l,d,y){if(l===null||typeof l>"u"||A(s,l,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function U(s,l,d,y,x,S,P){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=S,this.removeEmptyString=P}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){H[s]=new U(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];H[l]=new U(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){H[s]=new U(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){H[s]=new U(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){H[s]=new U(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){H[s]=new U(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){H[s]=new U(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){H[s]=new U(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){H[s]=new U(s,5,!1,s.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function G(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(W,G);H[l]=new U(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(W,G);H[l]=new U(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(W,G);H[l]=new U(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){H[s]=new U(s,1,!1,s.toLowerCase(),null,!1,!1)}),H.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){H[s]=new U(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,l,d,y){var x=H.hasOwnProperty(l)?H[l]:null;(x!==null?x.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,d,x,y)&&(d=null),y||x===null?E(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(l=x.attributeName,y=x.attributeNamespace,d===null?s.removeAttribute(l):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,y?s.setAttributeNS(y,l,d):s.setAttribute(l,d))))}var se=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),ee=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),J=Symbol.iterator;function xe(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var he=Object.assign,Y;function ge(s){if(Y===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Y=l&&l[1]||""}return`
`+Y+s}var Le=!1;function qe(s,l){if(!s||Le)return"";Le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ce){var y=ce}Reflect.construct(s,[],l)}else{try{l.call()}catch(ce){y=ce}s.call(l.prototype)}else{try{throw Error()}catch(ce){y=ce}s()}}catch(ce){if(ce&&y&&typeof ce.stack=="string"){for(var x=ce.stack.split(`
`),S=y.stack.split(`
`),P=x.length-1,q=S.length-1;1<=P&&0<=q&&x[P]!==S[q];)q--;for(;1<=P&&0<=q;P--,q--)if(x[P]!==S[q]){if(P!==1||q!==1)do if(P--,q--,0>q||x[P]!==S[q]){var Q=`
`+x[P].replace(" at new "," at ");return s.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",s.displayName)),Q}while(1<=P&&0<=q);break}}}finally{Le=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?ge(s):""}function Oe(s){switch(s.tag){case 5:return ge(s.type);case 16:return ge("Lazy");case 13:return ge("Suspense");case 19:return ge("SuspenseList");case 0:case 2:case 15:return s=qe(s.type,!1),s;case 11:return s=qe(s.type.render,!1),s;case 1:return s=qe(s.type,!0),s;default:return""}}function De(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case ee:return"Portal";case V:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case le:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case z:return(s.displayName||"Context")+".Consumer";case B:return(s._context.displayName||"Context")+".Provider";case M:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case me:return l=s.displayName||null,l!==null?l:De(s.type)||"Memo";case ve:l=s._payload,s=s._init;try{return De(s(l))}catch{}}return null}function dt(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(l);case 8:return l===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function gt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Nt(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qt(s){var l=Nt(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),y=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,S=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(P){y=""+P,S.call(this,P)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(P){y=""+P},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Rr(s){s._valueTracker||(s._valueTracker=Qt(s))}function Lr(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),y="";return s&&(y=Nt(s)?s.checked?"true":"false":s.value),s=y,s!==d?(l.setValue(s),!0):!1}function Wr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Di(s,l){var d=l.checked;return he({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Mi(s,l){var d=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;d=gt(l.value!=null?l.value:d),s._wrapperState={initialChecked:y,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ws(s,l){l=l.checked,l!=null&&$(s,"checked",l,!1)}function ps(s,l){Ws(s,l);var d=gt(l.value),y=l.type;if(d!=null)y==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?gs(s,l.type,d):l.hasOwnProperty("defaultValue")&&gs(s,l.type,gt(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function qs(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function gs(s,l,d){(l!=="number"||Wr(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var K=Array.isArray;function ie(s,l,d,y){if(s=s.options,l){l={};for(var x=0;x<d.length;x++)l["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=l.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&y&&(s[d].defaultSelected=!0)}else{for(d=""+gt(d),l=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,y&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function pe(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return he({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ne(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(K(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:gt(d)}}function Ae(s,l){var d=gt(l.value),y=gt(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),y!=null&&(s.defaultValue=""+y)}function Ce(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Re(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tt(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Re(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var wt,Pn=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,y,x){MSApp.execUnsafeLocalFunction(function(){return s(l,d,y,x)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=wt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function mr(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ys=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(s){ys.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),$n[l]=$n[s]})});function Oi(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||$n.hasOwnProperty(s)&&$n[s]?(""+l).trim():l+"px"}function gi(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var y=d.indexOf("--")===0,x=Oi(d,l[d],y);d==="float"&&(d="cssFloat"),y?s.setProperty(d,x):s[d]=x}}var Zs=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gs(s,l){if(l){if(Zs[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function yi(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vi=null;function ka(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Co=null,jr=null,_i=null;function Na(s){if(s=Zo(s)){if(typeof Co!="function")throw Error(n(280));var l=s.stateNode;l&&(l=bc(l),Co(s.stateNode,s.type,l))}}function Fi(s){jr?_i?_i.push(s):_i=[s]:jr=s}function nu(){if(jr){var s=jr,l=_i;if(_i=jr=null,Na(s),l)for(s=0;s<l.length;s++)Na(l[s])}}function Io(s,l){return s(l)}function ru(){}var _s=!1;function Po(s,l,d){if(_s)return s(l,d);_s=!0;try{return Io(s,l,d)}finally{_s=!1,(jr!==null||_i!==null)&&(ru(),nu())}}function un(s,l){var d=s.stateNode;if(d===null)return null;var y=bc(d);if(y===null)return null;d=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Ra=!1;if(h)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){Ra=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{Ra=!1}function Ao(s,l,d,y,x,S,P,q,Q){var ce=Array.prototype.slice.call(arguments,3);try{l.apply(d,ce)}catch(Te){this.onError(Te)}}var Qn=!1,We=null,qr=!1,La=null,ic={onError:function(s){Qn=!0,We=s}};function ko(s,l,d,y,x,S,P,q,Q){Qn=!1,We=null,Ao.apply(ic,arguments)}function ja(s,l,d,y,x,S,P,q,Q){if(ko.apply(this,arguments),Qn){if(Qn){var ce=We;Qn=!1,We=null}else throw Error(n(198));qr||(qr=!0,La=ce)}}function Zr(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function Gr(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Kr(s){if(Zr(s)!==s)throw Error(n(188))}function sc(s){var l=s.alternate;if(!l){if(l=Zr(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,y=l;;){var x=d.return;if(x===null)break;var S=x.alternate;if(S===null){if(y=x.return,y!==null){d=y;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===d)return Kr(x),s;if(S===y)return Kr(x),l;S=S.sibling}throw Error(n(188))}if(d.return!==y.return)d=x,y=S;else{for(var P=!1,q=x.child;q;){if(q===d){P=!0,d=x,y=S;break}if(q===y){P=!0,y=x,d=S;break}q=q.sibling}if(!P){for(q=S.child;q;){if(q===d){P=!0,d=S,y=x;break}if(q===y){P=!0,y=S,d=x;break}q=q.sibling}if(!P)throw Error(n(189))}}if(d.alternate!==y)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function iu(s){return s=sc(s),s!==null?Da(s):null}function Da(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Da(s);if(l!==null)return l;s=s.sibling}return null}var Ma=e.unstable_scheduleCallback,Oa=e.unstable_cancelCallback,oc=e.unstable_shouldYield,Va=e.unstable_requestPaint,qt=e.unstable_now,ac=e.unstable_getCurrentPriorityLevel,No=e.unstable_ImmediatePriority,Ks=e.unstable_UserBlockingPriority,Qr=e.unstable_NormalPriority,Ro=e.unstable_LowPriority,Qs=e.unstable_IdlePriority,Ys=null,pr=null;function Xs(s){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Ys,s,void 0,(s.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:vs,$t=Math.log,Lo=Math.LN2;function vs(s){return s>>>=0,s===0?32:31-($t(s)/Lo|0)|0}var wi=64,Js=4194304;function it(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ht(s,l){var d=s.pendingLanes;if(d===0)return 0;var y=0,x=s.suspendedLanes,S=s.pingedLanes,P=d&268435455;if(P!==0){var q=P&~x;q!==0?y=it(q):(S&=P,S!==0&&(y=it(S)))}else P=d&~x,P!==0?y=it(P):S!==0&&(y=it(S));if(y===0)return 0;if(l!==0&&l!==y&&(l&x)===0&&(x=y&-y,S=l&-l,x>=S||x===16&&(S&4194240)!==0))return l;if((y&4)!==0&&(y|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=y;0<l;)d=31-ot(l),x=1<<d,y|=s[d],l&=~x;return y}function su(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yr(s,l){for(var d=s.suspendedLanes,y=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes;0<S;){var P=31-ot(S),q=1<<P,Q=x[P];Q===-1?((q&d)===0||(q&y)!==0)&&(x[P]=su(q,l)):Q<=l&&(s.expiredLanes|=q),S&=~q}}function Yt(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function jo(){var s=wi;return wi<<=1,(wi&4194240)===0&&(wi=64),s}function xi(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function gr(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-ot(l),s[l]=d}function at(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-ot(d),S=1<<x;l[x]=0,y[x]=-1,s[x]=-1,d&=~S}}function yr(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var y=31-ot(d),x=1<<y;x&l|s[y]&l&&(s[y]|=l),d&=~x}}var _t=0;function Xr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Fa,Ui,Ua,za,Do,Mo=!1,Jr=[],pn=null,ei=null,Dr=null,eo=new Map,Ye=new Map,xn=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ou(s,l){switch(s){case"focusin":case"focusout":pn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":eo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ye.delete(l.pointerId)}}function Yn(s,l,d,y,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:l,domEventName:d,eventSystemFlags:y,nativeEvent:S,targetContainers:[x]},l!==null&&(l=Zo(l),l!==null&&Ui(l)),s):(s.eventSystemFlags|=y,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function au(s,l,d,y,x){switch(l){case"focusin":return pn=Yn(pn,s,l,d,y,x),!0;case"dragenter":return ei=Yn(ei,s,l,d,y,x),!0;case"mouseover":return Dr=Yn(Dr,s,l,d,y,x),!0;case"pointerover":var S=x.pointerId;return eo.set(S,Yn(eo.get(S)||null,s,l,d,y,x)),!0;case"gotpointercapture":return S=x.pointerId,Ye.set(S,Yn(Ye.get(S)||null,s,l,d,y,x)),!0}return!1}function Ba(s){var l=qo(s.target);if(l!==null){var d=Zr(l);if(d!==null){if(l=d.tag,l===13){if(l=Gr(d),l!==null){s.blockedOn=l,Do(s.priority,function(){Ua(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sr(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Fo(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var y=new d.constructor(d.type,d);Vi=y,d.target.dispatchEvent(y),Vi=null}else return l=Zo(d),l!==null&&Ui(l),s.blockedOn=d,!1;l.shift()}return!0}function ws(s,l,d){sr(s)&&d.delete(l)}function to(){Mo=!1,pn!==null&&sr(pn)&&(pn=null),ei!==null&&sr(ei)&&(ei=null),Dr!==null&&sr(Dr)&&(Dr=null),eo.forEach(ws),Ye.forEach(ws)}function Wt(s,l){s.blockedOn===l&&(s.blockedOn=null,Mo||(Mo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,to)))}function Hn(s){function l(x){return Wt(x,s)}if(0<Jr.length){Wt(Jr[0],s);for(var d=1;d<Jr.length;d++){var y=Jr[d];y.blockedOn===s&&(y.blockedOn=null)}}for(pn!==null&&Wt(pn,s),ei!==null&&Wt(ei,s),Dr!==null&&Wt(Dr,s),eo.forEach(l),Ye.forEach(l),d=0;d<xn.length;d++)y=xn[d],y.blockedOn===s&&(y.blockedOn=null);for(;0<xn.length&&(d=xn[0],d.blockedOn===null);)Ba(d),d.blockedOn===null&&xn.shift()}var zi=se.ReactCurrentBatchConfig,xs=!0;function Xt(s,l,d,y){var x=_t,S=zi.transition;zi.transition=null;try{_t=1,Oo(s,l,d,y)}finally{_t=x,zi.transition=S}}function lc(s,l,d,y){var x=_t,S=zi.transition;zi.transition=null;try{_t=4,Oo(s,l,d,y)}finally{_t=x,zi.transition=S}}function Oo(s,l,d,y){if(xs){var x=Fo(s,l,d,y);if(x===null)o(s,l,y,Vo,d),ou(s,y);else if(au(x,s,l,d,y))y.stopPropagation();else if(ou(s,y),l&4&&-1<Ft.indexOf(s)){for(;x!==null;){var S=Zo(x);if(S!==null&&Fa(S),S=Fo(s,l,d,y),S===null&&o(s,l,y,Vo,d),S===x)break;x=S}x!==null&&y.stopPropagation()}else o(s,l,y,null,d)}}var Vo=null;function Fo(s,l,d,y){if(Vo=null,s=ka(y),s=qo(s),s!==null)if(l=Zr(s),l===null)s=null;else if(d=l.tag,d===13){if(s=Gr(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Vo=s,null}function vt(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ac()){case No:return 1;case Ks:return 4;case Qr:case Ro:return 16;case Qs:return 536870912;default:return 16}default:return 16}}var Mr=null,Xn=null,An=null;function $a(){if(An)return An;var s,l=Xn,d=l.length,y,x="value"in Mr?Mr.value:Mr.textContent,S=x.length;for(s=0;s<d&&l[s]===x[s];s++);var P=d-s;for(y=1;y<=P&&l[d-y]===x[S-y];y++);return An=x.slice(s,1<y?1-y:void 0)}function Ha(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ti(){return!0}function lu(){return!1}function kn(s){function l(d,y,x,S,P){this._reactName=d,this._targetInst=x,this.type=y,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(d=s[q],this[q]=d?d(S):S[q]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ti:lu,this.isPropagationStopped=lu,this}return he(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),l}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=kn(bi),ni=he({},bi,{view:0,detail:0}),Md=kn(ni),or,bs,Ts,_r=he({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ts&&(Ts&&s.type==="mousemove"?(or=s.screenX-Ts.screenX,bs=s.screenY-Ts.screenY):bs=or=0,Ts=s),or)},movementY:function(s){return"movementY"in s?s.movementY:bs}}),Uo=kn(_r),qa=he({},_r,{dataTransfer:0}),Za=kn(qa),Ga=he({},ni,{relatedTarget:0}),zo=kn(Ga),uu=he({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Es=kn(uu),uc=he({},bi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ka=kn(uc),cc=he({},bi,{data:0}),Qa=kn(cc),Bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Bi[s])?!!l[s]:!1}function vr(){return dc}var p=he({},ni,{key:function(s){if(s.key){var l=Bo[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ha(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(s){return s.type==="keypress"?Ha(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ha(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),b=kn(p),I=he({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O=kn(I),te=he({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),de=kn(te),ke=he({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vt=kn(ke),gn=he({},_r,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),St=kn(gn),Ut=[9,13,27,32],Gt=h&&"CompositionEvent"in window,ri=null;h&&"documentMode"in document&&(ri=document.documentMode);var cn=h&&"TextEvent"in window&&!ri,$o=h&&(!Gt||ri&&8<ri&&11>=ri),Ti=" ",Cf=!1;function Ya(s,l){switch(s){case"keyup":return Ut.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Od(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ss=!1;function Ng(s,l){switch(s){case"compositionend":return Od(l);case"keypress":return l.which!==32?null:(Cf=!0,Ti);case"textInput":return s=l.data,s===Ti&&Cf?null:s;default:return null}}function no(s,l){if(Ss)return s==="compositionend"||!Gt&&Ya(s,l)?(s=$a(),An=Xn=Mr=null,Ss=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return $o&&l.locale!=="ko"?null:l.data;default:return null}}var hc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function If(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!hc[s.type]:l==="textarea"}function fc(s,l,d,y){Fi(y),l=g(l,"onChange"),0<l.length&&(d=new Wa("onChange","change",null,d,y),s.push({event:d,listeners:l}))}var cu=null,Or=null;function Rg(s){qd(s,0)}function Cs(s){var l=Go(s);if(Lr(l))return s}function Lg(s,l){if(s==="change")return l}var $i=!1;if(h){var Xa;if(h){var mc="oninput"in document;if(!mc){var pc=document.createElement("div");pc.setAttribute("oninput","return;"),mc=typeof pc.oninput=="function"}Xa=mc}else Xa=!1;$i=Xa&&(!document.documentMode||9<document.documentMode)}function du(){cu&&(cu.detachEvent("onpropertychange",gc),Or=cu=null)}function gc(s){if(s.propertyName==="value"&&Cs(Or)){var l=[];fc(l,Or,s,ka(s)),Po(Rg,l)}}function yc(s,l,d){s==="focusin"?(du(),cu=l,Or=d,cu.attachEvent("onpropertychange",gc)):s==="focusout"&&du()}function Ja(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Cs(Or)}function _c(s,l){if(s==="click")return Cs(l)}function Vd(s,l){if(s==="input"||s==="change")return Cs(l)}function Pf(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Ei=typeof Object.is=="function"?Object.is:Pf;function ro(s,l){if(Ei(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),y=Object.keys(l);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var x=d[y];if(!f.call(l,x)||!Ei(s[x],l[x]))return!1}return!0}function Af(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Fd(s,l){var d=Af(s);s=0;for(var y;d;){if(d.nodeType===3){if(y=s+d.textContent.length,s<=l&&y>=l)return{node:d,offset:l-s};s=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Af(d)}}function kf(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?kf(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Ud(){for(var s=window,l=Wr();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=Wr(s.document)}return l}function zd(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function Hi(s){var l=Ud(),d=s.focusedElem,y=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&kf(d.ownerDocument.documentElement,d)){if(y!==null&&zd(d)){if(l=y.start,s=y.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,S=Math.min(y.start,x);y=y.end===void 0?S:Math.min(y.end,x),!s.extend&&S>y&&(x=y,y=S,S=x),x=Fd(d,S);var P=Fd(d,y);x&&P&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==P.node||s.focusOffset!==P.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),s.removeAllRanges(),S>y?(s.addRange(l),s.extend(P.node,P.offset)):(l.setEnd(P.node,P.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var vc=h&&"documentMode"in document&&11>=document.documentMode,el=null,tl=null,hu=null,wc=!1;function Nf(s,l,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wc||el==null||el!==Wr(y)||(y=el,"selectionStart"in y&&zd(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),hu&&ro(hu,y)||(hu=y,y=g(tl,"onSelect"),0<y.length&&(l=new Wa("onSelect","select",null,l,d),s.push({event:l,listeners:y}),l.target=el)))}function io(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var nl={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionend:io("Transition","TransitionEnd")},so={},Bd={};h&&(Bd=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function fu(s){if(so[s])return so[s];if(!nl[s])return s;var l=nl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in Bd)return so[s]=l[d];return s}var Rf=fu("animationend"),Wi=fu("animationiteration"),$d=fu("animationstart"),Hd=fu("transitionend"),rl=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(s,l){rl.set(s,l),a(l,[s])}for(var Ho=0;Ho<Lf.length;Ho++){var xc=Lf[Ho],jf=xc.toLowerCase(),jg=xc[0].toUpperCase()+xc.slice(1);Si(jf,"on"+jg)}Si(Rf,"onAnimationEnd"),Si(Wi,"onAnimationIteration"),Si($d,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(Hd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Df=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function Wd(s,l,d){var y=s.type||"unknown-event";s.currentTarget=d,ja(y,l,void 0,s),s.currentTarget=null}function qd(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var y=s[d],x=y.event;y=y.listeners;e:{var S=void 0;if(l)for(var P=y.length-1;0<=P;P--){var q=y[P],Q=q.instance,ce=q.currentTarget;if(q=q.listener,Q!==S&&x.isPropagationStopped())break e;Wd(x,q,ce),S=Q}else for(P=0;P<y.length;P++){if(q=y[P],Q=q.instance,ce=q.currentTarget,q=q.listener,Q!==S&&x.isPropagationStopped())break e;Wd(x,q,ce),S=Q}}}if(qr)throw s=La,qr=!1,La=null,s}function Zt(s,l){var d=l[ll];d===void 0&&(d=l[ll]=new Set);var y=s+"__bubble";d.has(y)||(Mf(l,s,2,!1),d.add(y))}function Zd(s,l,d){var y=0;l&&(y|=4),Mf(d,s,y,l)}var mu="_reactListening"+Math.random().toString(36).slice(2);function sl(s){if(!s[mu]){s[mu]=!0,r.forEach(function(d){d!=="selectionchange"&&(Df.has(d)||Zd(d,!1,s),Zd(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[mu]||(l[mu]=!0,Zd("selectionchange",!1,l))}}function Mf(s,l,d,y){switch(vt(l)){case 1:var x=Xt;break;case 4:x=lc;break;default:x=Oo}d=x.bind(null,l,d,s),x=void 0,!Ra||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),y?x!==void 0?s.addEventListener(l,d,{capture:!0,passive:x}):s.addEventListener(l,d,!0):x!==void 0?s.addEventListener(l,d,{passive:x}):s.addEventListener(l,d,!1)}function o(s,l,d,y,x){var S=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var P=y.tag;if(P===3||P===4){var q=y.stateNode.containerInfo;if(q===x||q.nodeType===8&&q.parentNode===x)break;if(P===4)for(P=y.return;P!==null;){var Q=P.tag;if((Q===3||Q===4)&&(Q=P.stateNode.containerInfo,Q===x||Q.nodeType===8&&Q.parentNode===x))return;P=P.return}for(;q!==null;){if(P=qo(q),P===null)return;if(Q=P.tag,Q===5||Q===6){y=S=P;continue e}q=q.parentNode}}y=y.return}Po(function(){var ce=S,Te=ka(d),Se=[];e:{var be=rl.get(s);if(be!==void 0){var Ve=Wa,He=s;switch(s){case"keypress":if(Ha(d)===0)break e;case"keydown":case"keyup":Ve=b;break;case"focusin":He="focus",Ve=zo;break;case"focusout":He="blur",Ve=zo;break;case"beforeblur":case"afterblur":Ve=zo;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Za;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=de;break;case Rf:case Wi:case $d:Ve=Es;break;case Hd:Ve=Vt;break;case"scroll":Ve=Md;break;case"wheel":Ve=St;break;case"copy":case"cut":case"paste":Ve=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=O}var Ze=(l&4)!==0,bn=!Ze&&s==="scroll",re=Ze?be!==null?be+"Capture":null:be;Ze=[];for(var X=ce,ae;X!==null;){ae=X;var Ie=ae.stateNode;if(ae.tag===5&&Ie!==null&&(ae=Ie,re!==null&&(Ie=un(X,re),Ie!=null&&Ze.push(c(X,Ie,ae)))),bn)break;X=X.return}0<Ze.length&&(be=new Ve(be,He,null,d,Te),Se.push({event:be,listeners:Ze}))}}if((l&7)===0){e:{if(be=s==="mouseover"||s==="pointerover",Ve=s==="mouseout"||s==="pointerout",be&&d!==Vi&&(He=d.relatedTarget||d.fromElement)&&(qo(He)||He[zt]))break e;if((Ve||be)&&(be=Te.window===Te?Te:(be=Te.ownerDocument)?be.defaultView||be.parentWindow:window,Ve?(He=d.relatedTarget||d.toElement,Ve=ce,He=He?qo(He):null,He!==null&&(bn=Zr(He),He!==bn||He.tag!==5&&He.tag!==6)&&(He=null)):(Ve=null,He=ce),Ve!==He)){if(Ze=Uo,Ie="onMouseLeave",re="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(Ze=O,Ie="onPointerLeave",re="onPointerEnter",X="pointer"),bn=Ve==null?be:Go(Ve),ae=He==null?be:Go(He),be=new Ze(Ie,X+"leave",Ve,d,Te),be.target=bn,be.relatedTarget=ae,Ie=null,qo(Te)===ce&&(Ze=new Ze(re,X+"enter",He,d,Te),Ze.target=ae,Ze.relatedTarget=bn,Ie=Ze),bn=Ie,Ve&&He)t:{for(Ze=Ve,re=He,X=0,ae=Ze;ae;ae=w(ae))X++;for(ae=0,Ie=re;Ie;Ie=w(Ie))ae++;for(;0<X-ae;)Ze=w(Ze),X--;for(;0<ae-X;)re=w(re),ae--;for(;X--;){if(Ze===re||re!==null&&Ze===re.alternate)break t;Ze=w(Ze),re=w(re)}Ze=null}else Ze=null;Ve!==null&&C(Se,be,Ve,Ze,!1),He!==null&&bn!==null&&C(Se,bn,He,Ze,!0)}}e:{if(be=ce?Go(ce):window,Ve=be.nodeName&&be.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&be.type==="file")var Ke=Lg;else if(If(be))if($i)Ke=Vd;else{Ke=Ja;var nt=yc}else(Ve=be.nodeName)&&Ve.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(Ke=_c);if(Ke&&(Ke=Ke(s,ce))){fc(Se,Ke,d,Te);break e}nt&&nt(s,be,ce),s==="focusout"&&(nt=be._wrapperState)&&nt.controlled&&be.type==="number"&&gs(be,"number",be.value)}switch(nt=ce?Go(ce):window,s){case"focusin":(If(nt)||nt.contentEditable==="true")&&(el=nt,tl=ce,hu=null);break;case"focusout":hu=tl=el=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Nf(Se,d,Te);break;case"selectionchange":if(vc)break;case"keydown":case"keyup":Nf(Se,d,Te)}var rt;if(Gt)e:{switch(s){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Ss?Ya(s,d)&&(ut="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(ut="onCompositionStart");ut&&($o&&d.locale!=="ko"&&(Ss||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Ss&&(rt=$a()):(Mr=Te,Xn="value"in Mr?Mr.value:Mr.textContent,Ss=!0)),nt=g(ce,ut),0<nt.length&&(ut=new Qa(ut,s,null,d,Te),Se.push({event:ut,listeners:nt}),rt?ut.data=rt:(rt=Od(d),rt!==null&&(ut.data=rt)))),(rt=cn?Ng(s,d):no(s,d))&&(ce=g(ce,"onBeforeInput"),0<ce.length&&(Te=new Qa("onBeforeInput","beforeinput",null,d,Te),Se.push({event:Te,listeners:ce}),Te.data=rt))}qd(Se,l)})}function c(s,l,d){return{instance:s,listener:l,currentTarget:d}}function g(s,l){for(var d=l+"Capture",y=[];s!==null;){var x=s,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=un(s,d),S!=null&&y.unshift(c(s,S,x)),S=un(s,l),S!=null&&y.push(c(s,S,x))),s=s.return}return y}function w(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function C(s,l,d,y,x){for(var S=l._reactName,P=[];d!==null&&d!==y;){var q=d,Q=q.alternate,ce=q.stateNode;if(Q!==null&&Q===y)break;q.tag===5&&ce!==null&&(q=ce,x?(Q=un(d,S),Q!=null&&P.unshift(c(d,Q,q))):x||(Q=un(d,S),Q!=null&&P.push(c(d,Q,q)))),d=d.return}P.length!==0&&s.push({event:l,listeners:P})}var R=/\r\n?/g,Z=/\u0000|\uFFFD/g;function ne(s){return(typeof s=="string"?s:""+s).replace(R,`
`).replace(Z,"")}function ue(s,l,d){if(l=ne(l),ne(s)!==l&&d)throw Error(n(425))}function we(){}var je=null,et=null;function yt(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Wn=typeof setTimeout=="function"?setTimeout:void 0,Rn=typeof clearTimeout=="function"?clearTimeout:void 0,Vr=typeof Promise=="function"?Promise:void 0,wr=typeof queueMicrotask=="function"?queueMicrotask:typeof Vr<"u"?function(s){return Vr.resolve(null).then(s).catch(ol)}:Wn;function ol(s){setTimeout(function(){throw s})}function Gd(s,l){var d=l,y=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(y===0){s.removeChild(x),Hn(l);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=x}while(d);Hn(l)}function oo(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Of(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),qi="__reactFiber$"+Wo,al="__reactProps$"+Wo,zt="__reactContainer$"+Wo,ll="__reactEvents$"+Wo,Dg="__reactListeners$"+Wo,Mg="__reactHandles$"+Wo;function qo(s){var l=s[qi];if(l)return l;for(var d=s.parentNode;d;){if(l=d[zt]||d[qi]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=Of(s);s!==null;){if(d=s[qi])return d;s=Of(s)}return l}s=d,d=s.parentNode}return null}function Zo(s){return s=s[qi]||s[zt],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Go(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function bc(s){return s[al]||null}var Og=[],Tc=-1;function ul(s){return{current:s}}function tn(s){0>Tc||(s.current=Og[Tc],Og[Tc]=null,Tc--)}function Jt(s,l){Tc++,Og[Tc]=s.current,s.current=l}var cl={},xr=ul(cl),ii=ul(!1),pu=cl;function Ec(s,l){var d=s.type.contextTypes;if(!d)return cl;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in d)x[S]=l[S];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=x),x}function si(s){return s=s.childContextTypes,s!=null}function Vf(){tn(ii),tn(xr)}function t0(s,l,d){if(xr.current!==cl)throw Error(n(168));Jt(xr,l),Jt(ii,d)}function n0(s,l,d){var y=s.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var x in y)if(!(x in l))throw Error(n(108,dt(s)||"Unknown",x));return he({},d,y)}function Ff(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||cl,pu=xr.current,Jt(xr,s),Jt(ii,ii.current),!0}function r0(s,l,d){var y=s.stateNode;if(!y)throw Error(n(169));d?(s=n0(s,l,pu),y.__reactInternalMemoizedMergedChildContext=s,tn(ii),tn(xr),Jt(xr,s)):tn(ii),Jt(ii,d)}var Ko=null,Uf=!1,Vg=!1;function i0(s){Ko===null?Ko=[s]:Ko.push(s)}function BN(s){Uf=!0,i0(s)}function dl(){if(!Vg&&Ko!==null){Vg=!0;var s=0,l=_t;try{var d=Ko;for(_t=1;s<d.length;s++){var y=d[s];do y=y(!0);while(y!==null)}Ko=null,Uf=!1}catch(x){throw Ko!==null&&(Ko=Ko.slice(s+1)),Ma(No,dl),x}finally{_t=l,Vg=!1}}return null}var Sc=[],Cc=0,zf=null,Bf=0,Zi=[],Gi=0,gu=null,Qo=1,Yo="";function yu(s,l){Sc[Cc++]=Bf,Sc[Cc++]=zf,zf=s,Bf=l}function s0(s,l,d){Zi[Gi++]=Qo,Zi[Gi++]=Yo,Zi[Gi++]=gu,gu=s;var y=Qo;s=Yo;var x=32-ot(y)-1;y&=~(1<<x),d+=1;var S=32-ot(l)+x;if(30<S){var P=x-x%5;S=(y&(1<<P)-1).toString(32),y>>=P,x-=P,Qo=1<<32-ot(l)+x|d<<x|y,Yo=S+s}else Qo=1<<S|d<<x|y,Yo=s}function Fg(s){s.return!==null&&(yu(s,1),s0(s,1,0))}function Ug(s){for(;s===zf;)zf=Sc[--Cc],Sc[Cc]=null,Bf=Sc[--Cc],Sc[Cc]=null;for(;s===gu;)gu=Zi[--Gi],Zi[Gi]=null,Yo=Zi[--Gi],Zi[Gi]=null,Qo=Zi[--Gi],Zi[Gi]=null}var Ci=null,Ii=null,sn=!1,Is=null;function o0(s,l){var d=Xi(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function a0(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Ci=s,Ii=oo(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Ci=s,Ii=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=gu!==null?{id:Qo,overflow:Yo}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Xi(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,Ci=s,Ii=null,!0):!1;default:return!1}}function zg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Bg(s){if(sn){var l=Ii;if(l){var d=l;if(!a0(s,l)){if(zg(s))throw Error(n(418));l=oo(d.nextSibling);var y=Ci;l&&a0(s,l)?o0(y,d):(s.flags=s.flags&-4097|2,sn=!1,Ci=s)}}else{if(zg(s))throw Error(n(418));s.flags=s.flags&-4097|2,sn=!1,Ci=s}}}function l0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ci=s}function $f(s){if(s!==Ci)return!1;if(!sn)return l0(s),sn=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!yt(s.type,s.memoizedProps)),l&&(l=Ii)){if(zg(s))throw u0(),Error(n(418));for(;l;)o0(s,l),l=oo(l.nextSibling)}if(l0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){Ii=oo(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}Ii=null}}else Ii=Ci?oo(s.stateNode.nextSibling):null;return!0}function u0(){for(var s=Ii;s;)s=oo(s.nextSibling)}function Ic(){Ii=Ci=null,sn=!1}function $g(s){Is===null?Is=[s]:Is.push(s)}var $N=se.ReactCurrentBatchConfig;function Kd(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var y=d.stateNode}if(!y)throw Error(n(147,s));var x=y,S=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function(P){var q=x.refs;P===null?delete q[S]:q[S]=P},l._stringRef=S,l)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Hf(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function c0(s){var l=s._init;return l(s._payload)}function d0(s){function l(re,X){if(s){var ae=re.deletions;ae===null?(re.deletions=[X],re.flags|=16):ae.push(X)}}function d(re,X){if(!s)return null;for(;X!==null;)l(re,X),X=X.sibling;return null}function y(re,X){for(re=new Map;X!==null;)X.key!==null?re.set(X.key,X):re.set(X.index,X),X=X.sibling;return re}function x(re,X){return re=vl(re,X),re.index=0,re.sibling=null,re}function S(re,X,ae){return re.index=ae,s?(ae=re.alternate,ae!==null?(ae=ae.index,ae<X?(re.flags|=2,X):ae):(re.flags|=2,X)):(re.flags|=1048576,X)}function P(re){return s&&re.alternate===null&&(re.flags|=2),re}function q(re,X,ae,Ie){return X===null||X.tag!==6?(X=jy(ae,re.mode,Ie),X.return=re,X):(X=x(X,ae),X.return=re,X)}function Q(re,X,ae,Ie){var Ke=ae.type;return Ke===F?Te(re,X,ae.props.children,Ie,ae.key):X!==null&&(X.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ve&&c0(Ke)===X.type)?(Ie=x(X,ae.props),Ie.ref=Kd(re,X,ae),Ie.return=re,Ie):(Ie=mm(ae.type,ae.key,ae.props,null,re.mode,Ie),Ie.ref=Kd(re,X,ae),Ie.return=re,Ie)}function ce(re,X,ae,Ie){return X===null||X.tag!==4||X.stateNode.containerInfo!==ae.containerInfo||X.stateNode.implementation!==ae.implementation?(X=Dy(ae,re.mode,Ie),X.return=re,X):(X=x(X,ae.children||[]),X.return=re,X)}function Te(re,X,ae,Ie,Ke){return X===null||X.tag!==7?(X=Su(ae,re.mode,Ie,Ke),X.return=re,X):(X=x(X,ae),X.return=re,X)}function Se(re,X,ae){if(typeof X=="string"&&X!==""||typeof X=="number")return X=jy(""+X,re.mode,ae),X.return=re,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case oe:return ae=mm(X.type,X.key,X.props,null,re.mode,ae),ae.ref=Kd(re,null,X),ae.return=re,ae;case ee:return X=Dy(X,re.mode,ae),X.return=re,X;case ve:var Ie=X._init;return Se(re,Ie(X._payload),ae)}if(K(X)||xe(X))return X=Su(X,re.mode,ae,null),X.return=re,X;Hf(re,X)}return null}function be(re,X,ae,Ie){var Ke=X!==null?X.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Ke!==null?null:q(re,X,""+ae,Ie);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case oe:return ae.key===Ke?Q(re,X,ae,Ie):null;case ee:return ae.key===Ke?ce(re,X,ae,Ie):null;case ve:return Ke=ae._init,be(re,X,Ke(ae._payload),Ie)}if(K(ae)||xe(ae))return Ke!==null?null:Te(re,X,ae,Ie,null);Hf(re,ae)}return null}function Ve(re,X,ae,Ie,Ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return re=re.get(ae)||null,q(X,re,""+Ie,Ke);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case oe:return re=re.get(Ie.key===null?ae:Ie.key)||null,Q(X,re,Ie,Ke);case ee:return re=re.get(Ie.key===null?ae:Ie.key)||null,ce(X,re,Ie,Ke);case ve:var nt=Ie._init;return Ve(re,X,ae,nt(Ie._payload),Ke)}if(K(Ie)||xe(Ie))return re=re.get(ae)||null,Te(X,re,Ie,Ke,null);Hf(X,Ie)}return null}function He(re,X,ae,Ie){for(var Ke=null,nt=null,rt=X,ut=X=0,tr=null;rt!==null&&ut<ae.length;ut++){rt.index>ut?(tr=rt,rt=null):tr=rt.sibling;var Dt=be(re,rt,ae[ut],Ie);if(Dt===null){rt===null&&(rt=tr);break}s&&rt&&Dt.alternate===null&&l(re,rt),X=S(Dt,X,ut),nt===null?Ke=Dt:nt.sibling=Dt,nt=Dt,rt=tr}if(ut===ae.length)return d(re,rt),sn&&yu(re,ut),Ke;if(rt===null){for(;ut<ae.length;ut++)rt=Se(re,ae[ut],Ie),rt!==null&&(X=S(rt,X,ut),nt===null?Ke=rt:nt.sibling=rt,nt=rt);return sn&&yu(re,ut),Ke}for(rt=y(re,rt);ut<ae.length;ut++)tr=Ve(rt,re,ut,ae[ut],Ie),tr!==null&&(s&&tr.alternate!==null&&rt.delete(tr.key===null?ut:tr.key),X=S(tr,X,ut),nt===null?Ke=tr:nt.sibling=tr,nt=tr);return s&&rt.forEach(function(wl){return l(re,wl)}),sn&&yu(re,ut),Ke}function Ze(re,X,ae,Ie){var Ke=xe(ae);if(typeof Ke!="function")throw Error(n(150));if(ae=Ke.call(ae),ae==null)throw Error(n(151));for(var nt=Ke=null,rt=X,ut=X=0,tr=null,Dt=ae.next();rt!==null&&!Dt.done;ut++,Dt=ae.next()){rt.index>ut?(tr=rt,rt=null):tr=rt.sibling;var wl=be(re,rt,Dt.value,Ie);if(wl===null){rt===null&&(rt=tr);break}s&&rt&&wl.alternate===null&&l(re,rt),X=S(wl,X,ut),nt===null?Ke=wl:nt.sibling=wl,nt=wl,rt=tr}if(Dt.done)return d(re,rt),sn&&yu(re,ut),Ke;if(rt===null){for(;!Dt.done;ut++,Dt=ae.next())Dt=Se(re,Dt.value,Ie),Dt!==null&&(X=S(Dt,X,ut),nt===null?Ke=Dt:nt.sibling=Dt,nt=Dt);return sn&&yu(re,ut),Ke}for(rt=y(re,rt);!Dt.done;ut++,Dt=ae.next())Dt=Ve(rt,re,ut,Dt.value,Ie),Dt!==null&&(s&&Dt.alternate!==null&&rt.delete(Dt.key===null?ut:Dt.key),X=S(Dt,X,ut),nt===null?Ke=Dt:nt.sibling=Dt,nt=Dt);return s&&rt.forEach(function(bR){return l(re,bR)}),sn&&yu(re,ut),Ke}function bn(re,X,ae,Ie){if(typeof ae=="object"&&ae!==null&&ae.type===F&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case oe:e:{for(var Ke=ae.key,nt=X;nt!==null;){if(nt.key===Ke){if(Ke=ae.type,Ke===F){if(nt.tag===7){d(re,nt.sibling),X=x(nt,ae.props.children),X.return=re,re=X;break e}}else if(nt.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ve&&c0(Ke)===nt.type){d(re,nt.sibling),X=x(nt,ae.props),X.ref=Kd(re,nt,ae),X.return=re,re=X;break e}d(re,nt);break}else l(re,nt);nt=nt.sibling}ae.type===F?(X=Su(ae.props.children,re.mode,Ie,ae.key),X.return=re,re=X):(Ie=mm(ae.type,ae.key,ae.props,null,re.mode,Ie),Ie.ref=Kd(re,X,ae),Ie.return=re,re=Ie)}return P(re);case ee:e:{for(nt=ae.key;X!==null;){if(X.key===nt)if(X.tag===4&&X.stateNode.containerInfo===ae.containerInfo&&X.stateNode.implementation===ae.implementation){d(re,X.sibling),X=x(X,ae.children||[]),X.return=re,re=X;break e}else{d(re,X);break}else l(re,X);X=X.sibling}X=Dy(ae,re.mode,Ie),X.return=re,re=X}return P(re);case ve:return nt=ae._init,bn(re,X,nt(ae._payload),Ie)}if(K(ae))return He(re,X,ae,Ie);if(xe(ae))return Ze(re,X,ae,Ie);Hf(re,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,X!==null&&X.tag===6?(d(re,X.sibling),X=x(X,ae),X.return=re,re=X):(d(re,X),X=jy(ae,re.mode,Ie),X.return=re,re=X),P(re)):d(re,X)}return bn}var Pc=d0(!0),h0=d0(!1),Wf=ul(null),qf=null,Ac=null,Hg=null;function Wg(){Hg=Ac=qf=null}function qg(s){var l=Wf.current;tn(Wf),s._currentValue=l}function Zg(s,l,d){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===d)break;s=s.return}}function kc(s,l){qf=s,Hg=Ac=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(oi=!0),s.firstContext=null)}function Ki(s){var l=s._currentValue;if(Hg!==s)if(s={context:s,memoizedValue:l,next:null},Ac===null){if(qf===null)throw Error(n(308));Ac=s,qf.dependencies={lanes:0,firstContext:s}}else Ac=Ac.next=s;return l}var _u=null;function Gg(s){_u===null?_u=[s]:_u.push(s)}function f0(s,l,d,y){var x=l.interleaved;return x===null?(d.next=d,Gg(l)):(d.next=x.next,x.next=d),l.interleaved=d,Xo(s,y)}function Xo(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var hl=!1;function Kg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Jo(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function fl(s,l,d){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Rt&2)!==0){var x=y.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),y.pending=l,Xo(s,d)}return x=y.interleaved,x===null?(l.next=l,Gg(y)):(l.next=x.next,x.next=l),y.interleaved=l,Xo(s,d)}function Zf(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var y=l.lanes;y&=s.pendingLanes,d|=y,l.lanes=d,yr(s,d)}}function p0(s,l){var d=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var x=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?x=S=P:S=S.next=P,d=d.next}while(d!==null);S===null?x=S=l:S=S.next=l}else x=S=l;d={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:y.shared,effects:y.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Gf(s,l,d,y){var x=s.updateQueue;hl=!1;var S=x.firstBaseUpdate,P=x.lastBaseUpdate,q=x.shared.pending;if(q!==null){x.shared.pending=null;var Q=q,ce=Q.next;Q.next=null,P===null?S=ce:P.next=ce,P=Q;var Te=s.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==P&&(q===null?Te.firstBaseUpdate=ce:q.next=ce,Te.lastBaseUpdate=Q))}if(S!==null){var Se=x.baseState;P=0,Te=ce=Q=null,q=S;do{var be=q.lane,Ve=q.eventTime;if((y&be)===be){Te!==null&&(Te=Te.next={eventTime:Ve,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var He=s,Ze=q;switch(be=l,Ve=d,Ze.tag){case 1:if(He=Ze.payload,typeof He=="function"){Se=He.call(Ve,Se,be);break e}Se=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ze.payload,be=typeof He=="function"?He.call(Ve,Se,be):He,be==null)break e;Se=he({},Se,be);break e;case 2:hl=!0}}q.callback!==null&&q.lane!==0&&(s.flags|=64,be=x.effects,be===null?x.effects=[q]:be.push(q))}else Ve={eventTime:Ve,lane:be,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(ce=Te=Ve,Q=Se):Te=Te.next=Ve,P|=be;if(q=q.next,q===null){if(q=x.shared.pending,q===null)break;be=q,q=be.next,be.next=null,x.lastBaseUpdate=be,x.shared.pending=null}}while(!0);if(Te===null&&(Q=Se),x.baseState=Q,x.firstBaseUpdate=ce,x.lastBaseUpdate=Te,l=x.shared.interleaved,l!==null){x=l;do P|=x.lane,x=x.next;while(x!==l)}else S===null&&(x.shared.lanes=0);xu|=P,s.lanes=P,s.memoizedState=Se}}function g0(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var y=s[l],x=y.callback;if(x!==null){if(y.callback=null,y=d,typeof x!="function")throw Error(n(191,x));x.call(y)}}}var Qd={},ao=ul(Qd),Yd=ul(Qd),Xd=ul(Qd);function vu(s){if(s===Qd)throw Error(n(174));return s}function Qg(s,l){switch(Jt(Xd,l),Jt(Yd,s),Jt(ao,Qd),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:tt(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=tt(l,s)}tn(ao),Jt(ao,l)}function Nc(){tn(ao),tn(Yd),tn(Xd)}function y0(s){vu(Xd.current);var l=vu(ao.current),d=tt(l,s.type);l!==d&&(Jt(Yd,s),Jt(ao,d))}function Yg(s){Yd.current===s&&(tn(ao),tn(Yd))}var dn=ul(0);function Kf(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Xg=[];function Jg(){for(var s=0;s<Xg.length;s++)Xg[s]._workInProgressVersionPrimary=null;Xg.length=0}var Qf=se.ReactCurrentDispatcher,ey=se.ReactCurrentBatchConfig,wu=0,hn=null,qn=null,Jn=null,Yf=!1,Jd=!1,eh=0,HN=0;function br(){throw Error(n(321))}function ty(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!Ei(s[d],l[d]))return!1;return!0}function ny(s,l,d,y,x,S){if(wu=S,hn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Qf.current=s===null||s.memoizedState===null?GN:KN,s=d(y,x),Jd){S=0;do{if(Jd=!1,eh=0,25<=S)throw Error(n(301));S+=1,Jn=qn=null,l.updateQueue=null,Qf.current=QN,s=d(y,x)}while(Jd)}if(Qf.current=em,l=qn!==null&&qn.next!==null,wu=0,Jn=qn=hn=null,Yf=!1,l)throw Error(n(300));return s}function ry(){var s=eh!==0;return eh=0,s}function lo(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?hn.memoizedState=Jn=s:Jn=Jn.next=s,Jn}function Qi(){if(qn===null){var s=hn.alternate;s=s!==null?s.memoizedState:null}else s=qn.next;var l=Jn===null?hn.memoizedState:Jn.next;if(l!==null)Jn=l,qn=s;else{if(s===null)throw Error(n(310));qn=s,s={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},Jn===null?hn.memoizedState=Jn=s:Jn=Jn.next=s}return Jn}function th(s,l){return typeof l=="function"?l(s):l}function iy(s){var l=Qi(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var y=qn,x=y.baseQueue,S=d.pending;if(S!==null){if(x!==null){var P=x.next;x.next=S.next,S.next=P}y.baseQueue=x=S,d.pending=null}if(x!==null){S=x.next,y=y.baseState;var q=P=null,Q=null,ce=S;do{var Te=ce.lane;if((wu&Te)===Te)Q!==null&&(Q=Q.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),y=ce.hasEagerState?ce.eagerState:s(y,ce.action);else{var Se={lane:Te,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};Q===null?(q=Q=Se,P=y):Q=Q.next=Se,hn.lanes|=Te,xu|=Te}ce=ce.next}while(ce!==null&&ce!==S);Q===null?P=y:Q.next=q,Ei(y,l.memoizedState)||(oi=!0),l.memoizedState=y,l.baseState=P,l.baseQueue=Q,d.lastRenderedState=y}if(s=d.interleaved,s!==null){x=s;do S=x.lane,hn.lanes|=S,xu|=S,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function sy(s){var l=Qi(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var y=d.dispatch,x=d.pending,S=l.memoizedState;if(x!==null){d.pending=null;var P=x=x.next;do S=s(S,P.action),P=P.next;while(P!==x);Ei(S,l.memoizedState)||(oi=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),d.lastRenderedState=S}return[S,y]}function _0(){}function v0(s,l){var d=hn,y=Qi(),x=l(),S=!Ei(y.memoizedState,x);if(S&&(y.memoizedState=x,oi=!0),y=y.queue,oy(b0.bind(null,d,y,s),[s]),y.getSnapshot!==l||S||Jn!==null&&Jn.memoizedState.tag&1){if(d.flags|=2048,nh(9,x0.bind(null,d,y,x,l),void 0,null),er===null)throw Error(n(349));(wu&30)!==0||w0(d,l,x)}return x}function w0(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=hn.updateQueue,l===null?(l={lastEffect:null,stores:null},hn.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function x0(s,l,d,y){l.value=d,l.getSnapshot=y,T0(l)&&E0(s)}function b0(s,l,d){return d(function(){T0(l)&&E0(s)})}function T0(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!Ei(s,d)}catch{return!0}}function E0(s){var l=Xo(s,1);l!==null&&Ns(l,s,1,-1)}function S0(s){var l=lo();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:s},l.queue=s,s=s.dispatch=ZN.bind(null,hn,s),[l.memoizedState,s]}function nh(s,l,d,y){return s={tag:s,create:l,destroy:d,deps:y,next:null},l=hn.updateQueue,l===null?(l={lastEffect:null,stores:null},hn.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(y=d.next,d.next=s,s.next=y,l.lastEffect=s)),s}function C0(){return Qi().memoizedState}function Xf(s,l,d,y){var x=lo();hn.flags|=s,x.memoizedState=nh(1|l,d,void 0,y===void 0?null:y)}function Jf(s,l,d,y){var x=Qi();y=y===void 0?null:y;var S=void 0;if(qn!==null){var P=qn.memoizedState;if(S=P.destroy,y!==null&&ty(y,P.deps)){x.memoizedState=nh(l,d,S,y);return}}hn.flags|=s,x.memoizedState=nh(1|l,d,S,y)}function I0(s,l){return Xf(8390656,8,s,l)}function oy(s,l){return Jf(2048,8,s,l)}function P0(s,l){return Jf(4,2,s,l)}function A0(s,l){return Jf(4,4,s,l)}function k0(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function N0(s,l,d){return d=d!=null?d.concat([s]):null,Jf(4,4,k0.bind(null,l,s),d)}function ay(){}function R0(s,l){var d=Qi();l=l===void 0?null:l;var y=d.memoizedState;return y!==null&&l!==null&&ty(l,y[1])?y[0]:(d.memoizedState=[s,l],s)}function L0(s,l){var d=Qi();l=l===void 0?null:l;var y=d.memoizedState;return y!==null&&l!==null&&ty(l,y[1])?y[0]:(s=s(),d.memoizedState=[s,l],s)}function j0(s,l,d){return(wu&21)===0?(s.baseState&&(s.baseState=!1,oi=!0),s.memoizedState=d):(Ei(d,l)||(d=jo(),hn.lanes|=d,xu|=d,s.baseState=!0),l)}function WN(s,l){var d=_t;_t=d!==0&&4>d?d:4,s(!0);var y=ey.transition;ey.transition={};try{s(!1),l()}finally{_t=d,ey.transition=y}}function D0(){return Qi().memoizedState}function qN(s,l,d){var y=yl(s);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},M0(s))O0(l,d);else if(d=f0(s,l,d,y),d!==null){var x=Ur();Ns(d,s,y,x),V0(d,l,y)}}function ZN(s,l,d){var y=yl(s),x={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(M0(s))O0(l,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var P=l.lastRenderedState,q=S(P,d);if(x.hasEagerState=!0,x.eagerState=q,Ei(q,P)){var Q=l.interleaved;Q===null?(x.next=x,Gg(l)):(x.next=Q.next,Q.next=x),l.interleaved=x;return}}catch{}finally{}d=f0(s,l,x,y),d!==null&&(x=Ur(),Ns(d,s,y,x),V0(d,l,y))}}function M0(s){var l=s.alternate;return s===hn||l!==null&&l===hn}function O0(s,l){Jd=Yf=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function V0(s,l,d){if((d&4194240)!==0){var y=l.lanes;y&=s.pendingLanes,d|=y,l.lanes=d,yr(s,d)}}var em={readContext:Ki,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},GN={readContext:Ki,useCallback:function(s,l){return lo().memoizedState=[s,l===void 0?null:l],s},useContext:Ki,useEffect:I0,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,Xf(4194308,4,k0.bind(null,l,s),d)},useLayoutEffect:function(s,l){return Xf(4194308,4,s,l)},useInsertionEffect:function(s,l){return Xf(4,2,s,l)},useMemo:function(s,l){var d=lo();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var y=lo();return l=d!==void 0?d(l):l,y.memoizedState=y.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},y.queue=s,s=s.dispatch=qN.bind(null,hn,s),[y.memoizedState,s]},useRef:function(s){var l=lo();return s={current:s},l.memoizedState=s},useState:S0,useDebugValue:ay,useDeferredValue:function(s){return lo().memoizedState=s},useTransition:function(){var s=S0(!1),l=s[0];return s=WN.bind(null,s[1]),lo().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var y=hn,x=lo();if(sn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),er===null)throw Error(n(349));(wu&30)!==0||w0(y,l,d)}x.memoizedState=d;var S={value:d,getSnapshot:l};return x.queue=S,I0(b0.bind(null,y,S,s),[s]),y.flags|=2048,nh(9,x0.bind(null,y,S,d,l),void 0,null),d},useId:function(){var s=lo(),l=er.identifierPrefix;if(sn){var d=Yo,y=Qo;d=(y&~(1<<32-ot(y)-1)).toString(32)+d,l=":"+l+"R"+d,d=eh++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=HN++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},KN={readContext:Ki,useCallback:R0,useContext:Ki,useEffect:oy,useImperativeHandle:N0,useInsertionEffect:P0,useLayoutEffect:A0,useMemo:L0,useReducer:iy,useRef:C0,useState:function(){return iy(th)},useDebugValue:ay,useDeferredValue:function(s){var l=Qi();return j0(l,qn.memoizedState,s)},useTransition:function(){var s=iy(th)[0],l=Qi().memoizedState;return[s,l]},useMutableSource:_0,useSyncExternalStore:v0,useId:D0,unstable_isNewReconciler:!1},QN={readContext:Ki,useCallback:R0,useContext:Ki,useEffect:oy,useImperativeHandle:N0,useInsertionEffect:P0,useLayoutEffect:A0,useMemo:L0,useReducer:sy,useRef:C0,useState:function(){return sy(th)},useDebugValue:ay,useDeferredValue:function(s){var l=Qi();return qn===null?l.memoizedState=s:j0(l,qn.memoizedState,s)},useTransition:function(){var s=sy(th)[0],l=Qi().memoizedState;return[s,l]},useMutableSource:_0,useSyncExternalStore:v0,useId:D0,unstable_isNewReconciler:!1};function Ps(s,l){if(s&&s.defaultProps){l=he({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function ly(s,l,d,y){l=s.memoizedState,d=d(y,l),d=d==null?l:he({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var tm={isMounted:function(s){return(s=s._reactInternals)?Zr(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var y=Ur(),x=yl(s),S=Jo(y,x);S.payload=l,d!=null&&(S.callback=d),l=fl(s,S,x),l!==null&&(Ns(l,s,x,y),Zf(l,s,x))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var y=Ur(),x=yl(s),S=Jo(y,x);S.tag=1,S.payload=l,d!=null&&(S.callback=d),l=fl(s,S,x),l!==null&&(Ns(l,s,x,y),Zf(l,s,x))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Ur(),y=yl(s),x=Jo(d,y);x.tag=2,l!=null&&(x.callback=l),l=fl(s,x,y),l!==null&&(Ns(l,s,y,d),Zf(l,s,y))}};function F0(s,l,d,y,x,S,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,S,P):l.prototype&&l.prototype.isPureReactComponent?!ro(d,y)||!ro(x,S):!0}function U0(s,l,d){var y=!1,x=cl,S=l.contextType;return typeof S=="object"&&S!==null?S=Ki(S):(x=si(l)?pu:xr.current,y=l.contextTypes,S=(y=y!=null)?Ec(s,x):cl),l=new l(d,S),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=tm,s.stateNode=l,l._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=S),l}function z0(s,l,d,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,y),l.state!==s&&tm.enqueueReplaceState(l,l.state,null)}function uy(s,l,d,y){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Kg(s);var S=l.contextType;typeof S=="object"&&S!==null?x.context=Ki(S):(S=si(l)?pu:xr.current,x.context=Ec(s,S)),x.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(ly(s,l,S,d),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&tm.enqueueReplaceState(x,x.state,null),Gf(s,d,x,y),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Rc(s,l){try{var d="",y=l;do d+=Oe(y),y=y.return;while(y);var x=d}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:l,stack:x,digest:null}}function cy(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function dy(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var YN=typeof WeakMap=="function"?WeakMap:Map;function B0(s,l,d){d=Jo(-1,d),d.tag=3,d.payload={element:null};var y=l.value;return d.callback=function(){lm||(lm=!0,Cy=y),dy(s,l)},d}function $0(s,l,d){d=Jo(-1,d),d.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var x=l.value;d.payload=function(){return y(x)},d.callback=function(){dy(s,l)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){dy(s,l),typeof y!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})}),d}function H0(s,l,d){var y=s.pingCache;if(y===null){y=s.pingCache=new YN;var x=new Set;y.set(l,x)}else x=y.get(l),x===void 0&&(x=new Set,y.set(l,x));x.has(d)||(x.add(d),s=dR.bind(null,s,l,d),l.then(s,s))}function W0(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function q0(s,l,d,y,x){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Jo(-1,1),l.tag=2,fl(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var XN=se.ReactCurrentOwner,oi=!1;function Fr(s,l,d,y){l.child=s===null?h0(l,null,d,y):Pc(l,s.child,d,y)}function Z0(s,l,d,y,x){d=d.render;var S=l.ref;return kc(l,x),y=ny(s,l,d,y,S,x),d=ry(),s!==null&&!oi?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,ea(s,l,x)):(sn&&d&&Fg(l),l.flags|=1,Fr(s,l,y,x),l.child)}function G0(s,l,d,y,x){if(s===null){var S=d.type;return typeof S=="function"&&!Ly(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=S,K0(s,l,S,y,x)):(s=mm(d.type,null,y,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(S=s.child,(s.lanes&x)===0){var P=S.memoizedProps;if(d=d.compare,d=d!==null?d:ro,d(P,y)&&s.ref===l.ref)return ea(s,l,x)}return l.flags|=1,s=vl(S,y),s.ref=l.ref,s.return=l,l.child=s}function K0(s,l,d,y,x){if(s!==null){var S=s.memoizedProps;if(ro(S,y)&&s.ref===l.ref)if(oi=!1,l.pendingProps=y=S,(s.lanes&x)!==0)(s.flags&131072)!==0&&(oi=!0);else return l.lanes=s.lanes,ea(s,l,x)}return hy(s,l,d,y,x)}function Q0(s,l,d){var y=l.pendingProps,x=y.children,S=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(jc,Pi),Pi|=d;else{if((d&1073741824)===0)return s=S!==null?S.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Jt(jc,Pi),Pi|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:d,Jt(jc,Pi),Pi|=y}else S!==null?(y=S.baseLanes|d,l.memoizedState=null):y=d,Jt(jc,Pi),Pi|=y;return Fr(s,l,x,d),l.child}function Y0(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function hy(s,l,d,y,x){var S=si(d)?pu:xr.current;return S=Ec(l,S),kc(l,x),d=ny(s,l,d,y,S,x),y=ry(),s!==null&&!oi?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,ea(s,l,x)):(sn&&y&&Fg(l),l.flags|=1,Fr(s,l,d,x),l.child)}function X0(s,l,d,y,x){if(si(d)){var S=!0;Ff(l)}else S=!1;if(kc(l,x),l.stateNode===null)rm(s,l),U0(l,d,y),uy(l,d,y,x),y=!0;else if(s===null){var P=l.stateNode,q=l.memoizedProps;P.props=q;var Q=P.context,ce=d.contextType;typeof ce=="object"&&ce!==null?ce=Ki(ce):(ce=si(d)?pu:xr.current,ce=Ec(l,ce));var Te=d.getDerivedStateFromProps,Se=typeof Te=="function"||typeof P.getSnapshotBeforeUpdate=="function";Se||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(q!==y||Q!==ce)&&z0(l,P,y,ce),hl=!1;var be=l.memoizedState;P.state=be,Gf(l,y,P,x),Q=l.memoizedState,q!==y||be!==Q||ii.current||hl?(typeof Te=="function"&&(ly(l,d,Te,y),Q=l.memoizedState),(q=hl||F0(l,d,q,y,be,Q,ce))?(Se||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=Q),P.props=y,P.state=Q,P.context=ce,y=q):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{P=l.stateNode,m0(s,l),q=l.memoizedProps,ce=l.type===l.elementType?q:Ps(l.type,q),P.props=ce,Se=l.pendingProps,be=P.context,Q=d.contextType,typeof Q=="object"&&Q!==null?Q=Ki(Q):(Q=si(d)?pu:xr.current,Q=Ec(l,Q));var Ve=d.getDerivedStateFromProps;(Te=typeof Ve=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(q!==Se||be!==Q)&&z0(l,P,y,Q),hl=!1,be=l.memoizedState,P.state=be,Gf(l,y,P,x);var He=l.memoizedState;q!==Se||be!==He||ii.current||hl?(typeof Ve=="function"&&(ly(l,d,Ve,y),He=l.memoizedState),(ce=hl||F0(l,d,ce,y,be,He,Q)||!1)?(Te||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(y,He,Q),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(y,He,Q)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||q===s.memoizedProps&&be===s.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&be===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=He),P.props=y,P.state=He,P.context=Q,y=ce):(typeof P.componentDidUpdate!="function"||q===s.memoizedProps&&be===s.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&be===s.memoizedState||(l.flags|=1024),y=!1)}return fy(s,l,d,y,S,x)}function fy(s,l,d,y,x,S){Y0(s,l);var P=(l.flags&128)!==0;if(!y&&!P)return x&&r0(l,d,!1),ea(s,l,S);y=l.stateNode,XN.current=l;var q=P&&typeof d.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,s!==null&&P?(l.child=Pc(l,s.child,null,S),l.child=Pc(l,null,q,S)):Fr(s,l,q,S),l.memoizedState=y.state,x&&r0(l,d,!0),l.child}function J0(s){var l=s.stateNode;l.pendingContext?t0(s,l.pendingContext,l.pendingContext!==l.context):l.context&&t0(s,l.context,!1),Qg(s,l.containerInfo)}function eb(s,l,d,y,x){return Ic(),$g(x),l.flags|=256,Fr(s,l,d,y),l.child}var my={dehydrated:null,treeContext:null,retryLane:0};function py(s){return{baseLanes:s,cachePool:null,transitions:null}}function tb(s,l,d){var y=l.pendingProps,x=dn.current,S=!1,P=(l.flags&128)!==0,q;if((q=P)||(q=s!==null&&s.memoizedState===null?!1:(x&2)!==0),q?(S=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),Jt(dn,x&1),s===null)return Bg(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(P=y.children,s=y.fallback,S?(y=l.mode,S=l.child,P={mode:"hidden",children:P},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=P):S=pm(P,y,0,null),s=Su(s,y,d,null),S.return=l,s.return=l,S.sibling=s,l.child=S,l.child.memoizedState=py(d),l.memoizedState=my,s):gy(l,P));if(x=s.memoizedState,x!==null&&(q=x.dehydrated,q!==null))return JN(s,l,P,y,q,x,d);if(S){S=y.fallback,P=l.mode,x=s.child,q=x.sibling;var Q={mode:"hidden",children:y.children};return(P&1)===0&&l.child!==x?(y=l.child,y.childLanes=0,y.pendingProps=Q,l.deletions=null):(y=vl(x,Q),y.subtreeFlags=x.subtreeFlags&14680064),q!==null?S=vl(q,S):(S=Su(S,P,d,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,P=s.child.memoizedState,P=P===null?py(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},S.memoizedState=P,S.childLanes=s.childLanes&~d,l.memoizedState=my,y}return S=s.child,s=S.sibling,y=vl(S,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=d),y.return=l,y.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=y,l.memoizedState=null,y}function gy(s,l){return l=pm({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function nm(s,l,d,y){return y!==null&&$g(y),Pc(l,s.child,null,d),s=gy(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function JN(s,l,d,y,x,S,P){if(d)return l.flags&256?(l.flags&=-257,y=cy(Error(n(422))),nm(s,l,P,y)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(S=y.fallback,x=l.mode,y=pm({mode:"visible",children:y.children},x,0,null),S=Su(S,x,P,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,(l.mode&1)!==0&&Pc(l,s.child,null,P),l.child.memoizedState=py(P),l.memoizedState=my,S);if((l.mode&1)===0)return nm(s,l,P,null);if(x.data==="$!"){if(y=x.nextSibling&&x.nextSibling.dataset,y)var q=y.dgst;return y=q,S=Error(n(419)),y=cy(S,y,void 0),nm(s,l,P,y)}if(q=(P&s.childLanes)!==0,oi||q){if(y=er,y!==null){switch(P&-P){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(y.suspendedLanes|P))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,Xo(s,x),Ns(y,s,x,-1))}return Ry(),y=cy(Error(n(421))),nm(s,l,P,y)}return x.data==="$?"?(l.flags|=128,l.child=s.child,l=hR.bind(null,s),x._reactRetry=l,null):(s=S.treeContext,Ii=oo(x.nextSibling),Ci=l,sn=!0,Is=null,s!==null&&(Zi[Gi++]=Qo,Zi[Gi++]=Yo,Zi[Gi++]=gu,Qo=s.id,Yo=s.overflow,gu=l),l=gy(l,y.children),l.flags|=4096,l)}function nb(s,l,d){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Zg(s.return,l,d)}function yy(s,l,d,y,x){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:x}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=d,S.tailMode=x)}function rb(s,l,d){var y=l.pendingProps,x=y.revealOrder,S=y.tail;if(Fr(s,l,y.children,d),y=dn.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&nb(s,d,l);else if(s.tag===19)nb(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Jt(dn,y),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(d=l.child,x=null;d!==null;)s=d.alternate,s!==null&&Kf(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=l.child,l.child=null):(x=d.sibling,d.sibling=null),yy(l,!1,x,d,S);break;case"backwards":for(d=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Kf(s)===null){l.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}yy(l,!0,d,null,S);break;case"together":yy(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function rm(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ea(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),xu|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=vl(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=vl(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function eR(s,l,d){switch(l.tag){case 3:J0(l),Ic();break;case 5:y0(l);break;case 1:si(l.type)&&Ff(l);break;case 4:Qg(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,x=l.memoizedProps.value;Jt(Wf,y._currentValue),y._currentValue=x;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Jt(dn,dn.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?tb(s,l,d):(Jt(dn,dn.current&1),s=ea(s,l,d),s!==null?s.sibling:null);Jt(dn,dn.current&1);break;case 19:if(y=(d&l.childLanes)!==0,(s.flags&128)!==0){if(y)return rb(s,l,d);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Jt(dn,dn.current),y)break;return null;case 22:case 23:return l.lanes=0,Q0(s,l,d)}return ea(s,l,d)}var ib,_y,sb,ob;ib=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},_y=function(){},sb=function(s,l,d,y){var x=s.memoizedProps;if(x!==y){s=l.stateNode,vu(ao.current);var S=null;switch(d){case"input":x=Di(s,x),y=Di(s,y),S=[];break;case"select":x=he({},x,{value:void 0}),y=he({},y,{value:void 0}),S=[];break;case"textarea":x=pe(s,x),y=pe(s,y),S=[];break;default:typeof x.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=we)}Gs(d,y);var P;d=null;for(ce in x)if(!y.hasOwnProperty(ce)&&x.hasOwnProperty(ce)&&x[ce]!=null)if(ce==="style"){var q=x[ce];for(P in q)q.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(i.hasOwnProperty(ce)?S||(S=[]):(S=S||[]).push(ce,null));for(ce in y){var Q=y[ce];if(q=x?.[ce],y.hasOwnProperty(ce)&&Q!==q&&(Q!=null||q!=null))if(ce==="style")if(q){for(P in q)!q.hasOwnProperty(P)||Q&&Q.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in Q)Q.hasOwnProperty(P)&&q[P]!==Q[P]&&(d||(d={}),d[P]=Q[P])}else d||(S||(S=[]),S.push(ce,d)),d=Q;else ce==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,q=q?q.__html:void 0,Q!=null&&q!==Q&&(S=S||[]).push(ce,Q)):ce==="children"?typeof Q!="string"&&typeof Q!="number"||(S=S||[]).push(ce,""+Q):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(ce)?(Q!=null&&ce==="onScroll"&&Zt("scroll",s),S||q===Q||(S=[])):(S=S||[]).push(ce,Q))}d&&(S=S||[]).push("style",d);var ce=S;(l.updateQueue=ce)&&(l.flags|=4)}},ob=function(s,l,d,y){d!==y&&(l.flags|=4)};function rh(s,l){if(!sn)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Tr(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,y=0;if(l)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,y|=x.subtreeFlags&14680064,y|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=y,s.childLanes=d,l}function tR(s,l,d){var y=l.pendingProps;switch(Ug(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(l),null;case 1:return si(l.type)&&Vf(),Tr(l),null;case 3:return y=l.stateNode,Nc(),tn(ii),tn(xr),Jg(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&($f(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Is!==null&&(Ay(Is),Is=null))),_y(s,l),Tr(l),null;case 5:Yg(l);var x=vu(Xd.current);if(d=l.type,s!==null&&l.stateNode!=null)sb(s,l,d,y,x),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(n(166));return Tr(l),null}if(s=vu(ao.current),$f(l)){y=l.stateNode,d=l.type;var S=l.memoizedProps;switch(y[qi]=l,y[al]=S,s=(l.mode&1)!==0,d){case"dialog":Zt("cancel",y),Zt("close",y);break;case"iframe":case"object":case"embed":Zt("load",y);break;case"video":case"audio":for(x=0;x<il.length;x++)Zt(il[x],y);break;case"source":Zt("error",y);break;case"img":case"image":case"link":Zt("error",y),Zt("load",y);break;case"details":Zt("toggle",y);break;case"input":Mi(y,S),Zt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},Zt("invalid",y);break;case"textarea":Ne(y,S),Zt("invalid",y)}Gs(d,S),x=null;for(var P in S)if(S.hasOwnProperty(P)){var q=S[P];P==="children"?typeof q=="string"?y.textContent!==q&&(S.suppressHydrationWarning!==!0&&ue(y.textContent,q,s),x=["children",q]):typeof q=="number"&&y.textContent!==""+q&&(S.suppressHydrationWarning!==!0&&ue(y.textContent,q,s),x=["children",""+q]):i.hasOwnProperty(P)&&q!=null&&P==="onScroll"&&Zt("scroll",y)}switch(d){case"input":Rr(y),qs(y,S,!0);break;case"textarea":Rr(y),Ce(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=we)}y=x,l.updateQueue=y,y!==null&&(l.flags|=4)}else{P=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Re(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=P.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=P.createElement(d,{is:y.is}):(s=P.createElement(d),d==="select"&&(P=s,y.multiple?P.multiple=!0:y.size&&(P.size=y.size))):s=P.createElementNS(s,d),s[qi]=l,s[al]=y,ib(s,l,!1,!1),l.stateNode=s;e:{switch(P=yi(d,y),d){case"dialog":Zt("cancel",s),Zt("close",s),x=y;break;case"iframe":case"object":case"embed":Zt("load",s),x=y;break;case"video":case"audio":for(x=0;x<il.length;x++)Zt(il[x],s);x=y;break;case"source":Zt("error",s),x=y;break;case"img":case"image":case"link":Zt("error",s),Zt("load",s),x=y;break;case"details":Zt("toggle",s),x=y;break;case"input":Mi(s,y),x=Di(s,y),Zt("invalid",s);break;case"option":x=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},x=he({},y,{value:void 0}),Zt("invalid",s);break;case"textarea":Ne(s,y),x=pe(s,y),Zt("invalid",s);break;default:x=y}Gs(d,x),q=x;for(S in q)if(q.hasOwnProperty(S)){var Q=q[S];S==="style"?gi(s,Q):S==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&Pn(s,Q)):S==="children"?typeof Q=="string"?(d!=="textarea"||Q!=="")&&mr(s,Q):typeof Q=="number"&&mr(s,""+Q):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?Q!=null&&S==="onScroll"&&Zt("scroll",s):Q!=null&&$(s,S,Q,P))}switch(d){case"input":Rr(s),qs(s,y,!1);break;case"textarea":Rr(s),Ce(s);break;case"option":y.value!=null&&s.setAttribute("value",""+gt(y.value));break;case"select":s.multiple=!!y.multiple,S=y.value,S!=null?ie(s,!!y.multiple,S,!1):y.defaultValue!=null&&ie(s,!!y.multiple,y.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=we)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Tr(l),null;case 6:if(s&&l.stateNode!=null)ob(s,l,s.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(n(166));if(d=vu(Xd.current),vu(ao.current),$f(l)){if(y=l.stateNode,d=l.memoizedProps,y[qi]=l,(S=y.nodeValue!==d)&&(s=Ci,s!==null))switch(s.tag){case 3:ue(y.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ue(y.nodeValue,d,(s.mode&1)!==0)}S&&(l.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[qi]=l,l.stateNode=y}return Tr(l),null;case 13:if(tn(dn),y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(sn&&Ii!==null&&(l.mode&1)!==0&&(l.flags&128)===0)u0(),Ic(),l.flags|=98560,S=!1;else if(S=$f(l),y!==null&&y.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[qi]=l}else Ic(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Tr(l),S=!1}else Is!==null&&(Ay(Is),Is=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(dn.current&1)!==0?Zn===0&&(Zn=3):Ry())),l.updateQueue!==null&&(l.flags|=4),Tr(l),null);case 4:return Nc(),_y(s,l),s===null&&sl(l.stateNode.containerInfo),Tr(l),null;case 10:return qg(l.type._context),Tr(l),null;case 17:return si(l.type)&&Vf(),Tr(l),null;case 19:if(tn(dn),S=l.memoizedState,S===null)return Tr(l),null;if(y=(l.flags&128)!==0,P=S.rendering,P===null)if(y)rh(S,!1);else{if(Zn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(P=Kf(s),P!==null){for(l.flags|=128,rh(S,!1),y=P.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=d,d=l.child;d!==null;)S=d,s=y,S.flags&=14680066,P=S.alternate,P===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=P.childLanes,S.lanes=P.lanes,S.child=P.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=P.memoizedProps,S.memoizedState=P.memoizedState,S.updateQueue=P.updateQueue,S.type=P.type,s=P.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Jt(dn,dn.current&1|2),l.child}s=s.sibling}S.tail!==null&&qt()>Dc&&(l.flags|=128,y=!0,rh(S,!1),l.lanes=4194304)}else{if(!y)if(s=Kf(P),s!==null){if(l.flags|=128,y=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),rh(S,!0),S.tail===null&&S.tailMode==="hidden"&&!P.alternate&&!sn)return Tr(l),null}else 2*qt()-S.renderingStartTime>Dc&&d!==1073741824&&(l.flags|=128,y=!0,rh(S,!1),l.lanes=4194304);S.isBackwards?(P.sibling=l.child,l.child=P):(d=S.last,d!==null?d.sibling=P:l.child=P,S.last=P)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=qt(),l.sibling=null,d=dn.current,Jt(dn,y?d&1|2:d&1),l):(Tr(l),null);case 22:case 23:return Ny(),y=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(Pi&1073741824)!==0&&(Tr(l),l.subtreeFlags&6&&(l.flags|=8192)):Tr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function nR(s,l){switch(Ug(l),l.tag){case 1:return si(l.type)&&Vf(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Nc(),tn(ii),tn(xr),Jg(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Yg(l),null;case 13:if(tn(dn),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Ic()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return tn(dn),null;case 4:return Nc(),null;case 10:return qg(l.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var im=!1,Er=!1,rR=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Lc(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){yn(s,l,y)}else d.current=null}function vy(s,l,d){try{d()}catch(y){yn(s,l,y)}}var ab=!1;function iR(s,l){if(je=xs,s=Ud(),zd(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var x=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var P=0,q=-1,Q=-1,ce=0,Te=0,Se=s,be=null;t:for(;;){for(var Ve;Se!==d||x!==0&&Se.nodeType!==3||(q=P+x),Se!==S||y!==0&&Se.nodeType!==3||(Q=P+y),Se.nodeType===3&&(P+=Se.nodeValue.length),(Ve=Se.firstChild)!==null;)be=Se,Se=Ve;for(;;){if(Se===s)break t;if(be===d&&++ce===x&&(q=P),be===S&&++Te===y&&(Q=P),(Ve=Se.nextSibling)!==null)break;Se=be,be=Se.parentNode}Se=Ve}d=q===-1||Q===-1?null:{start:q,end:Q}}else d=null}d=d||{start:0,end:0}}else d=null;for(et={focusedElem:s,selectionRange:d},xs=!1,Be=l;Be!==null;)if(l=Be,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Be=s;else for(;Be!==null;){l=Be;try{var He=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ze=He.memoizedProps,bn=He.memoizedState,re=l.stateNode,X=re.getSnapshotBeforeUpdate(l.elementType===l.type?Ze:Ps(l.type,Ze),bn);re.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var ae=l.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ie){yn(l,l.return,Ie)}if(s=l.sibling,s!==null){s.return=l.return,Be=s;break}Be=l.return}return He=ab,ab=!1,He}function ih(s,l,d){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var x=y=y.next;do{if((x.tag&s)===s){var S=x.destroy;x.destroy=void 0,S!==void 0&&vy(l,d,S)}x=x.next}while(x!==y)}}function sm(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var y=d.create;d.destroy=y()}d=d.next}while(d!==l)}}function wy(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function lb(s){var l=s.alternate;l!==null&&(s.alternate=null,lb(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[qi],delete l[al],delete l[ll],delete l[Dg],delete l[Mg])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function ub(s){return s.tag===5||s.tag===3||s.tag===4}function cb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ub(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xy(s,l,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=we));else if(y!==4&&(s=s.child,s!==null))for(xy(s,l,d),s=s.sibling;s!==null;)xy(s,l,d),s=s.sibling}function by(s,l,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(by(s,l,d),s=s.sibling;s!==null;)by(s,l,d),s=s.sibling}var ar=null,As=!1;function ml(s,l,d){for(d=d.child;d!==null;)db(s,l,d),d=d.sibling}function db(s,l,d){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Ys,d)}catch{}switch(d.tag){case 5:Er||Lc(d,l);case 6:var y=ar,x=As;ar=null,ml(s,l,d),ar=y,As=x,ar!==null&&(As?(s=ar,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):ar.removeChild(d.stateNode));break;case 18:ar!==null&&(As?(s=ar,d=d.stateNode,s.nodeType===8?Gd(s.parentNode,d):s.nodeType===1&&Gd(s,d),Hn(s)):Gd(ar,d.stateNode));break;case 4:y=ar,x=As,ar=d.stateNode.containerInfo,As=!0,ml(s,l,d),ar=y,As=x;break;case 0:case 11:case 14:case 15:if(!Er&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){x=y=y.next;do{var S=x,P=S.destroy;S=S.tag,P!==void 0&&((S&2)!==0||(S&4)!==0)&&vy(d,l,P),x=x.next}while(x!==y)}ml(s,l,d);break;case 1:if(!Er&&(Lc(d,l),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(q){yn(d,l,q)}ml(s,l,d);break;case 21:ml(s,l,d);break;case 22:d.mode&1?(Er=(y=Er)||d.memoizedState!==null,ml(s,l,d),Er=y):ml(s,l,d);break;default:ml(s,l,d)}}function hb(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new rR),l.forEach(function(y){var x=fR.bind(null,s,y);d.has(y)||(d.add(y),y.then(x,x))})}}function ks(s,l){var d=l.deletions;if(d!==null)for(var y=0;y<d.length;y++){var x=d[y];try{var S=s,P=l,q=P;e:for(;q!==null;){switch(q.tag){case 5:ar=q.stateNode,As=!1;break e;case 3:ar=q.stateNode.containerInfo,As=!0;break e;case 4:ar=q.stateNode.containerInfo,As=!0;break e}q=q.return}if(ar===null)throw Error(n(160));db(S,P,x),ar=null,As=!1;var Q=x.alternate;Q!==null&&(Q.return=null),x.return=null}catch(ce){yn(x,l,ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)fb(l,s),l=l.sibling}function fb(s,l){var d=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ks(l,s),uo(s),y&4){try{ih(3,s,s.return),sm(3,s)}catch(Ze){yn(s,s.return,Ze)}try{ih(5,s,s.return)}catch(Ze){yn(s,s.return,Ze)}}break;case 1:ks(l,s),uo(s),y&512&&d!==null&&Lc(d,d.return);break;case 5:if(ks(l,s),uo(s),y&512&&d!==null&&Lc(d,d.return),s.flags&32){var x=s.stateNode;try{mr(x,"")}catch(Ze){yn(s,s.return,Ze)}}if(y&4&&(x=s.stateNode,x!=null)){var S=s.memoizedProps,P=d!==null?d.memoizedProps:S,q=s.type,Q=s.updateQueue;if(s.updateQueue=null,Q!==null)try{q==="input"&&S.type==="radio"&&S.name!=null&&Ws(x,S),yi(q,P);var ce=yi(q,S);for(P=0;P<Q.length;P+=2){var Te=Q[P],Se=Q[P+1];Te==="style"?gi(x,Se):Te==="dangerouslySetInnerHTML"?Pn(x,Se):Te==="children"?mr(x,Se):$(x,Te,Se,ce)}switch(q){case"input":ps(x,S);break;case"textarea":Ae(x,S);break;case"select":var be=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var Ve=S.value;Ve!=null?ie(x,!!S.multiple,Ve,!1):be!==!!S.multiple&&(S.defaultValue!=null?ie(x,!!S.multiple,S.defaultValue,!0):ie(x,!!S.multiple,S.multiple?[]:"",!1))}x[al]=S}catch(Ze){yn(s,s.return,Ze)}}break;case 6:if(ks(l,s),uo(s),y&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,S=s.memoizedProps;try{x.nodeValue=S}catch(Ze){yn(s,s.return,Ze)}}break;case 3:if(ks(l,s),uo(s),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Hn(l.containerInfo)}catch(Ze){yn(s,s.return,Ze)}break;case 4:ks(l,s),uo(s);break;case 13:ks(l,s),uo(s),x=s.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(Sy=qt())),y&4&&hb(s);break;case 22:if(Te=d!==null&&d.memoizedState!==null,s.mode&1?(Er=(ce=Er)||Te,ks(l,s),Er=ce):ks(l,s),uo(s),y&8192){if(ce=s.memoizedState!==null,(s.stateNode.isHidden=ce)&&!Te&&(s.mode&1)!==0)for(Be=s,Te=s.child;Te!==null;){for(Se=Be=Te;Be!==null;){switch(be=Be,Ve=be.child,be.tag){case 0:case 11:case 14:case 15:ih(4,be,be.return);break;case 1:Lc(be,be.return);var He=be.stateNode;if(typeof He.componentWillUnmount=="function"){y=be,d=be.return;try{l=y,He.props=l.memoizedProps,He.state=l.memoizedState,He.componentWillUnmount()}catch(Ze){yn(y,d,Ze)}}break;case 5:Lc(be,be.return);break;case 22:if(be.memoizedState!==null){gb(Se);continue}}Ve!==null?(Ve.return=be,Be=Ve):gb(Se)}Te=Te.sibling}e:for(Te=null,Se=s;;){if(Se.tag===5){if(Te===null){Te=Se;try{x=Se.stateNode,ce?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(q=Se.stateNode,Q=Se.memoizedProps.style,P=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,q.style.display=Oi("display",P))}catch(Ze){yn(s,s.return,Ze)}}}else if(Se.tag===6){if(Te===null)try{Se.stateNode.nodeValue=ce?"":Se.memoizedProps}catch(Ze){yn(s,s.return,Ze)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===s)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===s)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===s)break e;Te===Se&&(Te=null),Se=Se.return}Te===Se&&(Te=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:ks(l,s),uo(s),y&4&&hb(s);break;case 21:break;default:ks(l,s),uo(s)}}function uo(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(ub(d)){var y=d;break e}d=d.return}throw Error(n(160))}switch(y.tag){case 5:var x=y.stateNode;y.flags&32&&(mr(x,""),y.flags&=-33);var S=cb(s);by(s,S,x);break;case 3:case 4:var P=y.stateNode.containerInfo,q=cb(s);xy(s,q,P);break;default:throw Error(n(161))}}catch(Q){yn(s,s.return,Q)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function sR(s,l,d){Be=s,mb(s)}function mb(s,l,d){for(var y=(s.mode&1)!==0;Be!==null;){var x=Be,S=x.child;if(x.tag===22&&y){var P=x.memoizedState!==null||im;if(!P){var q=x.alternate,Q=q!==null&&q.memoizedState!==null||Er;q=im;var ce=Er;if(im=P,(Er=Q)&&!ce)for(Be=x;Be!==null;)P=Be,Q=P.child,P.tag===22&&P.memoizedState!==null?yb(x):Q!==null?(Q.return=P,Be=Q):yb(x);for(;S!==null;)Be=S,mb(S),S=S.sibling;Be=x,im=q,Er=ce}pb(s)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,Be=S):pb(s)}}function pb(s){for(;Be!==null;){var l=Be;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Er||sm(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Er)if(d===null)y.componentDidMount();else{var x=l.elementType===l.type?d.memoizedProps:Ps(l.type,d.memoizedProps);y.componentDidUpdate(x,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&g0(l,S,y);break;case 3:var P=l.updateQueue;if(P!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}g0(l,P,d)}break;case 5:var q=l.stateNode;if(d===null&&l.flags&4){d=q;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&d.focus();break;case"img":Q.src&&(d.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ce=l.alternate;if(ce!==null){var Te=ce.memoizedState;if(Te!==null){var Se=Te.dehydrated;Se!==null&&Hn(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Er||l.flags&512&&wy(l)}catch(be){yn(l,l.return,be)}}if(l===s){Be=null;break}if(d=l.sibling,d!==null){d.return=l.return,Be=d;break}Be=l.return}}function gb(s){for(;Be!==null;){var l=Be;if(l===s){Be=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Be=d;break}Be=l.return}}function yb(s){for(;Be!==null;){var l=Be;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{sm(4,l)}catch(Q){yn(l,d,Q)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var x=l.return;try{y.componentDidMount()}catch(Q){yn(l,x,Q)}}var S=l.return;try{wy(l)}catch(Q){yn(l,S,Q)}break;case 5:var P=l.return;try{wy(l)}catch(Q){yn(l,P,Q)}}}catch(Q){yn(l,l.return,Q)}if(l===s){Be=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Be=q;break}Be=l.return}}var oR=Math.ceil,om=se.ReactCurrentDispatcher,Ty=se.ReactCurrentOwner,Yi=se.ReactCurrentBatchConfig,Rt=0,er=null,Ln=null,lr=0,Pi=0,jc=ul(0),Zn=0,sh=null,xu=0,am=0,Ey=0,oh=null,ai=null,Sy=0,Dc=1/0,ta=null,lm=!1,Cy=null,pl=null,um=!1,gl=null,cm=0,ah=0,Iy=null,dm=-1,hm=0;function Ur(){return(Rt&6)!==0?qt():dm!==-1?dm:dm=qt()}function yl(s){return(s.mode&1)===0?1:(Rt&2)!==0&&lr!==0?lr&-lr:$N.transition!==null?(hm===0&&(hm=jo()),hm):(s=_t,s!==0||(s=window.event,s=s===void 0?16:vt(s.type)),s)}function Ns(s,l,d,y){if(50<ah)throw ah=0,Iy=null,Error(n(185));gr(s,d,y),((Rt&2)===0||s!==er)&&(s===er&&((Rt&2)===0&&(am|=d),Zn===4&&_l(s,lr)),li(s,y),d===1&&Rt===0&&(l.mode&1)===0&&(Dc=qt()+500,Uf&&dl()))}function li(s,l){var d=s.callbackNode;Yr(s,l);var y=Ht(s,s===er?lr:0);if(y===0)d!==null&&Oa(d),s.callbackNode=null,s.callbackPriority=0;else if(l=y&-y,s.callbackPriority!==l){if(d!=null&&Oa(d),l===1)s.tag===0?BN(vb.bind(null,s)):i0(vb.bind(null,s)),wr(function(){(Rt&6)===0&&dl()}),d=null;else{switch(Xr(y)){case 1:d=No;break;case 4:d=Ks;break;case 16:d=Qr;break;case 536870912:d=Qs;break;default:d=Qr}d=Ib(d,_b.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function _b(s,l){if(dm=-1,hm=0,(Rt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Mc()&&s.callbackNode!==d)return null;var y=Ht(s,s===er?lr:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||l)l=fm(s,y);else{l=y;var x=Rt;Rt|=2;var S=xb();(er!==s||lr!==l)&&(ta=null,Dc=qt()+500,Tu(s,l));do try{uR();break}catch(q){wb(s,q)}while(!0);Wg(),om.current=S,Rt=x,Ln!==null?l=0:(er=null,lr=0,l=Zn)}if(l!==0){if(l===2&&(x=Yt(s),x!==0&&(y=x,l=Py(s,x))),l===1)throw d=sh,Tu(s,0),_l(s,y),li(s,qt()),d;if(l===6)_l(s,y);else{if(x=s.current.alternate,(y&30)===0&&!aR(x)&&(l=fm(s,y),l===2&&(S=Yt(s),S!==0&&(y=S,l=Py(s,S))),l===1))throw d=sh,Tu(s,0),_l(s,y),li(s,qt()),d;switch(s.finishedWork=x,s.finishedLanes=y,l){case 0:case 1:throw Error(n(345));case 2:Eu(s,ai,ta);break;case 3:if(_l(s,y),(y&130023424)===y&&(l=Sy+500-qt(),10<l)){if(Ht(s,0)!==0)break;if(x=s.suspendedLanes,(x&y)!==y){Ur(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Wn(Eu.bind(null,s,ai,ta),l);break}Eu(s,ai,ta);break;case 4:if(_l(s,y),(y&4194240)===y)break;for(l=s.eventTimes,x=-1;0<y;){var P=31-ot(y);S=1<<P,P=l[P],P>x&&(x=P),y&=~S}if(y=x,y=qt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*oR(y/1960))-y,10<y){s.timeoutHandle=Wn(Eu.bind(null,s,ai,ta),y);break}Eu(s,ai,ta);break;case 5:Eu(s,ai,ta);break;default:throw Error(n(329))}}}return li(s,qt()),s.callbackNode===d?_b.bind(null,s):null}function Py(s,l){var d=oh;return s.current.memoizedState.isDehydrated&&(Tu(s,l).flags|=256),s=fm(s,l),s!==2&&(l=ai,ai=d,l!==null&&Ay(l)),s}function Ay(s){ai===null?ai=s:ai.push.apply(ai,s)}function aR(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var x=d[y],S=x.getSnapshot;x=x.value;try{if(!Ei(S(),x))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function _l(s,l){for(l&=~Ey,l&=~am,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-ot(l),y=1<<d;s[d]=-1,l&=~y}}function vb(s){if((Rt&6)!==0)throw Error(n(327));Mc();var l=Ht(s,0);if((l&1)===0)return li(s,qt()),null;var d=fm(s,l);if(s.tag!==0&&d===2){var y=Yt(s);y!==0&&(l=y,d=Py(s,y))}if(d===1)throw d=sh,Tu(s,0),_l(s,l),li(s,qt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Eu(s,ai,ta),li(s,qt()),null}function ky(s,l){var d=Rt;Rt|=1;try{return s(l)}finally{Rt=d,Rt===0&&(Dc=qt()+500,Uf&&dl())}}function bu(s){gl!==null&&gl.tag===0&&(Rt&6)===0&&Mc();var l=Rt;Rt|=1;var d=Yi.transition,y=_t;try{if(Yi.transition=null,_t=1,s)return s()}finally{_t=y,Yi.transition=d,Rt=l,(Rt&6)===0&&dl()}}function Ny(){Pi=jc.current,tn(jc)}function Tu(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,Rn(d)),Ln!==null)for(d=Ln.return;d!==null;){var y=d;switch(Ug(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Vf();break;case 3:Nc(),tn(ii),tn(xr),Jg();break;case 5:Yg(y);break;case 4:Nc();break;case 13:tn(dn);break;case 19:tn(dn);break;case 10:qg(y.type._context);break;case 22:case 23:Ny()}d=d.return}if(er=s,Ln=s=vl(s.current,null),lr=Pi=l,Zn=0,sh=null,Ey=am=xu=0,ai=oh=null,_u!==null){for(l=0;l<_u.length;l++)if(d=_u[l],y=d.interleaved,y!==null){d.interleaved=null;var x=y.next,S=d.pending;if(S!==null){var P=S.next;S.next=x,y.next=P}d.pending=y}_u=null}return s}function wb(s,l){do{var d=Ln;try{if(Wg(),Qf.current=em,Yf){for(var y=hn.memoizedState;y!==null;){var x=y.queue;x!==null&&(x.pending=null),y=y.next}Yf=!1}if(wu=0,Jn=qn=hn=null,Jd=!1,eh=0,Ty.current=null,d===null||d.return===null){Zn=1,sh=l,Ln=null;break}e:{var S=s,P=d.return,q=d,Q=l;if(l=lr,q.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ce=Q,Te=q,Se=Te.tag;if((Te.mode&1)===0&&(Se===0||Se===11||Se===15)){var be=Te.alternate;be?(Te.updateQueue=be.updateQueue,Te.memoizedState=be.memoizedState,Te.lanes=be.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var Ve=W0(P);if(Ve!==null){Ve.flags&=-257,q0(Ve,P,q,S,l),Ve.mode&1&&H0(S,ce,l),l=Ve,Q=ce;var He=l.updateQueue;if(He===null){var Ze=new Set;Ze.add(Q),l.updateQueue=Ze}else He.add(Q);break e}else{if((l&1)===0){H0(S,ce,l),Ry();break e}Q=Error(n(426))}}else if(sn&&q.mode&1){var bn=W0(P);if(bn!==null){(bn.flags&65536)===0&&(bn.flags|=256),q0(bn,P,q,S,l),$g(Rc(Q,q));break e}}S=Q=Rc(Q,q),Zn!==4&&(Zn=2),oh===null?oh=[S]:oh.push(S),S=P;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var re=B0(S,Q,l);p0(S,re);break e;case 1:q=Q;var X=S.type,ae=S.stateNode;if((S.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(pl===null||!pl.has(ae)))){S.flags|=65536,l&=-l,S.lanes|=l;var Ie=$0(S,q,l);p0(S,Ie);break e}}S=S.return}while(S!==null)}Tb(d)}catch(Ke){l=Ke,Ln===d&&d!==null&&(Ln=d=d.return);continue}break}while(!0)}function xb(){var s=om.current;return om.current=em,s===null?em:s}function Ry(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),er===null||(xu&268435455)===0&&(am&268435455)===0||_l(er,lr)}function fm(s,l){var d=Rt;Rt|=2;var y=xb();(er!==s||lr!==l)&&(ta=null,Tu(s,l));do try{lR();break}catch(x){wb(s,x)}while(!0);if(Wg(),Rt=d,om.current=y,Ln!==null)throw Error(n(261));return er=null,lr=0,Zn}function lR(){for(;Ln!==null;)bb(Ln)}function uR(){for(;Ln!==null&&!oc();)bb(Ln)}function bb(s){var l=Cb(s.alternate,s,Pi);s.memoizedProps=s.pendingProps,l===null?Tb(s):Ln=l,Ty.current=null}function Tb(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=tR(d,l,Pi),d!==null){Ln=d;return}}else{if(d=nR(d,l),d!==null){d.flags&=32767,Ln=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Zn=6,Ln=null;return}}if(l=l.sibling,l!==null){Ln=l;return}Ln=l=s}while(l!==null);Zn===0&&(Zn=5)}function Eu(s,l,d){var y=_t,x=Yi.transition;try{Yi.transition=null,_t=1,cR(s,l,d,y)}finally{Yi.transition=x,_t=y}return null}function cR(s,l,d,y){do Mc();while(gl!==null);if((Rt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var S=d.lanes|d.childLanes;if(at(s,S),s===er&&(Ln=er=null,lr=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||um||(um=!0,Ib(Qr,function(){return Mc(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=Yi.transition,Yi.transition=null;var P=_t;_t=1;var q=Rt;Rt|=4,Ty.current=null,iR(s,d),fb(d,s),Hi(et),xs=!!je,et=je=null,s.current=d,sR(d),Va(),Rt=q,_t=P,Yi.transition=S}else s.current=d;if(um&&(um=!1,gl=s,cm=x),S=s.pendingLanes,S===0&&(pl=null),Xs(d.stateNode),li(s,qt()),l!==null)for(y=s.onRecoverableError,d=0;d<l.length;d++)x=l[d],y(x.value,{componentStack:x.stack,digest:x.digest});if(lm)throw lm=!1,s=Cy,Cy=null,s;return(cm&1)!==0&&s.tag!==0&&Mc(),S=s.pendingLanes,(S&1)!==0?s===Iy?ah++:(ah=0,Iy=s):ah=0,dl(),null}function Mc(){if(gl!==null){var s=Xr(cm),l=Yi.transition,d=_t;try{if(Yi.transition=null,_t=16>s?16:s,gl===null)var y=!1;else{if(s=gl,gl=null,cm=0,(Rt&6)!==0)throw Error(n(331));var x=Rt;for(Rt|=4,Be=s.current;Be!==null;){var S=Be,P=S.child;if((Be.flags&16)!==0){var q=S.deletions;if(q!==null){for(var Q=0;Q<q.length;Q++){var ce=q[Q];for(Be=ce;Be!==null;){var Te=Be;switch(Te.tag){case 0:case 11:case 15:ih(8,Te,S)}var Se=Te.child;if(Se!==null)Se.return=Te,Be=Se;else for(;Be!==null;){Te=Be;var be=Te.sibling,Ve=Te.return;if(lb(Te),Te===ce){Be=null;break}if(be!==null){be.return=Ve,Be=be;break}Be=Ve}}}var He=S.alternate;if(He!==null){var Ze=He.child;if(Ze!==null){He.child=null;do{var bn=Ze.sibling;Ze.sibling=null,Ze=bn}while(Ze!==null)}}Be=S}}if((S.subtreeFlags&2064)!==0&&P!==null)P.return=S,Be=P;else e:for(;Be!==null;){if(S=Be,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:ih(9,S,S.return)}var re=S.sibling;if(re!==null){re.return=S.return,Be=re;break e}Be=S.return}}var X=s.current;for(Be=X;Be!==null;){P=Be;var ae=P.child;if((P.subtreeFlags&2064)!==0&&ae!==null)ae.return=P,Be=ae;else e:for(P=X;Be!==null;){if(q=Be,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:sm(9,q)}}catch(Ke){yn(q,q.return,Ke)}if(q===P){Be=null;break e}var Ie=q.sibling;if(Ie!==null){Ie.return=q.return,Be=Ie;break e}Be=q.return}}if(Rt=x,dl(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Ys,s)}catch{}y=!0}return y}finally{_t=d,Yi.transition=l}}return!1}function Eb(s,l,d){l=Rc(d,l),l=B0(s,l,1),s=fl(s,l,1),l=Ur(),s!==null&&(gr(s,1,l),li(s,l))}function yn(s,l,d){if(s.tag===3)Eb(s,s,d);else for(;l!==null;){if(l.tag===3){Eb(l,s,d);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(pl===null||!pl.has(y))){s=Rc(d,s),s=$0(l,s,1),l=fl(l,s,1),s=Ur(),l!==null&&(gr(l,1,s),li(l,s));break}}l=l.return}}function dR(s,l,d){var y=s.pingCache;y!==null&&y.delete(l),l=Ur(),s.pingedLanes|=s.suspendedLanes&d,er===s&&(lr&d)===d&&(Zn===4||Zn===3&&(lr&130023424)===lr&&500>qt()-Sy?Tu(s,0):Ey|=d),li(s,l)}function Sb(s,l){l===0&&((s.mode&1)===0?l=1:(l=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var d=Ur();s=Xo(s,l),s!==null&&(gr(s,l,d),li(s,d))}function hR(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),Sb(s,d)}function fR(s,l){var d=0;switch(s.tag){case 13:var y=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(l),Sb(s,d)}var Cb;Cb=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||ii.current)oi=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return oi=!1,eR(s,l,d);oi=(s.flags&131072)!==0}else oi=!1,sn&&(l.flags&1048576)!==0&&s0(l,Bf,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;rm(s,l),s=l.pendingProps;var x=Ec(l,xr.current);kc(l,d),x=ny(null,l,y,s,x,d);var S=ry();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,si(y)?(S=!0,Ff(l)):S=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Kg(l),x.updater=tm,l.stateNode=x,x._reactInternals=l,uy(l,y,s,d),l=fy(null,l,y,!0,S,d)):(l.tag=0,sn&&S&&Fg(l),Fr(null,l,x,d),l=l.child),l;case 16:y=l.elementType;e:{switch(rm(s,l),s=l.pendingProps,x=y._init,y=x(y._payload),l.type=y,x=l.tag=pR(y),s=Ps(y,s),x){case 0:l=hy(null,l,y,s,d);break e;case 1:l=X0(null,l,y,s,d);break e;case 11:l=Z0(null,l,y,s,d);break e;case 14:l=G0(null,l,y,Ps(y.type,s),d);break e}throw Error(n(306,y,""))}return l;case 0:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ps(y,x),hy(s,l,y,x,d);case 1:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ps(y,x),X0(s,l,y,x,d);case 3:e:{if(J0(l),s===null)throw Error(n(387));y=l.pendingProps,S=l.memoizedState,x=S.element,m0(s,l),Gf(l,y,null,d);var P=l.memoizedState;if(y=P.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){x=Rc(Error(n(423)),l),l=eb(s,l,y,d,x);break e}else if(y!==x){x=Rc(Error(n(424)),l),l=eb(s,l,y,d,x);break e}else for(Ii=oo(l.stateNode.containerInfo.firstChild),Ci=l,sn=!0,Is=null,d=h0(l,null,y,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ic(),y===x){l=ea(s,l,d);break e}Fr(s,l,y,d)}l=l.child}return l;case 5:return y0(l),s===null&&Bg(l),y=l.type,x=l.pendingProps,S=s!==null?s.memoizedProps:null,P=x.children,yt(y,x)?P=null:S!==null&&yt(y,S)&&(l.flags|=32),Y0(s,l),Fr(s,l,P,d),l.child;case 6:return s===null&&Bg(l),null;case 13:return tb(s,l,d);case 4:return Qg(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=Pc(l,null,y,d):Fr(s,l,y,d),l.child;case 11:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ps(y,x),Z0(s,l,y,x,d);case 7:return Fr(s,l,l.pendingProps,d),l.child;case 8:return Fr(s,l,l.pendingProps.children,d),l.child;case 12:return Fr(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(y=l.type._context,x=l.pendingProps,S=l.memoizedProps,P=x.value,Jt(Wf,y._currentValue),y._currentValue=P,S!==null)if(Ei(S.value,P)){if(S.children===x.children&&!ii.current){l=ea(s,l,d);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var q=S.dependencies;if(q!==null){P=S.child;for(var Q=q.firstContext;Q!==null;){if(Q.context===y){if(S.tag===1){Q=Jo(-1,d&-d),Q.tag=2;var ce=S.updateQueue;if(ce!==null){ce=ce.shared;var Te=ce.pending;Te===null?Q.next=Q:(Q.next=Te.next,Te.next=Q),ce.pending=Q}}S.lanes|=d,Q=S.alternate,Q!==null&&(Q.lanes|=d),Zg(S.return,d,l),q.lanes|=d;break}Q=Q.next}}else if(S.tag===10)P=S.type===l.type?null:S.child;else if(S.tag===18){if(P=S.return,P===null)throw Error(n(341));P.lanes|=d,q=P.alternate,q!==null&&(q.lanes|=d),Zg(P,d,l),P=S.sibling}else P=S.child;if(P!==null)P.return=S;else for(P=S;P!==null;){if(P===l){P=null;break}if(S=P.sibling,S!==null){S.return=P.return,P=S;break}P=P.return}S=P}Fr(s,l,x.children,d),l=l.child}return l;case 9:return x=l.type,y=l.pendingProps.children,kc(l,d),x=Ki(x),y=y(x),l.flags|=1,Fr(s,l,y,d),l.child;case 14:return y=l.type,x=Ps(y,l.pendingProps),x=Ps(y.type,x),G0(s,l,y,x,d);case 15:return K0(s,l,l.type,l.pendingProps,d);case 17:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:Ps(y,x),rm(s,l),l.tag=1,si(y)?(s=!0,Ff(l)):s=!1,kc(l,d),U0(l,y,x),uy(l,y,x,d),fy(null,l,y,!0,s,d);case 19:return rb(s,l,d);case 22:return Q0(s,l,d)}throw Error(n(156,l.tag))};function Ib(s,l){return Ma(s,l)}function mR(s,l,d,y){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(s,l,d,y){return new mR(s,l,d,y)}function Ly(s){return s=s.prototype,!(!s||!s.isReactComponent)}function pR(s){if(typeof s=="function")return Ly(s)?1:0;if(s!=null){if(s=s.$$typeof,s===M)return 11;if(s===me)return 14}return 2}function vl(s,l){var d=s.alternate;return d===null?(d=Xi(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function mm(s,l,d,y,x,S){var P=2;if(y=s,typeof s=="function")Ly(s)&&(P=1);else if(typeof s=="string")P=5;else e:switch(s){case F:return Su(d.children,x,S,l);case j:P=8,x|=8;break;case V:return s=Xi(12,d,l,x|2),s.elementType=V,s.lanes=S,s;case k:return s=Xi(13,d,l,x),s.elementType=k,s.lanes=S,s;case le:return s=Xi(19,d,l,x),s.elementType=le,s.lanes=S,s;case Ee:return pm(d,x,S,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:P=10;break e;case z:P=9;break e;case M:P=11;break e;case me:P=14;break e;case ve:P=16,y=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=Xi(P,d,l,x),l.elementType=s,l.type=y,l.lanes=S,l}function Su(s,l,d,y){return s=Xi(7,s,y,l),s.lanes=d,s}function pm(s,l,d,y){return s=Xi(22,s,y,l),s.elementType=Ee,s.lanes=d,s.stateNode={isHidden:!1},s}function jy(s,l,d){return s=Xi(6,s,null,l),s.lanes=d,s}function Dy(s,l,d){return l=Xi(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function gR(s,l,d,y,x){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xi(0),this.expirationTimes=xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.identifierPrefix=y,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function My(s,l,d,y,x,S,P,q,Q){return s=new gR(s,l,d,q,Q),l===1?(l=1,S===!0&&(l|=8)):l=0,S=Xi(3,null,null,l),s.current=S,S.stateNode=s,S.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kg(S),s}function yR(s,l,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:y==null?null:""+y,children:s,containerInfo:l,implementation:d}}function Pb(s){if(!s)return cl;s=s._reactInternals;e:{if(Zr(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(si(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(si(d))return n0(s,d,l)}return l}function Ab(s,l,d,y,x,S,P,q,Q){return s=My(d,y,!0,s,x,S,P,q,Q),s.context=Pb(null),d=s.current,y=Ur(),x=yl(d),S=Jo(y,x),S.callback=l??null,fl(d,S,x),s.current.lanes=x,gr(s,x,y),li(s,y),s}function gm(s,l,d,y){var x=l.current,S=Ur(),P=yl(x);return d=Pb(d),l.context===null?l.context=d:l.pendingContext=d,l=Jo(S,P),l.payload={element:s},y=y===void 0?null:y,y!==null&&(l.callback=y),s=fl(x,l,P),s!==null&&(Ns(s,x,P,S),Zf(s,x,P)),P}function ym(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function kb(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Oy(s,l){kb(s,l),(s=s.alternate)&&kb(s,l)}function _R(){return null}var Nb=typeof reportError=="function"?reportError:function(s){console.error(s)};function Vy(s){this._internalRoot=s}_m.prototype.render=Vy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));gm(s,l,null,null)},_m.prototype.unmount=Vy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;bu(function(){gm(null,s,null,null)}),l[zt]=null}};function _m(s){this._internalRoot=s}_m.prototype.unstable_scheduleHydration=function(s){if(s){var l=za();s={blockedOn:null,target:s,priority:l};for(var d=0;d<xn.length&&l!==0&&l<xn[d].priority;d++);xn.splice(d,0,s),d===0&&Ba(s)}};function Fy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function vm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Rb(){}function vR(s,l,d,y,x){if(x){if(typeof y=="function"){var S=y;y=function(){var ce=ym(P);S.call(ce)}}var P=Ab(l,y,s,0,null,!1,!1,"",Rb);return s._reactRootContainer=P,s[zt]=P.current,sl(s.nodeType===8?s.parentNode:s),bu(),P}for(;x=s.lastChild;)s.removeChild(x);if(typeof y=="function"){var q=y;y=function(){var ce=ym(Q);q.call(ce)}}var Q=My(s,0,!1,null,null,!1,!1,"",Rb);return s._reactRootContainer=Q,s[zt]=Q.current,sl(s.nodeType===8?s.parentNode:s),bu(function(){gm(l,Q,d,y)}),Q}function wm(s,l,d,y,x){var S=d._reactRootContainer;if(S){var P=S;if(typeof x=="function"){var q=x;x=function(){var Q=ym(P);q.call(Q)}}gm(l,P,s,x)}else P=vR(d,l,s,x,y);return ym(P)}Fa=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=it(l.pendingLanes);d!==0&&(yr(l,d|1),li(l,qt()),(Rt&6)===0&&(Dc=qt()+500,dl()))}break;case 13:bu(function(){var y=Xo(s,1);if(y!==null){var x=Ur();Ns(y,s,1,x)}}),Oy(s,1)}},Ui=function(s){if(s.tag===13){var l=Xo(s,134217728);if(l!==null){var d=Ur();Ns(l,s,134217728,d)}Oy(s,134217728)}},Ua=function(s){if(s.tag===13){var l=yl(s),d=Xo(s,l);if(d!==null){var y=Ur();Ns(d,s,l,y)}Oy(s,l)}},za=function(){return _t},Do=function(s,l){var d=_t;try{return _t=s,l()}finally{_t=d}},Co=function(s,l,d){switch(l){case"input":if(ps(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var y=d[l];if(y!==s&&y.form===s.form){var x=bc(y);if(!x)throw Error(n(90));Lr(y),ps(y,x)}}}break;case"textarea":Ae(s,d);break;case"select":l=d.value,l!=null&&ie(s,!!d.multiple,l,!1)}},Io=ky,ru=bu;var wR={usingClientEntryPoint:!1,Events:[Zo,Go,bc,Fi,nu,ky]},lh={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xR={bundleType:lh.bundleType,version:lh.version,rendererPackageName:lh.rendererPackageName,rendererConfig:lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=iu(s),s===null?null:s.stateNode},findFiberByHostInstance:lh.findFiberByHostInstance||_R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{Ys=xm.inject(xR),pr=xm}catch{}}return ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR,ui.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fy(l))throw Error(n(200));return yR(s,l,null,d)},ui.createRoot=function(s,l){if(!Fy(s))throw Error(n(299));var d=!1,y="",x=Nb;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=My(s,1,!1,null,null,d,!1,y,x),s[zt]=l.current,sl(s.nodeType===8?s.parentNode:s),new Vy(l)},ui.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=iu(l),s=s===null?null:s.stateNode,s},ui.flushSync=function(s){return bu(s)},ui.hydrate=function(s,l,d){if(!vm(l))throw Error(n(200));return wm(null,s,l,!0,d)},ui.hydrateRoot=function(s,l,d){if(!Fy(s))throw Error(n(405));var y=d!=null&&d.hydratedSources||null,x=!1,S="",P=Nb;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),l=Ab(l,null,s,1,d??null,x,!1,S,P),s[zt]=l.current,sl(s),y)for(s=0;s<y.length;s++)d=y[s],x=d._getVersion,x=x(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,x]:l.mutableSourceEagerHydrationData.push(d,x);return new _m(l)},ui.render=function(s,l,d){if(!vm(l))throw Error(n(200));return wm(null,s,l,!1,d)},ui.unmountComponentAtNode=function(s){if(!vm(s))throw Error(n(40));return s._reactRootContainer?(bu(function(){wm(null,null,s,!1,function(){s._reactRootContainer=null,s[zt]=null})}),!0):!1},ui.unstable_batchedUpdates=ky,ui.unstable_renderSubtreeIntoContainer=function(s,l,d,y){if(!vm(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return wm(s,l,d,!1,y)},ui.version="18.3.1-next-f1338f8080-20240426",ui}var Ub;function X1(){if(Ub)return By.exports;Ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),By.exports=PR(),By.exports}var zb;function AR(){if(zb)return bm;zb=1;var t=X1();return bm.createRoot=t.createRoot,bm.hydrateRoot=t.hydrateRoot,bm}var kR=AR();const NR=Kv(kR);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bb="popstate";function RR(t={}){function e(r,i){let{pathname:a,search:u,hash:h}=r.location;return F_("",{pathname:a,search:u,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vh(i)}return jR(e,n,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Us(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LR(){return Math.random().toString(36).substring(2,10)}function $b(t,e){return{usr:t.state,key:t.key,idx:e}}function F_(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bd(e):e,state:n,key:e&&e.key||r||LR()}}function Vh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function jR(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,u=i.history,h="POP",f=null,_=v();_==null&&(_=0,u.replaceState({...u.state,idx:_},""));function v(){return(u.state||{idx:null}).idx}function T(){h="POP";let H=v(),W=H==null?null:H-_;_=H,f&&f({action:h,location:U.location,delta:W})}function E(H,W){h="PUSH";let G=F_(U.location,H,W);_=v()+1;let $=$b(G,_),se=U.createHref(G);try{u.pushState($,"",se)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;i.location.assign(se)}a&&f&&f({action:h,location:U.location,delta:1})}function A(H,W){h="REPLACE";let G=F_(U.location,H,W);_=v();let $=$b(G,_),se=U.createHref(G);u.replaceState($,"",se),a&&f&&f({action:h,location:U.location,delta:0})}function D(H){return DR(H)}let U={get action(){return h},get location(){return t(i,u)},listen(H){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(Bb,T),f=H,()=>{i.removeEventListener(Bb,T),f=null}},createHref(H){return e(i,H)},createURL:D,encodeLocation(H){let W=D(H);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:E,replace:A,go(H){return u.go(H)}};return U}function DR(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),an(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Vh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function J1(t,e,n="/"){return MR(t,e,n,!1)}function MR(t,e,n,r){let i=typeof e=="string"?bd(e):e,a=da(i.pathname||"/",n);if(a==null)return null;let u=eC(t);OR(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let _=GR(a);h=qR(u[f],_,r)}return h}function eC(t,e=[],n=[],r=""){let i=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(an(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let _=ua([r,f.relativePath]),v=n.concat(f);a.children&&a.children.length>0&&(an(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),eC(a.children,e,v,_)),!(a.path==null&&!a.index)&&e.push({path:_,score:HR(_,a.index),routesMeta:v})};return t.forEach((a,u)=>{if(a.path===""||!a.path?.includes("?"))i(a,u);else for(let h of tC(a.path))i(a,u,h)}),e}function tC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let u=tC(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),i&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function OR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var VR=/^:[\w-]+$/,FR=3,UR=2,zR=1,BR=10,$R=-2,Hb=t=>t==="*";function HR(t,e){let n=t.split("/"),r=n.length;return n.some(Hb)&&(r+=$R),e&&(r+=UR),n.filter(i=>!Hb(i)).reduce((i,a)=>i+(VR.test(a)?FR:a===""?zR:BR),r)}function WR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function qR(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],_=h===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",T=cp({path:f.relativePath,caseSensitive:f.caseSensitive,end:_},v),E=f.route;if(!T&&_&&n&&!r[r.length-1].route.index&&(T=cp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!T)return null;Object.assign(i,T.params),u.push({params:i,pathname:ua([a,T.pathname]),pathnameBase:XR(ua([a,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(a=ua([a,T.pathnameBase]))}return u}function cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ZR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],u=a.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((_,{paramName:v,isOptional:T},E)=>{if(v==="*"){let D=h[E]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const A=h[E];return T&&!A?_[v]=void 0:_[v]=(A||"").replace(/%2F/g,"/"),_},{}),pathname:a,pathnameBase:u,pattern:t}}function ZR(t,e=!1,n=!0){Us(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Us(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function KR(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?bd(t):t;return{pathname:n?n.startsWith("/")?n:QR(n,e):e,search:JR(r),hash:e2(i)}}function QR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Wy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yv(t){let e=YR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Xv(t,e,n,r=!1){let i;typeof t=="string"?i=bd(t):(i={...t},an(!i.pathname||!i.pathname.includes("?"),Wy("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),Wy("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),Wy("#","search","hash",i)));let a=t===""||i.pathname==="",u=a?"/":i.pathname,h;if(u==null)h=n;else{let T=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),T-=1;i.pathname=E.join("/")}h=T>=0?e[T]:"/"}let f=KR(i,h),_=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(_||v)&&(f.pathname+="/"),f}var ua=t=>t.join("/").replace(/\/\/+/g,"/"),XR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var nC=["POST","PUT","PATCH","DELETE"];new Set(nC);var n2=["GET",...nC];new Set(n2);var Td=N.createContext(null);Td.displayName="DataRouter";var Kp=N.createContext(null);Kp.displayName="DataRouterState";N.createContext(!1);var rC=N.createContext({isTransitioning:!1});rC.displayName="ViewTransition";var r2=N.createContext(new Map);r2.displayName="Fetchers";var i2=N.createContext(null);i2.displayName="Await";var Hs=N.createContext(null);Hs.displayName="Navigation";var nf=N.createContext(null);nf.displayName="Location";var ds=N.createContext({outlet:null,matches:[],isDataRoute:!1});ds.displayName="Route";var Jv=N.createContext(null);Jv.displayName="RouteError";function s2(t,{relative:e}={}){an(Ed(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(Hs),{hash:i,pathname:a,search:u}=rf(t,{relative:e}),h=a;return n!=="/"&&(h=a==="/"?n:ua([n,a])),r.createHref({pathname:h,search:u,hash:i})}function Ed(){return N.useContext(nf)!=null}function hs(){return an(Ed(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(nf).location}var iC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sC(t){N.useContext(Hs).static||N.useLayoutEffect(t)}function Li(){let{isDataRoute:t}=N.useContext(ds);return t?x2():o2()}function o2(){an(Ed(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Td),{basename:e,navigator:n}=N.useContext(Hs),{matches:r}=N.useContext(ds),{pathname:i}=hs(),a=JSON.stringify(Yv(r)),u=N.useRef(!1);return sC(()=>{u.current=!0}),N.useCallback((f,_={})=>{if(Us(u.current,iC),!u.current)return;if(typeof f=="number"){n.go(f);return}let v=Xv(f,JSON.parse(a),i,_.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ua([e,v.pathname])),(_.replace?n.replace:n.push)(v,_.state,_)},[e,n,a,i,t])}var a2=N.createContext(null);function l2(t){let e=N.useContext(ds).outlet;return e&&N.createElement(a2.Provider,{value:t},e)}function u2(){let{matches:t}=N.useContext(ds),e=t[t.length-1];return e?e.params:{}}function rf(t,{relative:e}={}){let{matches:n}=N.useContext(ds),{pathname:r}=hs(),i=JSON.stringify(Yv(n));return N.useMemo(()=>Xv(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function c2(t,e){return oC(t,e)}function oC(t,e,n,r){an(Ed(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=N.useContext(Hs),{matches:a}=N.useContext(ds),u=a[a.length-1],h=u?u.params:{},f=u?u.pathname:"/",_=u?u.pathnameBase:"/",v=u&&u.route;{let W=v&&v.path||"";aC(f,!v||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=hs(),E;if(e){let W=typeof e=="string"?bd(e):e;an(_==="/"||W.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),E=W}else E=T;let A=E.pathname||"/",D=A;if(_!=="/"){let W=_.replace(/^\//,"").split("/");D="/"+A.replace(/^\//,"").split("/").slice(W.length).join("/")}let U=J1(t,{pathname:D});Us(v||U!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Us(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=p2(U&&U.map(W=>Object.assign({},W,{params:Object.assign({},h,W.params),pathname:ua([_,i.encodeLocation?i.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:ua([_,i.encodeLocation?i.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),a,n,r);return e&&H?N.createElement(nf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},H):H}function d2(){let t=w2(),e=t2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,u)}var h2=N.createElement(d2,null),f2=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(ds.Provider,{value:this.props.routeContext},N.createElement(Jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function m2({routeContext:t,match:e,children:n}){let r=N.useContext(Td);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ds.Provider,{value:t},n)}function p2(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n?.errors;if(a!=null){let f=i.findIndex(_=>_.route.id&&a?.[_.route.id]!==void 0);an(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let u=!1,h=-1;if(n)for(let f=0;f<i.length;f++){let _=i[f];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(h=f),_.route.id){let{loaderData:v,errors:T}=n,E=_.route.loader&&!v.hasOwnProperty(_.route.id)&&(!T||T[_.route.id]===void 0);if(_.route.lazy||E){u=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((f,_,v)=>{let T,E=!1,A=null,D=null;n&&(T=a&&_.route.id?a[_.route.id]:void 0,A=_.route.errorElement||h2,u&&(h<0&&v===0?(aC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,D=null):h===v&&(E=!0,D=_.route.hydrateFallbackElement||null)));let U=e.concat(i.slice(0,v+1)),H=()=>{let W;return T?W=A:E?W=D:_.route.Component?W=N.createElement(_.route.Component,null):_.route.element?W=_.route.element:W=f,N.createElement(m2,{match:_,routeContext:{outlet:f,matches:U,isDataRoute:n!=null},children:W})};return n&&(_.route.ErrorBoundary||_.route.errorElement||v===0)?N.createElement(f2,{location:n.location,revalidation:n.revalidation,component:A,error:T,children:H(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):H()},null)}function ew(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g2(t){let e=N.useContext(Td);return an(e,ew(t)),e}function y2(t){let e=N.useContext(Kp);return an(e,ew(t)),e}function _2(t){let e=N.useContext(ds);return an(e,ew(t)),e}function tw(t){let e=_2(t),n=e.matches[e.matches.length-1];return an(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function v2(){return tw("useRouteId")}function w2(){let t=N.useContext(Jv),e=y2("useRouteError"),n=tw("useRouteError");return t!==void 0?t:e.errors?.[n]}function x2(){let{router:t}=g2("useNavigate"),e=tw("useNavigate"),n=N.useRef(!1);return sC(()=>{n.current=!0}),N.useCallback(async(i,a={})=>{Us(n.current,iC),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var Wb={};function aC(t,e,n){!e&&!Wb[t]&&(Wb[t]=!0,Us(!1,n))}N.memo(b2);function b2({routes:t,future:e,state:n}){return oC(t,void 0,n,e)}function U_({to:t,replace:e,state:n,relative:r}){an(Ed(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(Hs);Us(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(ds),{pathname:u}=hs(),h=Li(),f=Xv(t,Yv(a),u,r==="path"),_=JSON.stringify(f);return N.useEffect(()=>{h(JSON.parse(_),{replace:e,state:n,relative:r})},[h,_,r,e,n]),null}function T2(t){return l2(t.context)}function Tn(t){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){an(!Ed(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:u,navigator:i,static:a,future:{}}),[u,i,a]);typeof n=="string"&&(n=bd(n));let{pathname:f="/",search:_="",hash:v="",state:T=null,key:E="default"}=n,A=N.useMemo(()=>{let D=da(f,u);return D==null?null:{location:{pathname:D,search:_,hash:v,state:T,key:E},navigationType:r}},[u,f,_,v,T,E,r]);return Us(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${_}${v}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:N.createElement(Hs.Provider,{value:h},N.createElement(nf.Provider,{children:e,value:A}))}function S2({children:t,location:e}){return c2(z_(t),e)}function z_(t,e=[]){let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let a=[...e,i];if(r.type===N.Fragment){n.push.apply(n,z_(r.props.children,a));return}an(r.type===Tn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=z_(r.props.children,a)),n.push(u)}),n}var $m="get",Hm="application/x-www-form-urlencoded";function Qp(t){return t!=null&&typeof t.tagName=="string"}function C2(t){return Qp(t)&&t.tagName.toLowerCase()==="button"}function I2(t){return Qp(t)&&t.tagName.toLowerCase()==="form"}function P2(t){return Qp(t)&&t.tagName.toLowerCase()==="input"}function A2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function k2(t,e){return t.button===0&&(!e||e==="_self")&&!A2(t)}var Tm=null;function N2(){if(Tm===null)try{new FormData(document.createElement("form"),0),Tm=!1}catch{Tm=!0}return Tm}var R2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qy(t){return t!=null&&!R2.has(t)?(Us(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hm}"`),null):t}function L2(t,e){let n,r,i,a,u;if(I2(t)){let h=t.getAttribute("action");r=h?da(h,e):null,n=t.getAttribute("method")||$m,i=qy(t.getAttribute("enctype"))||Hm,a=new FormData(t)}else if(C2(t)||P2(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(r=f?da(f,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||$m,i=qy(t.getAttribute("formenctype"))||qy(h.getAttribute("enctype"))||Hm,a=new FormData(h,t),!N2()){let{name:_,type:v,value:T}=t;if(v==="image"){let E=_?`${_}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else _&&a.append(_,T)}}else{if(Qp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$m,r=null,i=Hm,u=t}return a&&i==="text/plain"&&(u=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function j2(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&da(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function D2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function O2(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let u=await D2(a,n);return u.links?u.links():[]}return[]}));return z2(r.flat(1).filter(M2).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function qb(t,e,n,r,i,a){let u=(f,_)=>n[_]?f.route.id!==n[_].route.id:!0,h=(f,_)=>n[_].pathname!==f.pathname||n[_].route.path?.endsWith("*")&&n[_].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,_)=>u(f,_)||h(f,_)):a==="data"?e.filter((f,_)=>{let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,_)||h(f,_))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function V2(t,e,{includeHydrateFallback:n}={}){return F2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function F2(t){return[...new Set(t)]}function U2(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function z2(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(U2(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function lC(){let t=N.useContext(Td);return nw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function B2(){let t=N.useContext(Kp);return nw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var rw=N.createContext(void 0);rw.displayName="FrameworkContext";function uC(){let t=N.useContext(rw);return nw(t,"You must render this element inside a <HydratedRouter> element"),t}function $2(t,e){let n=N.useContext(rw),[r,i]=N.useState(!1),[a,u]=N.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:_,onMouseLeave:v,onTouchStart:T}=e,E=N.useRef(null);N.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let U=W=>{W.forEach(G=>{u(G.isIntersecting)})},H=new IntersectionObserver(U,{threshold:.5});return E.current&&H.observe(E.current),()=>{H.disconnect()}}},[t]),N.useEffect(()=>{if(r){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[r]);let A=()=>{i(!0)},D=()=>{i(!1),u(!1)};return n?t!=="intent"?[a,E,{}]:[a,E,{onFocus:ch(h,A),onBlur:ch(f,D),onMouseEnter:ch(_,A),onMouseLeave:ch(v,D),onTouchStart:ch(T,A)}]:[!1,E,{}]}function ch(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function H2({page:t,...e}){let{router:n}=lC(),r=N.useMemo(()=>J1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(q2,{page:t,matches:r,...e}):null}function W2(t){let{manifest:e,routeModules:n}=uC(),[r,i]=N.useState([]);return N.useEffect(()=>{let a=!1;return O2(t,e,n).then(u=>{a||i(u)}),()=>{a=!0}},[t,e,n]),r}function q2({page:t,matches:e,...n}){let r=hs(),{manifest:i,routeModules:a}=uC(),{basename:u}=lC(),{loaderData:h,matches:f}=B2(),_=N.useMemo(()=>qb(t,e,f,i,r,"data"),[t,e,f,i,r]),v=N.useMemo(()=>qb(t,e,f,i,r,"assets"),[t,e,f,i,r]),T=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let D=new Set,U=!1;if(e.forEach(W=>{let G=i.routes[W.route.id];!G||!G.hasLoader||(!_.some($=>$.route.id===W.route.id)&&W.route.id in h&&a[W.route.id]?.shouldRevalidate||G.hasClientLoader?U=!0:D.add(W.route.id))}),D.size===0)return[];let H=j2(t,u,"data");return U&&D.size>0&&H.searchParams.set("_routes",e.filter(W=>D.has(W.route.id)).map(W=>W.route.id).join(",")),[H.pathname+H.search]},[u,h,r,i,_,e,t,a]),E=N.useMemo(()=>V2(v,i),[v,i]),A=W2(v);return N.createElement(N.Fragment,null,T.map(D=>N.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),E.map(D=>N.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),A.map(({key:D,link:U})=>N.createElement("link",{key:D,...U})))}function Z2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var cC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cC&&(window.__reactRouterVersion="7.7.1")}catch{}function G2({basename:t,children:e,window:n}){let r=N.useRef();r.current==null&&(r.current=RR({window:n,v5Compat:!0}));let i=r.current,[a,u]=N.useState({action:i.action,location:i.location}),h=N.useCallback(f=>{N.startTransition(()=>u(f))},[u]);return N.useLayoutEffect(()=>i.listen(h),[i,h]),N.createElement(E2,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var dC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pr=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:u,state:h,target:f,to:_,preventScrollReset:v,viewTransition:T,...E},A){let{basename:D}=N.useContext(Hs),U=typeof _=="string"&&dC.test(_),H,W=!1;if(typeof _=="string"&&U&&(H=_,cC))try{let V=new URL(window.location.href),B=_.startsWith("//")?new URL(V.protocol+_):new URL(_),z=da(B.pathname,D);B.origin===V.origin&&z!=null?_=z+B.search+B.hash:W=!0}catch{Us(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=s2(_,{relative:i}),[$,se,oe]=$2(r,E),ee=Y2(_,{replace:u,state:h,target:f,preventScrollReset:v,relative:i,viewTransition:T});function F(V){e&&e(V),V.defaultPrevented||ee(V)}let j=N.createElement("a",{...E,...oe,href:H||G,onClick:W||a?e:F,ref:Z2(A,se),target:f,"data-discover":!U&&n==="render"?"true":void 0});return $&&!U?N.createElement(N.Fragment,null,j,N.createElement(H2,{page:G})):j});Pr.displayName="Link";var iw=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:u,viewTransition:h,children:f,..._},v){let T=rf(u,{relative:_.relative}),E=hs(),A=N.useContext(Kp),{navigator:D,basename:U}=N.useContext(Hs),H=A!=null&&nL(T)&&h===!0,W=D.encodeLocation?D.encodeLocation(T).pathname:T.pathname,G=E.pathname,$=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(G=G.toLowerCase(),$=$?$.toLowerCase():null,W=W.toLowerCase()),$&&U&&($=da($,U)||$);const se=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let oe=G===W||!i&&G.startsWith(W)&&G.charAt(se)==="/",ee=$!=null&&($===W||!i&&$.startsWith(W)&&$.charAt(W.length)==="/"),F={isActive:oe,isPending:ee,isTransitioning:H},j=oe?e:void 0,V;typeof r=="function"?V=r(F):V=[r,oe?"active":null,ee?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(F):a;return N.createElement(Pr,{..._,"aria-current":j,className:V,ref:v,style:B,to:u,viewTransition:h},typeof f=="function"?f(F):f)});iw.displayName="NavLink";var K2=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:u=$m,action:h,onSubmit:f,relative:_,preventScrollReset:v,viewTransition:T,...E},A)=>{let D=eL(),U=tL(h,{relative:_}),H=u.toLowerCase()==="get"?"get":"post",W=typeof h=="string"&&dC.test(h),G=$=>{if(f&&f($),$.defaultPrevented)return;$.preventDefault();let se=$.nativeEvent.submitter,oe=se?.getAttribute("formmethod")||u;D(se||$.currentTarget,{fetcherKey:e,method:oe,navigate:n,replace:i,state:a,relative:_,preventScrollReset:v,viewTransition:T})};return N.createElement("form",{ref:A,method:H,action:U,onSubmit:r?f:G,...E,"data-discover":!W&&t==="render"?"true":void 0})});K2.displayName="Form";function Q2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(t){let e=N.useContext(Td);return an(e,Q2(t)),e}function Y2(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:u}={}){let h=Li(),f=hs(),_=rf(t,{relative:a});return N.useCallback(v=>{if(k2(v,e)){v.preventDefault();let T=n!==void 0?n:Vh(f)===Vh(_);h(t,{replace:T,state:r,preventScrollReset:i,relative:a,viewTransition:u})}},[f,h,_,n,r,e,t,i,a,u])}var X2=0,J2=()=>`__${String(++X2)}__`;function eL(){let{router:t}=hC("useSubmit"),{basename:e}=N.useContext(Hs),n=v2();return N.useCallback(async(r,i={})=>{let{action:a,method:u,encType:h,formData:f,body:_}=L2(r,e);if(i.navigate===!1){let v=i.fetcherKey||J2();await t.fetch(v,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:_,formMethod:i.method||u,formEncType:i.encType||h,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:_,formMethod:i.method||u,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function tL(t,{relative:e}={}){let{basename:n}=N.useContext(Hs),r=N.useContext(ds);an(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...rf(t||".",{relative:e})},u=hs();if(t==null){a.search=u.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(v=>v==="")){h.delete("index"),f.filter(T=>T).forEach(T=>h.append("index",T));let v=h.toString();a.search=v?`?${v}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ua([n,a.pathname])),Vh(a)}function nL(t,{relative:e}={}){let n=N.useContext(rC);an(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hC("useViewTransitionState"),i=rf(t,{relative:e});if(!n.isTransitioning)return!1;let a=da(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=da(n.nextLocation.pathname,r)||n.nextLocation.pathname;return cp(i.pathname,u)!=null||cp(i.pathname,a)!=null}var rL=X1();const iL=()=>{};var Zb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],u=t[n++],h=t[n++],f=((i&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},mC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],u=i+1<t.length,h=u?t[i+1]:0,f=i+2<t.length,_=f?t[i+2]:0,v=a>>2,T=(a&3)<<4|h>>4;let E=(h&15)<<2|_>>6,A=_&63;f||(A=64,u||(E=64)),r.push(n[v],n[T],n[E],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const _=i<t.length?n[t.charAt(i)]:64;++i;const T=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||h==null||_==null||T==null)throw new oL;const E=a<<2|h>>4;if(r.push(E),_!==64){const A=h<<4&240|_>>2;if(r.push(A),T!==64){const D=_<<6&192|T;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aL=function(t){const e=fC(t);return mC.encodeByteArray(e,!0)},dp=function(t){return aL(t).replace(/\./g,"")},pC=function(t){try{return mC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=()=>lL().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof Zb>"u")return;const t=Zb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pC(t[1]);return e&&JSON.parse(e)},Yp=()=>{try{return iL()||uL()||cL()||dL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=t=>Yp()?.emulatorHosts?.[t],yC=t=>{const e=gC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_C=()=>Yp()?.config,vC=t=>Yp()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[dp(JSON.stringify(n)),dp(JSON.stringify(u)),""].join(".")}const bh={};function fL(){const t={prod:[],emulator:[]};for(const e of Object.keys(bh))bh[e]?t.emulator.push(e):t.prod.push(e);return t}function mL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gb=!1;function ow(t,e){if(typeof window>"u"||typeof document>"u"||!Kl(window.location.host)||bh[t]===e||bh[t]||Gb)return;bh[t]=e;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=fL().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function _(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Gb=!0,u()},E}function v(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=mL(r),A=n("text"),D=document.getElementById(A)||document.createElement("span"),U=n("learnmore"),H=document.getElementById(U)||document.createElement("a"),W=n("preprendIcon"),G=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const $=E.element;h($),v(H,U);const se=_();f(G,W),$.append(G,D,H,se),document.body.appendChild($)}a?(D.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function gL(){const t=Yp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _L(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vL(){const t=kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wL(){return!gL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bC(){try{return typeof indexedDB=="object"}catch{return!1}}function TC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}function xL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="FirebaseError";class fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bL,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yu.prototype.create)}}class Yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?TL(a,r):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new fs(i,h,r)}}function TL(t,e){return t.replace(EL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EL=/\{\$([^}]+)}/g;function SL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],u=e[i];if(Kb(a)&&Kb(u)){if(!Vl(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CL(t,e){const n=new IL(t,e);return n.subscribe.bind(n)}class IL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zy),i.error===void 0&&(i.error=Zy),i.complete===void 0&&(i.complete=Zy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=1e3,kL=2,NL=14400*1e3,RL=.5;function Qb(t,e=AL,n=kL){const r=e*Math.pow(n,t),i=Math.round(RL*r*(Math.random()-.5)*2);return Math.min(NL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DL(e))try{this.getOrInitializeService({instanceIdentifier:Pu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Pu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pu){return this.instances.has(e)}getOptions(e=Pu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pu){return this.component?this.component.multipleInstances?e:Pu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jL(t){return t===Pu?void 0:t}function DL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const OL={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},VL=Ct.INFO,FL={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},UL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=FL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xp{constructor(e){this.name=e,this._logLevel=VL,this._logHandler=UL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const zL=(t,e)=>e.some(n=>t instanceof n);let Yb,Xb;function BL(){return Yb||(Yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $L(){return Xb||(Xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EC=new WeakMap,B_=new WeakMap,SC=new WeakMap,Gy=new WeakMap,aw=new WeakMap;function HL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(Ll(t.result)),i()},u=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&EC.set(n,t)}).catch(()=>{}),aw.set(e,t),e}function WL(t){if(B_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),i()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});B_.set(t,e)}let $_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return B_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ll(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qL(t){$_=t($_)}function ZL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ky(this),e,...n);return SC.set(r,e.sort?e.sort():[e]),Ll(r)}:$L().includes(t)?function(...e){return t.apply(Ky(this),e),Ll(EC.get(this))}:function(...e){return Ll(t.apply(Ky(this),e))}}function GL(t){return typeof t=="function"?ZL(t):(t instanceof IDBTransaction&&WL(t),zL(t,BL())?new Proxy(t,$_):t)}function Ll(t){if(t instanceof IDBRequest)return HL(t);if(Gy.has(t))return Gy.get(t);const e=GL(t);return e!==t&&(Gy.set(t,e),aw.set(e,t)),e}const Ky=t=>aw.get(t);function CC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(t,e),h=Ll(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Ll(u.result),f.oldVersion,f.newVersion,Ll(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),h}const KL=["get","getKey","getAll","getAllKeys","count"],QL=["put","add","delete","clear"],Qy=new Map;function Jb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qy.get(e))return Qy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=QL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KL.includes(n)))return;const a=async function(u,...h){const f=this.transaction(u,i?"readwrite":"readonly");let _=f.store;return r&&(_=_.index(h.shift())),(await Promise.all([_[n](...h),i&&f.done]))[0]};return Qy.set(e,a),a}qL(t=>({...t,get:(e,n,r)=>Jb(e,n)||t.get(e,n,r),has:(e,n)=>!!Jb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XL(t){return t.getComponent()?.type==="VERSION"}const H_="@firebase/app",eT="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Xp("@firebase/app"),JL="@firebase/app-compat",ej="@firebase/analytics-compat",tj="@firebase/analytics",nj="@firebase/app-check-compat",rj="@firebase/app-check",ij="@firebase/auth",sj="@firebase/auth-compat",oj="@firebase/database",aj="@firebase/data-connect",lj="@firebase/database-compat",uj="@firebase/functions",cj="@firebase/functions-compat",dj="@firebase/installations",hj="@firebase/installations-compat",fj="@firebase/messaging",mj="@firebase/messaging-compat",pj="@firebase/performance",gj="@firebase/performance-compat",yj="@firebase/remote-config",_j="@firebase/remote-config-compat",vj="@firebase/storage",wj="@firebase/storage-compat",xj="@firebase/firestore",bj="@firebase/ai",Tj="@firebase/firestore-compat",Ej="firebase",Sj="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="[DEFAULT]",Cj={[H_]:"fire-core",[JL]:"fire-core-compat",[tj]:"fire-analytics",[ej]:"fire-analytics-compat",[rj]:"fire-app-check",[nj]:"fire-app-check-compat",[ij]:"fire-auth",[sj]:"fire-auth-compat",[oj]:"fire-rtdb",[aj]:"fire-data-connect",[lj]:"fire-rtdb-compat",[uj]:"fire-fn",[cj]:"fire-fn-compat",[dj]:"fire-iid",[hj]:"fire-iid-compat",[fj]:"fire-fcm",[mj]:"fire-fcm-compat",[pj]:"fire-perf",[gj]:"fire-perf-compat",[yj]:"fire-rc",[_j]:"fire-rc-compat",[vj]:"fire-gcs",[wj]:"fire-gcs-compat",[xj]:"fire-fst",[Tj]:"fire-fst-compat",[bj]:"fire-vertex","fire-js":"fire-js",[Ej]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=new Map,Ij=new Map,q_=new Map;function tT(t,e){try{t.container.addComponent(e)}catch(n){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(q_.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;q_.set(e,t);for(const n of hp.values())tT(n,t);for(const n of Ij.values())tT(n,t);return!0}function Ql(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ss(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jl=new Yu("app","Firebase",Pj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=Sj;function IC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:W_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw jl.create("bad-app-name",{appName:String(i)});if(n||(n=_C()),!n)throw jl.create("no-options");const a=hp.get(i);if(a){if(Vl(n,a.options)&&Vl(r,a.config))return a;throw jl.create("duplicate-app",{appName:i})}const u=new ML(i);for(const f of q_.values())u.addComponent(f);const h=new Aj(n,r,u);return hp.set(i,h),h}function Jp(t=W_){const e=hp.get(t);if(!e&&t===W_&&_C())return IC();if(!e)throw jl.create("no-app",{appName:t});return e}function mi(t,e,n){let r=Cj[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(u.join(" "));return}zs(new us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="firebase-heartbeat-database",Nj=1,Fh="firebase-heartbeat-store";let Yy=null;function PC(){return Yy||(Yy=CC(kj,Nj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fh)}catch(n){console.warn(n)}}}}).catch(t=>{throw jl.create("idb-open",{originalErrorMessage:t.message})})),Yy}async function Rj(t){try{const n=(await PC()).transaction(Fh),r=await n.objectStore(Fh).get(AC(t));return await n.done,r}catch(e){if(e instanceof fs)ha.warn(e.message);else{const n=jl.create("idb-get",{originalErrorMessage:e?.message});ha.warn(n.message)}}}async function nT(t,e){try{const r=(await PC()).transaction(Fh,"readwrite");await r.objectStore(Fh).put(e,AC(t)),await r.done}catch(n){if(n instanceof fs)ha.warn(n.message);else{const r=jl.create("idb-set",{originalErrorMessage:n?.message});ha.warn(r.message)}}}function AC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=1024,jj=30;class Dj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Oj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>jj){const i=Vj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ha.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rT(),{heartbeatsToSend:n,unsentEntries:r}=Mj(this._heartbeatsCache.heartbeats),i=dp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ha.warn(e),""}}}function rT(){return new Date().toISOString().substring(0,10)}function Mj(t,e=Lj){const n=[];let r=t.slice();for(const i of t){const a=n.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),iT(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Oj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bC()?TC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iT(t){return dp(JSON.stringify({version:2,heartbeats:t})).length}function Vj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){zs(new us("platform-logger",e=>new YL(e),"PRIVATE")),zs(new us("heartbeat",e=>new Dj(e),"PRIVATE")),mi(H_,eT,t),mi(H_,eT,"esm2020"),mi("fire-js","")}Fj("");var Uj="firebase",zj="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(Uj,zj,"app");const kC="@firebase/installations",lw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=1e4,RC=`w:${lw}`,LC="FIS_v2",Bj="https://firebaseinstallations.googleapis.com/v1",$j=3600*1e3,Hj="installations",Wj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Bu=new Yu(Hj,Wj,qj);function jC(t){return t instanceof fs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC({projectId:t}){return`${Bj}/projects/${t}/installations`}function MC(t){return{token:t.token,requestStatus:2,expiresIn:Gj(t.expiresIn),creationTime:Date.now()}}async function OC(t,e){const r=(await e.json()).error;return Bu.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function VC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Zj(t,{refreshToken:e}){const n=VC(t);return n.append("Authorization",Kj(e)),n}async function FC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Gj(t){return Number(t.replace("s","000"))}function Kj(t){return`${LC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=DC(t),i=VC(t),a=e.getImmediate({optional:!0});if(a){const _=await a.getHeartbeatsHeader();_&&i.append("x-firebase-client",_)}const u={fid:n,authVersion:LC,appId:t.appId,sdkVersion:RC},h={method:"POST",headers:i,body:JSON.stringify(u)},f=await FC(()=>fetch(r,h));if(f.ok){const _=await f.json();return{fid:_.fid||n,registrationStatus:2,refreshToken:_.refreshToken,authToken:MC(_.authToken)}}else throw await OC("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=/^[cdef][\w-]{21}$/,Z_="";function Jj(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=eD(t);return Xj.test(n)?n:Z_}catch{return Z_}}function eD(t){return Yj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Map;function BC(t,e){const n=eg(t);$C(n,e),tD(n,e)}function $C(t,e){const n=zC.get(t);if(n)for(const r of n)r(e)}function tD(t,e){const n=nD();n&&n.postMessage({key:t,fid:e}),rD()}let ku=null;function nD(){return!ku&&"BroadcastChannel"in self&&(ku=new BroadcastChannel("[Firebase] FID Change"),ku.onmessage=t=>{$C(t.data.key,t.data.fid)}),ku}function rD(){zC.size===0&&ku&&(ku.close(),ku=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="firebase-installations-database",sD=1,$u="firebase-installations-store";let Xy=null;function uw(){return Xy||(Xy=CC(iD,sD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($u)}}})),Xy}async function fp(t,e){const n=eg(t),i=(await uw()).transaction($u,"readwrite"),a=i.objectStore($u),u=await a.get(n);return await a.put(e,n),await i.done,(!u||u.fid!==e.fid)&&BC(t,e.fid),e}async function HC(t){const e=eg(t),r=(await uw()).transaction($u,"readwrite");await r.objectStore($u).delete(e),await r.done}async function tg(t,e){const n=eg(t),i=(await uw()).transaction($u,"readwrite"),a=i.objectStore($u),u=await a.get(n),h=e(u);return h===void 0?await a.delete(n):await a.put(h,n),await i.done,h&&(!u||u.fid!==h.fid)&&BC(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(t){let e;const n=await tg(t.appConfig,r=>{const i=oD(r),a=aD(t,i);return e=a.registrationPromise,a.installationEntry});return n.fid===Z_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function oD(t){const e=t||{fid:Jj(),registrationStatus:0};return WC(e)}function aD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Bu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uD(t)}:{installationEntry:e}}async function lD(t,e){try{const n=await Qj(t,e);return fp(t.appConfig,n)}catch(n){throw jC(n)&&n.customData.serverCode===409?await HC(t.appConfig):await fp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function uD(t){let e=await sT(t.appConfig);for(;e.registrationStatus===1;)await UC(100),e=await sT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await cw(t);return r||n}return e}function sT(t){return tg(t,e=>{if(!e)throw Bu.create("installation-not-found");return WC(e)})}function WC(t){return cD(t)?{fid:t.fid,registrationStatus:0}:t}function cD(t){return t.registrationStatus===1&&t.registrationTime+NC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD({appConfig:t,heartbeatServiceProvider:e},n){const r=hD(t,n),i=Zj(t,n),a=e.getImmediate({optional:!0});if(a){const _=await a.getHeartbeatsHeader();_&&i.append("x-firebase-client",_)}const u={installation:{sdkVersion:RC,appId:t.appId}},h={method:"POST",headers:i,body:JSON.stringify(u)},f=await FC(()=>fetch(r,h));if(f.ok){const _=await f.json();return MC(_)}else throw await OC("Generate Auth Token",f)}function hD(t,{fid:e}){return`${DC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(t,e=!1){let n;const r=await tg(t.appConfig,a=>{if(!qC(a))throw Bu.create("not-registered");const u=a.authToken;if(!e&&pD(u))return a;if(u.requestStatus===1)return n=fD(t,e),a;{if(!navigator.onLine)throw Bu.create("app-offline");const h=yD(a);return n=mD(t,h),h}});return n?await n:r.authToken}async function fD(t,e){let n=await oT(t.appConfig);for(;n.authToken.requestStatus===1;)await UC(100),n=await oT(t.appConfig);const r=n.authToken;return r.requestStatus===0?dw(t,e):r}function oT(t){return tg(t,e=>{if(!qC(e))throw Bu.create("not-registered");const n=e.authToken;return _D(n)?{...e,authToken:{requestStatus:0}}:e})}async function mD(t,e){try{const n=await dD(t,e),r={...e,authToken:n};return await fp(t.appConfig,r),n}catch(n){if(jC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await HC(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await fp(t.appConfig,r)}throw n}}function qC(t){return t!==void 0&&t.registrationStatus===2}function pD(t){return t.requestStatus===2&&!gD(t)}function gD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$j}function yD(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function _D(t){return t.requestStatus===1&&t.requestTime+NC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t){const e=t,{installationEntry:n,registrationPromise:r}=await cw(e);return r?r.catch(console.error):dw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e=!1){const n=t;return await xD(n),(await dw(n,e)).token}async function xD(t){const{registrationPromise:e}=await cw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t){if(!t||!t.options)throw Jy("App Configuration");if(!t.name)throw Jy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Jy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Jy(t){return Bu.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="installations",TD="installations-internal",ED=t=>{const e=t.getProvider("app").getImmediate(),n=bD(e),r=Ql(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},SD=t=>{const e=t.getProvider("app").getImmediate(),n=Ql(e,ZC).getImmediate();return{getId:()=>vD(n),getToken:i=>wD(n,i)}};function CD(){zs(new us(ZC,ED,"PUBLIC")),zs(new us(TD,SD,"PRIVATE"))}CD();mi(kC,lw);mi(kC,lw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="analytics",ID="firebase_id",PD="origin",AD=60*1e3,kD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new Xp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ni=new Yu("analytics","Analytics",ND);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){if(!t.startsWith(hw)){const e=Ni.create("invalid-gtag-resource",{gtagURL:t});return pi.warn(e.message),""}return t}function GC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function LD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jD(t,e){const n=LD("firebase-js-sdk-policy",{createScriptURL:RD}),r=document.createElement("script"),i=`${hw}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function DD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function MD(t,e,n,r,i,a){const u=r[i];try{if(u)await e[u];else{const f=(await GC(n)).find(_=>_.measurementId===i);f&&await e[f.appId]}}catch(h){pi.error(h)}t("config",i,a)}async function OD(t,e,n,r,i){try{let a=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const h=await GC(n);for(const f of u){const _=h.find(T=>T.measurementId===f),v=_&&e[_.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,i||{})}catch(a){pi.error(a)}}function VD(t,e,n,r){async function i(a,...u){try{if(a==="event"){const[h,f]=u;await OD(t,e,n,h,f)}else if(a==="config"){const[h,f]=u;await MD(t,e,n,r,h,f)}else if(a==="consent"){const[h,f]=u;t("consent",h,f)}else if(a==="get"){const[h,f,_]=u;t("get",h,f,_)}else if(a==="set"){const[h]=u;t("set",h)}else t(a,...u)}catch(h){pi.error(h)}}return i}function FD(t,e,n,r,i){let a=function(...u){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=VD(a,t,e,n),{gtagCore:a,wrappedGtag:window[i]}}function UD(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(hw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=30,BD=1e3;class $D{constructor(e={},n=BD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const KC=new $D;function HD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function WD(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:HD(n)},i=kD.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let u="";try{const h=await a.json();h.error?.message&&(u=h.error.message)}catch{}throw Ni.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u})}return a.json()}async function qD(t,e=KC,n){const{appId:r,apiKey:i,measurementId:a}=t.options;if(!r)throw Ni.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Ni.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new KD;return setTimeout(async()=>{h.abort()},AD),QC({appId:r,apiKey:i,measurementId:a},u,h,e)}async function QC(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=KC){const{appId:a,measurementId:u}=t;try{await ZD(r,e)}catch(h){if(u)return pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:u};throw h}try{const h=await WD(t);return i.deleteThrottleMetadata(a),h}catch(h){const f=h;if(!GD(f)){if(i.deleteThrottleMetadata(a),u)return pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:a,measurementId:u};throw h}const _=Number(f?.customData?.httpStatus)===503?Qb(n,i.intervalMillis,zD):Qb(n,i.intervalMillis),v={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(a,v),pi.debug(`Calling attemptFetch again in ${_} millis`),QC(t,v,r,i)}}function ZD(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(a),r(Ni.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function GD(t){if(!(t instanceof fs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class KD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QD(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const a=await e,u={...r,send_to:a};t("event",n,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(){if(bC())try{await TC()}catch(t){return pi.warn(Ni.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return pi.warn(Ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function XD(t,e,n,r,i,a,u){const h=qD(t);h.then(E=>{n[E.measurementId]=E.appId,t.options.measurementId&&E.measurementId!==t.options.measurementId&&pi.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>pi.error(E)),e.push(h);const f=YD().then(E=>{if(E)return r.getId()}),[_,v]=await Promise.all([h,f]);UD(a)||jD(a,_.measurementId),i("js",new Date);const T=u?.config??{};return T[PD]="firebase",T.update=!0,v!=null&&(T[ID]=v),i("config",_.measurementId,T),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.app=e}_delete(){return delete Th[this.app.options.appId],Promise.resolve()}}let Th={},aT=[];const lT={};let e_="dataLayer",eM="gtag",uT,YC,cT=!1;function tM(){const t=[];if(xC()&&t.push("This is a browser extension environment."),xL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ni.create("invalid-analytics-context",{errorInfo:e});pi.warn(n.message)}}function nM(t,e,n){tM();const r=t.options.appId;if(!r)throw Ni.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ni.create("no-api-key");if(Th[r]!=null)throw Ni.create("already-exists",{id:r});if(!cT){DD(e_);const{wrappedGtag:a,gtagCore:u}=FD(Th,aT,lT,e_,eM);YC=a,uT=u,cT=!0}return Th[r]=XD(t,aT,lT,e,uT,e_,n),new JD(t)}function rM(t=Jp()){t=ln(t);const e=Ql(t,mp);return e.isInitialized()?e.getImmediate():iM(t)}function iM(t,e={}){const n=Ql(t,mp);if(n.isInitialized()){const i=n.getImmediate();if(Vl(e,n.getOptions()))return i;throw Ni.create("already-initialized")}return n.initialize({options:e})}function sM(t,e,n,r){t=ln(t),QD(YC,Th[t.app.options.appId],e,n,r).catch(i=>pi.error(i))}const dT="@firebase/analytics",hT="0.10.18";function oM(){zs(new us(mp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return nM(r,i,n)},"PUBLIC")),zs(new us("analytics-internal",t,"PRIVATE")),mi(dT,hT),mi(dT,hT,"esm2020");function t(e){try{const n=e.getProvider(mp).getImmediate();return{logEvent:(r,i,a)=>sM(n,r,i,a)}}catch(n){throw Ni.create("interop-component-reg-failed",{reason:n})}}}oM();function XC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aM=XC,JC=new Yu("auth","Firebase",XC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new Xp("@firebase/auth");function lM(t,...e){pp.logLevel<=Ct.WARN&&pp.warn(`Auth (${Xu}): ${t}`,...e)}function Wm(t,...e){pp.logLevel<=Ct.ERROR&&pp.error(`Auth (${Xu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t,...e){throw mw(t,...e)}function Fs(t,...e){return mw(t,...e)}function fw(t,e,n){const r={...aM(),[e]:n};return new Yu("auth","Firebase",r).create(e,{appName:t.name})}function Ou(t){return fw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uM(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Eo(t,"argument-error"),fw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JC.create(t,...e)}function ct(t,e,...n){if(!t)throw mw(e,...n)}function oa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wm(e),new Error(e)}function fa(t,e){t||oa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(){return typeof self<"u"&&self.location?.href||""}function cM(){return fT()==="http:"||fT()==="https:"}function fT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cM()||xC()||"connection"in navigator)?navigator.onLine:!0}function hM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.shortDelay=e,this.longDelay=n,fa(n>e,"Short delay should be less than long delay!"),this.isMobile=pL()||_L()}get(){return dM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e){fa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pM=new of(3e4,6e4);function gw(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ju(t,e,n,r,i={}){return tI(t,i,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=sf({key:t.config.apiKey,...u}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const _={method:e,headers:f,...a};return yL()||(_.referrerPolicy="no-referrer"),t.emulatorConfig&&Kl(t.emulatorConfig.host)&&(_.credentials="include"),eI.fetch()(await nI(t,t.config.apiHost,n,h),_)})}async function tI(t,e,n){t._canInitEmulator=!1;const r={...fM,...e};try{const i=new yM(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Em(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,_]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Em(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Em(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Em(t,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw fw(t,v,_);Eo(t,v)}}catch(i){if(i instanceof fs)throw i;Eo(t,"network-request-failed",{message:String(i)})}}async function gM(t,e,n,r,i={}){const a=await Ju(t,e,n,r,i);return"mfaPendingCredential"in a&&Eo(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function nI(t,e,n,r){const i=`${e}${n}?${r}`,a=t,u=a.config.emulator?pw(t.config,i):`${t.config.apiScheme}://${i}`;return mM.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class yM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),pM.get())})}}function Em(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fs(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e){return Ju(t,"POST","/v1/accounts:delete",e)}async function gp(t,e){return Ju(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vM(t,e=!1){const n=ln(t),r=await n.getIdToken(e),i=yw(r);ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,u=a?.sign_in_provider;return{claims:i,token:r,authTime:Eh(t_(i.auth_time)),issuedAtTime:Eh(t_(i.iat)),expirationTime:Eh(t_(i.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function t_(t){return Number(t)*1e3}function yw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wm("JWT malformed, contained fewer than 3 sections"),null;try{const i=pC(n);return i?JSON.parse(i):(Wm("Failed to decode base64 JWT payload"),null)}catch(i){return Wm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mT(t){const e=yw(t);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fs&&wM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eh(this.lastLoginAt),this.creationTime=Eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(t){const e=t.auth,n=await t.getIdToken(),r=await ad(t,gp(e,{idToken:n}));ct(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?rI(i.providerUserInfo):[],u=TM(t.providerData,a),h=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!u?.length,_=h?f:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new K_(i.createdAt,i.lastLoginAt),isAnonymous:_};Object.assign(t,v)}async function bM(t){const e=ln(t);await yp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){const n=await tI(t,{},async()=>{const r=sf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,u=await nI(t,i,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return t.emulatorConfig&&Kl(t.emulatorConfig.host)&&(f.credentials="include"),eI.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SM(t,e){return Ju(t,"POST","/v2/accounts:revokeToken",gw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const n=mT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await EM(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,u=new td;return r&&(ct(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(ct(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),a&&(ct(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new td,this.toJSON())}_performRefresh(){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t,e){ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new xM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new K_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ad(this,this.stsTokenManager.getToken(this.auth,e));return ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vM(this,e)}reload(){return bM(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(Ou(this.auth));const e=await this.getIdToken();return await ad(this,_M(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,f=n._redirectEventId??void 0,_=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:A,providerData:D,stsTokenManager:U}=n;ct(T&&U,e,"internal-error");const H=td.fromJSON(this.name,U);ct(typeof T=="string",e,"internal-error"),xl(r,e.name),xl(i,e.name),ct(typeof E=="boolean",e,"internal-error"),ct(typeof A=="boolean",e,"internal-error"),xl(a,e.name),xl(u,e.name),xl(h,e.name),xl(f,e.name),xl(_,e.name),xl(v,e.name);const W=new Vs({uid:T,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:A,photoURL:u,phoneNumber:a,tenantId:h,stsTokenManager:H,createdAt:_,lastLoginAt:v});return D&&Array.isArray(D)&&(W.providerData=D.map(G=>({...G}))),f&&(W._redirectEventId=f),W}static async _fromIdTokenResponse(e,n,r=!1){const i=new td;i.updateFromServerResponse(n);const a=new Vs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yp(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ct(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?rI(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!a?.length,h=new td;h.updateFromIdToken(r);const f=new Vs({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),_={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new K_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,_),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=new Map;function aa(t){fa(t instanceof Function,"Expected a class definition");let e=pT.get(t);return e?(fa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iI.type="NONE";const gT=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e,n){return`firebase:${t}:${e}:${n}`}class nd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=qm(this.userKey,i.apiKey,a),this.fullPersistenceKey=qm("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gp(this.auth,{idToken:e}).catch(()=>{});return n?Vs._fromGetAccountInfoResponse(this.auth,n,e):null}return Vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nd(aa(gT),e,r);const i=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let a=i[0]||aa(gT);const u=qm(r,e.config.apiKey,e.name);let h=null;for(const _ of n)try{const v=await _._get(u);if(v){let T;if(typeof v=="string"){const E=await gp(e,{idToken:v}).catch(()=>{});if(!E)break;T=await Vs._fromGetAccountInfoResponse(e,E,v)}else T=Vs._fromJSON(e,v);_!==a&&(h=T),a=_;break}}catch{}const f=i.filter(_=>_._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new nd(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(n.map(async _=>{if(_!==a)try{await _._remove(u)}catch{}})),new nd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cI(e))return"Blackberry";if(dI(e))return"Webos";if(oI(e))return"Safari";if((e.includes("chrome/")||aI(e))&&!e.includes("edge/"))return"Chrome";if(uI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function sI(t=kr()){return/firefox\//i.test(t)}function oI(t=kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aI(t=kr()){return/crios\//i.test(t)}function lI(t=kr()){return/iemobile/i.test(t)}function uI(t=kr()){return/android/i.test(t)}function cI(t=kr()){return/blackberry/i.test(t)}function dI(t=kr()){return/webos/i.test(t)}function _w(t=kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CM(t=kr()){return _w(t)&&!!window.navigator?.standalone}function IM(){return vL()&&document.documentMode===10}function hI(t=kr()){return _w(t)||uI(t)||dI(t)||cI(t)||/windows phone/i.test(t)||lI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e=[]){let n;switch(t){case"Browser":n=yT(kr());break;case"Worker":n=`${yT(kr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(t,e={}){return Ju(t,"GET","/v2/passwordPolicy",gw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=6;class NM{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _T(this),this.idTokenSubscription=new _T(this),this.beforeStateQueue=new PM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=aa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await nd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gp(this,{idToken:e}),r=await Vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ss(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&h?.user&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ss(this.app))return Promise.reject(Ou(this));const n=e?ln(e):null;return n&&ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ss(this.app)?Promise.reject(Ou(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ss(this.app)?Promise.reject(Ou(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AM(this),n=new NM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SM(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&aa(e)||this._popupRedirectResolver;ct(n,this,"argument-error"),this.redirectPersistenceManager=await nd.create(this,[aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ng(t){return ln(t)}class _T{constructor(e){this.auth=e,this.observer=null,this.addObserver=CL(n=>this.observer=n)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LM(t){vw=t}function jM(t){return vw.loadJS(t)}function DM(){return vw.gapiScript}function MM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t,e){const n=Ql(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Vl(a,e??{}))return i;Eo(i,"already-initialized")}return n.initialize({options:e})}function VM(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(aa);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function FM(t,e,n){const r=ng(t);ct(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=mI(e),{host:u,port:h}=UM(e),f=h===null?"":`:${h}`,_={url:`${a}//${u}${f}/`},v=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ct(Vl(_,r.config.emulator)&&Vl(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Kl(u)?(sw(`${a}//${u}${f}`),ow("Auth",!0)):zM()}function mI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UM(t){const e=mI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:vT(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:vT(u)}}}function vT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,n){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t,e){return gM(t,"POST","/v1/accounts:signInWithIdp",gw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="http://localhost";class Hu extends pI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Eo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const u=new Hu(r,i);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return rd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rd(e,n)}buildRequest(){const e={requestUri:BM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends ww{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends af{constructor(){super("facebook.com")}static credential(e){return Hu._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends af{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hu._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ia.credential(n,r)}catch{return null}}}ia.GOOGLE_SIGN_IN_METHOD="google.com";ia.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends af{constructor(){super("github.com")}static credential(e){return Hu._fromParams({providerId:Cl.PROVIDER_ID,signInMethod:Cl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cl.credentialFromTaggedObject(e)}static credentialFromError(e){return Cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cl.credential(e.oauthAccessToken)}catch{return null}}}Cl.GITHUB_SIGN_IN_METHOD="github.com";Cl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends af{constructor(){super("twitter.com")}static credential(e,n){return Hu._fromParams({providerId:Il.PROVIDER_ID,signInMethod:Il.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Il.credentialFromTaggedObject(e)}static credentialFromError(e){return Il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Il.credential(n,r)}catch{return null}}}Il.TWITTER_SIGN_IN_METHOD="twitter.com";Il.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Vs._fromIdTokenResponse(e,r,i),u=wT(r);return new ld({user:a,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=wT(r);return new ld({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function wT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends fs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_p.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _p(e,n,r,i)}}function gI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_p._fromErrorAndOperation(t,a,e,r):a})}async function $M(t,e,n=!1){const r=await ad(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ld._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e,n=!1){const{auth:r}=t;if(ss(r.app))return Promise.reject(Ou(r));const i="reauthenticate";try{const a=await ad(t,gI(r,i,e,t),n);ct(a.idToken,r,"internal-error");const u=yw(a.idToken);ct(u,r,"internal-error");const{sub:h}=u;return ct(t.uid===h,r,"user-mismatch"),ld._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Eo(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t,e,n=!1){if(ss(t.app))return Promise.reject(Ou(t));const r="signIn",i=await gI(t,r,e),a=await ld._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e){return Ju(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ln(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await ad(r,qM(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function ZM(t,e,n,r){return ln(t).onIdTokenChanged(e,n,r)}function GM(t,e,n){return ln(t).beforeAuthStateChanged(e,n)}function KM(t,e,n,r){return ln(t).onAuthStateChanged(e,n,r)}function QM(t){return ln(t).signOut()}const vp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vp,"1"),this.storage.removeItem(vp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=1e3,XM=10;class _I extends yI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);IM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,XM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_I.type="LOCAL";const JM=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends yI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vI.type="SESSION";const wI=vI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new rg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,u=this.handlersMap[i];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(u).map(async _=>_(n.origin,a)),f=await eO(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const _=xw("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(T){const E=T;if(E.data.eventId===_)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(){return window}function nO(t){po().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof po().WorkerGlobalScope<"u"&&typeof po().importScripts=="function"}async function rO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iO(){return navigator?.serviceWorker?.controller||null}function sO(){return xI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="firebaseLocalStorageDb",oO=1,wp="firebaseLocalStorage",TI="fbase_key";class lf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ig(t,e){return t.transaction([wp],e?"readwrite":"readonly").objectStore(wp)}function aO(){const t=indexedDB.deleteDatabase(bI);return new lf(t).toPromise()}function Q_(){const t=indexedDB.open(bI,oO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wp,{keyPath:TI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wp)?e(r):(r.close(),await aO(),e(await Q_()))})})}async function bT(t,e,n){const r=ig(t,!0).put({[TI]:e,value:n});return new lf(r).toPromise()}async function lO(t,e){const n=ig(t,!1).get(e),r=await new lf(n).toPromise();return r===void 0?null:r.value}function TT(t,e){const n=ig(t,!0).delete(e);return new lf(n).toPromise()}const uO=800,cO=3;class EI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rg._getInstance(sO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rO(),!this.activeServiceWorker)return;this.sender=new tO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q_();return await bT(e,vp,"1"),await TT(e,vp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>TT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ig(i,!1).getAll();return new lf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EI.type="LOCAL";const dO=EI;new of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e){return e?aa(e):(ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw extends pI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hO(t){return WM(t.auth,new bw(t),t.bypassAuthState)}function fO(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),HM(n,new bw(t),t.bypassAuthState)}async function mO(t){const{auth:e,user:n}=t;return ct(n,e,"internal-error"),$M(n,new bw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hO;case"linkViaPopup":case"linkViaRedirect":return mO;case"reauthViaPopup":case"reauthViaRedirect":return fO;default:Eo(this.auth,"internal-error")}}resolve(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=new of(2e3,1e4);async function gO(t,e,n){if(ss(t.app))return Promise.reject(Fs(t,"operation-not-supported-in-this-environment"));const r=ng(t);uM(t,e,ww);const i=SI(r,n);return new Nu(r,"signInViaPopup",e,i).executeNotNull()}class Nu extends CI{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Nu.currentPopupAction&&Nu.currentPopupAction.cancel(),Nu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){fa(this.filter.length===1,"Popup operations only handle one event");const e=xw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pO.get())};e()}}Nu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="pendingRedirect",Zm=new Map;class _O extends CI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zm.get(this.auth._key());if(!e){try{const r=await vO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zm.set(this.auth._key(),e)}return this.bypassAuthState||Zm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vO(t,e){const n=bO(e),r=xO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function wO(t,e){Zm.set(t._key(),e)}function xO(t){return aa(t._redirectPersistence)}function bO(t){return qm(yO,t.config.apiKey,t.name)}async function TO(t,e,n=!1){if(ss(t.app))return Promise.reject(Ou(t));const r=ng(t),i=SI(r,e),u=await new _O(r,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=600*1e3;class SO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!II(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EO&&this.cachedEventUids.clear(),this.cachedEventUids.has(ET(e))}saveEventToCache(e){this.cachedEventUids.add(ET(e)),this.lastProcessedEventTime=Date.now()}}function ET(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function II({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function CO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return II(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e={}){return Ju(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AO=/^https?/;async function kO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IO(t);for(const n of e)try{if(NO(n))return}catch{}Eo(t,"unauthorized-domain")}function NO(t){const e=G_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!AO.test(n))return!1;if(PO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new of(3e4,6e4);function ST(){const t=po().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LO(t){return new Promise((e,n)=>{function r(){ST(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ST(),n(Fs(t,"network-request-failed"))},timeout:RO.get()})}if(po().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(po().gapi?.load)r();else{const i=MM("iframefcb");return po()[i]=()=>{gapi.load?r():n(Fs(t,"network-request-failed"))},jM(`${DM()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Gm=null,e})}let Gm=null;function jO(t){return Gm=Gm||LO(t),Gm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new of(5e3,15e3),MO="__/auth/iframe",OO="emulator/auth/iframe",VO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UO(t){const e=t.config;ct(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pw(e,OO):`https://${t.config.authDomain}/${MO}`,r={apiKey:e.apiKey,appName:t.name,v:Xu},i=FO.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${sf(r).slice(1)}`}async function zO(t){const e=await jO(t),n=po().gapi;return ct(n,t,"internal-error"),e.open({where:document.body,url:UO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const u=Fs(t,"network-request-failed"),h=po().setTimeout(()=>{a(u)},DO.get());function f(){po().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$O=500,HO=600,WO="_blank",qO="http://localhost";class CT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZO(t,e,n,r=$O,i=HO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...BO,width:r.toString(),height:i.toString(),top:a,left:u},_=kr().toLowerCase();n&&(h=aI(_)?WO:n),sI(_)&&(e=e||qO,f.scrollbars="yes");const v=Object.entries(f).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(CM(_)&&h!=="_self")return GO(e||"",h),new CT(null);const T=window.open(e||"",h,v);ct(T,t,"popup-blocked");try{T.focus()}catch{}return new CT(T)}function GO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="__/auth/handler",QO="emulator/auth/handler",YO=encodeURIComponent("fac");async function IT(t,e,n,r,i,a){ct(t.config.authDomain,t,"auth-domain-config-required"),ct(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xu,eventId:i};if(e instanceof ww){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",SL(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof af){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await t._getAppCheckToken(),_=f?`#${YO}=${encodeURIComponent(f)}`:"";return`${XO(t)}?${sf(h).slice(1)}${_}`}function XO({config:t}){return t.emulator?pw(t,QO):`https://${t.authDomain}/${KO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="webStorageSupport";class JO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wI,this._completeRedirectFn=TO,this._overrideRedirectResult=wO}async _openPopup(e,n,r,i){fa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await IT(e,n,r,G_(),i);return ZO(e,a,xw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await IT(e,n,r,G_(),i);return nO(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(fa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zO(e),r=new SO(e);return n.register("authEvent",i=>(ct(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(n_,{type:n_},i=>{const a=i?.[0]?.[n_];a!==void 0&&n(!!a),Eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hI()||oI()||_w()}}const eV=JO;var PT="@firebase/auth",AT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rV(t){zs(new us("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;ct(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fI(t)},_=new RM(r,i,a,f);return VM(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zs(new us("auth-internal",e=>{const n=ng(e.getProvider("auth").getImmediate());return(r=>new tV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(PT,AT,nV(t)),mi(PT,AT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=300,sV=vC("authIdTokenMaxAge")||iV;let kT=null;const oV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sV)return;const i=n?.token;kT!==i&&(kT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aV(t=Jp()){const e=Ql(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OM(t,{popupRedirectResolver:eV,persistence:[dO,JM,wI]}),r=vC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=oV(a.toString());GM(n,u,()=>u(n.currentUser)),ZM(n,h=>u(h))}}const i=gC("auth");return i&&FM(n,`http://${i}`),n}function lV(){return document.getElementsByTagName("head")?.[0]??document}LM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Fs("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",lV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rV("Browser");var NT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dl,PI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,j){function V(){}V.prototype=j.prototype,F.D=j.prototype,F.prototype=new V,F.prototype.constructor=F,F.C=function(B,z,M){for(var k=Array(arguments.length-2),le=2;le<arguments.length;le++)k[le-2]=arguments[le];return j.prototype[z].apply(B,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,j,V){V||(V=0);var B=Array(16);if(typeof j=="string")for(var z=0;16>z;++z)B[z]=j.charCodeAt(V++)|j.charCodeAt(V++)<<8|j.charCodeAt(V++)<<16|j.charCodeAt(V++)<<24;else for(z=0;16>z;++z)B[z]=j[V++]|j[V++]<<8|j[V++]<<16|j[V++]<<24;j=F.g[0],V=F.g[1],z=F.g[2];var M=F.g[3],k=j+(M^V&(z^M))+B[0]+3614090360&4294967295;j=V+(k<<7&4294967295|k>>>25),k=M+(z^j&(V^z))+B[1]+3905402710&4294967295,M=j+(k<<12&4294967295|k>>>20),k=z+(V^M&(j^V))+B[2]+606105819&4294967295,z=M+(k<<17&4294967295|k>>>15),k=V+(j^z&(M^j))+B[3]+3250441966&4294967295,V=z+(k<<22&4294967295|k>>>10),k=j+(M^V&(z^M))+B[4]+4118548399&4294967295,j=V+(k<<7&4294967295|k>>>25),k=M+(z^j&(V^z))+B[5]+1200080426&4294967295,M=j+(k<<12&4294967295|k>>>20),k=z+(V^M&(j^V))+B[6]+2821735955&4294967295,z=M+(k<<17&4294967295|k>>>15),k=V+(j^z&(M^j))+B[7]+4249261313&4294967295,V=z+(k<<22&4294967295|k>>>10),k=j+(M^V&(z^M))+B[8]+1770035416&4294967295,j=V+(k<<7&4294967295|k>>>25),k=M+(z^j&(V^z))+B[9]+2336552879&4294967295,M=j+(k<<12&4294967295|k>>>20),k=z+(V^M&(j^V))+B[10]+4294925233&4294967295,z=M+(k<<17&4294967295|k>>>15),k=V+(j^z&(M^j))+B[11]+2304563134&4294967295,V=z+(k<<22&4294967295|k>>>10),k=j+(M^V&(z^M))+B[12]+1804603682&4294967295,j=V+(k<<7&4294967295|k>>>25),k=M+(z^j&(V^z))+B[13]+4254626195&4294967295,M=j+(k<<12&4294967295|k>>>20),k=z+(V^M&(j^V))+B[14]+2792965006&4294967295,z=M+(k<<17&4294967295|k>>>15),k=V+(j^z&(M^j))+B[15]+1236535329&4294967295,V=z+(k<<22&4294967295|k>>>10),k=j+(z^M&(V^z))+B[1]+4129170786&4294967295,j=V+(k<<5&4294967295|k>>>27),k=M+(V^z&(j^V))+B[6]+3225465664&4294967295,M=j+(k<<9&4294967295|k>>>23),k=z+(j^V&(M^j))+B[11]+643717713&4294967295,z=M+(k<<14&4294967295|k>>>18),k=V+(M^j&(z^M))+B[0]+3921069994&4294967295,V=z+(k<<20&4294967295|k>>>12),k=j+(z^M&(V^z))+B[5]+3593408605&4294967295,j=V+(k<<5&4294967295|k>>>27),k=M+(V^z&(j^V))+B[10]+38016083&4294967295,M=j+(k<<9&4294967295|k>>>23),k=z+(j^V&(M^j))+B[15]+3634488961&4294967295,z=M+(k<<14&4294967295|k>>>18),k=V+(M^j&(z^M))+B[4]+3889429448&4294967295,V=z+(k<<20&4294967295|k>>>12),k=j+(z^M&(V^z))+B[9]+568446438&4294967295,j=V+(k<<5&4294967295|k>>>27),k=M+(V^z&(j^V))+B[14]+3275163606&4294967295,M=j+(k<<9&4294967295|k>>>23),k=z+(j^V&(M^j))+B[3]+4107603335&4294967295,z=M+(k<<14&4294967295|k>>>18),k=V+(M^j&(z^M))+B[8]+1163531501&4294967295,V=z+(k<<20&4294967295|k>>>12),k=j+(z^M&(V^z))+B[13]+2850285829&4294967295,j=V+(k<<5&4294967295|k>>>27),k=M+(V^z&(j^V))+B[2]+4243563512&4294967295,M=j+(k<<9&4294967295|k>>>23),k=z+(j^V&(M^j))+B[7]+1735328473&4294967295,z=M+(k<<14&4294967295|k>>>18),k=V+(M^j&(z^M))+B[12]+2368359562&4294967295,V=z+(k<<20&4294967295|k>>>12),k=j+(V^z^M)+B[5]+4294588738&4294967295,j=V+(k<<4&4294967295|k>>>28),k=M+(j^V^z)+B[8]+2272392833&4294967295,M=j+(k<<11&4294967295|k>>>21),k=z+(M^j^V)+B[11]+1839030562&4294967295,z=M+(k<<16&4294967295|k>>>16),k=V+(z^M^j)+B[14]+4259657740&4294967295,V=z+(k<<23&4294967295|k>>>9),k=j+(V^z^M)+B[1]+2763975236&4294967295,j=V+(k<<4&4294967295|k>>>28),k=M+(j^V^z)+B[4]+1272893353&4294967295,M=j+(k<<11&4294967295|k>>>21),k=z+(M^j^V)+B[7]+4139469664&4294967295,z=M+(k<<16&4294967295|k>>>16),k=V+(z^M^j)+B[10]+3200236656&4294967295,V=z+(k<<23&4294967295|k>>>9),k=j+(V^z^M)+B[13]+681279174&4294967295,j=V+(k<<4&4294967295|k>>>28),k=M+(j^V^z)+B[0]+3936430074&4294967295,M=j+(k<<11&4294967295|k>>>21),k=z+(M^j^V)+B[3]+3572445317&4294967295,z=M+(k<<16&4294967295|k>>>16),k=V+(z^M^j)+B[6]+76029189&4294967295,V=z+(k<<23&4294967295|k>>>9),k=j+(V^z^M)+B[9]+3654602809&4294967295,j=V+(k<<4&4294967295|k>>>28),k=M+(j^V^z)+B[12]+3873151461&4294967295,M=j+(k<<11&4294967295|k>>>21),k=z+(M^j^V)+B[15]+530742520&4294967295,z=M+(k<<16&4294967295|k>>>16),k=V+(z^M^j)+B[2]+3299628645&4294967295,V=z+(k<<23&4294967295|k>>>9),k=j+(z^(V|~M))+B[0]+4096336452&4294967295,j=V+(k<<6&4294967295|k>>>26),k=M+(V^(j|~z))+B[7]+1126891415&4294967295,M=j+(k<<10&4294967295|k>>>22),k=z+(j^(M|~V))+B[14]+2878612391&4294967295,z=M+(k<<15&4294967295|k>>>17),k=V+(M^(z|~j))+B[5]+4237533241&4294967295,V=z+(k<<21&4294967295|k>>>11),k=j+(z^(V|~M))+B[12]+1700485571&4294967295,j=V+(k<<6&4294967295|k>>>26),k=M+(V^(j|~z))+B[3]+2399980690&4294967295,M=j+(k<<10&4294967295|k>>>22),k=z+(j^(M|~V))+B[10]+4293915773&4294967295,z=M+(k<<15&4294967295|k>>>17),k=V+(M^(z|~j))+B[1]+2240044497&4294967295,V=z+(k<<21&4294967295|k>>>11),k=j+(z^(V|~M))+B[8]+1873313359&4294967295,j=V+(k<<6&4294967295|k>>>26),k=M+(V^(j|~z))+B[15]+4264355552&4294967295,M=j+(k<<10&4294967295|k>>>22),k=z+(j^(M|~V))+B[6]+2734768916&4294967295,z=M+(k<<15&4294967295|k>>>17),k=V+(M^(z|~j))+B[13]+1309151649&4294967295,V=z+(k<<21&4294967295|k>>>11),k=j+(z^(V|~M))+B[4]+4149444226&4294967295,j=V+(k<<6&4294967295|k>>>26),k=M+(V^(j|~z))+B[11]+3174756917&4294967295,M=j+(k<<10&4294967295|k>>>22),k=z+(j^(M|~V))+B[2]+718787259&4294967295,z=M+(k<<15&4294967295|k>>>17),k=V+(M^(z|~j))+B[9]+3951481745&4294967295,F.g[0]=F.g[0]+j&4294967295,F.g[1]=F.g[1]+(z+(k<<21&4294967295|k>>>11))&4294967295,F.g[2]=F.g[2]+z&4294967295,F.g[3]=F.g[3]+M&4294967295}r.prototype.u=function(F,j){j===void 0&&(j=F.length);for(var V=j-this.blockSize,B=this.B,z=this.h,M=0;M<j;){if(z==0)for(;M<=V;)i(this,F,M),M+=this.blockSize;if(typeof F=="string"){for(;M<j;)if(B[z++]=F.charCodeAt(M++),z==this.blockSize){i(this,B),z=0;break}}else for(;M<j;)if(B[z++]=F[M++],z==this.blockSize){i(this,B),z=0;break}}this.h=z,this.o+=j},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var j=1;j<F.length-8;++j)F[j]=0;var V=8*this.o;for(j=F.length-8;j<F.length;++j)F[j]=V&255,V/=256;for(this.u(F),F=Array(16),j=V=0;4>j;++j)for(var B=0;32>B;B+=8)F[V++]=this.g[j]>>>B&255;return F};function a(F,j){var V=h;return Object.prototype.hasOwnProperty.call(V,F)?V[F]:V[F]=j(F)}function u(F,j){this.h=j;for(var V=[],B=!0,z=F.length-1;0<=z;z--){var M=F[z]|0;B&&M==j||(V[z]=M,B=!1)}this.g=V}var h={};function f(F){return-128<=F&&128>F?a(F,function(j){return new u([j|0],0>j?-1:0)}):new u([F|0],0>F?-1:0)}function _(F){if(isNaN(F)||!isFinite(F))return T;if(0>F)return H(_(-F));for(var j=[],V=1,B=0;F>=V;B++)j[B]=F/V|0,V*=4294967296;return new u(j,0)}function v(F,j){if(F.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(F.charAt(0)=="-")return H(v(F.substring(1),j));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=_(Math.pow(j,8)),B=T,z=0;z<F.length;z+=8){var M=Math.min(8,F.length-z),k=parseInt(F.substring(z,z+M),j);8>M?(M=_(Math.pow(j,M)),B=B.j(M).add(_(k))):(B=B.j(V),B=B.add(_(k)))}return B}var T=f(0),E=f(1),A=f(16777216);t=u.prototype,t.m=function(){if(U(this))return-H(this).m();for(var F=0,j=1,V=0;V<this.g.length;V++){var B=this.i(V);F+=(0<=B?B:4294967296+B)*j,j*=4294967296}return F},t.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(D(this))return"0";if(U(this))return"-"+H(this).toString(F);for(var j=_(Math.pow(F,6)),V=this,B="";;){var z=se(V,j).g;V=W(V,z.j(j));var M=((0<V.g.length?V.g[0]:V.h)>>>0).toString(F);if(V=z,D(V))return M+B;for(;6>M.length;)M="0"+M;B=M+B}},t.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function D(F){if(F.h!=0)return!1;for(var j=0;j<F.g.length;j++)if(F.g[j]!=0)return!1;return!0}function U(F){return F.h==-1}t.l=function(F){return F=W(this,F),U(F)?-1:D(F)?0:1};function H(F){for(var j=F.g.length,V=[],B=0;B<j;B++)V[B]=~F.g[B];return new u(V,~F.h).add(E)}t.abs=function(){return U(this)?H(this):this},t.add=function(F){for(var j=Math.max(this.g.length,F.g.length),V=[],B=0,z=0;z<=j;z++){var M=B+(this.i(z)&65535)+(F.i(z)&65535),k=(M>>>16)+(this.i(z)>>>16)+(F.i(z)>>>16);B=k>>>16,M&=65535,k&=65535,V[z]=k<<16|M}return new u(V,V[V.length-1]&-2147483648?-1:0)};function W(F,j){return F.add(H(j))}t.j=function(F){if(D(this)||D(F))return T;if(U(this))return U(F)?H(this).j(H(F)):H(H(this).j(F));if(U(F))return H(this.j(H(F)));if(0>this.l(A)&&0>F.l(A))return _(this.m()*F.m());for(var j=this.g.length+F.g.length,V=[],B=0;B<2*j;B++)V[B]=0;for(B=0;B<this.g.length;B++)for(var z=0;z<F.g.length;z++){var M=this.i(B)>>>16,k=this.i(B)&65535,le=F.i(z)>>>16,me=F.i(z)&65535;V[2*B+2*z]+=k*me,G(V,2*B+2*z),V[2*B+2*z+1]+=M*me,G(V,2*B+2*z+1),V[2*B+2*z+1]+=k*le,G(V,2*B+2*z+1),V[2*B+2*z+2]+=M*le,G(V,2*B+2*z+2)}for(B=0;B<j;B++)V[B]=V[2*B+1]<<16|V[2*B];for(B=j;B<2*j;B++)V[B]=0;return new u(V,0)};function G(F,j){for(;(F[j]&65535)!=F[j];)F[j+1]+=F[j]>>>16,F[j]&=65535,j++}function $(F,j){this.g=F,this.h=j}function se(F,j){if(D(j))throw Error("division by zero");if(D(F))return new $(T,T);if(U(F))return j=se(H(F),j),new $(H(j.g),H(j.h));if(U(j))return j=se(F,H(j)),new $(H(j.g),j.h);if(30<F.g.length){if(U(F)||U(j))throw Error("slowDivide_ only works with positive integers.");for(var V=E,B=j;0>=B.l(F);)V=oe(V),B=oe(B);var z=ee(V,1),M=ee(B,1);for(B=ee(B,2),V=ee(V,2);!D(B);){var k=M.add(B);0>=k.l(F)&&(z=z.add(V),M=k),B=ee(B,1),V=ee(V,1)}return j=W(F,z.j(j)),new $(z,j)}for(z=T;0<=F.l(j);){for(V=Math.max(1,Math.floor(F.m()/j.m())),B=Math.ceil(Math.log(V)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),M=_(V),k=M.j(j);U(k)||0<k.l(F);)V-=B,M=_(V),k=M.j(j);D(M)&&(M=E),z=z.add(M),F=W(F,k)}return new $(z,F)}t.A=function(F){return se(this,F).h},t.and=function(F){for(var j=Math.max(this.g.length,F.g.length),V=[],B=0;B<j;B++)V[B]=this.i(B)&F.i(B);return new u(V,this.h&F.h)},t.or=function(F){for(var j=Math.max(this.g.length,F.g.length),V=[],B=0;B<j;B++)V[B]=this.i(B)|F.i(B);return new u(V,this.h|F.h)},t.xor=function(F){for(var j=Math.max(this.g.length,F.g.length),V=[],B=0;B<j;B++)V[B]=this.i(B)^F.i(B);return new u(V,this.h^F.h)};function oe(F){for(var j=F.g.length+1,V=[],B=0;B<j;B++)V[B]=F.i(B)<<1|F.i(B-1)>>>31;return new u(V,F.h)}function ee(F,j){var V=j>>5;j%=32;for(var B=F.g.length-V,z=[],M=0;M<B;M++)z[M]=0<j?F.i(M+V)>>>j|F.i(M+V+1)<<32-j:F.i(M+V);return new u(z,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=_,u.fromString=v,Dl=u}).apply(typeof NT<"u"?NT:typeof self<"u"?self:typeof window<"u"?window:{});var Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AI,ph,kI,Km,Y_,NI,RI,LI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,b,I){return p==Array.prototype||p==Object.prototype||(p[b]=I.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sm=="object"&&Sm];for(var b=0;b<p.length;++b){var I=p[b];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(p,b){if(b)e:{var I=r;p=p.split(".");for(var O=0;O<p.length-1;O++){var te=p[O];if(!(te in I))break e;I=I[te]}p=p[p.length-1],O=I[p],b=b(O),b!=O&&b!=null&&e(I,p,{configurable:!0,writable:!0,value:b})}}function a(p,b){p instanceof String&&(p+="");var I=0,O=!1,te={next:function(){if(!O&&I<p.length){var de=I++;return{value:b(de,p[de]),done:!1}}return O=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}i("Array.prototype.values",function(p){return p||function(){return a(this,function(b,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(p){var b=typeof p;return b=b!="object"?b:p?Array.isArray(p)?"array":b:"null",b=="array"||b=="object"&&typeof p.length=="number"}function _(p){var b=typeof p;return b=="object"&&p!=null||b=="function"}function v(p,b,I){return p.call.apply(p.bind,arguments)}function T(p,b,I){if(!p)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,O),p.apply(b,te)}}return function(){return p.apply(b,arguments)}}function E(p,b,I){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,E.apply(null,arguments)}function A(p,b){var I=Array.prototype.slice.call(arguments,1);return function(){var O=I.slice();return O.push.apply(O,arguments),p.apply(this,O)}}function D(p,b){function I(){}I.prototype=b.prototype,p.aa=b.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(O,te,de){for(var ke=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)ke[Vt-2]=arguments[Vt];return b.prototype[te].apply(O,ke)}}function U(p){const b=p.length;if(0<b){const I=Array(b);for(let O=0;O<b;O++)I[O]=p[O];return I}return[]}function H(p,b){for(let I=1;I<arguments.length;I++){const O=arguments[I];if(f(O)){const te=p.length||0,de=O.length||0;p.length=te+de;for(let ke=0;ke<de;ke++)p[te+ke]=O[ke]}else p.push(O)}}class W{constructor(b,I){this.i=b,this.j=I,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function G(p){return/^[\s\xa0]*$/.test(p)}function $(){var p=h.navigator;return p&&(p=p.userAgent)?p:""}function se(p){return se[" "](p),p}se[" "]=function(){};var oe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ee(p,b,I){for(const O in p)b.call(I,p[O],O,p)}function F(p,b){for(const I in p)b.call(void 0,p[I],I,p)}function j(p){const b={};for(const I in p)b[I]=p[I];return b}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(p,b){let I,O;for(let te=1;te<arguments.length;te++){O=arguments[te];for(I in O)p[I]=O[I];for(let de=0;de<V.length;de++)I=V[de],Object.prototype.hasOwnProperty.call(O,I)&&(p[I]=O[I])}}function z(p){var b=1;p=p.split(":");const I=[];for(;0<b&&p.length;)I.push(p.shift()),b--;return p.length&&I.push(p.join(":")),I}function M(p){h.setTimeout(()=>{throw p},0)}function k(){var p=xe;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}class le{constructor(){this.h=this.g=null}add(b,I){const O=me.get();O.set(b,I),this.h?this.h.next=O:this.g=O,this.h=O}}var me=new W(()=>new ve,p=>p.reset());class ve{constructor(){this.next=this.g=this.h=null}set(b,I){this.h=b,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,J=!1,xe=new le,he=()=>{const p=h.Promise.resolve(void 0);Ee=()=>{p.then(Y)}};var Y=()=>{for(var p;p=k();){try{p.h.call(p.g)}catch(I){M(I)}var b=me;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}J=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};h.addEventListener("test",I,b),h.removeEventListener("test",I,b)}catch{}return p}();function Oe(p,b){if(Le.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,O=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(oe){e:{try{se(b.nodeName);var te=!0;break e}catch{}te=!1}te||(b=null)}}else I=="mouseover"?b=p.fromElement:I=="mouseout"&&(b=p.toElement);this.relatedTarget=b,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:De[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Oe.aa.h.call(this)}}D(Oe,Le);var De={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),gt=0;function Nt(p,b,I,O,te){this.listener=p,this.proxy=null,this.src=b,this.type=I,this.capture=!!O,this.ha=te,this.key=++gt,this.da=this.fa=!1}function Qt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Rr(p){this.src=p,this.g={},this.h=0}Rr.prototype.add=function(p,b,I,O,te){var de=p.toString();p=this.g[de],p||(p=this.g[de]=[],this.h++);var ke=Wr(p,b,O,te);return-1<ke?(b=p[ke],I||(b.fa=!1)):(b=new Nt(b,this.src,de,!!O,te),b.fa=I,p.push(b)),b};function Lr(p,b){var I=b.type;if(I in p.g){var O=p.g[I],te=Array.prototype.indexOf.call(O,b,void 0),de;(de=0<=te)&&Array.prototype.splice.call(O,te,1),de&&(Qt(b),p.g[I].length==0&&(delete p.g[I],p.h--))}}function Wr(p,b,I,O){for(var te=0;te<p.length;++te){var de=p[te];if(!de.da&&de.listener==b&&de.capture==!!I&&de.ha==O)return te}return-1}var Di="closure_lm_"+(1e6*Math.random()|0),Mi={};function Ws(p,b,I,O,te){if(Array.isArray(b)){for(var de=0;de<b.length;de++)Ws(p,b[de],I,O,te);return null}return I=Ce(I),p&&p[dt]?p.K(b,I,_(O)?!!O.capture:!1,te):ps(p,b,I,!1,O,te)}function ps(p,b,I,O,te,de){if(!b)throw Error("Invalid event type");var ke=_(te)?!!te.capture:!!te,Vt=Ne(p);if(Vt||(p[Di]=Vt=new Rr(p)),I=Vt.add(b,I,O,ke,de),I.proxy)return I;if(O=qs(),I.proxy=O,O.src=p,O.listener=I,p.addEventListener)qe||(te=ke),te===void 0&&(te=!1),p.addEventListener(b.toString(),O,te);else if(p.attachEvent)p.attachEvent(ie(b.toString()),O);else if(p.addListener&&p.removeListener)p.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return I}function qs(){function p(I){return b.call(p.src,p.listener,I)}const b=pe;return p}function gs(p,b,I,O,te){if(Array.isArray(b))for(var de=0;de<b.length;de++)gs(p,b[de],I,O,te);else O=_(O)?!!O.capture:!!O,I=Ce(I),p&&p[dt]?(p=p.i,b=String(b).toString(),b in p.g&&(de=p.g[b],I=Wr(de,I,O,te),-1<I&&(Qt(de[I]),Array.prototype.splice.call(de,I,1),de.length==0&&(delete p.g[b],p.h--)))):p&&(p=Ne(p))&&(b=p.g[b.toString()],p=-1,b&&(p=Wr(b,I,O,te)),(I=-1<p?b[p]:null)&&K(I))}function K(p){if(typeof p!="number"&&p&&!p.da){var b=p.src;if(b&&b[dt])Lr(b.i,p);else{var I=p.type,O=p.proxy;b.removeEventListener?b.removeEventListener(I,O,p.capture):b.detachEvent?b.detachEvent(ie(I),O):b.addListener&&b.removeListener&&b.removeListener(O),(I=Ne(b))?(Lr(I,p),I.h==0&&(I.src=null,b[Di]=null)):Qt(p)}}}function ie(p){return p in Mi?Mi[p]:Mi[p]="on"+p}function pe(p,b){if(p.da)p=!0;else{b=new Oe(b,this);var I=p.listener,O=p.ha||p.src;p.fa&&K(p),p=I.call(O,b)}return p}function Ne(p){return p=p[Di],p instanceof Rr?p:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(p){return typeof p=="function"?p:(p[Ae]||(p[Ae]=function(b){return p.handleEvent(b)}),p[Ae])}function Re(){ge.call(this),this.i=new Rr(this),this.M=this,this.F=null}D(Re,ge),Re.prototype[dt]=!0,Re.prototype.removeEventListener=function(p,b,I,O){gs(this,p,b,I,O)};function tt(p,b){var I,O=p.F;if(O)for(I=[];O;O=O.F)I.push(O);if(p=p.M,O=b.type||b,typeof b=="string")b=new Le(b,p);else if(b instanceof Le)b.target=b.target||p;else{var te=b;b=new Le(O,p),B(b,te)}if(te=!0,I)for(var de=I.length-1;0<=de;de--){var ke=b.g=I[de];te=wt(ke,O,!0,b)&&te}if(ke=b.g=p,te=wt(ke,O,!0,b)&&te,te=wt(ke,O,!1,b)&&te,I)for(de=0;de<I.length;de++)ke=b.g=I[de],te=wt(ke,O,!1,b)&&te}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var p=this.i,b;for(b in p.g){for(var I=p.g[b],O=0;O<I.length;O++)Qt(I[O]);delete p.g[b],p.h--}}this.F=null},Re.prototype.K=function(p,b,I,O){return this.i.add(String(p),b,!1,I,O)},Re.prototype.L=function(p,b,I,O){return this.i.add(String(p),b,!0,I,O)};function wt(p,b,I,O){if(b=p.i.g[String(b)],!b)return!0;b=b.concat();for(var te=!0,de=0;de<b.length;++de){var ke=b[de];if(ke&&!ke.da&&ke.capture==I){var Vt=ke.listener,gn=ke.ha||ke.src;ke.fa&&Lr(p.i,ke),te=Vt.call(gn,O)!==!1&&te}}return te&&!O.defaultPrevented}function Pn(p,b,I){if(typeof p=="function")I&&(p=E(p,I));else if(p&&typeof p.handleEvent=="function")p=E(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:h.setTimeout(p,b||0)}function mr(p){p.g=Pn(()=>{p.g=null,p.i&&(p.i=!1,mr(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}class $n extends ge{constructor(b,I){super(),this.m=b,this.l=I,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:mr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(p){ge.call(this),this.h=p,this.g={}}D(ys,ge);var Oi=[];function gi(p){ee(p.g,function(b,I){this.g.hasOwnProperty(I)&&K(b)},p),p.g={}}ys.prototype.N=function(){ys.aa.N.call(this),gi(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zs=h.JSON.stringify,Gs=h.JSON.parse,yi=class{stringify(p){return h.JSON.stringify(p,void 0)}parse(p){return h.JSON.parse(p,void 0)}};function Vi(){}Vi.prototype.h=null;function ka(p){return p.h||(p.h=p.i())}function Co(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){Le.call(this,"d")}D(_i,Le);function Na(){Le.call(this,"c")}D(Na,Le);var Fi={},nu=null;function Io(){return nu=nu||new Re}Fi.La="serverreachability";function ru(p){Le.call(this,Fi.La,p)}D(ru,Le);function _s(p){const b=Io();tt(b,new ru(b))}Fi.STAT_EVENT="statevent";function Po(p,b){Le.call(this,Fi.STAT_EVENT,p),this.stat=b}D(Po,Le);function un(p){const b=Io();tt(b,new Po(b,p))}Fi.Ma="timingevent";function Ra(p,b){Le.call(this,Fi.Ma,p),this.size=b}D(Ra,Le);function vi(p,b){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){p()},b)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function Qn(p,b,I,O,te,de){p.info(function(){if(p.g)if(de)for(var ke="",Vt=de.split("&"),gn=0;gn<Vt.length;gn++){var St=Vt[gn].split("=");if(1<St.length){var Ut=St[0];St=St[1];var Gt=Ut.split("_");ke=2<=Gt.length&&Gt[1]=="type"?ke+(Ut+"="+St+"&"):ke+(Ut+"=redacted&")}}else ke=null;else ke=de;return"XMLHTTP REQ ("+O+") [attempt "+te+"]: "+b+`
`+I+`
`+ke})}function We(p,b,I,O,te,de,ke){p.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+te+"]: "+b+`
`+I+`
`+de+" "+ke})}function qr(p,b,I,O){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+ic(p,I)+(O?" "+O:"")})}function La(p,b){p.info(function(){return"TIMEOUT: "+b})}Ao.prototype.info=function(){};function ic(p,b){if(!p.g)return b;if(!b)return null;try{var I=JSON.parse(b);if(I){for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var O=I[p];if(!(2>O.length)){var te=O[1];if(Array.isArray(te)&&!(1>te.length)){var de=te[0];if(de!="noop"&&de!="stop"&&de!="close")for(var ke=1;ke<te.length;ke++)te[ke]=""}}}}return Zs(I)}catch{return b}}var ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ja={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zr;function Gr(){}D(Gr,Vi),Gr.prototype.g=function(){return new XMLHttpRequest},Gr.prototype.i=function(){return{}},Zr=new Gr;function Kr(p,b,I,O){this.j=p,this.i=b,this.l=I,this.R=O||1,this.U=new ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sc}function sc(){this.i=null,this.g="",this.h=!1}var iu={},Da={};function Ma(p,b,I){p.L=1,p.v=yr(Yt(b)),p.m=I,p.P=!0,Oa(p,null)}function Oa(p,b){p.F=Date.now(),qt(p),p.A=Yt(p.v);var I=p.A,O=p.R;Array.isArray(O)||(O=[String(O)]),eo(I.i,"t",O),p.C=0,I=p.j.J,p.h=new sc,p.g=cc(p.j,I?b:null,!p.m),0<p.O&&(p.M=new $n(E(p.Y,p,p.g),p.O)),b=p.U,I=p.g,O=p.ca;var te="readystatechange";Array.isArray(te)||(te&&(Oi[0]=te.toString()),te=Oi);for(var de=0;de<te.length;de++){var ke=Ws(I,te[de],O||b.handleEvent,!1,b.h||b);if(!ke)break;b.g[ke.key]=ke}b=p.H?j(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),_s(),Qn(p.i,p.u,p.A,p.l,p.R,p.m)}Kr.prototype.ca=function(p){p=p.target;const b=this.M;b&&An(p)==3?b.j():this.Y(p)},Kr.prototype.Y=function(p){try{if(p==this.g)e:{const Gt=An(this.g);var b=this.g.Ba();const ri=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||$a(this.g)))){this.J||Gt!=4||b==7||(b==8||0>=ri?_s(3):_s(2)),No(this);var I=this.g.Z();this.X=I;t:if(oc(this)){var O=$a(this.g);p="";var te=O.length,de=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Ks(this);var ke="";break t}this.h.i=new h.TextDecoder}for(b=0;b<te;b++)this.h.h=!0,p+=this.h.i.decode(O[b],{stream:!(de&&b==te-1)});O.length=0,this.h.g+=p,this.C=0,ke=this.h.g}else ke=this.g.oa();if(this.o=I==200,We(this.i,this.u,this.A,this.l,this.R,Gt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Vt,gn=this.g;if((Vt=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Vt)){var St=Vt;break t}}St=null}if(I=St)qr(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ro(this,I);else{this.o=!1,this.s=3,un(12),Qr(this),Ks(this);break e}}if(this.P){I=!0;let cn;for(;!this.J&&this.C<ke.length;)if(cn=Va(this,ke),cn==Da){Gt==4&&(this.s=4,un(14),I=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==iu){this.s=4,un(15),qr(this.i,this.l,ke,"[Invalid Chunk]"),I=!1;break}else qr(this.i,this.l,cn,null),Ro(this,cn);if(oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||ke.length!=0||this.h.h||(this.s=1,un(16),I=!1),this.o=this.o&&I,!I)qr(this.i,this.l,ke,"[Invalid Chunked Response]"),Qr(this),Ks(this);else if(0<ke.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ke.length),qa(Ut),Ut.M=!0,un(11))}}else qr(this.i,this.l,ke,null),Ro(this,ke);Gt==4&&Qr(this),this.o&&!this.J&&(Gt==4?zo(this.j,this):(this.o=!1,qt(this)))}else Ha(this.g),I==400&&0<ke.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),Qr(this),Ks(this)}}}catch{}finally{}};function oc(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Va(p,b){var I=p.C,O=b.indexOf(`
`,I);return O==-1?Da:(I=Number(b.substring(I,O)),isNaN(I)?iu:(O+=1,O+I>b.length?Da:(b=b.slice(O,O+I),p.C=O+I,b)))}Kr.prototype.cancel=function(){this.J=!0,Qr(this)};function qt(p){p.S=Date.now()+p.I,ac(p,p.I)}function ac(p,b){if(p.B!=null)throw Error("WatchDog timer not null");p.B=vi(E(p.ba,p),b)}function No(p){p.B&&(h.clearTimeout(p.B),p.B=null)}Kr.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(La(this.i,this.A),this.L!=2&&(_s(),un(17)),Qr(this),this.s=2,Ks(this)):ac(this,this.S-p)};function Ks(p){p.j.G==0||p.J||zo(p.j,p)}function Qr(p){No(p);var b=p.M;b&&typeof b.ma=="function"&&b.ma(),p.M=null,gi(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function Ro(p,b){try{var I=p.j;if(I.G!=0&&(I.g==p||ot(I.h,p))){if(!p.K&&ot(I.h,p)&&I.G==3){try{var O=I.Da.g.parse(b)}catch{O=null}if(Array.isArray(O)&&O.length==3){var te=O;if(te[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<p.F)Ga(I),bi(I);else break e;Uo(I),un(18)}}else I.za=te[1],0<I.za-I.T&&37500>te[2]&&I.F&&I.v==0&&!I.C&&(I.C=vi(E(I.Za,I),6e3));if(1>=Xs(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Es(I,11)}else if((p.K||I.g==p)&&Ga(I),!G(b))for(te=I.Da.g.parse(b),b=0;b<te.length;b++){let St=te[b];if(I.T=St[0],St=St[1],I.G==2)if(St[0]=="c"){I.K=St[1],I.ia=St[2];const Ut=St[3];Ut!=null&&(I.la=Ut,I.j.info("VER="+I.la));const Gt=St[4];Gt!=null&&(I.Aa=Gt,I.j.info("SVER="+I.Aa));const ri=St[5];ri!=null&&typeof ri=="number"&&0<ri&&(O=1.5*ri,I.L=O,I.j.info("backChannelRequestTimeoutMs_="+O)),O=I;const cn=p.g;if(cn){const $o=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var de=O.h;de.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&($t(de,de.h),de.h=null))}if(O.D){const Ti=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ti&&(O.ya=Ti,at(O.I,O.D,Ti))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms")),O=I;var ke=p;if(O.qa=Ka(O,O.J?O.ia:null,O.W),ke.K){Lo(O.h,ke);var Vt=ke,gn=O.L;gn&&(Vt.I=gn),Vt.B&&(No(Vt),qt(Vt)),O.g=ke}else _r(O);0<I.i.length&&ni(I)}else St[0]!="stop"&&St[0]!="close"||Es(I,7);else I.G==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?Es(I,7):kn(I):St[0]!="noop"&&I.l&&I.l.ta(St),I.v=0)}}_s(4)}catch{}}var Qs=class{constructor(p,b){this.g=p,this.map=b}};function Ys(p){this.l=p||10,h.PerformanceNavigationTiming?(p=h.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Xs(p){return p.h?1:p.g?p.g.size:0}function ot(p,b){return p.h?p.h==b:p.g?p.g.has(b):!1}function $t(p,b){p.g?p.g.add(b):p.h=b}function Lo(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}Ys.prototype.cancel=function(){if(this.i=vs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function vs(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let b=p.i;for(const I of p.g.values())b=b.concat(I.D);return b}return U(p.i)}function wi(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var b=[],I=p.length,O=0;O<I;O++)b.push(p[O]);return b}b=[],I=0;for(O in p)b[I++]=p[O];return b}function Js(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var b=[];p=p.length;for(var I=0;I<p;I++)b.push(I);return b}b=[],I=0;for(const O in p)b[I++]=O;return b}}}function it(p,b){if(p.forEach&&typeof p.forEach=="function")p.forEach(b,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,b,void 0);else for(var I=Js(p),O=wi(p),te=O.length,de=0;de<te;de++)b.call(void 0,O[de],I&&I[de],p)}var Ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function su(p,b){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var O=p[I].indexOf("="),te=null;if(0<=O){var de=p[I].substring(0,O);te=p[I].substring(O+1)}else de=p[I];b(de,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Yr(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Yr){this.h=p.h,jo(this,p.j),this.o=p.o,this.g=p.g,xi(this,p.s),this.l=p.l;var b=p.i,I=new Jr;I.i=b.i,b.g&&(I.g=new Map(b.g),I.h=b.h),gr(this,I),this.m=p.m}else p&&(b=String(p).match(Ht))?(this.h=!1,jo(this,b[1]||"",!0),this.o=_t(b[2]||""),this.g=_t(b[3]||"",!0),xi(this,b[4]),this.l=_t(b[5]||"",!0),gr(this,b[6]||"",!0),this.m=_t(b[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}Yr.prototype.toString=function(){var p=[],b=this.j;b&&p.push(Xr(b,Ui,!0),":");var I=this.g;return(I||b=="file")&&(p.push("//"),(b=this.o)&&p.push(Xr(b,Ui,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&p.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(Xr(I,I.charAt(0)=="/"?za:Ua,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",Xr(I,Mo)),p.join("")};function Yt(p){return new Yr(p)}function jo(p,b,I){p.j=I?_t(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function xi(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function gr(p,b,I){b instanceof Jr?(p.i=b,xn(p.i,p.h)):(I||(b=Xr(b,Do)),p.i=new Jr(b,p.h))}function at(p,b,I){p.i.set(b,I)}function yr(p){return at(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function _t(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Xr(p,b,I){return typeof p=="string"?(p=encodeURI(p).replace(b,Fa),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Fa(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ui=/[#\/\?@]/g,Ua=/[#\?:]/g,za=/[#\?]/g,Do=/[#\?@]/g,Mo=/#/g;function Jr(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function pn(p){p.g||(p.g=new Map,p.h=0,p.i&&su(p.i,function(b,I){p.add(decodeURIComponent(b.replace(/\+/g," ")),I)}))}t=Jr.prototype,t.add=function(p,b){pn(this),this.i=null,p=Ye(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(b),this.h+=1,this};function ei(p,b){pn(p),b=Ye(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function Dr(p,b){return pn(p),b=Ye(p,b),p.g.has(b)}t.forEach=function(p,b){pn(this),this.g.forEach(function(I,O){I.forEach(function(te){p.call(b,te,O,this)},this)},this)},t.na=function(){pn(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),I=[];for(let O=0;O<b.length;O++){const te=p[O];for(let de=0;de<te.length;de++)I.push(b[O])}return I},t.V=function(p){pn(this);let b=[];if(typeof p=="string")Dr(this,p)&&(b=b.concat(this.g.get(Ye(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)b=b.concat(p[I])}return b},t.set=function(p,b){return pn(this),this.i=null,p=Ye(this,p),Dr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},t.get=function(p,b){return p?(p=this.V(p),0<p.length?String(p[0]):b):b};function eo(p,b,I){ei(p,b),0<I.length&&(p.i=null,p.g.set(Ye(p,b),U(I)),p.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var I=0;I<b.length;I++){var O=b[I];const de=encodeURIComponent(String(O)),ke=this.V(O);for(O=0;O<ke.length;O++){var te=de;ke[O]!==""&&(te+="="+encodeURIComponent(String(ke[O]))),p.push(te)}}return this.i=p.join("&")};function Ye(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function xn(p,b){b&&!p.j&&(pn(p),p.i=null,p.g.forEach(function(I,O){var te=O.toLowerCase();O!=te&&(ei(this,O),eo(this,te,I))},p)),p.j=b}function Ft(p,b){const I=new Ao;if(h.Image){const O=new Image;O.onload=A(Yn,I,"TestLoadImage: loaded",!0,b,O),O.onerror=A(Yn,I,"TestLoadImage: error",!1,b,O),O.onabort=A(Yn,I,"TestLoadImage: abort",!1,b,O),O.ontimeout=A(Yn,I,"TestLoadImage: timeout",!1,b,O),h.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=p}else b(!1)}function ou(p,b){const I=new Ao,O=new AbortController,te=setTimeout(()=>{O.abort(),Yn(I,"TestPingServer: timeout",!1,b)},1e4);fetch(p,{signal:O.signal}).then(de=>{clearTimeout(te),de.ok?Yn(I,"TestPingServer: ok",!0,b):Yn(I,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(te),Yn(I,"TestPingServer: error",!1,b)})}function Yn(p,b,I,O,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),O(I)}catch{}}function au(){this.g=new yi}function Ba(p,b,I){const O=I||"";try{it(p,function(te,de){let ke=te;_(te)&&(ke=Zs(te)),b.push(O+de+"="+encodeURIComponent(ke))})}catch(te){throw b.push(O+"type="+encodeURIComponent("_badmap")),te}}function sr(p){this.l=p.Ub||null,this.j=p.eb||!1}D(sr,Vi),sr.prototype.g=function(){return new ws(this.l,this.j)},sr.prototype.i=function(p){return function(){return p}}({});function ws(p,b){Re.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(ws,Re),t=ws.prototype,t.open=function(p,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,Hn(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||h).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wt(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;to(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function to(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?Wt(this):Hn(this),this.readyState==3&&to(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Wt(this))},t.Qa=function(p){this.g&&(this.response=p,Wt(this))},t.ga=function(){this.g&&Wt(this)};function Wt(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Hn(p)}t.setRequestHeader=function(p,b){this.u.append(p,b)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var I=b.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=b.next();return p.join(`\r
`)};function Hn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function zi(p){let b="";return ee(p,function(I,O){b+=O,b+=":",b+=I,b+=`\r
`}),b}function xs(p,b,I){e:{for(O in I){var O=!1;break e}O=!0}O||(I=zi(I),typeof p=="string"?I!=null&&encodeURIComponent(String(I)):at(p,b,I))}function Xt(p){Re.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Xt,Re);var lc=/^https?$/i,Oo=["POST","PUT"];t=Xt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,b,I,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zr.g(),this.v=this.o?ka(this.o):ka(Zr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(de){Vo(this,de);return}if(p=I||"",I=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var te in O)I.set(te,O[te]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const de of O.keys())I.set(de,O.get(de));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(I.keys()).find(de=>de.toLowerCase()=="content-type"),te=h.FormData&&p instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Oo,b,void 0))||O||te||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,ke]of I)this.g.setRequestHeader(de,ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xn(this),this.u=!0,this.g.send(p),this.u=!1}catch(de){Vo(this,de)}};function Vo(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,Fo(p),Mr(p)}function Fo(p){p.A||(p.A=!0,tt(p,"complete"),tt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,tt(this,"complete"),tt(this,"abort"),Mr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),Xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vt(this):this.bb())},t.bb=function(){vt(this)};function vt(p){if(p.h&&typeof u<"u"&&(!p.v[1]||An(p)!=4||p.Z()!=2)){if(p.u&&An(p)==4)Pn(p.Ea,0,p);else if(tt(p,"readystatechange"),An(p)==4){p.h=!1;try{const ke=p.Z();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var I;if(!(I=b)){var O;if(O=ke===0){var te=String(p.D).match(Ht)[1]||null;!te&&h.self&&h.self.location&&(te=h.self.location.protocol.slice(0,-1)),O=!lc.test(te?te.toLowerCase():"")}I=O}if(I)tt(p,"complete"),tt(p,"success");else{p.m=6;try{var de=2<An(p)?p.g.statusText:""}catch{de=""}p.l=de+" ["+p.Z()+"]",Fo(p)}}finally{Mr(p)}}}}function Mr(p,b){if(p.g){Xn(p);const I=p.g,O=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||tt(p,"ready");try{I.onreadystatechange=O}catch{}}}function Xn(p){p.I&&(h.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function An(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&b.indexOf(p)==0&&(b=b.substring(p.length)),Gs(b)}};function $a(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(p){const b={};p=(p.g&&2<=An(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<p.length;O++){if(G(p[O]))continue;var I=z(p[O]);const te=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const de=b[te]||[];b[te]=de,de.push(I)}F(b,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(p,b,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||b}function lu(p){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ti("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ti("baseRetryDelayMs",5e3,p),this.cb=ti("retryDelaySeedMs",1e4,p),this.Wa=ti("forwardChannelMaxRetries",2,p),this.wa=ti("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Ys(p&&p.concurrentRequestLimit),this.Da=new au,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lu.prototype,t.la=8,t.G=1,t.connect=function(p,b,I,O){un(0),this.W=p,this.H=b||{},I&&O!==void 0&&(this.H.OSID=I,this.H.OAID=O),this.F=this.X,this.I=Ka(this,null,this.W),ni(this)};function kn(p){if(Wa(p),p.G==3){var b=p.U++,I=Yt(p.I);if(at(I,"SID",p.K),at(I,"RID",b),at(I,"TYPE","terminate"),bs(p,I),b=new Kr(p,p.j,b),b.L=2,b.v=yr(Yt(I)),I=!1,h.navigator&&h.navigator.sendBeacon)try{I=h.navigator.sendBeacon(b.v.toString(),"")}catch{}!I&&h.Image&&(new Image().src=b.v,I=!0),I||(b.g=cc(b.j,null),b.g.ea(b.v)),b.F=Date.now(),qt(b)}uc(p)}function bi(p){p.g&&(qa(p),p.g.cancel(),p.g=null)}function Wa(p){bi(p),p.u&&(h.clearTimeout(p.u),p.u=null),Ga(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&h.clearTimeout(p.s),p.s=null)}function ni(p){if(!pr(p.h)&&!p.s){p.s=!0;var b=p.Ga;Ee||he(),J||(Ee(),J=!0),xe.add(b,p),p.B=0}}function Md(p,b){return Xs(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=b.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=vi(E(p.Ga,p,b),uu(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const te=new Kr(this,this.j,p);let de=this.o;if(this.S&&(de?(de=j(de),B(de,this.S)):de=this.S),this.m!==null||this.O||(te.H=de,de=null),this.P)e:{for(var b=0,I=0;I<this.i.length;I++){t:{var O=this.i[I];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(b+=O,4096<b){b=I;break e}if(b===4096||I===this.i.length-1){b=I+1;break e}}b=1e3}else b=1e3;b=Ts(this,te,b),I=Yt(this.I),at(I,"RID",p),at(I,"CVER",22),this.D&&at(I,"X-HTTP-Session-Id",this.D),bs(this,I),de&&(this.O?b="headers="+encodeURIComponent(String(zi(de)))+"&"+b:this.m&&xs(I,this.m,de)),$t(this.h,te),this.Ua&&at(I,"TYPE","init"),this.P?(at(I,"$req",b),at(I,"SID","null"),te.T=!0,Ma(te,I,null)):Ma(te,I,b),this.G=2}}else this.G==3&&(p?or(this,p):this.i.length==0||pr(this.h)||or(this))};function or(p,b){var I;b?I=b.l:I=p.U++;const O=Yt(p.I);at(O,"SID",p.K),at(O,"RID",I),at(O,"AID",p.T),bs(p,O),p.m&&p.o&&xs(O,p.m,p.o),I=new Kr(p,p.j,I,p.B+1),p.m===null&&(I.H=p.o),b&&(p.i=b.D.concat(p.i)),b=Ts(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),$t(p.h,I),Ma(I,O,b)}function bs(p,b){p.H&&ee(p.H,function(I,O){at(b,O,I)}),p.l&&it({},function(I,O){at(b,O,I)})}function Ts(p,b,I){I=Math.min(p.i.length,I);var O=p.l?E(p.l.Na,p.l,p):null;e:{var te=p.i;let de=-1;for(;;){const ke=["count="+I];de==-1?0<I?(de=te[0].g,ke.push("ofs="+de)):de=0:ke.push("ofs="+de);let Vt=!0;for(let gn=0;gn<I;gn++){let St=te[gn].g;const Ut=te[gn].map;if(St-=de,0>St)de=Math.max(0,te[gn].g-100),Vt=!1;else try{Ba(Ut,ke,"req"+St+"_")}catch{O&&O(Ut)}}if(Vt){O=ke.join("&");break e}}}return p=p.i.splice(0,I),b.D=p,O}function _r(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;Ee||he(),J||(Ee(),J=!0),xe.add(b,p),p.v=0}}function Uo(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=vi(E(p.Fa,p),uu(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Za(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=vi(E(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),bi(this),Za(this))};function qa(p){p.A!=null&&(h.clearTimeout(p.A),p.A=null)}function Za(p){p.g=new Kr(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var b=Yt(p.qa);at(b,"RID","rpc"),at(b,"SID",p.K),at(b,"AID",p.T),at(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&at(b,"TO",p.ja),at(b,"TYPE","xmlhttp"),bs(p,b),p.m&&p.o&&xs(b,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=yr(Yt(b)),I.m=null,I.P=!0,Oa(I,p)}t.Za=function(){this.C!=null&&(this.C=null,bi(this),Uo(this),un(19))};function Ga(p){p.C!=null&&(h.clearTimeout(p.C),p.C=null)}function zo(p,b){var I=null;if(p.g==b){Ga(p),qa(p),p.g=null;var O=2}else if(ot(p.h,b))I=b.D,Lo(p.h,b),O=1;else return;if(p.G!=0){if(b.o)if(O==1){I=b.m?b.m.length:0,b=Date.now()-b.F;var te=p.B;O=Io(),tt(O,new Ra(O,I)),ni(p)}else _r(p);else if(te=b.s,te==3||te==0&&0<b.X||!(O==1&&Md(p,b)||O==2&&Uo(p)))switch(I&&0<I.length&&(b=p.h,b.i=b.i.concat(I)),te){case 1:Es(p,5);break;case 4:Es(p,10);break;case 3:Es(p,6);break;default:Es(p,2)}}}function uu(p,b){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*b}function Es(p,b){if(p.j.info("Error code "+b),b==2){var I=E(p.fb,p),O=p.Xa;const te=!O;O=new Yr(O||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||jo(O,"https"),yr(O),te?Ft(O.toString(),I):ou(O.toString(),I)}else un(2);p.G=0,p.l&&p.l.sa(b),uc(p),Wa(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function uc(p){if(p.G=0,p.ka=[],p.l){const b=vs(p.h);(b.length!=0||p.i.length!=0)&&(H(p.ka,b),H(p.ka,p.i),p.h.i.length=0,U(p.i),p.i.length=0),p.l.ra()}}function Ka(p,b,I){var O=I instanceof Yr?Yt(I):new Yr(I);if(O.g!="")b&&(O.g=b+"."+O.g),xi(O,O.s);else{var te=h.location;O=te.protocol,b=b?b+"."+te.hostname:te.hostname,te=+te.port;var de=new Yr(null);O&&jo(de,O),b&&(de.g=b),te&&xi(de,te),I&&(de.l=I),O=de}return I=p.D,b=p.ya,I&&b&&at(O,I,b),at(O,"VER",p.la),bs(p,O),O}function cc(p,b,I){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=p.Ca&&!p.pa?new Xt(new sr({eb:I})):new Xt(p.pa),b.Ha(p.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qa(){}t=Qa.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bo(){}Bo.prototype.g=function(p,b){return new Nn(p,b)};function Nn(p,b){Re.call(this),this.g=new lu(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!G(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!G(b)&&(this.g.D=b,p=this.h,p!==null&&b in p&&(p=this.h,b in p&&delete p[b])),this.j=new vr(this)}D(Nn,Re),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){kn(this.g)},Nn.prototype.o=function(p){var b=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.u&&(I={},I.__data__=Zs(p),p=I);b.i.push(new Qs(b.Ya++,p)),b.G==3&&ni(b)},Nn.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,Nn.aa.N.call(this)};function Bi(p){_i.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const I in b){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,b=b!==null&&p in b?b[p]:void 0),this.data=b}else this.data=p}D(Bi,_i);function dc(){Na.call(this),this.status=1}D(dc,Na);function vr(p){this.g=p}D(vr,Qa),vr.prototype.ua=function(){tt(this.g,"a")},vr.prototype.ta=function(p){tt(this.g,new Bi(p))},vr.prototype.sa=function(p){tt(this.g,new dc)},vr.prototype.ra=function(){tt(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,LI=function(){return new Bo},RI=function(){return Io()},NI=Fi,Y_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,Km=ko,ja.COMPLETE="complete",kI=ja,Co.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",Re.prototype.listen=Re.prototype.K,ph=Co,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,AI=Xt}).apply(typeof Sm<"u"?Sm:typeof self<"u"?self:typeof window<"u"?window:{});const RT="@firebase/firestore",LT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Xp("@firebase/firestore");function Wc(){return Wu.logLevel}function Ue(t,...e){if(Wu.logLevel<=Ct.DEBUG){const n=e.map(Tw);Wu.debug(`Firestore (${Sd}): ${t}`,...n)}}function ma(t,...e){if(Wu.logLevel<=Ct.ERROR){const n=e.map(Tw);Wu.error(`Firestore (${Sd}): ${t}`,...n)}}function ud(t,...e){if(Wu.logLevel<=Ct.WARN){const n=e.map(Tw);Wu.warn(`Firestore (${Sd}): ${t}`,...n)}}function Tw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jI(t,r,n)}function jI(t,e,n){let r=`FIRESTORE (${Sd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ma(r),new Error(r)}function Bt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||jI(e,i,r)}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cr.UNAUTHENTICATED))}shutdown(){}}class cV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dV{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Bt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ca,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ca)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt(typeof r.accessToken=="string",31837,{l:r}),new DI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string",2055,{h:e}),new Cr(e)}}class hV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Bt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=pV(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function It(t,e){return t<e?-1:t>e?1:0}function X_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return r_(i)===r_(a)?It(i,a):r_(i)?1:-1}return It(t.length,e.length)}const gV=55296,yV=57343;function r_(t){const e=t.charCodeAt(0);return e>=gV&&e<=yV}function cd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__name__";class co{constructor(e,n,r){n===void 0?n=0:n>e.length&&st(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&st(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=co.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return It(e.length,n.length)}static compareSegments(e,n){const r=co.isNumericId(e),i=co.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?co.extractNumericId(e).compare(co.extractNumericId(n)):X_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dl.fromString(e.substring(4,e.length-2))}}class en extends co{construct(e,n,r){return new en(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new en(n)}static emptyPath(){return new en([])}}const _V=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends co{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return _V.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DT}static keyField(){return new dr([DT])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Me(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new Me(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Me(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new Me(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(en.fromString(e))}static fromName(e){return new Xe(en.fromString(e).popFirst(5))}static empty(){return new Xe(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&en.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return en.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new en(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e,n){if(!n)throw new Me(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vV(t,e,n,r){if(e===!0&&r===!0)throw new Me(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MT(t){if(!Xe.isDocumentKey(t))throw new Me(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OT(t){if(Xe.isDocumentKey(t))throw new Me(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function OI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st(12329,{type:typeof t})}function Bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sg(t);throw new Me(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,e){const n={typeString:t};return e&&(n.value=e),n}function uf(t,e){if(!OI(t))throw new Me(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(i&&typeof u!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Me(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=-62135596800,FT=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*FT);return new nn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<VT)throw new Me(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FT}_compareTo(e){return this.seconds===e.seconds?It(this.nanoseconds,e.nanoseconds):It(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uf(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-VT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:zn("string",nn._jsonSchemaVersion),seconds:zn("number"),nanoseconds:zn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new nn(0,0))}static max(){return new ht(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=-1;function wV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(r===1e9?new nn(n+1,0):new nn(n,r));return new Fl(i,Xe.empty(),e)}function xV(t){return new Fl(t.readTime,t.key,Uh)}class Fl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fl(ht.min(),Xe.empty(),Uh)}static max(){return new Fl(ht.max(),Xe.empty(),Uh)}}function bV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Xe.comparator(t.documentKey,e.documentKey),n!==0?n:It(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==TV)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,r)=>{n(e)})}static reject(e){return new _e((n,r)=>{r(e)})}static waitFor(e){return new _e((n,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&n()},f=>r(f))}),u=!0,a===i&&n()})}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next(i=>i?_e.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new _e((r,i)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const _=f;n(e[_]).next(v=>{u[_]=v,++h,h===a&&r(u)},v=>i(v))}})}static doWhile(e,n){return new _e((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function SV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Id(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}og.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=-1;function ag(t){return t==null}function xp(t){return t===0&&1/t==-1/0}function CV(t){return typeof t=="number"&&Number.isInteger(t)&&!xp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="";function IV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UT(e)),e=PV(t.get(n),e);return UT(e)}function PV(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case VI:n+="";break;default:n+=a}}return n}function UT(t){return t+VI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){this.comparator=e,this.root=n||cr.EMPTY}insert(e,n){return new mn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cm(this.root,e,this.comparator,!0)}}class Cm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??cr.RED,this.left=i??cr.EMPTY,this.right=a??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new cr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw st(27949);return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new BT(this.data.getIterator())}getIteratorFrom(e){return new BT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gn(this.comparator);return n.data=e,n}}class BT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new Ai([])}unionWith(e){let n=new Gn(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ai(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new UI("Invalid base64 string: "+a):a}}(e);return new hr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a}(e);return new hr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return It(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const AV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(t){if(Bt(!!t,39018),typeof t=="string"){let e=0;const n=AV.exec(t);if(Bt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sn(t.seconds),nanos:Sn(t.nanos)}}function Sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zl(t){return typeof t=="string"?hr.fromBase64String(t):hr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="server_timestamp",BI="__type__",$I="__previous_value__",HI="__local_write_time__";function Cw(t){return(t?.mapValue?.fields||{})[BI]?.stringValue===zI}function lg(t){const e=t.mapValue.fields[$I];return Cw(e)?lg(e):e}function zh(t){const e=Ul(t.mapValue.fields[HI].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r,i,a,u,h,f,_,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=_,this.isUsingEmulator=v}}const bp="(default)";class Bh{constructor(e,n){this.projectId=e,this.database=n||bp}static empty(){return new Bh("","")}get isDefaultDatabase(){return this.database===bp}isEqual(e){return e instanceof Bh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="__type__",NV="__max__",Im={mapValue:{}},qI="__vector__",Tp="value";function Bl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cw(t)?4:LV(t)?9007199254740991:RV(t)?10:11:st(28295,{value:t})}function So(t,e){if(t===e)return!0;const n=Bl(t);if(n!==Bl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zh(t).isEqual(zh(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=Ul(i.timestampValue),h=Ul(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return zl(i.bytesValue).isEqual(zl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Sn(i.geoPointValue.latitude)===Sn(a.geoPointValue.latitude)&&Sn(i.geoPointValue.longitude)===Sn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Sn(i.integerValue)===Sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=Sn(i.doubleValue),h=Sn(a.doubleValue);return u===h?xp(u)===xp(h):isNaN(u)&&isNaN(h)}return!1}(t,e);case 9:return cd(t.arrayValue.values||[],e.arrayValue.values||[],So);case 10:case 11:return function(i,a){const u=i.mapValue.fields||{},h=a.mapValue.fields||{};if(zT(u)!==zT(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!So(u[f],h[f])))return!1;return!0}(t,e);default:return st(52216,{left:t})}}function $h(t,e){return(t.values||[]).find(n=>So(n,e))!==void 0}function dd(t,e){if(t===e)return 0;const n=Bl(t),r=Bl(e);if(n!==r)return It(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return It(t.booleanValue,e.booleanValue);case 2:return function(a,u){const h=Sn(a.integerValue||a.doubleValue),f=Sn(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return $T(t.timestampValue,e.timestampValue);case 4:return $T(zh(t),zh(e));case 5:return X_(t.stringValue,e.stringValue);case 6:return function(a,u){const h=zl(a),f=zl(u);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let _=0;_<h.length&&_<f.length;_++){const v=It(h[_],f[_]);if(v!==0)return v}return It(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,u){const h=It(Sn(a.latitude),Sn(u.latitude));return h!==0?h:It(Sn(a.longitude),Sn(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return HT(t.arrayValue,e.arrayValue);case 10:return function(a,u){const h=a.fields||{},f=u.fields||{},_=h[Tp]?.arrayValue,v=f[Tp]?.arrayValue,T=It(_?.values?.length||0,v?.values?.length||0);return T!==0?T:HT(_,v)}(t.mapValue,e.mapValue);case 11:return function(a,u){if(a===Im.mapValue&&u===Im.mapValue)return 0;if(a===Im.mapValue)return 1;if(u===Im.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),_=u.fields||{},v=Object.keys(_);f.sort(),v.sort();for(let T=0;T<f.length&&T<v.length;++T){const E=X_(f[T],v[T]);if(E!==0)return E;const A=dd(h[f[T]],_[v[T]]);if(A!==0)return A}return It(f.length,v.length)}(t.mapValue,e.mapValue);default:throw st(23264,{he:n})}}function $T(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return It(t,e);const n=Ul(t),r=Ul(e),i=It(n.seconds,r.seconds);return i!==0?i:It(n.nanos,r.nanos)}function HT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=dd(n[i],r[i]);if(a)return a}return It(n.length,r.length)}function hd(t){return J_(t)}function J_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ul(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=J_(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const u of r)a?a=!1:i+=",",i+=`${u}:${J_(n.fields[u])}`;return i+"}"}(t.mapValue):st(61005,{value:t})}function Qm(t){switch(Bl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lg(t);return e?16+Qm(e):16;case 5:return 2*t.stringValue.length;case 6:return zl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Qm(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Yl(r.fields,(a,u)=>{i+=a.length+Qm(u)}),i}(t.mapValue);default:throw st(13486,{value:t})}}function WT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ev(t){return!!t&&"integerValue"in t}function Iw(t){return!!t&&"arrayValue"in t}function qT(t){return!!t&&"nullValue"in t}function ZT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ym(t){return!!t&&"mapValue"in t}function RV(t){return(t?.mapValue?.fields||{})[WI]?.stringValue===qI}function Sh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Yl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sh(t.arrayValue.values[n]);return e}return{...t}}function LV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ym(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sh(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}u?r[h.lastSegment()]=Sh(u):i.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Ym(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yl(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new hi(Sh(this.value))}}function ZI(t){const e=[];return Yl(t.fields,(n,r)=>{const i=new dr([n]);if(Ym(r)){const a=ZI(r.mapValue).fields;if(a.length===0)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,a,u,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Ir(e,0,ht.min(),ht.min(),ht.min(),hi.empty(),0)}static newFoundDocument(e,n,r,i){return new Ir(e,1,n,ht.min(),r,i,0)}static newNoDocument(e,n){return new Ir(e,2,n,ht.min(),ht.min(),hi.empty(),0)}static newUnknownDocument(e,n){return new Ir(e,3,n,ht.min(),ht.min(),hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.position=e,this.inclusive=n}}function GT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],u=t.position[i];if(a.field.isKeyField()?r=Xe.comparator(Xe.fromName(u.referenceValue),n.key):r=dd(u,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function KT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!So(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n="asc"){this.field=e,this.dir=n}}function jV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{}class Un extends GI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MV(e,n,r):n==="array-contains"?new FV(e,r):n==="in"?new UV(e,r):n==="not-in"?new zV(e,r):n==="array-contains-any"?new BV(e,r):new Un(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OV(e,r):new VV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dd(n,this.value)):n!==null&&Bl(this.value)===Bl(n)&&this.matchesComparison(dd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $s extends GI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $s(e,n)}matches(e){return KI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KI(t){return t.op==="and"}function QI(t){return DV(t)&&KI(t)}function DV(t){for(const e of t.filters)if(e instanceof $s)return!1;return!0}function tv(t){if(t instanceof Un)return t.field.canonicalString()+t.op.toString()+hd(t.value);if(QI(t))return t.filters.map(e=>tv(e)).join(",");{const e=t.filters.map(n=>tv(n)).join(",");return`${t.op}(${e})`}}function YI(t,e){return t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.field.isEqual(i.field)&&So(r.value,i.value)}(t,e):t instanceof $s?function(r,i){return i instanceof $s&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,u,h)=>a&&YI(u,i.filters[h]),!0):!1}(t,e):void st(19439)}function XI(t){return t instanceof Un?function(n){return`${n.field.canonicalString()} ${n.op} ${hd(n.value)}`}(t):t instanceof $s?function(n){return n.op.toString()+" {"+n.getFilters().map(XI).join(" ,")+"}"}(t):"Filter"}class MV extends Un{constructor(e,n,r){super(e,n,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const n=Xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class OV extends Un{constructor(e,n){super(e,"in",n),this.keys=JI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VV extends Un{constructor(e,n){super(e,"not-in",n),this.keys=JI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JI(t,e){return(e.arrayValue?.values||[]).map(n=>Xe.fromName(n.referenceValue))}class FV extends Un{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iw(n)&&$h(n.arrayValue,this.value)}}class UV extends Un{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$h(this.value.arrayValue,n)}}class zV extends Un{constructor(e,n){super(e,"not-in",n)}matches(e){if($h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$h(this.value.arrayValue,n)}}class BV extends Un{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$h(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.Te=null}}function QT(t,e=null,n=[],r=[],i=null,a=null,u=null){return new $V(t,e,n,r,i,a,u)}function Pw(t){const e=pt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ag(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hd(r)).join(",")),e.Te=n}return e.Te}function Aw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KT(t.startAt,e.startAt)&&KT(t.endAt,e.endAt)}function nv(t){return Xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n=null,r=[],i=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HV(t,e,n,r,i,a,u,h){return new cf(t,e,n,r,i,a,u,h)}function kw(t){return new cf(t)}function YT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eP(t){return t.collectionGroup!==null}function Ch(t){const e=pt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Gn(dr.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(_=>{_.isInequality()&&(h=h.add(_.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Sp(a,r))}),n.has(dr.keyField().canonicalString())||e.Ie.push(new Sp(dr.keyField(),r))}return e.Ie}function go(t){const e=pt(t);return e.Ee||(e.Ee=WV(e,Ch(t))),e.Ee}function WV(t,e){if(t.limitType==="F")return QT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Sp(i.field,a)});const n=t.endAt?new Ep(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ep(t.startAt.position,t.startAt.inclusive):null;return QT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rv(t,e){const n=t.filters.concat([e]);return new cf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function iv(t,e,n){return new cf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ug(t,e){return Aw(go(t),go(e))&&t.limitType===e.limitType}function tP(t){return`${Pw(go(t))}|lt:${t.limitType}`}function qc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XI(i)).join(", ")}]`),ag(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hd(i)).join(",")),`Target(${r})`}(go(t))}; limitType=${t.limitType})`}function cg(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Ch(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(u,h,f){const _=GT(u,h,f);return u.inclusive?_<=0:_<0}(r.startAt,Ch(r),i)||r.endAt&&!function(u,h,f){const _=GT(u,h,f);return u.inclusive?_>=0:_>0}(r.endAt,Ch(r),i))}(t,e)}function qV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nP(t){return(e,n)=>{let r=!1;for(const i of Ch(t)){const a=ZV(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ZV(t,e,n){const r=t.field.isKeyField()?Xe.comparator(e.key,n.key):function(a,u,h){const f=u.data.field(a),_=h.data.field(a);return f!==null&&_!==null?dd(f,_):st(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return st(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yl(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return FI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=new mn(Xe.comparator);function pa(){return GV}const rP=new mn(Xe.comparator);function gh(...t){let e=rP;for(const n of t)e=e.insert(n.key,n);return e}function iP(t){let e=rP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ru(){return Ih()}function sP(){return Ih()}function Ih(){return new ec(t=>t.toString(),(t,e)=>t.isEqual(e))}const KV=new mn(Xe.comparator),QV=new Gn(Xe.comparator);function Pt(...t){let e=QV;for(const n of t)e=e.add(n);return e}const YV=new Gn(It);function XV(){return YV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xp(e)?"-0":e}}function oP(t){return{integerValue:""+t}}function JV(t,e){return CV(e)?oP(e):Nw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this._=void 0}}function e4(t,e,n){return t instanceof Hh?function(i,a){const u={fields:{[BI]:{stringValue:zI},[HI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Cw(a)&&(a=lg(a)),a&&(u.fields[$I]=a),{mapValue:u}}(n,e):t instanceof Wh?lP(t,e):t instanceof qh?uP(t,e):function(i,a){const u=aP(i,a),h=XT(u)+XT(i.Ae);return ev(u)&&ev(i.Ae)?oP(h):Nw(i.serializer,h)}(t,e)}function t4(t,e,n){return t instanceof Wh?lP(t,e):t instanceof qh?uP(t,e):n}function aP(t,e){return t instanceof Cp?function(r){return ev(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Hh extends dg{}class Wh extends dg{constructor(e){super(),this.elements=e}}function lP(t,e){const n=cP(e);for(const r of t.elements)n.some(i=>So(i,r))||n.push(r);return{arrayValue:{values:n}}}class qh extends dg{constructor(e){super(),this.elements=e}}function uP(t,e){let n=cP(e);for(const r of t.elements)n=n.filter(i=>!So(i,r));return{arrayValue:{values:n}}}class Cp extends dg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function XT(t){return Sn(t.integerValue||t.doubleValue)}function cP(t){return Iw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.field=e,this.transform=n}}function r4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wh&&i instanceof Wh||r instanceof qh&&i instanceof qh?cd(r.elements,i.elements,So):r instanceof Cp&&i instanceof Cp?So(r.Ae,i.Ae):r instanceof Hh&&i instanceof Hh}(t.transform,e.transform)}class i4{constructor(e,n){this.version=e,this.transformResults=n}}class as{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hg{}function dP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rw(t.key,as.none()):new df(t.key,t.data,as.none());{const n=t.data,r=hi.empty();let i=new Gn(dr.comparator);for(let a of e.fields)if(!i.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?r.delete(a):r.set(a,u),i=i.add(a)}return new Xl(t.key,r,new Ai(i.toArray()),as.none())}}function s4(t,e,n){t instanceof df?function(i,a,u){const h=i.value.clone(),f=eE(i.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Xl?function(i,a,u){if(!Xm(i.precondition,a))return void a.convertToUnknownDocument(u.version);const h=eE(i.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(hP(i)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Ph(t,e,n,r){return t instanceof df?function(a,u,h,f){if(!Xm(a.precondition,u))return h;const _=a.value.clone(),v=tE(a.fieldTransforms,f,u);return _.setAll(v),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xl?function(a,u,h,f){if(!Xm(a.precondition,u))return h;const _=tE(a.fieldTransforms,f,u),v=u.data;return v.setAll(hP(a)),v.setAll(_),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(t,e,n,r):function(a,u,h){return Xm(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(t,e,n)}function o4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=aP(r.transform,i||null);a!=null&&(n===null&&(n=hi.empty()),n.set(r.field,a))}return n||null}function JT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cd(r,i,(a,u)=>r4(a,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class df extends hg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xl extends hg{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function hP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eE(t,e,n){const r=new Map;Bt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,t4(u,h,n[i]))}return r}function tE(t,e,n){const r=new Map;for(const i of t){const a=i.transform,u=n.data.field(i.field);r.set(i.field,e4(a,u,e))}return r}class Rw extends hg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a4 extends hg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&s4(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ph(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ph(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sP();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=n.has(i.key)?null:h;const f=dP(u,h);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pt())}isEqual(e){return this.batchId===e.batchId&&cd(this.mutations,e.mutations,(n,r)=>JT(n,r))&&cd(this.baseMutations,e.baseMutations,(n,r)=>JT(n,r))}}class Lw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Bt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return KV}();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Lw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,At;function d4(t){switch(t){case ye.OK:return st(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return st(15467,{code:t})}}function fP(t){if(t===void 0)return ma("GRPC error has no .code"),ye.UNKNOWN;switch(t){case Dn.OK:return ye.OK;case Dn.CANCELLED:return ye.CANCELLED;case Dn.UNKNOWN:return ye.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return ye.INTERNAL;case Dn.UNAVAILABLE:return ye.UNAVAILABLE;case Dn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Dn.NOT_FOUND:return ye.NOT_FOUND;case Dn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Dn.ABORTED:return ye.ABORTED;case Dn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Dn.DATA_LOSS:return ye.DATA_LOSS;default:return st(39323,{code:t})}}(At=Dn||(Dn={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=new Dl([4294967295,4294967295],0);function nE(t){const e=h4().encode(t),n=new PI;return n.update(e),new Uint8Array(n.digest())}function rE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Dl([n,r],0),new Dl([i,a],0)]}class jw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yh(`Invalid padding: ${n}`);if(r<0)throw new yh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Dl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Dl.fromNumber(r)));return i.compare(f4)===1&&(i=new Dl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nE(e),[r,i]=rE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);if(!this.we(u))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new jw(a,i,n);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.ge===0)return;const n=nE(e),[r,i]=rE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fg(ht.min(),i,new mn(It),pa(),Pt())}}class hf{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hf(r,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class mP{constructor(e,n){this.targetId=e,this.Ce=n}}class pP{constructor(e,n,r=hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class iE{constructor(){this.ve=0,this.Fe=sE(),this.Me=hr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pt(),n=Pt(),r=Pt();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:st(38017,{changeType:a})}}),new hf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=sE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class m4{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.Je=Pm(),this.He=Pm(),this.Ye=new mn(It)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:st(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(nv(a))if(r===0){const u=new Xe(a.path);this.et(n,u,Ir.newNoDocument(u,ht.min()))}else Bt(r===1,20013,{expectedCount:r});else{const u=this._t(n);if(u!==r){const h=this.ut(e),f=h?this.ct(h,e,u):1;if(f!==0){this.it(n);const _=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let u,h;try{u=zl(r).toUint8Array()}catch(f){if(f instanceof UI)return ud("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new jw(u,i,a)}catch(f){return ud(f instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,u)=>{const h=this.ot(u);if(h){if(a.current&&nv(h.target)){const f=new Xe(h.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,Ir.newNoDocument(f,e))}a.Be&&(n.set(u,a.ke()),a.qe())}});let r=Pt();this.He.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const _=this.ot(f);return!_||_.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.je.forEach((a,u)=>u.setReadTime(e));const i=new fg(e,n,this.Ye,this.je,r);return this.je=pa(),this.Je=Pm(),this.He=Pm(),this.Ye=new mn(It),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Gn(It),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Gn(It),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pm(){return new mn(Xe.comparator)}function sE(){return new mn(Xe.comparator)}const p4={asc:"ASCENDING",desc:"DESCENDING"},g4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y4={and:"AND",or:"OR"};class _4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sv(t,e){return t.useProto3Json||ag(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function v4(t,e){return Ip(t,e.toTimestamp())}function yo(t){return Bt(!!t,49232),ht.fromTimestamp(function(n){const r=Ul(n);return new nn(r.seconds,r.nanos)}(t))}function Dw(t,e){return ov(t,e).canonicalString()}function ov(t,e){const n=function(i){return new en(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yP(t){const e=en.fromString(t);return Bt(bP(e),10190,{key:e.toString()}),e}function av(t,e){return Dw(t.databaseId,e.path)}function i_(t,e){const n=yP(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Xe(vP(n))}function _P(t,e){return Dw(t.databaseId,e)}function w4(t){const e=yP(t);return e.length===4?en.emptyPath():vP(e)}function lv(t){return new en(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vP(t){return Bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oE(t,e,n){return{name:av(t,e),fields:n.value.mapValue.fields}}function x4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:st(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(_,v){return _.useProto3Json?(Bt(v===void 0||typeof v=="string",58123),hr.fromBase64String(v||"")):(Bt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),hr.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(_){const v=_.code===void 0?ye.UNKNOWN:fP(_.code);return new Me(v,_.message||"")}(u);n=new pP(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=i_(t,r.document.name),a=yo(r.document.updateTime),u=r.document.createTime?yo(r.document.createTime):ht.min(),h=new hi({mapValue:{fields:r.document.fields}}),f=Ir.newFoundDocument(i,a,u,h),_=r.targetIds||[],v=r.removedTargetIds||[];n=new Jm(_,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=i_(t,r.document),a=r.readTime?yo(r.readTime):ht.min(),u=Ir.newNoDocument(i,a),h=r.removedTargetIds||[];n=new Jm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=i_(t,r.document),a=r.removedTargetIds||[];n=new Jm([],a,i,null)}else{if(!("filter"in e))return st(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,u=new c4(i,a),h=r.targetId;n=new mP(h,u)}}return n}function b4(t,e){let n;if(e instanceof df)n={update:oE(t,e.key,e.value)};else if(e instanceof Rw)n={delete:av(t,e.key)};else if(e instanceof Xl)n={update:oE(t,e.key,e.data),updateMask:N4(e.fieldMask)};else{if(!(e instanceof a4))return st(16599,{Vt:e.type});n={verify:av(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const h=u.transform;if(h instanceof Hh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Wh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cp)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw st(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:v4(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:st(27497)}(t,e.precondition)),n}function T4(t,e){return t&&t.length>0?(Bt(e!==void 0,14353),t.map(n=>function(i,a){let u=i.updateTime?yo(i.updateTime):yo(a);return u.isEqual(ht.min())&&(u=yo(a)),new i4(u,i.transformResults||[])}(n,e))):[]}function E4(t,e){return{documents:[_P(t,e.path)]}}function S4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_P(t,i);const a=function(_){if(_.length!==0)return xP($s.create(_,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const u=function(_){if(_.length!==0)return _.map(v=>function(E){return{field:Zc(E.field),direction:P4(E.dir)}}(v))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=sv(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ft:n,parent:i}}function C4(t){let e=w4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Bt(r===1,65062);const v=n.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=function(T){const E=wP(T);return E instanceof $s&&QI(E)?E.getFilters():[E]}(n.where));let u=[];n.orderBy&&(u=function(T){return T.map(E=>function(D){return new Sp(Gc(D.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(T){let E;return E=typeof T=="object"?T.value:T,ag(E)?null:E}(n.limit));let f=null;n.startAt&&(f=function(T){const E=!!T.before,A=T.values||[];return new Ep(A,E)}(n.startAt));let _=null;return n.endAt&&(_=function(T){const E=!T.before,A=T.values||[];return new Ep(A,E)}(n.endAt)),HV(e,i,u,a,h,"F",f,_)}function I4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gc(n.unaryFilter.field);return Un.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gc(n.unaryFilter.field);return Un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gc(n.unaryFilter.field);return Un.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gc(n.unaryFilter.field);return Un.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}}(t):t.fieldFilter!==void 0?function(n){return Un.create(Gc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $s.create(n.compositeFilter.filters.map(r=>wP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st(1026)}}(n.compositeFilter.op))}(t):st(30097,{filter:t})}function P4(t){return p4[t]}function A4(t){return g4[t]}function k4(t){return y4[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function Gc(t){return dr.fromServerFormat(t.fieldPath)}function xP(t){return t instanceof Un?function(n){if(n.op==="=="){if(ZT(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NAN"}};if(qT(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZT(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NAN"}};if(qT(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(n.field),op:A4(n.op),value:n.value}}}(t):t instanceof $s?function(n){const r=n.getFilters().map(i=>xP(i));return r.length===1?r[0]:{compositeFilter:{op:k4(n.op),filters:r}}}(t):st(54877,{filter:t})}function N4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,r,i,a=ht.min(),u=ht.min(),h=hr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new kl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.yt=e}}function L4(t){const e=C4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.Cn=new D4}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(Fl.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(Fl.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class D4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gn(en.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(en.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TP=41943040;class di{static withCacheSize(e){return new di(e,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(TP,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fd(0)}static cr(){return new fd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="LruGarbageCollector",M4=1048576;function uE([t,e],[n,r]){const i=It(t,n);return i===0?It(e,r):i}class O4{constructor(e){this.Ir=e,this.buffer=new Gn(uE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();uE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(lE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Id(n)?Ue(lE,"Ignoring IndexedDB error during garbage collection: ",n):await Cd(n)}await this.Vr(3e5)})}}class F4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(og.ce);const r=new O4(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(aE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,u,h,f,_;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,n))).next(T=>(a=T,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(_=Date.now(),Wc()<=Ct.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${i} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${T} documents in `+(_-f)+`ms
Total Duration: ${_-v}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}function U4(t,e){return new F4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.changes=new ec(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ph(r.mutation,i,Ai.empty(),nn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pt()){const i=Ru();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let u=gh();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=Ru();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,h)=>{n.set(u,h)})})}computeViews(e,n,r,i){let a=pa();const u=Ih(),h=function(){return Ih()}();return n.forEach((f,_)=>{const v=r.get(_.key);i.has(_.key)&&(v===void 0||v.mutation instanceof Xl)?a=a.insert(_.key,_):v!==void 0?(u.set(_.key,v.mutation.getFieldMask()),Ph(v.mutation,_,v.mutation.getFieldMask(),nn.now())):u.set(_.key,Ai.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((_,v)=>u.set(_,v)),n.forEach((_,v)=>h.set(_,new B4(v,u.get(_)??null))),h))}recalculateAndSaveOverlays(e,n){const r=Ih();let i=new mn((u,h)=>u-h),a=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const h of u)h.keys().forEach(f=>{const _=n.get(f);if(_===null)return;let v=r.get(f)||Ai.empty();v=h.applyToLocalView(_,v),r.set(f,v);const T=(i.get(h.batchId)||Pt()).add(f);i=i.insert(h.batchId,T)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),_=f.key,v=f.value,T=sP();v.forEach(E=>{if(!a.has(E)){const A=dP(n.get(E),r.get(E));A!==null&&T.set(E,A),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,T))}return _e.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(u){return Xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):_e.resolve(Ru());let h=Uh,f=a;return u.next(_=>_e.forEach(_,(v,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),a.get(v)?_e.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{f=f.insert(v,E)}))).next(()=>this.populateOverlays(e,_,a)).next(()=>this.computeViews(e,f,_,Pt())).next(v=>({batchId:h,changes:iP(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Xe(n)).next(r=>{let i=gh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let u=gh();return this.indexManager.getCollectionParents(e,a).next(h=>_e.forEach(h,f=>{const _=function(T,E){return new cf(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,_,r,i).next(v=>{v.forEach((T,E)=>{u=u.insert(T,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(u=>{a.forEach((f,_)=>{const v=_.getKey();u.get(v)===null&&(u=u.insert(v,Ir.newInvalidDocument(v)))});let h=gh();return u.forEach((f,_)=>{const v=a.get(f);v!==void 0&&Ph(v.mutation,_,Ai.empty(),nn.now()),cg(n,_)&&(h=h.insert(f,_))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yo(i.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:L4(i.bundledQuery),readTime:yo(i.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.overlays=new mn(Xe.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ru();return _e.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.St(e,n,a)}),_e.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const i=Ru(),a=n.length+1,u=new Xe(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,_=f.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new mn((_,v)=>_-v);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let v=a.get(_.largestBatchId);v===null&&(v=Ru(),a=a.insert(_.largestBatchId,v)),v.set(_.getKey(),_)}}const h=Ru(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,v)=>h.set(_,v)),!(h.size()>=i)););return _e.resolve(h)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new u4(n,r));let a=this.qr.get(n);a===void 0&&(a=Pt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.sessionToken=hr.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.Qr=new Gn(rr.$r),this.Ur=new Gn(rr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rr(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Xe(new en([])),r=new rr(n,e),i=new rr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],u=>{this.Gr(u),a.push(u.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Xe(new en([])),r=new rr(n,e),i=new rr(n,e+1);let a=Pt();return this.Ur.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const n=new rr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Xe.comparator(e.key,n.key)||It(e.Yr,n.Yr)}static Kr(e,n){return It(e.Yr,n.Yr)||Xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gn(rr.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new l4(a,n,r,i);this.mutationQueue.push(u);for(const h of i)this.Zr=this.Zr.add(new rr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return _e.resolve(u)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?Sw:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rr(n,0),i=new rr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],u=>{const h=this.Xr(u.Yr);a.push(h)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gn(It);return n.forEach(i=>{const a=new rr(i,0),u=new rr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],h=>{r=r.add(h.Yr)})}),_e.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const u=new rr(new Xe(a),0);let h=new Gn(It);return this.Zr.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(f.Yr)),!0)},u),_e.resolve(this.ti(h))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Bt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return _e.forEach(n.mutations,i=>{const a=new rr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rr(n,0),i=this.Zr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.ri=e,this.docs=function(){return new mn(Xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,u=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=pa();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ir.newInvalidDocument(i))}),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=pa();const u=n.path,h=new Xe(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:_,value:{document:v}}=f.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||bV(xV(v),r)<=0||(i.has(v.key)||cg(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,n,r,i){st(9500)}ii(e,n){return _e.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K4(this)}getSize(e){return _e.resolve(this.size)}}class K4 extends z4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.persistence=e,this.si=new ec(n=>Pw(n),Aw),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new Mw,this.targetCount=0,this.ai=fd.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach((u,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),_e.waitFor(a).next(()=>i)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this.ui={},this.overlays={},this.ci=new og(0),this.li=!1,this.li=!0,this.hi=new q4,this.referenceDelegate=e(this),this.Pi=new Q4(this),this.indexManager=new j4,this.remoteDocumentCache=function(i){return new G4(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new R4(n),this.Ii=new H4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Z4(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new Y4(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return _e.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Y4 extends EV{constructor(e){super(),this.currentSequenceNumber=e}}class Ow{constructor(e){this.persistence=e,this.Ri=new Mw,this.Vi=null}static mi(e){return new Ow(e)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,r=>{const i=Xe.fromPath(r);return this.gi(e,i).next(a=>{a||n.removeEntry(i,ht.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pp{constructor(e,n){this.persistence=e,this.pi=new ec(r=>IV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=U4(this,n)}static mi(e,n){return new Pp(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return _e.forEach(this.pi,(r,i)=>this.br(e,r,i).next(a=>a?_e.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,u=>this.br(e,u,n).next(h=>{h||(r++,a.removeEntry(u,ht.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qm(e.data.value)),n}br(e,n,r){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return _e.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Pt(),i=Pt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Vw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wL()?8:SV(kr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ws(e,n,i,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new X4;return this.Ss(e,n,u).next(h=>{if(a.result=h,this.Vs)return this.bs(e,n,u,h.size)})}).next(()=>a.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Wc()<=Ct.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",qc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(Wc()<=Ct.DEBUG&&Ue("QueryEngine","Query:",qc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Wc()<=Ct.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",qc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,go(n))):_e.resolve())}ys(e,n){if(YT(n))return _e.resolve(null);let r=go(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=iv(n,null,"F"),r=go(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Pt(...a);return this.ps.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.Ds(n,h);return this.Cs(n,_,u,f.readTime)?this.ys(e,iv(n,null,"F")):this.vs(e,_,n,f)}))})))}ws(e,n,r,i){return YT(n)||i.isEqual(ht.min())?_e.resolve(null):this.ps.getDocuments(e,r).next(a=>{const u=this.Ds(n,a);return this.Cs(n,u,r,i)?_e.resolve(null):(Wc()<=Ct.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qc(n)),this.vs(e,u,n,wV(i,Uh)).next(h=>h))})}Ds(e,n){let r=new Gn(nP(e));return n.forEach((i,a)=>{cg(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Wc()<=Ct.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",qc(n)),this.ps.getDocumentsMatchingQuery(e,n,Fl.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="LocalStore",eF=3e8;class tF{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new mn(It),this.xs=new ec(a=>Pw(a),Aw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function nF(t,e,n,r){return new tF(t,e,n,r)}async function SP(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let f=Pt();for(const _ of i){u.push(_.batchId);for(const v of _.mutations)f=f.add(v.key)}for(const _ of a){h.push(_.batchId);for(const v of _.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(r,f).next(_=>({Ls:_,removedBatchIds:u,addedBatchIds:h}))})})}function rF(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(h,f,_,v){const T=_.batch,E=T.keys();let A=_e.resolve();return E.forEach(D=>{A=A.next(()=>v.getEntry(f,D)).next(U=>{const H=_.docVersions.get(D);Bt(H!==null,48541),U.version.compareTo(H)<0&&(T.applyToRemoteDocument(U,_),U.isValidDocument()&&(U.setReadTime(_.commitVersion),v.addEntry(U)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(f,T))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Pt();for(let _=0;_<h.mutationResults.length;++_)h.mutationResults[_].transformResults.length>0&&(f=f.add(h.batch.mutations[_].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CP(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function iF(t,e){const n=pt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const h=[];e.targetChanges.forEach((v,T)=>{const E=i.get(T);if(!E)return;h.push(n.Pi.removeMatchingKeys(a,v.removedDocuments,T).next(()=>n.Pi.addMatchingKeys(a,v.addedDocuments,T)));let A=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(hr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,r)),i=i.insert(T,A),function(U,H,W){return U.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=eF?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(E,A,v)&&h.push(n.Pi.updateTargetData(a,A))});let f=pa(),_=Pt();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(sF(a,u,e.documentUpdates).next(v=>{f=v.ks,_=v.qs})),!r.isEqual(ht.min())){const v=n.Pi.getLastRemoteSnapshotVersion(a).next(T=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return _e.waitFor(h).next(()=>u.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,_)).next(()=>f)}).then(a=>(n.Ms=i,a))}function sF(t,e,n){let r=Pt(),i=Pt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let u=pa();return n.forEach((h,f)=>{const _=a.get(h);f.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(ht.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||f.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):Ue(Fw,"Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",f.version)}),{ks:u,qs:i}})}function oF(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Sw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aF(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(a=>a?(i=a,_e.resolve(i)):n.Pi.allocateTargetId(r).next(u=>(i=new kl(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function uv(t,e,n){const r=pt(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!Id(u))throw u;Ue(Fw,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function cE(t,e,n){const r=pt(t);let i=ht.min(),a=Pt();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,_,v){const T=pt(f),E=T.xs.get(v);return E!==void 0?_e.resolve(T.Ms.get(E)):T.Pi.getTargetData(_,v)}(r,u,go(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>r.Fs.getDocumentsMatchingQuery(u,e,n?i:ht.min(),n?a:Pt())).next(h=>(lF(r,qV(e),h),{documents:h,Qs:a})))}function lF(t,e,n){let r=t.Os.get(e)||ht.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class dE{constructor(){this.activeTargetIds=XV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uF{constructor(){this.Mo=new dE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="ConnectivityMonitor";class fE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(hE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(hE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am=null;function cv(){return Am===null?Am=function(){return 268435456+Math.round(2147483648*Math.random())}():Am++,"0x"+Am.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="RestConnection",dF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===bp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const u=cv(),h=this.zo(e,n.toUriEncodedString());Ue(s_,`Sending RPC '${e}' ${u}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:_}=new URL(h),v=Kl(_);return this.Jo(e,h,f,r,v).then(T=>(Ue(s_,`Received RPC '${e}' ${u}: `,T),T),T=>{throw ud(s_,`RPC '${e}' ${u} failed with error: `,T,"url: ",h,"request:",r),T})}Ho(e,n,r,i,a,u){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const r=dF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="WebChannelConnection";class mF extends hF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const u=cv();return new Promise((h,f)=>{const _=new AI;_.setWithCredentials(!0),_.listenOnce(kI.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Km.NO_ERROR:const T=_.getResponseJson();Ue(Sr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),h(T);break;case Km.TIMEOUT:Ue(Sr,`RPC '${e}' ${u} timed out`),f(new Me(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const E=_.getStatus();if(Ue(Sr,`RPC '${e}' ${u} failed with status:`,E,"response text:",_.getResponseText()),E>0){let A=_.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A?.error;if(D&&D.status&&D.message){const U=function(W){const G=W.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(G)>=0?G:ye.UNKNOWN}(D.status);f(new Me(U,D.message))}else f(new Me(ye.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Me(ye.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:e,streamId:u,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Ue(Sr,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(i);Ue(Sr,`RPC '${e}' ${u} sending request:`,i),_.send(n,"POST",v,r,15)})}T_(e,n,r){const i=cv(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LI(),h=RI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const v=a.join("");Ue(Sr,`Creating RPC '${e}' stream ${i}: ${v}`,f);const T=u.createWebChannel(v,f);this.I_(T);let E=!1,A=!1;const D=new fF({Yo:H=>{A?Ue(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,H):(E||(Ue(Sr,`Opening RPC '${e}' stream ${i} transport.`),T.open(),E=!0),Ue(Sr,`RPC '${e}' stream ${i} sending:`,H),T.send(H))},Zo:()=>T.close()}),U=(H,W,G)=>{H.listen(W,$=>{try{G($)}catch(se){setTimeout(()=>{throw se},0)}})};return U(T,ph.EventType.OPEN,()=>{A||(Ue(Sr,`RPC '${e}' stream ${i} transport opened.`),D.o_())}),U(T,ph.EventType.CLOSE,()=>{A||(A=!0,Ue(Sr,`RPC '${e}' stream ${i} transport closed`),D.a_(),this.E_(T))}),U(T,ph.EventType.ERROR,H=>{A||(A=!0,ud(Sr,`RPC '${e}' stream ${i} transport errored. Name:`,H.name,"Message:",H.message),D.a_(new Me(ye.UNAVAILABLE,"The operation could not be completed")))}),U(T,ph.EventType.MESSAGE,H=>{if(!A){const W=H.data[0];Bt(!!W,16349);const G=W,$=G?.error||G[0]?.error;if($){Ue(Sr,`RPC '${e}' stream ${i} received error:`,$);const se=$.status;let oe=function(j){const V=Dn[j];if(V!==void 0)return fP(V)}(se),ee=$.message;oe===void 0&&(oe=ye.INTERNAL,ee="Unknown error status: "+se+" with message "+$.message),A=!0,D.a_(new Me(oe,ee)),T.close()}else Ue(Sr,`RPC '${e}' stream ${i} received:`,W),D.u_(W)}}),U(h,NI.STAT_EVENT,H=>{H.stat===Y_.PROXY?Ue(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):H.stat===Y_.NOPROXY&&Ue(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function o_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){return new _4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="PersistentStream";class PP{constructor(e,n,r,i,a,u,h,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new IP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Me(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ue(mE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Ue(mE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pF extends PP{constructor(e,n,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=x4(this.serializer,e),r=function(a){if(!("targetChange"in a))return ht.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ht.min():u.readTime?yo(u.readTime):ht.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=lv(this.serializer),n.addTarget=function(a,u){let h;const f=u.target;if(h=nv(f)?{documents:E4(a,f)}:{query:S4(a,f).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=gP(a,u.resumeToken);const _=sv(a,u.expectedCount);_!==null&&(h.expectedCount=_)}else if(u.snapshotVersion.compareTo(ht.min())>0){h.readTime=Ip(a,u.snapshotVersion.toTimestamp());const _=sv(a,u.expectedCount);_!==null&&(h.expectedCount=_)}return h}(this.serializer,e);const r=I4(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=lv(this.serializer),n.removeTarget=e,this.q_(n)}}class gF extends PP{constructor(e,n,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=T4(e.writeResults,e.commitTime),r=yo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=lv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>b4(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{}class _F extends yF{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Go(e,ov(n,r),i,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(ye.UNKNOWN,a.toString())})}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Ho(e,ov(n,r),i,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(ye.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ma(n),this.aa=!1):Ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="RemoteStore";class wF{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(u=>{r.enqueueAndForget(async()=>{tc(this)&&(Ue(qu,"Restarting streams for network reachability change."),await async function(f){const _=pt(f);_.Ea.add(4),await ff(_),_.Ra.set("Unknown"),_.Ea.delete(4),await pg(_)}(this))})}),this.Ra=new vF(r,i)}}async function pg(t){if(tc(t))for(const e of t.da)await e(!0)}async function ff(t){for(const e of t.da)await e(!1)}function AP(t,e){const n=pt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$w(n)?Bw(n):Pd(n).O_()&&zw(n,e))}function Uw(t,e){const n=pt(t),r=Pd(n);n.Ia.delete(e),r.O_()&&kP(n,e),n.Ia.size===0&&(r.O_()?r.L_():tc(n)&&n.Ra.set("Unknown"))}function zw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pd(t).Y_(e)}function kP(t,e){t.Va.Ue(e),Pd(t).Z_(e)}function Bw(t){t.Va=new m4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pd(t).start(),t.Ra.ua()}function $w(t){return tc(t)&&!Pd(t).x_()&&t.Ia.size>0}function tc(t){return pt(t).Ea.size===0}function NP(t){t.Va=void 0}async function xF(t){t.Ra.set("Online")}async function bF(t){t.Ia.forEach((e,n)=>{zw(t,e)})}async function TF(t,e){NP(t),$w(t)?(t.Ra.ha(e),Bw(t)):t.Ra.set("Unknown")}async function EF(t,e,n){if(t.Ra.set("Online"),e instanceof pP&&e.state===2&&e.cause)try{await async function(i,a){const u=a.cause;for(const h of a.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.Ia.delete(h),i.Va.removeTarget(h))}(t,e)}catch(r){Ue(qu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ap(t,r)}else if(e instanceof Jm?t.Va.Ze(e):e instanceof mP?t.Va.st(e):t.Va.tt(e),!n.isEqual(ht.min()))try{const r=await CP(t.localStore);n.compareTo(r)>=0&&await function(a,u){const h=a.Va.Tt(u);return h.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ia.get(_);v&&a.Ia.set(_,v.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,_)=>{const v=a.Ia.get(f);if(!v)return;a.Ia.set(f,v.withResumeToken(hr.EMPTY_BYTE_STRING,v.snapshotVersion)),kP(a,f);const T=new kl(v.target,f,_,v.sequenceNumber);zw(a,T)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){Ue(qu,"Failed to raise snapshot:",r),await Ap(t,r)}}async function Ap(t,e,n){if(!Id(e))throw e;t.Ea.add(1),await ff(t),t.Ra.set("Offline"),n||(n=()=>CP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ue(qu,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pg(t)})}function RP(t,e){return e().catch(n=>Ap(t,n,e))}async function gg(t){const e=pt(t),n=$l(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sw;for(;SF(e);)try{const i=await oF(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,CF(e,i)}catch(i){await Ap(e,i)}LP(e)&&jP(e)}function SF(t){return tc(t)&&t.Ta.length<10}function CF(t,e){t.Ta.push(e);const n=$l(t);n.O_()&&n.X_&&n.ea(e.mutations)}function LP(t){return tc(t)&&!$l(t).x_()&&t.Ta.length>0}function jP(t){$l(t).start()}async function IF(t){$l(t).ra()}async function PF(t){const e=$l(t);for(const n of t.Ta)e.ea(n.mutations)}async function AF(t,e,n){const r=t.Ta.shift(),i=Lw.from(r,e,n);await RP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gg(t)}async function kF(t,e){e&&$l(t).X_&&await async function(r,i){if(function(u){return d4(u)&&u!==ye.ABORTED}(i.code)){const a=r.Ta.shift();$l(r).B_(),await RP(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await gg(r)}}(t,e),LP(t)&&jP(t)}async function pE(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),Ue(qu,"RemoteStore received new credentials");const r=tc(n);n.Ea.add(3),await ff(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pg(n)}async function NF(t,e){const n=pt(t);e?(n.Ea.delete(2),await pg(n)):e||(n.Ea.add(2),await ff(n),n.Ra.set("Unknown"))}function Pd(t){return t.ma||(t.ma=function(n,r,i){const a=pt(n);return a.sa(),new pF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:xF.bind(null,t),t_:bF.bind(null,t),r_:TF.bind(null,t),H_:EF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$w(t)?Bw(t):t.Ra.set("Unknown")):(await t.ma.stop(),NP(t))})),t.ma}function $l(t){return t.fa||(t.fa=function(n,r,i){const a=pt(n);return a.sa(),new gF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IF.bind(null,t),r_:kF.bind(null,t),ta:PF.bind(null,t),na:AF.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await gg(t)):(await t.fa.stop(),t.Ta.length>0&&(Ue(qu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const u=Date.now()+r,h=new Hw(e,n,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ww(t,e){if(ma("AsyncQueue",`${e}: ${t}`),Id(t))return new Me(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{static emptySet(e){return new id(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Xe.comparator(n.key,r.key):(n,r)=>Xe.comparator(n.key,r.key),this.keyedMap=gh(),this.sortedSet=new mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof id)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new id;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.ga=new mn(Xe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):st(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class md{constructor(e,n,r,i,a,u,h,f,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,i,a){const u=[];return n.forEach(h=>{u.push({type:0,doc:h})}),new md(e,n,id.emptySet(n),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class LF{constructor(){this.queries=yE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=pt(n),a=i.queries;i.queries=yE(),a.forEach((u,h)=>{for(const f of h.Sa)f.onError(r)})})(this,new Me(ye.ABORTED,"Firestore shutting down"))}}function yE(){return new ec(t=>tP(t),ug)}async function DP(t,e){const n=pt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new RF,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const h=Ww(u,`Initialization of query '${qc(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&qw(n)}async function MP(t,e){const n=pt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jF(t,e){const n=pt(t);let r=!1;for(const i of e){const a=i.query,u=n.queries.get(a);if(u){for(const h of u.Sa)h.Fa(i)&&(r=!0);u.wa=i}}r&&qw(n)}function DF(t,e,n){const r=pt(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function qw(t){t.Ca.forEach(e=>{e.next()})}var dv,_E;(_E=dv||(dv={})).Ma="default",_E.Cache="cache";class OP{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new md(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.key=e}}class FP{constructor(e){this.key=e}}class MF{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pt(),this.mutatedKeys=Pt(),this.eu=nP(e),this.tu=new id(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new gE,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,_=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,T)=>{const E=i.get(v),A=cg(this.query,T)?T:null,D=!!E&&this.mutatedKeys.has(E.key),U=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let H=!1;E&&A?E.data.isEqual(A.data)?D!==U&&(r.track({type:3,doc:A}),H=!0):this.su(E,A)||(r.track({type:2,doc:A}),H=!0,(f&&this.eu(A,f)>0||_&&this.eu(A,_)<0)&&(h=!0)):!E&&A?(r.track({type:0,doc:A}),H=!0):E&&!A&&(r.track({type:1,doc:E}),H=!0,(f||_)&&(h=!0)),H&&(A?(u=u.add(A),a=U?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:h,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((v,T)=>function(A,D){const U=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:H})}};return U(A)-U(D)}(v.type,T.type)||this.eu(v.doc,T.doc)),this.ou(r),i=i??!1;const h=n&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,_=f!==this.Za;return this.Za=f,u.length!==0||_?{snapshot:new md(this.query,e.tu,a,u,e.mutatedKeys,f===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new FP(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new VP(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Pt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return md.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zw="SyncEngine";class OF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VF{constructor(e){this.key=e,this.hu=!1}}class FF{constructor(e,n,r,i,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ec(h=>tP(h),ug),this.Iu=new Map,this.Eu=new Set,this.du=new mn(Xe.comparator),this.Au=new Map,this.Ru=new Mw,this.Vu={},this.mu=new Map,this.fu=fd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UF(t,e,n=!0){const r=WP(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await UP(r,e,n,!0),i}async function zF(t,e){const n=WP(t);await UP(n,e,!0,!1)}async function UP(t,e,n,r){const i=await aF(t.localStore,go(e)),a=i.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await BF(t,e,a,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&AP(t.remoteStore,i),h}async function BF(t,e,n,r,i){t.pu=(T,E,A)=>async function(U,H,W,G){let $=H.view.ru(W);$.Cs&&($=await cE(U.localStore,H.query,!1).then(({documents:F})=>H.view.ru(F,$)));const se=G&&G.targetChanges.get(H.targetId),oe=G&&G.targetMismatches.get(H.targetId)!=null,ee=H.view.applyChanges($,U.isPrimaryClient,se,oe);return wE(U,H.targetId,ee.au),ee.snapshot}(t,T,E,A);const a=await cE(t.localStore,e,!0),u=new MF(e,a.Qs),h=u.ru(a.documents),f=hf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),_=u.applyChanges(h,t.isPrimaryClient,f);wE(t,n,_.au);const v=new OF(e,n,u);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),_.snapshot}async function $F(t,e,n){const r=pt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(u=>!ug(u,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Uw(r.remoteStore,i.targetId),hv(r,i.targetId)}).catch(Cd)):(hv(r,i.targetId),await uv(r.localStore,i.targetId,!0))}async function HF(t,e){const n=pt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Uw(n.remoteStore,r.targetId))}async function WF(t,e,n){const r=XF(t);try{const i=await function(u,h){const f=pt(u),_=nn.now(),v=h.reduce((A,D)=>A.add(D.key),Pt());let T,E;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let D=pa(),U=Pt();return f.Ns.getEntries(A,v).next(H=>{D=H,D.forEach((W,G)=>{G.isValidDocument()||(U=U.add(W))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,D)).next(H=>{T=H;const W=[];for(const G of h){const $=o4(G,T.get(G.key).overlayedDocument);$!=null&&W.push(new Xl(G.key,$,ZI($.value.mapValue),as.exists(!0)))}return f.mutationQueue.addMutationBatch(A,_,W,h)}).next(H=>{E=H;const W=H.applyToLocalDocumentSet(T,U);return f.documentOverlayCache.saveOverlays(A,H.batchId,W)})}).then(()=>({batchId:E.batchId,changes:iP(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,h,f){let _=u.Vu[u.currentUser.toKey()];_||(_=new mn(It)),_=_.insert(h,f),u.Vu[u.currentUser.toKey()]=_}(r,i.batchId,n),await mf(r,i.changes),await gg(r.remoteStore)}catch(i){const a=Ww(i,"Failed to persist write");n.reject(a)}}async function zP(t,e){const n=pt(t);try{const r=await iF(n.localStore,e);e.targetChanges.forEach((i,a)=>{const u=n.Au.get(a);u&&(Bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Bt(u.hu,14607):i.removedDocuments.size>0&&(Bt(u.hu,42227),u.hu=!1))}),await mf(n,r,e)}catch(r){await Cd(r)}}function vE(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((a,u)=>{const h=u.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(u,h){const f=pt(u);f.onlineState=h;let _=!1;f.queries.forEach((v,T)=>{for(const E of T.Sa)E.va(h)&&(_=!0)}),_&&qw(f)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qF(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let u=new mn(Xe.comparator);u=u.insert(a,Ir.newNoDocument(a,ht.min()));const h=Pt().add(a),f=new fg(ht.min(),new Map,new mn(It),u,h);await zP(r,f),r.du=r.du.remove(a),r.Au.delete(e),Gw(r)}else await uv(r.localStore,e,!1).then(()=>hv(r,e,n)).catch(Cd)}async function ZF(t,e){const n=pt(t),r=e.batch.batchId;try{const i=await rF(n.localStore,e);$P(n,r,null),BP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mf(n,i)}catch(i){await Cd(i)}}async function GF(t,e,n){const r=pt(t);try{const i=await function(u,h){const f=pt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let v;return f.mutationQueue.lookupMutationBatch(_,h).next(T=>(Bt(T!==null,37113),v=T.keys(),f.mutationQueue.removeMutationBatch(_,T))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,v)).next(()=>f.localDocuments.getDocuments(_,v))})}(r.localStore,e);$P(r,e,n),BP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mf(r,i)}catch(i){await Cd(i)}}function BP(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $P(t,e,n){const r=pt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||HP(t,r)})}function HP(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Uw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gw(t))}function wE(t,e,n){for(const r of n)r instanceof VP?(t.Ru.addReference(r.key,e),KF(t,r)):r instanceof FP?(Ue(Zw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||HP(t,r.key)):st(19791,{wu:r})}function KF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ue(Zw,"New document in limbo: "+n),t.Eu.add(r),Gw(t))}function Gw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Xe(en.fromString(e)),r=t.fu.next();t.Au.set(r,new VF(n)),t.du=t.du.insert(n,r),AP(t.remoteStore,new kl(go(kw(n.path)),r,"TargetPurposeLimboResolution",og.ce))}}async function mf(t,e,n){const r=pt(t),i=[],a=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach((h,f)=>{u.push(r.pu(f,e,n).then(_=>{if((_||n)&&r.isPrimaryClient){const v=_?!_.fromCache:n?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(_){i.push(_);const v=Vw.As(f.targetId,_);a.push(v)}}))}),await Promise.all(u),r.Pu.H_(i),await async function(f,_){const v=pt(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>_e.forEach(_,E=>_e.forEach(E.Es,A=>v.persistence.referenceDelegate.addReference(T,E.targetId,A)).next(()=>_e.forEach(E.ds,A=>v.persistence.referenceDelegate.removeReference(T,E.targetId,A)))))}catch(T){if(!Id(T))throw T;Ue(Fw,"Failed to update sequence numbers: "+T)}for(const T of _){const E=T.targetId;if(!T.fromCache){const A=v.Ms.get(E),D=A.snapshotVersion,U=A.withLastLimboFreeSnapshotVersion(D);v.Ms=v.Ms.insert(E,U)}}}(r.localStore,a))}async function QF(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){Ue(Zw,"User change. New user:",e.toKey());const r=await SP(n.localStore,e);n.currentUser=e,function(a,u){a.mu.forEach(h=>{h.forEach(f=>{f.reject(new Me(ye.CANCELLED,u))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mf(n,r.Ls)}}function YF(t,e){const n=pt(t),r=n.Au.get(e);if(r&&r.hu)return Pt().add(r.key);{let i=Pt();const a=n.Iu.get(e);if(!a)return i;for(const u of a){const h=n.Tu.get(u);i=i.unionWith(h.view.nu)}return i}}function WP(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qF.bind(null,e),e.Pu.H_=jF.bind(null,e.eventManager),e.Pu.yu=DF.bind(null,e.eventManager),e}function XF(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GF.bind(null,e),e}class kp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nF(this.persistence,new J4,e.initialUser,this.serializer)}Cu(e){return new EP(Ow.mi,this.serializer)}Du(e){return new uF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kp.provider={build:()=>new kp};class JF extends kp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Bt(this.persistence.referenceDelegate instanceof Pp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new V4(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new EP(r=>Pp.mi(r,n),this.serializer)}}class fv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QF.bind(null,this.syncEngine),await NF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LF}()}createDatastore(e){const n=mg(e.databaseInfo.databaseId),r=function(a){return new mF(a)}(e.databaseInfo);return function(a,u,h,f){return new _F(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,u,h){return new wF(r,i,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,n=>vE(this.syncEngine,n,0),function(){return fE.v()?new fE:new cF}())}createSyncEngine(e,n){return function(i,a,u,h,f,_,v){const T=new FF(i,a,u,h,f,_);return v&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=pt(n);Ue(qu,"RemoteStore shutting down."),r.Ea.add(5),await ff(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fv.provider={build:()=>new fv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="FirestoreClient";class e3{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cr.UNAUTHENTICATED,this.clientId=Ew.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{Ue(Hl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Ue(Hl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ww(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function a_(t,e){t.asyncQueue.verifyOperationInProgress(),Ue(Hl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await t3(t);Ue(Hl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pE(e.remoteStore,i)),t._onlineComponents=e}async function t3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue(Hl,"Using user provided OfflineComponentProvider");try{await a_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ud("Error using user provided cache. Falling back to memory cache: "+n),await a_(t,new kp)}}else Ue(Hl,"Using default OfflineComponentProvider"),await a_(t,new JF(void 0));return t._offlineComponents}async function ZP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue(Hl,"Using user provided OnlineComponentProvider"),await xE(t,t._uninitializedComponentsProvider._online)):(Ue(Hl,"Using default OnlineComponentProvider"),await xE(t,new fv))),t._onlineComponents}function n3(t){return ZP(t).then(e=>e.syncEngine)}async function GP(t){const e=await ZP(t),n=e.eventManager;return n.onListen=UF.bind(null,e.syncEngine),n.onUnlisten=$F.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HF.bind(null,e.syncEngine),n}function r3(t,e,n={}){const r=new ca;return t.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,_){const v=new qP({next:E=>{v.Nu(),u.enqueueAndForget(()=>MP(a,T));const A=E.docs.has(h);!A&&E.fromCache?_.reject(new Me(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&f&&f.source==="server"?_.reject(new Me(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(E)},error:E=>_.reject(E)}),T=new OP(kw(h.path),v,{includeMetadataChanges:!0,qa:!0});return DP(a,T)}(await GP(t),t.asyncQueue,e,n,r)),r.promise}function i3(t,e,n={}){const r=new ca;return t.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,_){const v=new qP({next:E=>{v.Nu(),u.enqueueAndForget(()=>MP(a,T)),E.fromCache&&f.source==="server"?_.reject(new Me(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(E)},error:E=>_.reject(E)}),T=new OP(h,v,{includeMetadataChanges:!0,qa:!0});return DP(a,T)}(await GP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firestore.googleapis.com",TE=!0;class EE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QP,this.ssl=TE}else this.host=e.host,this.ssl=e.ssl??TE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M4)throw new Me(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KP(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uV;switch(r.type){case"firstParty":return new fV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bE.get(n);r&&(Ue("ComponentProvider","Removing Datastore"),bE.delete(n),r.terminate())}(this),Promise.resolve()}}function s3(t,e,n,r={}){t=Bs(t,yg);const i=Kl(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;i&&(sw(`https://${h}`),ow("Firestore",!0)),a.host!==QP&&a.host!==h&&ud("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:i,emulatorOptions:r};if(!Vl(f,u)&&(t._setSettings(f),r.mockUserToken)){let _,v;if(typeof r.mockUserToken=="string")_=r.mockUserToken,v=Cr.MOCK_USER;else{_=wC(r.mockUserToken,t._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Me(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Cr(T)}t._authCredentials=new cV(new DI(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ad(this.firestore,e,this._query)}}class Cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}toJSON(){return{type:Cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(uf(n,Cn._jsonSchema))return new Cn(e,r||null,new Xe(en.fromString(n.referencePath)))}}Cn._jsonSchemaVersion="firestore/documentReference/1.0",Cn._jsonSchema={type:zn("string",Cn._jsonSchemaVersion),referencePath:zn("string")};class Ml extends Ad{constructor(e,n,r){super(e,n,kw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new Xe(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function fr(t,e,...n){if(t=ln(t),MI("collection","path",e),t instanceof yg){const r=en.fromString(e,...n);return OT(r),new Ml(t,null,r)}{if(!(t instanceof Cn||t instanceof Ml))throw new Me(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(en.fromString(e,...n));return OT(r),new Ml(t.firestore,null,r)}}function Bn(t,e,...n){if(t=ln(t),arguments.length===1&&(e=Ew.newId()),MI("doc","path",e),t instanceof yg){const r=en.fromString(e,...n);return MT(r),new Cn(t,null,new Xe(r))}{if(!(t instanceof Cn||t instanceof Ml))throw new Me(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(en.fromString(e,...n));return MT(r),new Cn(t.firestore,t instanceof Ml?t.converter:null,new Xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class CE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new IP(this,"async_queue_retry"),this._c=()=>{const r=o_();r&&Ue(SE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=o_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=o_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ca;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Id(e))throw e;Ue(SE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ma("INTERNAL UNHANDLED ERROR: ",IE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Hw.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&st(47125,{Pc:IE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function IE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class nc extends yg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new CE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CE(e),this._firestoreClient=void 0,await e}}}function kd(t,e){const n=typeof t=="object"?t:Jp(),r=typeof t=="string"?t:bp,i=Ql(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=yC("firestore");a&&s3(i,...a)}return i}function Kw(t){if(t._terminated)throw new Me(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||o3(t),t._firestoreClient}function o3(t){const e=t._freezeSettings(),n=function(i,a,u,h){return new kV(i,a,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,KP(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new e3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new os(hr.fromBase64String(e))}catch(n){throw new Me(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new os(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uf(e,os._jsonSchema))return os.fromBase64String(e.bytes)}}os._jsonSchemaVersion="firestore/bytes/1.0",os._jsonSchema={type:zn("string",os._jsonSchemaVersion),bytes:zn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return It(this._lat,e._lat)||It(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_o._jsonSchemaVersion}}static fromJSON(e){if(uf(e,_o._jsonSchema))return new _o(e.latitude,e.longitude)}}_o._jsonSchemaVersion="firestore/geoPoint/1.0",_o._jsonSchema={type:zn("string",_o._jsonSchemaVersion),latitude:zn("number"),longitude:zn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uf(e,vo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vo(e.vectorValues);throw new Me(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vo._jsonSchemaVersion="firestore/vectorValue/1.0",vo._jsonSchema={type:zn("string",vo._jsonSchemaVersion),vectorValues:zn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=/^__.*__$/;class l3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xl(e,this.data,this.fieldMask,n,this.fieldTransforms):new df(e,this.data,n,this.fieldTransforms)}}class YP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:t})}}class Qw{constructor(e,n,r,i,a,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Np(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XP(this.Ac)&&a3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mg(e)}Cc(e,n,r,i=!1){return new Qw({Ac:e,methodName:n,Dc:r,path:dr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(t){const e=t._freezeSettings(),n=mg(t._databaseId);return new u3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JP(t,e,n,r,i,a={}){const u=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);Xw("Data must be an object, but it was:",u,r);const h=eA(r,u);let f,_;if(a.merge)f=new Ai(u.fieldMask),_=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const E=mv(e,T,n);if(!u.contains(E))throw new Me(ye.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);nA(v,E)||v.push(E)}f=new Ai(v),_=u.fieldTransforms.filter(T=>f.covers(T.field))}else f=null,_=u.fieldTransforms;return new l3(new hi(h),f,_)}class xg extends vg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xg}}class Yw extends vg{_toFieldTransform(e){return new n4(e.path,new Hh)}isEqual(e){return e instanceof Yw}}function c3(t,e,n,r){const i=t.Cc(1,e,n);Xw("Data must be an object, but it was:",i,r);const a=[],u=hi.empty();Yl(r,(f,_)=>{const v=Jw(e,f,n);_=ln(_);const T=i.yc(v);if(_ instanceof xg)a.push(v);else{const E=pf(_,T);E!=null&&(a.push(v),u.set(v,E))}});const h=new Ai(a);return new YP(u,h,i.fieldTransforms)}function d3(t,e,n,r,i,a){const u=t.Cc(1,e,n),h=[mv(e,r,n)],f=[i];if(a.length%2!=0)throw new Me(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push(mv(e,a[E])),f.push(a[E+1]);const _=[],v=hi.empty();for(let E=h.length-1;E>=0;--E)if(!nA(_,h[E])){const A=h[E];let D=f[E];D=ln(D);const U=u.yc(A);if(D instanceof xg)_.push(A);else{const H=pf(D,U);H!=null&&(_.push(A),v.set(A,H))}}const T=new Ai(_);return new YP(v,T,u.fieldTransforms)}function h3(t,e,n,r=!1){return pf(n,t.Cc(r?4:3,e))}function pf(t,e){if(tA(t=ln(t)))return Xw("Unsupported field value:",e,t),eA(t,e);if(t instanceof vg)return function(r,i){if(!XP(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const a=[];let u=0;for(const h of r){let f=pf(h,i.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=nn.fromDate(r);return{timestampValue:Ip(i.serializer,a)}}if(r instanceof nn){const a=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ip(i.serializer,a)}}if(r instanceof _o)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof os)return{bytesValue:gP(i.serializer,r._byteString)};if(r instanceof Cn){const a=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vo)return function(u,h){return{mapValue:{fields:{[WI]:{stringValue:qI},[Tp]:{arrayValue:{values:u.toArray().map(_=>{if(typeof _!="number")throw h.Sc("VectorValues must only contain numeric values.");return Nw(h.serializer,_)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${sg(r)}`)}(t,e)}function eA(t,e){const n={};return FI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yl(t,(r,i)=>{const a=pf(i,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function tA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nn||t instanceof _o||t instanceof os||t instanceof Cn||t instanceof vg||t instanceof vo)}function Xw(t,e,n){if(!tA(n)||!OI(n)){const r=sg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function mv(t,e,n){if((e=ln(e))instanceof _g)return e._internalPath;if(typeof e=="string")return Jw(t,e);throw Np("Field path arguments must be of type string or ",t,!1,void 0,n)}const f3=new RegExp("[~\\*/\\[\\]]");function Jw(t,e,n){if(e.search(f3)>=0)throw Np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _g(...e.split("."))._internalPath}catch{throw Np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Np(t,e,n,r,i){const a=r&&!r.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new Me(ye.INVALID_ARGUMENT,h+t+f)}function nA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ex("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class m3 extends rA{data(){return super.data()}}function ex(t,e){return typeof e=="string"?Jw(t,e):e instanceof _g?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tx{}class g3 extends tx{}function ga(t,e,...n){let r=[];e instanceof tx&&r.push(e),r=r.concat(n),function(a){const u=a.filter(f=>f instanceof nx).length,h=a.filter(f=>f instanceof bg).length;if(u>1||u>0&&h>0)throw new Me(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class bg extends g3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bg(e,n,r)}_apply(e){const n=this._parse(e);return iA(e._query,n),new Ad(e.firestore,e.converter,rv(e._query,n))}_parse(e){const n=wg(e.firestore);return function(a,u,h,f,_,v,T){let E;if(_.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Me(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){AE(T,v);const D=[];for(const U of T)D.push(PE(f,a,U));E={arrayValue:{values:D}}}else E=PE(f,a,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||AE(T,v),E=h3(h,u,T,v==="in"||v==="not-in");return Un.create(_,v,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ya(t,e,n){const r=e,i=ex("where",t);return bg._create(i,r,n)}class nx extends tx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$s.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let u=i;const h=a.getFlattenedFilters();for(const f of h)iA(u,f),u=rv(u,f)}(e._query,n),new Ad(e.firestore,e.converter,rv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function PE(t,e,n){if(typeof(n=ln(n))=="string"){if(n==="")throw new Me(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eP(e)&&n.indexOf("/")!==-1)throw new Me(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(en.fromString(n));if(!Xe.isDocumentKey(r))throw new Me(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return WT(t,new Xe(r))}if(n instanceof Cn)return WT(t,n._key);throw new Me(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sg(n)}.`)}function AE(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iA(t,e){const n=function(i,a){for(const u of i)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Me(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class y3{convertValue(e,n="none"){switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yl(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){const n=e.fields?.[Tp].arrayValue?.values?.map(r=>Sn(r.doubleValue));return new vo(n)}convertGeoPoint(e){return new _o(Sn(e.latitude),Sn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zh(e));default:return null}}convertTimestamp(e){const n=Ul(e);return new nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=en.fromString(e);Bt(bP(r),9688,{name:e});const i=new Bh(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(n)||ma(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class _h{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vu extends rA{constructor(e,n,r,i,a,u){super(e,n,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ex("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vu._jsonSchema={type:zn("string",Vu._jsonSchemaVersion),bundleSource:zn("string","DocumentSnapshot"),bundleName:zn("string"),bundle:zn("string")};class ep extends Vu{data(e={}){return super.data(e)}}class sd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _h(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ep(this._firestore,this._userDataWriter,r.key,r,new _h(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(h=>{const f=new ep(i._firestore,i._userDataWriter,h.doc.key,h.doc,new _h(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new ep(i._firestore,i._userDataWriter,h.doc.key,h.doc,new _h(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let _=-1,v=-1;return h.type!==0&&(_=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:_3(h.type),doc:f,oldIndex:_,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ew.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){t=Bs(t,Cn);const e=Bs(t.firestore,nc);return r3(Kw(e),t._key).then(n=>x3(e,t,n))}sd._jsonSchemaVersion="firestore/querySnapshot/1.0",sd._jsonSchema={type:zn("string",sd._jsonSchemaVersion),bundleSource:zn("string","QuerySnapshot"),bundleName:zn("string"),bundle:zn("string")};class oA extends y3{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,n)}}function Nr(t){t=Bs(t,Ad);const e=Bs(t.firestore,nc),n=Kw(e),r=new oA(e);return p3(t._query),i3(n,t._query).then(i=>new sd(e,r,t,i))}function Nd(t,e,n){t=Bs(t,Cn);const r=Bs(t.firestore,nc),i=sA(t.converter,e);return Tg(r,[JP(wg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,as.none())])}function Jl(t,e,n,...r){t=Bs(t,Cn);const i=Bs(t.firestore,nc),a=wg(i);let u;return u=typeof(e=ln(e))=="string"||e instanceof _g?d3(a,"updateDoc",t._key,e,n,r):c3(a,"updateDoc",t._key,e),Tg(i,[u.toMutation(t._key,as.exists(!0))])}function v3(t){return Tg(Bs(t.firestore,nc),[new Rw(t._key,as.none())])}function w3(t,e){const n=Bs(t.firestore,nc),r=Bn(t),i=sA(t.converter,e);return Tg(n,[JP(wg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,as.exists(!1))]).then(()=>r)}function Tg(t,e){return function(r,i){const a=new ca;return r.asyncQueue.enqueueAndForget(async()=>WF(await n3(r),i,a)),a.promise}(Kw(t),e)}function x3(t,e,n){const r=n.docs.get(e._key),i=new oA(t);return new Vu(t,i,e._key,r,new _h(n.hasPendingWrites,n.fromCache),e.converter)}function kE(){return new Yw("serverTimestamp")}(function(e,n=!0){(function(i){Sd=i})(Xu),zs(new us("firestore",(r,{instanceIdentifier:i,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new nc(new dV(r.getProvider("auth-internal")),new mV(u,r.getProvider("app-check-internal")),function(_,v){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Me(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bh(_.options.projectId,v)}(u,i),u);return a={useFetchStreams:n,...a},h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),mi(RT,LT,e),mi(RT,LT,"esm2020")})();const b3={apiKey:"AIzaSyDBiInvXywL0IrCgQsiEiYxXTfBMliUoFo",authDomain:"goupevents-infra-non-prod-s23.firebaseapp.com",projectId:"goupevents-infra-non-prod-s23",storageBucket:"goupevents-infra-non-prod-s23.firebasestorage.app",messagingSenderId:"931565577824",appId:"1:931565577824:web:e602132b96358460538505",measurementId:"G-7YTJNEZ0KW"},rx=IC(b3);let T3=null;if(typeof window<"u")try{T3=rM(rx)}catch{}const Zh=aV(rx),E3=new ia;function S3(t){return KM(Zh,t)}function C3(){return QM(Zh)}const rn=kd(rx),aA=N.createContext(void 0);function I3({children:t}){const[e,n]=N.useState(null),[r,i]=N.useState(null),[a,u]=N.useState(null),[h,f]=N.useState(!0);N.useEffect(()=>S3(E=>{n(E),f(!1)}),[]),N.useEffect(()=>{if(!e){i(null),u(null);return}(async()=>{try{const E=Bn(rn,"usersWeb",e.uid),A=await _a(E);if(A.exists()){const D=A.data();i(D),u(D.rol??null)}else{const D={uid:e.uid,email:e.email??"",nombre:e.displayName??"",rol:"admin",creado:new Date};await Nd(E,D),i(D),u(D.rol)}}catch(E){console.error("Error cargando DBUser:",E),i(null),u(null)}})()},[e]);const _=async()=>{await C3(),n(null),i(null),u(null)},v=async()=>{try{await gO(Zh,E3)}catch(T){console.error("Error al iniciar sesin con Google:",T)}};return m.jsx(aA.Provider,{value:{user:e,dbUser:r,rol:a,loading:h,signOut:_,signInWithGoogle:v},children:t})}const ir=()=>{const t=N.useContext(aA);if(!t)throw new Error("useAuth debe usarse dentro de <AuthProvider>");return t};function P3({children:t}){return m.jsx(I3,{children:t})}const ix=N.createContext({});function sx(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const ox=typeof window<"u",lA=ox?N.useLayoutEffect:N.useEffect,Eg=N.createContext(null);function ax(t,e){t.indexOf(e)===-1&&t.push(e)}function lx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const va=(t,e,n)=>n>e?e:n<t?t:n;let ux=()=>{};const wa={},uA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function cA(t){return typeof t=="object"&&t!==null}const dA=t=>/^0[^.\s]+$/u.test(t);function cx(t){let e;return()=>(e===void 0&&(e=t()),e)}const ls=t=>t,A3=(t,e)=>n=>e(t(n)),gf=(...t)=>t.reduce(A3),Gh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class dx{constructor(){this.subscriptions=[]}add(e){return ax(this.subscriptions,e),()=>lx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const u=this.subscriptions[a];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wo=t=>t*1e3,xo=t=>t/1e3;function hA(t,e){return e?t*(1e3/e):0}const fA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,k3=1e-7,N3=12;function R3(t,e,n,r,i){let a,u,h=0;do u=e+(n-e)/2,a=fA(u,r,i)-t,a>0?n=u:e=u;while(Math.abs(a)>k3&&++h<N3);return u}function yf(t,e,n,r){if(t===e&&n===r)return ls;const i=a=>R3(a,0,1,t,n);return a=>a===0||a===1?a:fA(i(a),e,r)}const mA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pA=t=>e=>1-t(1-e),gA=yf(.33,1.53,.69,.99),hx=pA(gA),yA=mA(hx),_A=t=>(t*=2)<1?.5*hx(t):.5*(2-Math.pow(2,-10*(t-1))),fx=t=>1-Math.sin(Math.acos(t)),vA=pA(fx),wA=mA(fx),L3=yf(.42,0,1,1),j3=yf(0,0,.58,1),xA=yf(.42,0,.58,1),D3=t=>Array.isArray(t)&&typeof t[0]!="number",bA=t=>Array.isArray(t)&&typeof t[0]=="number",M3={linear:ls,easeIn:L3,easeInOut:xA,easeOut:j3,circIn:fx,circInOut:wA,circOut:vA,backIn:hx,backInOut:yA,backOut:gA,anticipate:_A},O3=t=>typeof t=="string",NE=t=>{if(bA(t)){ux(t.length===4);const[e,n,r,i]=t;return yf(e,n,r,i)}else if(O3(t))return M3[t];return t},km=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function V3(t,e){let n=new Set,r=new Set,i=!1,a=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(v){u.has(v)&&(_.schedule(v),t()),v(h)}const _={schedule:(v,T=!1,E=!1)=>{const D=E&&i?n:r;return T&&u.add(v),D.has(v)||D.add(v),v},cancel:v=>{r.delete(v),u.delete(v)},process:v=>{if(h=v,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(f),n.clear(),i=!1,a&&(a=!1,_.process(v))}};return _}const F3=40;function TA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=km.reduce(($,se)=>($[se]=V3(a),$),{}),{setup:h,read:f,resolveKeyframes:_,preUpdate:v,update:T,preRender:E,render:A,postRender:D}=u,U=()=>{const $=wa.useManualTiming?i.timestamp:performance.now();n=!1,wa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min($-i.timestamp,F3),1)),i.timestamp=$,i.isProcessing=!0,h.process(i),f.process(i),_.process(i),v.process(i),T.process(i),E.process(i),A.process(i),D.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(U))},H=()=>{n=!0,r=!0,i.isProcessing||t(U)};return{schedule:km.reduce(($,se)=>{const oe=u[se];return $[se]=(ee,F=!1,j=!1)=>(n||H(),oe.schedule(ee,F,j)),$},{}),cancel:$=>{for(let se=0;se<km.length;se++)u[km[se]].cancel($)},state:i,steps:u}}const{schedule:on,cancel:Wl,state:ur,steps:l_}=TA(typeof requestAnimationFrame<"u"?requestAnimationFrame:ls,!0);let tp;function U3(){tp=void 0}const fi={now:()=>(tp===void 0&&fi.set(ur.isProcessing||wa.useManualTiming?ur.timestamp:performance.now()),tp),set:t=>{tp=t,queueMicrotask(U3)}},EA=t=>e=>typeof e=="string"&&e.startsWith(t),mx=EA("--"),z3=EA("var(--"),px=t=>z3(t)?B3.test(t.split("/*")[0].trim()):!1,B3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kh={...Rd,transform:t=>va(0,1,t)},Nm={...Rd,default:1},Ah=t=>Math.round(t*1e5)/1e5,gx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $3(t){return t==null}const H3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yx=(t,e)=>n=>!!(typeof n=="string"&&H3.test(n)&&n.startsWith(t)||e&&!$3(n)&&Object.prototype.hasOwnProperty.call(n,e)),SA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,u,h]=r.match(gx);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},W3=t=>va(0,255,t),u_={...Rd,transform:t=>Math.round(W3(t))},Lu={test:yx("rgb","red"),parse:SA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+u_.transform(t)+", "+u_.transform(e)+", "+u_.transform(n)+", "+Ah(Kh.transform(r))+")"};function q3(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const pv={test:yx("#"),parse:q3,transform:Lu.transform},_f=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tl=_f("deg"),bo=_f("%"),lt=_f("px"),Z3=_f("vh"),G3=_f("vw"),RE={...bo,parse:t=>bo.parse(t)/100,transform:t=>bo.transform(t*100)},Qc={test:yx("hsl","hue"),parse:SA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bo.transform(Ah(e))+", "+bo.transform(Ah(n))+", "+Ah(Kh.transform(r))+")"},Mn={test:t=>Lu.test(t)||pv.test(t)||Qc.test(t),parse:t=>Lu.test(t)?Lu.parse(t):Qc.test(t)?Qc.parse(t):pv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Lu.transform(t):Qc.transform(t),getAnimatableNone:t=>{const e=Mn.parse(t);return e.alpha=0,Mn.transform(e)}},K3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q3(t){return isNaN(t)&&typeof t=="string"&&(t.match(gx)?.length||0)+(t.match(K3)?.length||0)>0}const CA="number",IA="color",Y3="var",X3="var(",LE="${}",J3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const h=e.replace(J3,f=>(Mn.test(f)?(r.color.push(a),i.push(IA),n.push(Mn.parse(f))):f.startsWith(X3)?(r.var.push(a),i.push(Y3),n.push(f)):(r.number.push(a),i.push(CA),n.push(parseFloat(f))),++a,LE)).split(LE);return{values:n,split:h,indexes:r,types:i}}function PA(t){return Qh(t).values}function AA(t){const{split:e,types:n}=Qh(t),r=e.length;return i=>{let a="";for(let u=0;u<r;u++)if(a+=e[u],i[u]!==void 0){const h=n[u];h===CA?a+=Ah(i[u]):h===IA?a+=Mn.transform(i[u]):a+=i[u]}return a}}const eU=t=>typeof t=="number"?0:Mn.test(t)?Mn.getAnimatableNone(t):t;function tU(t){const e=PA(t);return AA(t)(e.map(eU))}const ql={test:Q3,parse:PA,createTransformer:AA,getAnimatableNone:tU};function c_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,u=0;if(!e)i=a=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,f=2*n-h;i=c_(f,h,t+1/3),a=c_(f,h,t),u=c_(f,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function Rp(t,e){return n=>n>0?e:t}const fn=(t,e,n)=>t+(e-t)*n,d_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},rU=[pv,Lu,Qc],iU=t=>rU.find(e=>e.test(t));function jE(t){const e=iU(t);if(!e)return!1;let n=e.parse(t);return e===Qc&&(n=nU(n)),n}const DE=(t,e)=>{const n=jE(t),r=jE(e);if(!n||!r)return Rp(t,e);const i={...n};return a=>(i.red=d_(n.red,r.red,a),i.green=d_(n.green,r.green,a),i.blue=d_(n.blue,r.blue,a),i.alpha=fn(n.alpha,r.alpha,a),Lu.transform(i))},gv=new Set(["none","hidden"]);function sU(t,e){return gv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function oU(t,e){return n=>fn(t,e,n)}function _x(t){return typeof t=="number"?oU:typeof t=="string"?px(t)?Rp:Mn.test(t)?DE:uU:Array.isArray(t)?kA:typeof t=="object"?Mn.test(t)?DE:aU:Rp}function kA(t,e){const n=[...t],r=n.length,i=t.map((a,u)=>_x(a)(a,e[u]));return a=>{for(let u=0;u<r;u++)n[u]=i[u](a);return n}}function aU(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=_x(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function lU(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],u=t.indexes[a][r[a]],h=t.values[u]??0;n[i]=h,r[a]++}return n}const uU=(t,e)=>{const n=ql.createTransformer(e),r=Qh(t),i=Qh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?gv.has(t)&&!i.values.length||gv.has(e)&&!r.values.length?sU(t,e):gf(kA(lU(r,i),i.values),n):Rp(t,e)};function NA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fn(t,e,n):_x(t)(t,e)}const cU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>on.update(e,n),stop:()=>Wl(e),now:()=>ur.isProcessing?ur.timestamp:fi.now()}},RA=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Lp=2e4;function vx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Lp;)e+=n,r=t.next(e);return e>=Lp?1/0:e}function dU(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(vx(r),Lp);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:xo(i)}}const hU=5;function LA(t,e,n){const r=Math.max(e-hU,0);return hA(n-t(r),e-r)}const _n={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},h_=.001;function fU({duration:t=_n.duration,bounce:e=_n.bounce,velocity:n=_n.velocity,mass:r=_n.mass}){let i,a,u=1-e;u=va(_n.minDamping,_n.maxDamping,u),t=va(_n.minDuration,_n.maxDuration,xo(t)),u<1?(i=_=>{const v=_*u,T=v*t,E=v-n,A=yv(_,u),D=Math.exp(-T);return h_-E/A*D},a=_=>{const T=_*u*t,E=T*n+n,A=Math.pow(u,2)*Math.pow(_,2)*t,D=Math.exp(-T),U=yv(Math.pow(_,2),u);return(-i(_)+h_>0?-1:1)*((E-A)*D)/U}):(i=_=>{const v=Math.exp(-_*t),T=(_-n)*t+1;return-h_+v*T},a=_=>{const v=Math.exp(-_*t),T=(n-_)*(t*t);return v*T});const h=5/t,f=pU(i,a,h);if(t=wo(t),isNaN(f))return{stiffness:_n.stiffness,damping:_n.damping,duration:t};{const _=Math.pow(f,2)*r;return{stiffness:_,damping:u*2*Math.sqrt(r*_),duration:t}}}const mU=12;function pU(t,e,n){let r=n;for(let i=1;i<mU;i++)r=r-t(r)/e(r);return r}function yv(t,e){return t*Math.sqrt(1-e*e)}const gU=["duration","bounce"],yU=["stiffness","damping","mass"];function ME(t,e){return e.some(n=>t[n]!==void 0)}function _U(t){let e={velocity:_n.velocity,stiffness:_n.stiffness,damping:_n.damping,mass:_n.mass,isResolvedFromDuration:!1,...t};if(!ME(t,yU)&&ME(t,gU))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*va(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:_n.mass,stiffness:i,damping:a}}else{const n=fU(t);e={...e,...n,mass:_n.mass},e.isResolvedFromDuration=!0}return e}function jp(t=_n.visualDuration,e=_n.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:_,mass:v,duration:T,velocity:E,isResolvedFromDuration:A}=_U({...n,velocity:-xo(n.velocity||0)}),D=E||0,U=_/(2*Math.sqrt(f*v)),H=u-a,W=xo(Math.sqrt(f/v)),G=Math.abs(H)<5;r||(r=G?_n.restSpeed.granular:_n.restSpeed.default),i||(i=G?_n.restDelta.granular:_n.restDelta.default);let $;if(U<1){const oe=yv(W,U);$=ee=>{const F=Math.exp(-U*W*ee);return u-F*((D+U*W*H)/oe*Math.sin(oe*ee)+H*Math.cos(oe*ee))}}else if(U===1)$=oe=>u-Math.exp(-W*oe)*(H+(D+W*H)*oe);else{const oe=W*Math.sqrt(U*U-1);$=ee=>{const F=Math.exp(-U*W*ee),j=Math.min(oe*ee,300);return u-F*((D+U*W*H)*Math.sinh(j)+oe*H*Math.cosh(j))/oe}}const se={calculatedDuration:A&&T||null,next:oe=>{const ee=$(oe);if(A)h.done=oe>=T;else{let F=oe===0?D:0;U<1&&(F=oe===0?wo(D):LA($,oe,ee));const j=Math.abs(F)<=r,V=Math.abs(u-ee)<=i;h.done=j&&V}return h.value=h.done?u:ee,h},toString:()=>{const oe=Math.min(vx(se),Lp),ee=RA(F=>se.next(oe*F).value,oe,30);return oe+"ms "+ee},toTransition:()=>{}};return se}jp.applyToOptions=t=>{const e=dU(t,100,jp);return t.ease=e.ease,t.duration=wo(e.duration),t.type="keyframes",t};function _v({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:_=.5,restSpeed:v}){const T=t[0],E={done:!1,value:T},A=j=>h!==void 0&&j<h||f!==void 0&&j>f,D=j=>h===void 0?f:f===void 0||Math.abs(h-j)<Math.abs(f-j)?h:f;let U=n*e;const H=T+U,W=u===void 0?H:u(H);W!==H&&(U=W-T);const G=j=>-U*Math.exp(-j/r),$=j=>W+G(j),se=j=>{const V=G(j),B=$(j);E.done=Math.abs(V)<=_,E.value=E.done?W:B};let oe,ee;const F=j=>{A(E.value)&&(oe=j,ee=jp({keyframes:[E.value,D(E.value)],velocity:LA($,j,E.value),damping:i,stiffness:a,restDelta:_,restSpeed:v}))};return F(0),{calculatedDuration:null,next:j=>{let V=!1;return!ee&&oe===void 0&&(V=!0,se(j),F(j)),oe!==void 0&&j>=oe?ee.next(j-oe):(!V&&se(j),E)}}}function vU(t,e,n){const r=[],i=n||wa.mix||NA,a=t.length-1;for(let u=0;u<a;u++){let h=i(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||ls:e;h=gf(f,h)}r.push(h)}return r}function wU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(ux(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=vU(e,r,i),f=h.length,_=v=>{if(u&&v<t[0])return e[0];let T=0;if(f>1)for(;T<t.length-2&&!(v<t[T+1]);T++);const E=Gh(t[T],t[T+1],v);return h[T](E)};return n?v=>_(va(t[0],t[a-1],v)):_}function xU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gh(0,e,r);t.push(fn(n,1,i))}}function bU(t){const e=[0];return xU(e,t.length-1),e}function TU(t,e){return t.map(n=>n*e)}function EU(t,e){return t.map(()=>e||xA).splice(0,t.length-1)}function kh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=D3(r)?r.map(NE):NE(r),a={done:!1,value:e[0]},u=TU(n&&n.length===e.length?n:bU(e),t),h=wU(u,e,{ease:Array.isArray(i)?i:EU(e,i)});return{calculatedDuration:t,next:f=>(a.value=h(f),a.done=f>=t,a)}}const SU=t=>t!==null;function wx(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(SU),h=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!h||r===void 0?a[h]:r}const CU={decay:_v,inertia:_v,tween:kh,keyframes:kh,spring:jp};function jA(t){typeof t.type=="string"&&(t.type=CU[t.type])}class xx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const IU=t=>t/100;class bx extends xx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==fi.now()&&this.tick(fi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;jA(e);const{type:n=kh,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:u=0}=e;let{keyframes:h}=e;const f=n||kh;f!==kh&&typeof h[0]!="number"&&(this.mixKeyframes=gf(IU,NA(h[0],h[1])),h=[0,100]);const _=f({...e,keyframes:h});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-u})),_.calculatedDuration===null&&(_.calculatedDuration=vx(_));const{calculatedDuration:v}=_;this.calculatedDuration=v,this.resolvedDuration=v+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=_}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:_=0,keyframes:v,repeat:T,repeatType:E,repeatDelay:A,type:D,onUpdate:U,finalKeyframe:H}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const W=this.currentTime-_*(this.playbackSpeed>=0?1:-1),G=this.playbackSpeed>=0?W<0:W>i;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let $=this.currentTime,se=r;if(T){const j=Math.min(this.currentTime,i)/h;let V=Math.floor(j),B=j%1;!B&&j>=1&&(B=1),B===1&&V--,V=Math.min(V,T+1),!!(V%2)&&(E==="reverse"?(B=1-B,A&&(B-=A/h)):E==="mirror"&&(se=u)),$=va(0,1,B)*h}const oe=G?{done:!1,value:v[0]}:se.next($);a&&(oe.value=a(oe.value));let{done:ee}=oe;!G&&f!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return F&&D!==_v&&(oe.value=wx(v,this.options,H,this.speed)),U&&U(oe.value),F&&this.finish(),oe}then(e,n){return this.finished.then(e,n)}get duration(){return xo(this.calculatedDuration)}get time(){return xo(this.currentTime)}set time(e){e=wo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xo(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=cU,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function PU(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ju=t=>t*180/Math.PI,vv=t=>{const e=ju(Math.atan2(t[1],t[0]));return wv(e)},AU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:vv,rotateZ:vv,skewX:t=>ju(Math.atan(t[1])),skewY:t=>ju(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},wv=t=>(t=t%360,t<0&&(t+=360),t),OE=vv,VE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),FE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:VE,scaleY:FE,scale:t=>(VE(t)+FE(t))/2,rotateX:t=>wv(ju(Math.atan2(t[6],t[5]))),rotateY:t=>wv(ju(Math.atan2(-t[2],t[0]))),rotateZ:OE,rotate:OE,skewX:t=>ju(Math.atan(t[4])),skewY:t=>ju(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function xv(t){return t.includes("scale")?1:0}function bv(t,e){if(!t||t==="none")return xv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kU,i=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=AU,i=h}if(!i)return xv(e);const a=r[e],u=i[1].split(",").map(RU);return typeof a=="function"?a(u):u[a]}const NU=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return bv(n,e)};function RU(t){return parseFloat(t.trim())}const Ld=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jd=new Set(Ld),UE=t=>t===Rd||t===lt,LU=new Set(["x","y","z"]),jU=Ld.filter(t=>!LU.has(t));function DU(t){const e=[];return jU.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Fu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>bv(e,"x"),y:(t,{transform:e})=>bv(e,"y")};Fu.translateX=Fu.x;Fu.translateY=Fu.y;const Uu=new Set;let Tv=!1,Ev=!1,Sv=!1;function DA(){if(Ev){const t=Array.from(Uu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=DU(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,u])=>{r.getValue(a)?.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ev=!1,Tv=!1,Uu.forEach(t=>t.complete(Sv)),Uu.clear()}function MA(){Uu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ev=!0)})}function MU(){Sv=!0,MA(),DA(),Sv=!1}class Tx{constructor(e,n,r,i,a,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Uu.add(this),Tv||(Tv=!0,on.read(MA),on.resolveKeyframes(DA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const h=r.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),i&&a===void 0&&i.set(e[0])}PU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Uu.delete(this)}cancel(){this.state==="scheduled"&&(Uu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const OU=t=>t.startsWith("--");function VU(t,e,n){OU(e)?t.style.setProperty(e,n):t.style[e]=n}const FU=cx(()=>window.ScrollTimeline!==void 0),UU={};function zU(t,e){const n=cx(t);return()=>UU[e]??n()}const OA=zU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,zE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vh([0,.65,.55,1]),circOut:vh([.55,0,1,.45]),backIn:vh([.31,.01,.66,-.59]),backOut:vh([.33,1.53,.69,.99])};function VA(t,e){if(t)return typeof t=="function"?OA()?RA(t,e):"ease-out":bA(t)?vh(t):Array.isArray(t)?t.map(n=>VA(n,e)||zE.easeOut):zE[t]}function BU(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:u="loop",ease:h="easeOut",times:f}={},_=void 0){const v={[e]:n};f&&(v.offset=f);const T=VA(h,i);Array.isArray(T)&&(v.easing=T);const E={delay:r,duration:i,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"};return _&&(E.pseudoElement=_),t.animate(v,E)}function FA(t){return typeof t=="function"&&"applyToOptions"in t}function $U({type:t,...e}){return FA(t)&&OA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class HU extends xx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=u,this.options=e,ux(typeof e.type!="string");const _=$U(e);this.animation=BU(n,r,i,_,a),_.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const v=wx(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(v):VU(n,r,v),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return xo(Number(e))}get time(){return xo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=wo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&FU()?(this.animation.timeline=e,ls):n(this)}}const UA={anticipate:_A,backInOut:yA,circInOut:wA};function WU(t){return t in UA}function qU(t){typeof t.ease=="string"&&WU(t.ease)&&(t.ease=UA[t.ease])}const BE=10;class ZU extends HU{constructor(e){qU(e),jA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new bx({...u,autoplay:!1}),f=wo(this.finishedTime??this.time);n.setWithVelocity(h.sample(f-BE).value,h.sample(f).value,BE),h.stop()}}const $E=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ql.test(t)||t==="0")&&!t.startsWith("url("));function GU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KU(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],u=$E(i,e),h=$E(a,e);return!u||!h?!1:GU(t)||(n==="spring"||FA(n))&&r}function Cv(t){t.duration=0,t.type}const QU=new Set(["opacity","clipPath","filter","transform"]),YU=cx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XU(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:_}=e.owner.getProps();return YU()&&n&&QU.has(n)&&(n!=="transform"||!_)&&!f&&!r&&i!=="mirror"&&a!==0&&u!=="inertia"}const JU=40;class e6 extends xx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:u="loop",keyframes:h,name:f,motionValue:_,element:v,...T}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=fi.now();const E={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:u,name:f,motionValue:_,element:v,...T},A=v?.KeyframeResolver||Tx;this.keyframeResolver=new A(h,(D,U,H)=>this.onKeyframesResolved(D,U,E,!H),f,_,v),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:u,velocity:h,delay:f,isHandoff:_,onUpdate:v}=r;this.resolvedAt=fi.now(),KU(e,a,u,h)||((wa.instantAnimations||!f)&&v?.(wx(e,r,n)),e[0]=e[e.length-1],Cv(r),r.repeat=0);const E={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>JU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},A=!_&&XU(E)?new ZU({...E,element:E.motionValue.owner.current}):new bx(E);A.finished.then(()=>this.notifyFinished()).catch(ls),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),MU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const t6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function n6(t){const e=t6.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function zA(t,e,n=1){const[r,i]=n6(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return uA(u)?parseFloat(u):u}return px(i)?zA(i,e,n+1):i}function Ex(t,e){return t?.[e]??t?.default??t}const BA=new Set(["width","height","top","left","right","bottom",...Ld]),r6={test:t=>t==="auto",parse:t=>t},$A=t=>e=>e.test(t),HA=[Rd,lt,bo,Tl,G3,Z3,r6],HE=t=>HA.find($A(t));function i6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||dA(t):!0}const s6=new Set(["brightness","contrast","saturate","opacity"]);function o6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(gx)||[];if(!r)return t;const i=n.replace(r,"");let a=s6.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const a6=/\b([a-z-]*)\(.*?\)/gu,Iv={...ql,getAnimatableNone:t=>{const e=t.match(a6);return e?e.map(o6).join(" "):t}},WE={...Rd,transform:Math.round},l6={rotate:Tl,rotateX:Tl,rotateY:Tl,rotateZ:Tl,scale:Nm,scaleX:Nm,scaleY:Nm,scaleZ:Nm,skew:Tl,skewX:Tl,skewY:Tl,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:Kh,originX:RE,originY:RE,originZ:lt},Sx={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,backgroundPositionX:lt,backgroundPositionY:lt,...l6,zIndex:WE,fillOpacity:Kh,strokeOpacity:Kh,numOctaves:WE},u6={...Sx,color:Mn,backgroundColor:Mn,outlineColor:Mn,fill:Mn,stroke:Mn,borderColor:Mn,borderTopColor:Mn,borderRightColor:Mn,borderBottomColor:Mn,borderLeftColor:Mn,filter:Iv,WebkitFilter:Iv},WA=t=>u6[t];function qA(t,e){let n=WA(t);return n!==Iv&&(n=ql),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const c6=new Set(["auto","none","0"]);function d6(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!c6.has(a)&&Qh(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=qA(n,i)}class h6 extends Tx{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let _=e[f];if(typeof _=="string"&&(_=_.trim(),px(_))){const v=zA(_,n.current);v!==void 0&&(e[f]=v),f===e.length-1&&(this.finalKeyframe=_)}}if(this.resolveNoneKeyframes(),!BA.has(r)||e.length!==2)return;const[i,a]=e,u=HE(i),h=HE(a);if(u!==h)if(UE(u)&&UE(h))for(let f=0;f<e.length;f++){const _=e[f];typeof _=="string"&&(e[f]=parseFloat(_))}else Fu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||i6(e[i]))&&r.push(i);r.length&&d6(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Fu[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function f6(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const ZA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function GA(t){return cA(t)&&"offsetHeight"in t}const qE=30,m6=t=>!isNaN(parseFloat(t));class p6{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=fi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=fi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=m6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dx);const r=this.events[e].add(n);return e==="change"?()=>{r(),on.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,qE);return hA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pd(t,e){return new p6(t,e)}const{schedule:Cx}=TA(queueMicrotask,!1),Ds={x:!1,y:!1};function KA(){return Ds.x||Ds.y}function g6(t){return t==="x"||t==="y"?Ds[t]?null:(Ds[t]=!0,()=>{Ds[t]=!1}):Ds.x||Ds.y?null:(Ds.x=Ds.y=!0,()=>{Ds.x=Ds.y=!1})}function QA(t,e){const n=f6(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function ZE(t){return!(t.pointerType==="touch"||KA())}function y6(t,e,n={}){const[r,i,a]=QA(t,n),u=h=>{if(!ZE(h))return;const{target:f}=h,_=e(f,h);if(typeof _!="function"||!f)return;const v=T=>{ZE(T)&&(_(T),f.removeEventListener("pointerleave",v))};f.addEventListener("pointerleave",v,i)};return r.forEach(h=>{h.addEventListener("pointerenter",u,i)}),a}const YA=(t,e)=>e?t===e?!0:YA(t,e.parentElement):!1,Ix=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v6(t){return _6.has(t.tagName)||t.tabIndex!==-1}const np=new WeakSet;function GE(t){return e=>{e.key==="Enter"&&t(e)}}function f_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const w6=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=GE(()=>{if(np.has(n))return;f_(n,"down");const i=GE(()=>{f_(n,"up")}),a=()=>f_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function KE(t){return Ix(t)&&!KA()}function x6(t,e,n={}){const[r,i,a]=QA(t,n),u=h=>{const f=h.currentTarget;if(!KE(h))return;np.add(f);const _=e(f,h),v=(A,D)=>{window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",E),np.has(f)&&np.delete(f),KE(A)&&typeof _=="function"&&_(A,{success:D})},T=A=>{v(A,f===window||f===document||n.useGlobalTarget||YA(f,A.target))},E=A=>{v(A,!1)};window.addEventListener("pointerup",T,i),window.addEventListener("pointercancel",E,i)};return r.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,i),GA(h)&&(h.addEventListener("focus",_=>w6(_,i)),!v6(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),a}function XA(t){return cA(t)&&"ownerSVGElement"in t}function b6(t){return XA(t)&&t.tagName==="svg"}const Ar=t=>!!(t&&t.getVelocity),T6=[...HA,Mn,ql],E6=t=>T6.find($A(t)),Px=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class S6 extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=GA(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C6({children:t,isPresent:e,anchorX:n,root:r}){const i=N.useId(),a=N.useRef(null),u=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=N.useContext(Px);return N.useInsertionEffect(()=>{const{width:f,height:_,top:v,left:T,right:E}=u.current;if(e||!a.current||!f||!_)return;const A=n==="left"?`left: ${T}`:`right: ${E}`;a.current.dataset.motionPopId=i;const D=document.createElement("style");h&&(D.nonce=h);const U=r??document.head;return U.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${_}px !important;
            ${A}px !important;
            top: ${v}px !important;
          }
        `),()=>{U.contains(D)&&U.removeChild(D)}},[e]),m.jsx(S6,{isPresent:e,childRef:a,sizeRef:u,children:N.cloneElement(t,{ref:a})})}const I6=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:u,anchorX:h,root:f})=>{const _=sx(P6),v=N.useId();let T=!0,E=N.useMemo(()=>(T=!1,{id:v,initial:e,isPresent:n,custom:i,onExitComplete:A=>{_.set(A,!0);for(const D of _.values())if(!D)return;r&&r()},register:A=>(_.set(A,!1),()=>_.delete(A))}),[n,_,r]);return a&&T&&(E={...E}),N.useMemo(()=>{_.forEach((A,D)=>_.set(D,!1))},[n]),N.useEffect(()=>{!n&&!_.size&&r&&r()},[n]),u==="popLayout"&&(t=m.jsx(C6,{isPresent:n,anchorX:h,root:f,children:t})),m.jsx(Eg.Provider,{value:E,children:t})};function P6(){return new Map}function JA(t=!0){const e=N.useContext(Eg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=N.useId();N.useEffect(()=>{if(t)return i(a)},[t]);const u=N.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,u]:[!0]}const Rm=t=>t.key||"";function QE(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const vf=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:u=!1,anchorX:h="left",root:f})=>{const[_,v]=JA(u),T=N.useMemo(()=>QE(t),[t]),E=u&&!_?[]:T.map(Rm),A=N.useRef(!0),D=N.useRef(T),U=sx(()=>new Map),[H,W]=N.useState(T),[G,$]=N.useState(T);lA(()=>{A.current=!1,D.current=T;for(let ee=0;ee<G.length;ee++){const F=Rm(G[ee]);E.includes(F)?U.delete(F):U.get(F)!==!0&&U.set(F,!1)}},[G,E.length,E.join("-")]);const se=[];if(T!==H){let ee=[...T];for(let F=0;F<G.length;F++){const j=G[F],V=Rm(j);E.includes(V)||(ee.splice(F,0,j),se.push(j))}return a==="wait"&&se.length&&(ee=se),$(QE(ee)),W(T),null}const{forceRender:oe}=N.useContext(ix);return m.jsx(m.Fragment,{children:G.map(ee=>{const F=Rm(ee),j=u&&!_?!1:T===G||E.includes(F),V=()=>{if(U.has(F))U.set(F,!0);else return;let B=!0;U.forEach(z=>{z||(B=!1)}),B&&(oe?.(),$(D.current),u&&v?.(),r&&r())};return m.jsx(I6,{isPresent:j,initial:!A.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:f,onExitComplete:j?void 0:V,anchorX:h,children:ee},F)})})},ek=N.createContext({strict:!1}),YE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gd={};for(const t in YE)gd[t]={isEnabled:e=>YE[t].some(n=>!!e[n])};function A6(t){for(const e in t)gd[e]={...gd[e],...t[e]}}const k6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||k6.has(t)}let tk=t=>!Dp(t);function N6(t){typeof t=="function"&&(tk=e=>e.startsWith("on")?!Dp(e):t(e))}try{N6(require("@emotion/is-prop-valid").default)}catch{}function R6(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(tk(i)||n===!0&&Dp(i)||!e&&!Dp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Sg=N.createContext({});function Cg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Yh(t){return typeof t=="string"||Array.isArray(t)}const Ax=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kx=["initial",...Ax];function Ig(t){return Cg(t.animate)||kx.some(e=>Yh(t[e]))}function nk(t){return!!(Ig(t)||t.variants)}function L6(t,e){if(Ig(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Yh(n)?n:void 0,animate:Yh(r)?r:void 0}}return t.inherit!==!1?e:{}}function j6(t){const{initial:e,animate:n}=L6(t,N.useContext(Sg));return N.useMemo(()=>({initial:e,animate:n}),[XE(e),XE(n)])}function XE(t){return Array.isArray(t)?t.join(" "):t}const Xh={};function D6(t){for(const e in t)Xh[e]=t[e],mx(e)&&(Xh[e].isCSSVariable=!0)}function rk(t,{layout:e,layoutId:n}){return jd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xh[t]||t==="opacity")}const M6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},O6=Ld.length;function V6(t,e,n){let r="",i=!0;for(let a=0;a<O6;a++){const u=Ld[a],h=t[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const _=ZA(h,Sx[u]);if(!f){i=!1;const v=M6[u]||u;r+=`${v}(${_}) `}n&&(e[u]=_)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Nx(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let u=!1,h=!1;for(const f in e){const _=e[f];if(jd.has(f)){u=!0;continue}else if(mx(f)){i[f]=_;continue}else{const v=ZA(_,Sx[f]);f.startsWith("origin")?(h=!0,a[f]=v):r[f]=v}}if(e.transform||(u||n?r.transform=V6(e,t.transform,n):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:_="50%",originZ:v=0}=a;r.transformOrigin=`${f} ${_} ${v}`}}const Rx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ik(t,e,n){for(const r in e)!Ar(e[r])&&!rk(r,n)&&(t[r]=e[r])}function F6({transformTemplate:t},e){return N.useMemo(()=>{const n=Rx();return Nx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function U6(t,e){const n=t.style||{},r={};return ik(r,n,t),Object.assign(r,F6(t,e)),r}function z6(t,e){const n={},r=U6(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const B6={offset:"stroke-dashoffset",array:"stroke-dasharray"},$6={offset:"strokeDashoffset",array:"strokeDasharray"};function H6(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?B6:$6;t[a.offset]=lt.transform(-r);const u=lt.transform(e),h=lt.transform(n);t[a.array]=`${u} ${h}`}function sk(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:u=0,...h},f,_,v){if(Nx(t,h,_),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:E}=t;T.transform&&(E.transform=T.transform,delete T.transform),(E.transform||T.transformOrigin)&&(E.transformOrigin=T.transformOrigin??"50% 50%",delete T.transformOrigin),E.transform&&(E.transformBox=v?.transformBox??"fill-box",delete T.transformBox),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),r!==void 0&&(T.scale=r),i!==void 0&&H6(T,i,a,u,!1)}const ok=()=>({...Rx(),attrs:{}}),ak=t=>typeof t=="string"&&t.toLowerCase()==="svg";function W6(t,e,n,r){const i=N.useMemo(()=>{const a=ok();return sk(a,e,ak(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};ik(a,t.style,t),i.style={...a,...i.style}}return i}const q6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lx(t){return typeof t!="string"||t.includes("-")?!1:!!(q6.indexOf(t)>-1||/[A-Z]/u.test(t))}function Z6(t,e,n,{latestValues:r},i,a=!1){const h=(Lx(t)?W6:z6)(e,r,i,t),f=R6(e,typeof t=="string",a),_=t!==N.Fragment?{...f,...h,ref:n}:{},{children:v}=e,T=N.useMemo(()=>Ar(v)?v.get():v,[v]);return N.createElement(t,{..._,children:T})}function JE(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function jx(t,e,n,r){if(typeof e=="function"){const[i,a]=JE(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=JE(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function rp(t){return Ar(t)?t.get():t}function G6({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:K6(n,r,i,t),renderState:e()}}function K6(t,e,n,r){const i={},a=r(t,{});for(const E in a)i[E]=rp(a[E]);let{initial:u,animate:h}=t;const f=Ig(t),_=nk(t);e&&_&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let v=n?n.initial===!1:!1;v=v||u===!1;const T=v?h:u;if(T&&typeof T!="boolean"&&!Cg(T)){const E=Array.isArray(T)?T:[T];for(let A=0;A<E.length;A++){const D=jx(t,E[A]);if(D){const{transitionEnd:U,transition:H,...W}=D;for(const G in W){let $=W[G];if(Array.isArray($)){const se=v?$.length-1:0;$=$[se]}$!==null&&(i[G]=$)}for(const G in U)i[G]=U[G]}}}return i}const lk=t=>(e,n)=>{const r=N.useContext(Sg),i=N.useContext(Eg),a=()=>G6(t,e,r,i);return n?a():sx(a)};function Dx(t,e,n){const{style:r}=t,i={};for(const a in r)(Ar(r[a])||e.style&&Ar(e.style[a])||rk(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Q6=lk({scrapeMotionValuesFromProps:Dx,createRenderState:Rx});function uk(t,e,n){const r=Dx(t,e,n);for(const i in t)if(Ar(t[i])||Ar(e[i])){const a=Ld.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Y6=lk({scrapeMotionValuesFromProps:uk,createRenderState:ok}),X6=Symbol.for("motionComponentSymbol");function Yc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function J6(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yc(n)&&(n.current=r))},[e])}const Mx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ez="framerAppearId",ck="data-"+Mx(ez),dk=N.createContext({});function tz(t,e,n,r,i){const{visualElement:a}=N.useContext(Sg),u=N.useContext(ek),h=N.useContext(Eg),f=N.useContext(Px).reducedMotion,_=N.useRef(null);r=r||u.renderer,!_.current&&r&&(_.current=r(t,{visualState:e,parent:a,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const v=_.current,T=N.useContext(dk);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&nz(_.current,n,i,T);const E=N.useRef(!1);N.useInsertionEffect(()=>{v&&E.current&&v.update(n,h)});const A=n[ck],D=N.useRef(!!A&&!window.MotionHandoffIsComplete?.(A)&&window.MotionHasOptimisedAnimation?.(A));return lA(()=>{v&&(E.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),D.current&&v.animationState&&v.animationState.animateChanges())}),N.useEffect(()=>{v&&(!D.current&&v.animationState&&v.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(A)}),D.current=!1),v.enteringChildren=void 0)}),v}function nz(t,e,n,r){const{layoutId:i,layout:a,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:_,layoutCrossfade:v}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hk(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!u||h&&Yc(h),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:v,layoutScroll:f,layoutRoot:_})}function hk(t){if(t)return t.options.allowProjection!==!1?t.projection:hk(t.parent)}function m_(t,{forwardMotionProps:e=!1}={},n,r){n&&A6(n);const i=Lx(t)?Y6:Q6;function a(h,f){let _;const v={...N.useContext(Px),...h,layoutId:rz(h)},{isStatic:T}=v,E=j6(h),A=i(h,T);if(!T&&ox){iz();const D=sz(v);_=D.MeasureLayout,E.visualElement=tz(t,A,v,r,D.ProjectionNode)}return m.jsxs(Sg.Provider,{value:E,children:[_&&E.visualElement?m.jsx(_,{visualElement:E.visualElement,...v}):null,Z6(t,h,J6(A,E.visualElement,f),A,T,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=N.forwardRef(a);return u[X6]=t,u}function rz({layoutId:t}){const e=N.useContext(ix).id;return e&&t!==void 0?e+"-"+t:t}function iz(t,e){N.useContext(ek).strict}function sz(t){const{drag:e,layout:n}=gd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function oz(t,e){if(typeof Proxy>"u")return m_;const n=new Map,r=(a,u)=>m_(a,u,t,e),i=(a,u)=>r(a,u);return new Proxy(i,{get:(a,u)=>u==="create"?r:(n.has(u)||n.set(u,m_(u,void 0,t,e)),n.get(u))})}function fk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function az({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function p_(t){return t===void 0||t===1}function Pv({scale:t,scaleX:e,scaleY:n}){return!p_(t)||!p_(e)||!p_(n)}function Au(t){return Pv(t)||mk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mk(t){return eS(t.x)||eS(t.y)}function eS(t){return t&&t!=="0%"}function Mp(t,e,n){const r=t-n,i=e*r;return n+i}function tS(t,e,n,r,i){return i!==void 0&&(t=Mp(t,i,r)),Mp(t,n,r)+e}function Av(t,e=0,n=1,r,i){t.min=tS(t.min,e,n,r,i),t.max=tS(t.max,e,n,r,i)}function pk(t,{x:e,y:n}){Av(t.x,e.translate,e.scale,e.originPoint),Av(t.y,n.translate,n.scale,n.originPoint)}const nS=.999999999999,rS=1.0000000000001;function uz(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,u;for(let h=0;h<i;h++){a=n[h],u=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Jc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,pk(t,u)),r&&Au(a.latestValues)&&Jc(t,a.latestValues))}e.x<rS&&e.x>nS&&(e.x=1),e.y<rS&&e.y>nS&&(e.y=1)}function Xc(t,e){t.min=t.min+e,t.max=t.max+e}function iS(t,e,n,r,i=.5){const a=fn(t.min,t.max,i);Av(t,e,n,a,r)}function Jc(t,e){iS(t.x,e.x,e.scaleX,e.scale,e.originX),iS(t.y,e.y,e.scaleY,e.scale,e.originY)}function gk(t,e){return fk(lz(t.getBoundingClientRect(),e))}function cz(t,e,n){const r=gk(t,n),{scroll:i}=e;return i&&(Xc(r.x,i.offset.x),Xc(r.y,i.offset.y)),r}const sS=()=>({translate:0,scale:1,origin:0,originPoint:0}),ed=()=>({x:sS(),y:sS()}),oS=()=>({min:0,max:0}),En=()=>({x:oS(),y:oS()}),kv={current:null},yk={current:!1};function dz(){if(yk.current=!0,!!ox)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kv.current=t.matches;t.addEventListener("change",e),e()}else kv.current=!1}const hz=new WeakMap;function fz(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Ar(i))t.addValue(r,i);else if(Ar(a))t.addValue(r,pd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(i):u.hasAnimated||u.set(i)}else{const u=t.getStaticValue(r);t.addValue(r,pd(u!==void 0?u:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const aS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=fi.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,on.render(this.render,!1,!0))};const{latestValues:f,renderState:_}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=_,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Ig(n),this.isVariantNode=nk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in T){const A=T[E];f[E]!==void 0&&Ar(A)&&A.set(f[E])}}mount(e){this.current=e,hz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),yk.current||dz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Wl(this.notifyUpdate),Wl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=jd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&on.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gd){const n=gd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<aS.length;r++){const i=aS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,u=e[a];u&&(this.propEventSubscriptions[i]=this.on(i,u))}this.prevMotionValues=fz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=pd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(uA(r)||dA(r))?r=parseFloat(r):!E6(r)&&ql.test(n)&&(r=qA(e,n)),this.setBaseTarget(e,Ar(r)?r.get():r)),Ar(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=jx(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ar(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Cx.render(this.render)}}class _k extends mz{constructor(){super(...arguments),this.KeyframeResolver=h6}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ar(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function vk(t,{style:e,vars:n},r,i){const a=t.style;let u;for(u in e)a[u]=e[u];i?.applyProjectionStyles(a,r);for(u in n)a.setProperty(u,n[u])}function pz(t){return window.getComputedStyle(t)}class gz extends _k{constructor(){super(...arguments),this.type="html",this.renderInstance=vk}readValueFromInstance(e,n){if(jd.has(n))return this.projection?.isProjecting?xv(n):NU(e,n);{const r=pz(e),i=(mx(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gk(e,n)}build(e,n,r){Nx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Dx(e,n,r)}}const wk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yz(t,e,n,r){vk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(wk.has(i)?i:Mx(i),e.attrs[i])}class _z extends _k{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jd.has(n)){const r=WA(n);return r&&r.default||0}return n=wk.has(n)?n:Mx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return uk(e,n,r)}build(e,n,r){sk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){yz(e,n,r,i)}mount(e){this.isSVGTag=ak(e.tagName),super.mount(e)}}const vz=(t,e)=>Lx(t)?new _z(e):new gz(e,{allowProjection:t!==N.Fragment});function od(t,e,n){const r=t.getProps();return jx(r,e,n!==void 0?n:r.custom,t)}const Nv=t=>Array.isArray(t);function wz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pd(n))}function xz(t){return Nv(t)?t[t.length-1]||0:t}function bz(t,e){const n=od(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const u in a){const h=xz(a[u]);wz(t,u,h)}}function Tz(t){return!!(Ar(t)&&t.add)}function Rv(t,e){const n=t.getValue("willChange");if(Tz(n))return n.add(e);if(!n&&wa.WillChange){const r=new wa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function xk(t){return t.props[ck]}const Ez=t=>t!==null;function Sz(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Ez),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const Cz={type:"spring",stiffness:500,damping:25,restSpeed:10},Iz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Pz={type:"keyframes",duration:.8},Az={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kz=(t,{keyframes:e})=>e.length>2?Pz:jd.has(t)?t.startsWith("scale")?Iz(e[1]):Cz:Az;function Nz({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:_,...v}){return!!Object.keys(v).length}const Ox=(t,e,n,r={},i,a)=>u=>{const h=Ex(r,t)||{},f=h.delay||r.delay||0;let{elapsed:_=0}=r;_=_-wo(f);const v={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-_,onUpdate:E=>{e.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:a?void 0:i};Nz(h)||Object.assign(v,kz(t,v)),v.duration&&(v.duration=wo(v.duration)),v.repeatDelay&&(v.repeatDelay=wo(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let T=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(Cv(v),v.delay===0&&(T=!0)),(wa.instantAnimations||wa.skipAnimations)&&(T=!0,Cv(v),v.delay=0),v.allowFlatten=!h.type&&!h.ease,T&&!a&&e.get()!==void 0){const E=Sz(v.keyframes,h);if(E!==void 0){on.update(()=>{v.onUpdate(E),v.onComplete()});return}}return h.isSync?new bx(v):new e6(v)};function Rz({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:u,...h}=e;r&&(a=r);const f=[],_=i&&t.animationState&&t.animationState.getState()[i];for(const v in h){const T=t.getValue(v,t.latestValues[v]??null),E=h[v];if(E===void 0||_&&Rz(_,v))continue;const A={delay:n,...Ex(a||{},v)},D=T.get();if(D!==void 0&&!T.isAnimating&&!Array.isArray(E)&&E===D&&!A.velocity)continue;let U=!1;if(window.MotionHandoffAnimation){const W=xk(t);if(W){const G=window.MotionHandoffAnimation(W,v,on);G!==null&&(A.startTime=G,U=!0)}}Rv(t,v),T.start(Ox(v,T,E,t.shouldReduceMotion&&BA.has(v)?{type:!1}:A,t,U));const H=T.animation;H&&f.push(H)}return u&&Promise.all(f).then(()=>{on.update(()=>{u&&bz(t,u)})}),f}function Tk(t,e,n,r=0,i=1){const a=Array.from(t).sort((_,v)=>_.sortNodePosition(v)).indexOf(e),u=t.size,h=(u-1)*r;return typeof n=="function"?n(a,u):i===1?a*r:h-a*r}function Lv(t,e,n={}){const r=od(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(bk(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:_=0,staggerChildren:v,staggerDirection:T}=i;return Lz(t,e,f,_,v,T,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[f,_]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>_())}else return Promise.all([a(),u(n.delay)])}function Lz(t,e,n=0,r=0,i=0,a=1,u){const h=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),h.push(Lv(f,e,{...u,delay:n+(typeof r=="function"?0:r)+Tk(t.variantChildren,f,r,i,a)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(h)}function jz(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Lv(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Lv(t,e,n);else{const i=typeof e=="function"?od(t,e,n.custom):e;r=Promise.all(bk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Ek(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Dz=kx.length;function Sk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Sk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Dz;n++){const r=kx[n],i=t.props[r];(Yh(i)||i===!1)&&(e[r]=i)}return e}const Mz=[...Ax].reverse(),Oz=Ax.length;function Vz(t){return e=>Promise.all(e.map(({animation:n,options:r})=>jz(t,n,r)))}function Fz(t){let e=Vz(t),n=lS(),r=!0;const i=f=>(_,v)=>{const T=od(t,v,f==="exit"?t.presenceContext?.custom:void 0);if(T){const{transition:E,transitionEnd:A,...D}=T;_={..._,...D,...A}}return _};function a(f){e=f(t)}function u(f){const{props:_}=t,v=Sk(t.parent)||{},T=[],E=new Set;let A={},D=1/0;for(let H=0;H<Oz;H++){const W=Mz[H],G=n[W],$=_[W]!==void 0?_[W]:v[W],se=Yh($),oe=W===f?G.isActive:null;oe===!1&&(D=H);let ee=$===v[W]&&$!==_[W]&&se;if(ee&&r&&t.manuallyAnimateOnMount&&(ee=!1),G.protectedKeys={...A},!G.isActive&&oe===null||!$&&!G.prevProp||Cg($)||typeof $=="boolean")continue;const F=Uz(G.prevProp,$);let j=F||W===f&&G.isActive&&!ee&&se||H>D&&se,V=!1;const B=Array.isArray($)?$:[$];let z=B.reduce(i(W),{});oe===!1&&(z={});const{prevResolvedValues:M={}}=G,k={...M,...z},le=Ee=>{j=!0,E.has(Ee)&&(V=!0,E.delete(Ee)),G.needsAnimating[Ee]=!0;const J=t.getValue(Ee);J&&(J.liveStyle=!1)};for(const Ee in k){const J=z[Ee],xe=M[Ee];if(A.hasOwnProperty(Ee))continue;let he=!1;Nv(J)&&Nv(xe)?he=!Ek(J,xe):he=J!==xe,he?J!=null?le(Ee):E.add(Ee):J!==void 0&&E.has(Ee)?le(Ee):G.protectedKeys[Ee]=!0}G.prevProp=$,G.prevResolvedValues=z,G.isActive&&(A={...A,...z}),r&&t.blockInitialAnimation&&(j=!1);const me=ee&&F;j&&(!me||V)&&T.push(...B.map(Ee=>{const J={type:W};if(typeof Ee=="string"&&r&&!me&&t.manuallyAnimateOnMount&&t.parent){const{parent:xe}=t,he=od(xe,Ee);if(xe.enteringChildren&&he){const{delayChildren:Y}=he.transition||{};J.delay=Tk(xe.enteringChildren,t,Y)}}return{animation:Ee,options:J}}))}if(E.size){const H={};if(typeof _.initial!="boolean"){const W=od(t,Array.isArray(_.initial)?_.initial[0]:_.initial);W&&W.transition&&(H.transition=W.transition)}E.forEach(W=>{const G=t.getBaseTarget(W),$=t.getValue(W);$&&($.liveStyle=!0),H[W]=G??null}),T.push({animation:H})}let U=!!T.length;return r&&(_.initial===!1||_.initial===_.animate)&&!t.manuallyAnimateOnMount&&(U=!1),r=!1,U?e(T):Promise.resolve()}function h(f,_){if(n[f].isActive===_)return Promise.resolve();t.variantChildren?.forEach(T=>T.animationState?.setActive(f,_)),n[f].isActive=_;const v=u(f);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=lS(),r=!0}}}function Uz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ek(e,t):!1}function Cu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lS(){return{animate:Cu(!0),whileInView:Cu(),whileHover:Cu(),whileTap:Cu(),whileDrag:Cu(),whileFocus:Cu(),exit:Cu()}}class eu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zz extends eu{constructor(e){super(e),e.animationState||(e.animationState=Fz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Bz=0;class $z extends eu{constructor(){super(...arguments),this.id=Bz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Hz={animation:{Feature:zz},exit:{Feature:$z}};function Jh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function wf(t){return{point:{x:t.pageX,y:t.pageY}}}const Wz=t=>e=>Ix(e)&&t(e,wf(e));function Nh(t,e,n,r){return Jh(t,e,Wz(n),r)}const Ck=1e-4,qz=1-Ck,Zz=1+Ck,Ik=.01,Gz=0-Ik,Kz=0+Ik;function $r(t){return t.max-t.min}function Qz(t,e,n){return Math.abs(t-e)<=n}function uS(t,e,n,r=.5){t.origin=r,t.originPoint=fn(e.min,e.max,t.origin),t.scale=$r(n)/$r(e),t.translate=fn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=qz&&t.scale<=Zz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Gz&&t.translate<=Kz||isNaN(t.translate))&&(t.translate=0)}function Rh(t,e,n,r){uS(t.x,e.x,n.x,r?r.originX:void 0),uS(t.y,e.y,n.y,r?r.originY:void 0)}function cS(t,e,n){t.min=n.min+e.min,t.max=t.min+$r(e)}function Yz(t,e,n){cS(t.x,e.x,n.x),cS(t.y,e.y,n.y)}function dS(t,e,n){t.min=e.min-n.min,t.max=t.min+$r(e)}function Lh(t,e,n){dS(t.x,e.x,n.x),dS(t.y,e.y,n.y)}function is(t){return[t("x"),t("y")]}const Pk=({current:t})=>t?t.ownerDocument.defaultView:null,hS=(t,e)=>Math.abs(t-e);function Xz(t,e){const n=hS(t.x,e.x),r=hS(t.y,e.y);return Math.sqrt(n**2+r**2)}class Ak{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=y_(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,D=Xz(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!D)return;const{point:U}=E,{timestamp:H}=ur;this.history.push({...U,timestamp:H});const{onStart:W,onMove:G}=this.handlers;A||(W&&W(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),G&&G(this.lastMoveEvent,E)},this.handlePointerMove=(E,A)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=g_(A,this.transformPagePoint),on.update(this.updatePoint,!0)},this.handlePointerUp=(E,A)=>{this.end();const{onEnd:D,onSessionEnd:U,resumeAnimation:H}=this.handlers;if(this.dragSnapToOrigin&&H&&H(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=y_(E.type==="pointercancel"?this.lastMoveEventInfo:g_(A,this.transformPagePoint),this.history);this.startEvent&&D&&D(E,W),U&&U(E,W)},!Ix(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=u,this.contextWindow=i||window;const h=wf(e),f=g_(h,this.transformPagePoint),{point:_}=f,{timestamp:v}=ur;this.history=[{..._,timestamp:v}];const{onSessionStart:T}=n;T&&T(e,y_(f,this.history)),this.removeListeners=gf(Nh(this.contextWindow,"pointermove",this.handlePointerMove),Nh(this.contextWindow,"pointerup",this.handlePointerUp),Nh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wl(this.updatePoint)}}function g_(t,e){return e?{point:e(t.point)}:t}function fS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function y_({point:t},e){return{point:t,delta:fS(t,kk(e)),offset:fS(t,Jz(e)),velocity:eB(e,.1)}}function Jz(t){return t[0]}function kk(t){return t[t.length-1]}function eB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=kk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>wo(e)));)n--;if(!r)return{x:0,y:0};const a=xo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function tB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fn(n,t,r.max):Math.min(t,n)),t}function mS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function nB(t,{top:e,left:n,bottom:r,right:i}){return{x:mS(t.x,n,i),y:mS(t.y,e,r)}}function pS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function rB(t,e){return{x:pS(t.x,e.x),y:pS(t.y,e.y)}}function iB(t,e){let n=.5;const r=$r(t),i=$r(e);return i>r?n=Gh(e.min,e.max-r,t.min):r>i&&(n=Gh(t.min,t.max-i,e.min)),va(0,1,n)}function sB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jv=.35;function oB(t=jv){return t===!1?t=0:t===!0&&(t=jv),{x:gS(t,"left","right"),y:gS(t,"top","bottom")}}function gS(t,e,n){return{min:yS(t,e),max:yS(t,n)}}function yS(t,e){return typeof t=="number"?t:t[e]||0}const aB=new WeakMap;class lB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=T=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wf(T).point)},u=(T,E)=>{const{drag:A,dragPropagation:D,onDragStart:U}=this.getProps();if(A&&!D&&(this.openDragLock&&this.openDragLock(),this.openDragLock=g6(A),!this.openDragLock))return;this.latestPointerEvent=T,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),is(W=>{let G=this.getAxisMotionValue(W).get()||0;if(bo.test(G)){const{projection:$}=this.visualElement;if($&&$.layout){const se=$.layout.layoutBox[W];se&&(G=$r(se)*(parseFloat(G)/100))}}this.originPoint[W]=G}),U&&on.postRender(()=>U(T,E)),Rv(this.visualElement,"transform");const{animationState:H}=this.visualElement;H&&H.setActive("whileDrag",!0)},h=(T,E)=>{this.latestPointerEvent=T,this.latestPanInfo=E;const{dragPropagation:A,dragDirectionLock:D,onDirectionLock:U,onDrag:H}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:W}=E;if(D&&this.currentDirection===null){this.currentDirection=uB(W),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",E.point,W),this.updateAxis("y",E.point,W),this.visualElement.render(),H&&H(T,E)},f=(T,E)=>{this.latestPointerEvent=T,this.latestPanInfo=E,this.stop(T,E),this.latestPointerEvent=null,this.latestPanInfo=null},_=()=>is(T=>this.getAnimationState(T)==="paused"&&this.getAxisMotionValue(T).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new Ak(e,{onSessionStart:a,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:r,contextWindow:Pk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:u}=i;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&on.postRender(()=>h(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Lm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=tB(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Yc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=nB(r.layoutBox,e):this.constraints=!1,this.elastic=oB(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&is(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=sB(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=cz(r,i.root,this.visualElement.getTransformPagePoint());let u=rB(i.layout.layoutBox,a);if(n){const h=n(az(u));this.hasMutatedConstraints=!!h,h&&(u=fk(h))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},_=is(v=>{if(!Lm(v,n,this.currentDirection))return;let T=f&&f[v]||{};u&&(T={min:0,max:0});const E=i?200:1e6,A=i?40:1e7,D={type:"inertia",velocity:r?e[v]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...a,...T};return this.startAxisValueAnimation(v,D)});return Promise.all(_).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Rv(this.visualElement,e),r.start(Ox(e,r,0,n,this.visualElement,!1))}stopAnimation(){is(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){is(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){is(n=>{const{drag:r}=this.getProps();if(!Lm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:h}=i.layout.layoutBox[n];a.set(e[n]-fn(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};is(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();i[u]=iB({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),is(u=>{if(!Lm(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:_}=this.constraints[u];h.set(fn(f,_,i[u]))})}addListeners(){if(!this.visualElement.current)return;aB.set(this.visualElement,this);const e=this.visualElement.current,n=Nh(e,"pointerdown",f=>{const{drag:_,dragListener:v=!0}=this.getProps();_&&v&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Yc(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),on.read(r);const u=Jh(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:f,hasLayoutChanged:_})=>{this.isDragging&&_&&(is(v=>{const T=this.getAxisMotionValue(v);T&&(this.originPoint[v]+=f[v].translate,T.set(T.get()+f[v].translate))}),this.visualElement.render())});return()=>{u(),n(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:u=jv,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Lm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function uB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cB extends eu{constructor(e){super(e),this.removeGroupControls=ls,this.removeListeners=ls,this.controls=new lB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ls}unmount(){this.removeGroupControls(),this.removeListeners()}}const _S=t=>(e,n)=>{t&&on.postRender(()=>t(e,n))};class dB extends eu{constructor(){super(...arguments),this.removePointerDownListener=ls}onPointerDown(e){this.session=new Ak(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Pk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_S(e),onStart:_S(n),onMove:r,onEnd:(a,u)=>{delete this.session,i&&on.postRender(()=>i(a,u))}}}mount(){this.removePointerDownListener=Nh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ip={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const n=vS(t,e.target.x),r=vS(t,e.target.y);return`${n}% ${r}%`}},hB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ql.parse(t);if(i.length>5)return r;const a=ql.createTransformer(t),u=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,f=n.y.scale*e.y;i[0+u]/=h,i[1+u]/=f;const _=fn(h,f,.5);return typeof i[2+u]=="number"&&(i[2+u]/=_),typeof i[3+u]=="number"&&(i[3+u]/=_),a(i)}};let __=!1;class fB extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;D6(mB),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),__&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ip.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:u}=r;return u&&(u.isPresent=a,__=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||on.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Cx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;__=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Nk(t){const[e,n]=JA(),r=N.useContext(ix);return m.jsx(fB,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(dk),isPresent:e,safeToRemove:n})}const mB={borderRadius:{...dh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dh,borderTopRightRadius:dh,borderBottomLeftRadius:dh,borderBottomRightRadius:dh,boxShadow:hB};function pB(t,e,n){const r=Ar(t)?t:pd(t);return r.start(Ox("",r,e,n)),r.animation}const gB=(t,e)=>t.depth-e.depth;class yB{constructor(){this.children=[],this.isDirty=!1}add(e){ax(this.children,e),this.isDirty=!0}remove(e){lx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gB),this.isDirty=!1,this.children.forEach(e)}}function _B(t,e){const n=fi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Wl(r),t(a-e))};return on.setup(r,!0),()=>Wl(r)}const Rk=["TopLeft","TopRight","BottomLeft","BottomRight"],vB=Rk.length,wS=t=>typeof t=="string"?parseFloat(t):t,xS=t=>typeof t=="number"||lt.test(t);function wB(t,e,n,r,i,a){i?(t.opacity=fn(0,n.opacity??1,xB(r)),t.opacityExit=fn(e.opacity??1,0,bB(r))):a&&(t.opacity=fn(e.opacity??1,n.opacity??1,r));for(let u=0;u<vB;u++){const h=`border${Rk[u]}Radius`;let f=bS(e,h),_=bS(n,h);if(f===void 0&&_===void 0)continue;f||(f=0),_||(_=0),f===0||_===0||xS(f)===xS(_)?(t[h]=Math.max(fn(wS(f),wS(_),r),0),(bo.test(_)||bo.test(f))&&(t[h]+="%")):t[h]=_}(e.rotate||n.rotate)&&(t.rotate=fn(e.rotate||0,n.rotate||0,r))}function bS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xB=Lk(0,.5,vA),bB=Lk(.5,.95,ls);function Lk(t,e,n){return r=>r<t?0:r>e?1:n(Gh(t,e,r))}function TS(t,e){t.min=e.min,t.max=e.max}function Ji(t,e){TS(t.x,e.x),TS(t.y,e.y)}function ES(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function SS(t,e,n,r,i){return t-=e,t=Mp(t,1/n,r),i!==void 0&&(t=Mp(t,1/i,r)),t}function TB(t,e=0,n=1,r=.5,i,a=t,u=t){if(bo.test(e)&&(e=parseFloat(e),e=fn(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=fn(a.min,a.max,r);t===a&&(h-=e),t.min=SS(t.min,e,n,h,i),t.max=SS(t.max,e,n,h,i)}function CS(t,e,[n,r,i],a,u){TB(t,e[n],e[r],e[i],e.scale,a,u)}const EB=["x","scaleX","originX"],SB=["y","scaleY","originY"];function IS(t,e,n,r){CS(t.x,e,EB,n?n.x:void 0,r?r.x:void 0),CS(t.y,e,SB,n?n.y:void 0,r?r.y:void 0)}function PS(t){return t.translate===0&&t.scale===1}function jk(t){return PS(t.x)&&PS(t.y)}function AS(t,e){return t.min===e.min&&t.max===e.max}function CB(t,e){return AS(t.x,e.x)&&AS(t.y,e.y)}function kS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Dk(t,e){return kS(t.x,e.x)&&kS(t.y,e.y)}function NS(t){return $r(t.x)/$r(t.y)}function RS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class IB{constructor(){this.members=[]}add(e){ax(this.members,e),e.scheduleRender()}remove(e){if(lx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PB(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,u=n?.z||0;if((i||a||u)&&(r=`translate3d(${i}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:_,rotate:v,rotateX:T,rotateY:E,skewX:A,skewY:D}=n;_&&(r=`perspective(${_}px) ${r}`),v&&(r+=`rotate(${v}deg) `),T&&(r+=`rotateX(${T}deg) `),E&&(r+=`rotateY(${E}deg) `),A&&(r+=`skewX(${A}deg) `),D&&(r+=`skewY(${D}deg) `)}const h=t.x.scale*e.x,f=t.y.scale*e.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const v_=["","X","Y","Z"],AB=1e3;let kB=0;function w_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Mk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",on,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Mk(r)}function Ok({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},h=e?.()){this.id=kB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LB),this.nodes.forEach(OB),this.nodes.forEach(VB),this.nodes.forEach(jB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new yB)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new dx),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=XA(u)&&!b6(u),this.instance=u;const{layoutId:h,layout:f,visualElement:_}=this.options;if(_&&!_.current&&_.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),t){let v,T=0;const E=()=>this.root.updateBlockedByResize=!1;on.read(()=>{T=window.innerWidth}),t(u,()=>{const A=window.innerWidth;A!==T&&(T=A,this.root.updateBlockedByResize=!0,v&&v(),v=_B(E,250),ip.hasAnimatedSinceResize&&(ip.hasAnimatedSinceResize=!1,this.nodes.forEach(DS)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&_&&(h||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeLayoutChanged:E,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||_.getDefaultTransition()||$B,{onLayoutAnimationStart:U,onLayoutAnimationComplete:H}=_.getProps(),W=!this.targetLayout||!Dk(this.targetLayout,A),G=!T&&E;if(this.options.layoutRoot||this.resumeFrom||G||T&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const $={...Ex(D,"layout"),onPlay:U,onComplete:H};(_.shouldReduceMotion||this.options.layoutRoot)&&($.delay=0,$.type=!1),this.startAnimation($),this.setAnimationOrigin(v,G)}else T||DS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Wl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FB),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Mk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const T=this.path[v];T.shouldResetTransform=!0,T.updateScroll("snapshot"),T.options.layoutRoot&&T.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const _=this.getTransformTemplate();this.prevTransformTemplateValue=_?_(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MB),this.nodes.forEach(NB),this.nodes.forEach(RB)):this.nodes.forEach(jS),this.clearAllSnapshots();const h=fi.now();ur.delta=va(0,1e3/60,h-ur.timestamp),ur.timestamp=h,ur.isProcessing=!0,l_.update.process(ur),l_.preRender.process(ur),l_.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(DB),this.sharedNodes.forEach(UB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,on.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){on.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$r(this.snapshot.measuredBox.x)&&!$r(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!jk(this.projectionDelta),f=this.getTransformTemplate(),_=f?f(this.latestValues,""):void 0,v=_!==this.prevTransformTemplateValue;u&&this.instance&&(h||Au(this.latestValues)||v)&&(i(this.instance,_),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),HB(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return En();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(WB))){const{scroll:_}=this.root;_&&(Xc(h.x,_.offset.x),Xc(h.y,_.offset.y))}return h}removeElementScroll(u){const h=En();if(Ji(h,u),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const _=this.path[f],{scroll:v,options:T}=_;_!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&Ji(h,u),Xc(h.x,v.offset.x),Xc(h.y,v.offset.y))}return h}applyTransform(u,h=!1){const f=En();Ji(f,u);for(let _=0;_<this.path.length;_++){const v=this.path[_];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Jc(f,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Au(v.latestValues)&&Jc(f,v.latestValues)}return Au(this.latestValues)&&Jc(f,this.latestValues),f}removeTransform(u){const h=En();Ji(h,u);for(let f=0;f<this.path.length;f++){const _=this.path[f];if(!_.instance||!Au(_.latestValues))continue;Pv(_.latestValues)&&_.updateSnapshot();const v=En(),T=_.measurePageBox();Ji(v,T),IS(h,_.latestValues,_.snapshot?_.snapshot.layoutBox:void 0,v)}return Au(this.latestValues)&&IS(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Lh(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Ji(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Yz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ji(this.target,this.layout.layoutBox),pk(this.target,this.targetDelta)):Ji(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),Lh(this.relativeTargetOrigin,this.target,E.target),Ji(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Pv(this.parent.latestValues)||mk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(f=!1),f)return;const{layout:_,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||v))return;Ji(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,E=this.treeScale.y;uz(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=En());const{target:A}=u;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ES(this.prevProjectionDelta.x,this.projectionDelta.x),ES(this.prevProjectionDelta.y,this.projectionDelta.y)),Rh(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==E||!RS(this.projectionDelta.x,this.prevProjectionDelta.x)||!RS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ed(),this.projectionDelta=ed(),this.projectionDeltaWithTransform=ed()}setAnimationOrigin(u,h=!1){const f=this.snapshot,_=f?f.latestValues:{},v={...this.latestValues},T=ed();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=En(),A=f?f.source:void 0,D=this.layout?this.layout.source:void 0,U=A!==D,H=this.getStack(),W=!H||H.members.length<=1,G=!!(U&&!W&&this.options.crossfade===!0&&!this.path.some(BB));this.animationProgress=0;let $;this.mixTargetDelta=se=>{const oe=se/1e3;MS(T.x,u.x,oe),MS(T.y,u.y,oe),this.setTargetDelta(T),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lh(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zB(this.relativeTarget,this.relativeTargetOrigin,E,oe),$&&CB(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=En()),Ji($,this.relativeTarget)),U&&(this.animationValues=v,wB(v,_,this.latestValues,oe,G,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=oe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Wl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=on.update(()=>{ip.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pd(0)),this.currentAnimation=pB(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:_,latestValues:v}=u;if(!(!h||!f||!_)){if(this!==u&&this.layout&&_&&Vk(this.options.animationType,this.layout.layoutBox,_.layoutBox)){f=this.target||En();const T=$r(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+T;const E=$r(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}Ji(h,f),Jc(h,v),Rh(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new IB),this.sharedNodes.get(u).add(h);const _=h.options.initialPromotionConfig;h.promote({transition:_?_.transition:void 0,preserveFollowOpacity:_&&_.shouldPreserveFollowOpacity?_.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const _=this.getStack();_&&_.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const _={};f.z&&w_("z",u,_,this.animationValues);for(let v=0;v<v_.length;v++)w_(`rotate${v_[v]}`,u,_,this.animationValues),w_(`skew${v_[v]}`,u,_,this.animationValues);u.render();for(const v in _)u.setStaticValue(v,_[v]),this.animationValues&&(this.animationValues[v]=_[v]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=rp(h?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=rp(h?.pointerEvents)||""),this.hasProjected&&!Au(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const v=_.animationValues||_.latestValues;this.applyTransformsToTarget();let T=PB(this.projectionDeltaWithTransform,this.treeScale,v);f&&(T=f(v,T)),u.transform=T;const{x:E,y:A}=this.projectionDelta;u.transformOrigin=`${E.origin*100}% ${A.origin*100}% 0`,_.animationValues?u.opacity=_===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:u.opacity=_===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const D in Xh){if(v[D]===void 0)continue;const{correct:U,applyTo:H,isCSSVariable:W}=Xh[D],G=T==="none"?v[D]:U(v[D],_);if(H){const $=H.length;for(let se=0;se<$;se++)u[H[se]]=G}else W?this.options.visualElement.renderState.vars[D]=G:u[D]=G}this.options.layoutId&&(u.pointerEvents=_===this?rp(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(LS),this.root.sharedNodes.clear()}}}function NB(t){t.updateLayout()}function RB(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?is(v=>{const T=a?e.measuredBox[v]:e.layoutBox[v],E=$r(T);T.min=n[v].min,T.max=T.min+E}):Vk(i,e.layoutBox,n)&&is(v=>{const T=a?e.measuredBox[v]:e.layoutBox[v],E=$r(n[v]);T.max=T.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+E)});const u=ed();Rh(u,n,e.layoutBox);const h=ed();a?Rh(h,t.applyTransform(r,!0),e.measuredBox):Rh(h,n,e.layoutBox);const f=!jk(u);let _=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:E}=v;if(T&&E){const A=En();Lh(A,e.layoutBox,T.layoutBox);const D=En();Lh(D,n,E.layoutBox),Dk(A,D)||(_=!0),v.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=A,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:_})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function LB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function DB(t){t.clearSnapshot()}function LS(t){t.clearMeasurements()}function jS(t){t.isLayoutDirty=!1}function MB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function OB(t){t.resolveTargetDelta()}function VB(t){t.calcProjection()}function FB(t){t.resetSkewAndRotation()}function UB(t){t.removeLeadSnapshot()}function MS(t,e,n){t.translate=fn(e.translate,0,n),t.scale=fn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OS(t,e,n,r){t.min=fn(e.min,n.min,r),t.max=fn(e.max,n.max,r)}function zB(t,e,n,r){OS(t.x,e.x,n.x,r),OS(t.y,e.y,n.y,r)}function BB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $B={duration:.45,ease:[.4,0,.1,1]},VS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FS=VS("applewebkit/")&&!VS("chrome/")?Math.round:ls;function US(t){t.min=FS(t.min),t.max=FS(t.max)}function HB(t){US(t.x),US(t.y)}function Vk(t,e,n){return t==="position"||t==="preserve-aspect"&&!Qz(NS(e),NS(n),.2)}function WB(t){return t!==t.root&&t.scroll?.wasRoot}const qB=Ok({attachResizeListener:(t,e)=>Jh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),x_={current:void 0},Fk=Ok({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!x_.current){const t=new qB({});t.mount(window),t.setOptions({layoutScroll:!0}),x_.current=t}return x_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZB={pan:{Feature:dB},drag:{Feature:cB,ProjectionNode:Fk,MeasureLayout:Nk}};function zS(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&on.postRender(()=>a(e,wf(e)))}class GB extends eu{mount(){const{current:e}=this.node;e&&(this.unmount=y6(e,(n,r)=>(zS(this.node,r,"Start"),i=>zS(this.node,i,"End"))))}unmount(){}}class KB extends eu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gf(Jh(this.node.current,"focus",()=>this.onFocus()),Jh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function BS(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&on.postRender(()=>a(e,wf(e)))}class QB extends eu{mount(){const{current:e}=this.node;e&&(this.unmount=x6(e,(n,r)=>(BS(this.node,r,"Start"),(i,{success:a})=>BS(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dv=new WeakMap,b_=new WeakMap,YB=t=>{const e=Dv.get(t.target);e&&e(t)},XB=t=>{t.forEach(YB)};function JB({root:t,...e}){const n=t||document;b_.has(n)||b_.set(n,{});const r=b_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(XB,{root:t,...e})),r[i]}function e5(t,e,n){const r=JB(e);return Dv.set(t,n),r.observe(t),()=>{Dv.delete(t),r.unobserve(t)}}const t5={some:0,all:1};class n5 extends eu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:t5[i]},h=f=>{const{isIntersecting:_}=f;if(this.isInView===_||(this.isInView=_,a&&!_&&this.hasEnteredView))return;_&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_);const{onViewportEnter:v,onViewportLeave:T}=this.node.getProps(),E=_?v:T;E&&E(f)};return e5(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(r5(e,n))&&this.startObserver()}unmount(){}}function r5({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const i5={inView:{Feature:n5},tap:{Feature:QB},focus:{Feature:KB},hover:{Feature:GB}},s5={layout:{ProjectionNode:Fk,MeasureLayout:Nk}},o5={...Hz,...i5,...ZB,...s5},ef=oz(o5,vz);function es({children:t}){const{loading:e,user:n}=ir(),r=hs();return e?null:n?t:m.jsx(U_,{to:"/login",replace:!0,state:{from:r}})}const $S=(t,e)=>typeof t=="string"&&e.includes(t);function Rs({roles:t,children:e}){const{loading:n,dbUser:r}=ir();if(n)return null;if(!r)return m.jsx(U_,{to:"/unauthorized",replace:!0});const i=$S(r.rol,t),a=$S(r.rol_extra,t);return!i&&!a?m.jsx(U_,{to:"/unauthorized",replace:!0}):e}function a5(){const{user:t}=ir(),[e,n]=N.useState({loading:!!t,hasClub:!1,clubId:null});return N.useEffect(()=>{let r=!1;return(async()=>{if(!t){n({loading:!1,hasClub:!1,clubId:null});return}n(a=>({...a,loading:!0}));try{const a=ga(fr(rn,"club"),ya("uid_usersWeb","==",t.uid)),u=await Nr(a);if(r)return;if(u.empty)n({loading:!1,hasClub:!1,clubId:null});else{const h=u.docs[0];n({loading:!1,hasClub:!0,clubId:h.id})}}catch(a){console.error("Error comprobando club:",a),r||n({loading:!1,hasClub:!1,clubId:null})}})(),()=>{r=!0}},[t]),e}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uk=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:u,...h},f)=>N.createElement("svg",{ref:f,...u5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Uk("lucide",i),...h},[...u.map(([_,v])=>N.createElement(_,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=(t,e)=>{const n=N.forwardRef(({className:r,...i},a)=>N.createElement(c5,{ref:a,iconNode:e,className:Uk(`lucide-${l5(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=ji("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=ji("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=ji("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=ji("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=ji("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=ji("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=ji("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=ji("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=ji("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ji("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=ji("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=ji("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=ji("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function m5(){const{user:t,dbUser:e,signOut:n}=ir(),[r,i]=N.useState(!1),[a,u]=N.useState(!1),h=N.useRef(null),{loading:f,hasClub:_}=a5(),[v,T]=N.useState(!1);function E($){return e?e.rol===$||e.rol_extra===$:!1}const A=E("admin"),D=E("club_owner"),U=E("productor"),H=!!e?.can_create_event||A||D||U,W=!!t&&!A&&!D&&!U;if(N.useEffect(()=>{function $(oe){r&&h.current&&!h.current.contains(oe.target)&&i(!1)}function se(oe){oe.key==="Escape"&&i(!1)}return document.addEventListener("mousedown",$),document.addEventListener("keydown",se),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("keydown",se)}},[r]),N.useEffect(()=>{function $(se){const oe=document.querySelector("header");a&&oe&&!oe.contains(se.target)&&u(!1)}return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[a]),N.useEffect(()=>{document.body.style.overflow=a?"hidden":"auto"},[a]),N.useEffect(()=>{let $=!0;return(async()=>{if(!t)return;const se=Bn(rn,"productoras",t.uid),oe=await _a(se);$&&T(oe.exists())})(),()=>{$=!1}},[t]),!e&&t)return null;function G({to:$,children:se,icon:oe}){const ee=()=>u(!1);return m.jsxs(iw,{to:$,onClick:ee,className:({isActive:F})=>`flex items-center gap-2 px-3 py-2 rounded ${F?"bg-[#8e2afc]/20 text-[#8e2afc]":"text-white/80 hover:bg-white/5"}`,children:[oe," ",se]})}return m.jsxs("header",{className:"fixed top-0 left-0 w-full z-50 bg-zinc-900 backdrop-blur border-b border-white/10",children:[m.jsxs("div",{className:"w-full px-4 h-14 flex items-center justify-between overflow-visible",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(Pr,{to:"/",className:"text-white font-extrabold text-lg",children:["Go",m.jsx("span",{className:"text-[#8e2afc]",children:"Up"})]}),m.jsxs("nav",{className:"hidden md:flex items-center gap-4 ml-6 text-sm",children:[m.jsx(Ls,{to:"/inicio",icon:m.jsx(qS,{className:"w-4 h-4"}),children:"Inicio"}),D&&!f&&(_?m.jsx(Ls,{to:"/dashboard/mi-club",icon:m.jsx(Oc,{className:"w-4 h-4"}),children:"Mi club"}):m.jsx(Ls,{to:"/club/crear",icon:m.jsx(Oc,{className:"w-4 h-4"}),children:"Crear club"})),(U||A)&&(v?m.jsx(Ls,{to:"/dashboard/productora",icon:m.jsx(jm,{className:"w-4 h-4"}),children:"Mi productora"}):m.jsx(Ls,{to:"/productora/crear",icon:m.jsx(jm,{className:"w-4 h-4"}),children:"Crear productora"})),W&&m.jsx(Ls,{to:"/solicitud-acceso",icon:m.jsx(GS,{className:"w-4 h-4"}),children:"Solicitud de acceso"}),(U||A||D)&&m.jsx(Ls,{to:"/mis-eventos",icon:m.jsx(HS,{className:"w-4 h-4"}),children:"Mis eventos"}),H&&m.jsx(Ls,{to:"/evento/crear",icon:m.jsx(WS,{className:"w-4 h-4"}),children:"Crear evento"}),A&&m.jsx(Ls,{to:"/admin",icon:m.jsx(T_,{className:"w-4 h-4"}),children:"Admin"}),A&&m.jsx(Ls,{to:"/club/crear",icon:m.jsx(Oc,{className:"w-4 h-4"}),children:"Crear club"}),A&&m.jsx(Ls,{to:"/adminClub",icon:m.jsx(E_,{className:"w-4 h-4"}),children:"Clubes Admin"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[!t&&m.jsxs(Pr,{to:"/login",className:"hidden md:inline-block px-3 py-1.5 rounded-md bg-[#8e2afc] text-white text-sm hover:opacity-90",children:[m.jsx(h5,{className:"inline w-4 h-4 mr-1"})," Iniciar sesin"]}),t&&m.jsxs("div",{className:"relative",ref:h,children:[m.jsx("button",{onClick:()=>i($=>!$),className:"w-9 h-9 rounded-full overflow-hidden border border-white/20",children:e?.photo_url?m.jsx("img",{src:e.photo_url,alt:e.nombre||t.email,className:"w-full h-full object-cover"}):m.jsx("span",{className:"w-full h-full flex items-center justify-center bg-white/10 text-white text-sm",children:(e?.nombre??t.email)?.[0]})}),r&&m.jsxs("div",{className:"absolute z-[70] right-0 top-full mt-2 w-48 bg-neutral-900 border border-white/10 rounded-md shadow-xl",children:[m.jsxs("div",{className:"px-3 py-2 border-b border-white/10",children:[m.jsx("p",{className:"font-semibold truncate",children:e?.nombre}),m.jsx("p",{className:"text-white/60 truncate",children:t.email})]}),m.jsxs("ul",{className:"py-1",children:[m.jsx("li",{children:m.jsxs(Pr,{to:"/perfil",className:"block px-3 py-2 hover:bg-white/5",onClick:()=>i(!1),children:[m.jsx(KS,{className:"inline w-4 h-4 mr-1"})," Mi perfil"]})}),A&&m.jsx("li",{children:m.jsxs(Pr,{to:"/admin",className:"block px-3 py-2 hover:bg-white/5",onClick:()=>i(!1),children:[m.jsx(T_,{className:"inline w-4 h-4 mr-1"})," Panel admin"]})}),m.jsx("li",{children:m.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-white/5 text-white/80",onClick:()=>{n(),u(!1)},children:[m.jsx(ZS,{className:"inline w-4 h-4 mr-1"})," Cerrar sesin"]})})]})]})]}),m.jsxs("button",{className:"md:hidden text-white text-2xl px-2 flex items-center",onClick:()=>u($=>!$),children:[" ",m.jsx("span",{className:"ml-1 text-sm",children:"Men"})]})]})]}),a&&m.jsxs("div",{className:"fixed z-40 flex",children:[m.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-40",onClick:()=>u(!1)}),m.jsxs("div",{className:"relative z-50 w-72 max-w-xs bg-zinc-900 text-white p-4 shadow-lg animate-slide-in",onClick:$=>$.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("span",{className:"text-lg font-bold",children:"Men"}),m.jsx("button",{className:"text-white text-2xl",onClick:()=>u(!1),children:""})]}),m.jsxs("nav",{className:"space-y-2 text-sm",children:[m.jsx(G,{to:"/inicio",icon:m.jsx(qS,{className:"w-4 h-4"}),children:"Inicio"}),D&&!f&&(_?m.jsx(G,{to:"/dashboard/mi-club",icon:m.jsx(Oc,{className:"w-4 h-4"}),children:"Mi club"}):m.jsx(G,{to:"/club/crear",icon:m.jsx(Oc,{className:"w-4 h-4"}),children:"Crear club"})),(U||A)&&(v?m.jsx(G,{to:"/dashboard/productora",icon:m.jsx(jm,{className:"w-4 h-4"}),children:"Mi productora"}):m.jsx(G,{to:"/productora/crear",icon:m.jsx(jm,{className:"w-4 h-4"}),children:"Crear productora"})),W&&m.jsx(G,{to:"/solicitud-acceso",icon:m.jsx(GS,{className:"w-4 h-4"}),children:"Solicitud de acceso"}),(U||A||D)&&m.jsx(G,{to:"/mis-eventos",icon:m.jsx(HS,{className:"w-4 h-4"}),children:"Mis eventos"}),H&&m.jsx(G,{to:"/evento/crear",icon:m.jsx(WS,{className:"w-4 h-4"}),children:"Crear evento"}),A&&m.jsx(G,{to:"/club/crear",icon:m.jsx(Oc,{className:"w-4 h-4"}),children:"Crear club"}),A&&m.jsx(G,{to:"/admin",icon:m.jsx(T_,{className:"w-4 h-4"}),children:"Admin"}),A&&m.jsx(G,{to:"/adminClub",icon:m.jsx(E_,{className:"w-4 h-4"}),children:"Clubes Admin"}),(!t||!U||!A||!D)&&m.jsx(G,{to:"/login",icon:m.jsx(E_,{className:"w-4 h-4"}),children:"Ingresar"}),t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-px bg-white/10 my-2"}),m.jsx(G,{to:"/perfil",icon:m.jsx(KS,{className:"w-4 h-4"}),children:"Mi perfil"}),m.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-white/5 text-white/80 flex items-center gap-2",onClick:n,children:[m.jsx(ZS,{className:"w-4 h-4"})," Cerrar sesin"]})]})]})]})]})]})}function Ls({to:t,children:e,icon:n}){return m.jsxs(iw,{to:t,className:({isActive:r})=>`relative px-2 py-1 rounded flex items-center gap-1 transition-all duration-200 ${r?"text-[#8e2afc]":"text-white/80 hover:text-white"} after:content-[''] after:absolute after:-bottom-1 after:left-0 after:w-0 after:h-0.5 after:bg-[#8e2afc] hover:after:w-full after:transition-all after:duration-300`,children:[n," ",e]})}const p5=({text:t})=>m.jsx("div",{className:"space-y-4 text-sm text-white/90 leading-relaxed",children:t.split(`

`).map((e,n)=>m.jsx("p",{className:"whitespace-pre-line",children:e.split(`
`).map((r,i)=>m.jsxs("span",{children:[m.jsx("strong",{children:r.match(/^\d+\.\s/)||r.startsWith("")?r.split(" ")[0]+" ":""}),r.match(/^\d+\.\s/)||r.startsWith("")?r.substring(r.indexOf(" ")+1):r,m.jsx("br",{})]},i))},n))});function g5(){const[t,e]=N.useState(null),n={"Qu es GoUp?":`GoUp es una plataforma digital creada para revolucionar la forma en que las personas interactan con la vida nocturna y los eventos. No es solo una app: es un ecosistema completo que conecta a usuarios, clubes, productores y DJs, facilitando experiencias memorables de manera gil, segura y personalizada.

Desde un inicio, GoUp nace con un propsito claro: eliminar las barreras que existen al momento de salir de fiesta. Cuntas veces te has aburrido esperando en una fila? O has llegado a un evento sin saber si cumplas el dress code, si haba disponibilidad, o si vala la pena? GoUp responde a eso.`,"Nuestra Promesa":` Para los asistentes: Acceso rpido, sin filas, sin confusin. Puedes explorar eventos, comprar entradas, conocer los requisitos de ingreso (edad mnima, dress code, zonas VIP, horarios, lineup y ms) y llevar tu entrada en el celular, con validacin rpida y segura.
 Para los clubes: Herramientas inteligentes para gestionar eventos, controlar aforo, visualizar ventas en tiempo real y segmentar al pblico segn sus polticas internas.
 Para los productores: Posibilidad de publicar y monetizar eventos fcilmente, colaborar con DJs, conectar con clubes y potenciar la venta de entradas a travs de links promocionales personalizados.
 Para los DJs: Perfiles profesionales con links a su msica, followers, estilo, biografa, agenda de eventos y posibilidad de ser contratados directamente.`,"Preguntas frecuentes":`1. Qu es GoUp y para qu sirve?
GoUp es una aplicacin que conecta a usuarios con clubes, productores y DJs. Sirve para encontrar eventos, comprar entradas, acceder rpidamente sin hacer fila, ver el lineup, reservar zonas VIP y mucho ms.

2. Necesito crear una cuenta para usar GoUp?
S. Para acceder a todas las funcionalidades (como comprar entradas o seguir DJs), necesitas crear una cuenta gratuita. Solo tomar unos segundos y puedes hacerlo con tu correo, Google o redes sociales.

3. Cmo s si un evento tiene restricciones de edad o vestimenta?
Cada evento en GoUp muestra claramente los requisitos: edad mnima, dress code, disponibilidad VIP, horarios y polticas de acceso. Esto te permite saber de antemano si cumples con las condiciones.

4. Cmo compro una entrada?
Solo debes seleccionar el evento que te interesa, revisar la informacin y presionar Comprar entrada. Puedes pagar con tarjetas, transferencias u otros mtodos disponibles. Recibirs un cdigo QR en tu perfil.

5. Dnde encuentro mi entrada despus de comprarla?
La entrada estar siempre disponible dentro de tu perfil, en la seccin Mis eventos. Solo necesitas mostrar el cdigo QR en la puerta del evento para acceder.

6. Puedo transferir mi entrada a otra persona?
Por seguridad, actualmente no es posible transferir entradas entre cuentas. Esto previene fraudes y asegura que cada entrada est asociada a un usuario validado.

7. Qu pasa si un evento se cancela?
Si el evento se cancela, se activar el proceso de reembolso automtico. Te notificaremos por correo o dentro de la app con los pasos a seguir.

8. Cmo puedo saber si un evento an tiene cupos disponibles?
En la ficha del evento vers si hay entradas disponibles. Algunos eventos incluso muestran un contador visual del aforo o de las entradas que quedan.

9. GoUp funciona en todo Chile?
Actualmente GoUp est activo en las principales ciudades de Chile y seguimos expandindonos. Puedes buscar eventos filtrando por ciudad o regin.

10. Qu hago si tengo un problema con la app o mi cuenta?
Puedes escribirnos directamente al correo contacto@goup.cl o desde el botn de soporte dentro de la app. Responderemos lo antes posible.`,"Eres productor?":"Con GoUp puedes crear tu perfil de productor, gestionar tu productora y publicar tus eventos.","Crea tu evento":"Publica eventos en minutos con flyer, lineup, zonas VIP y ms, todo desde tu panel.","Que nos hace nicos":` Segmentacin inteligente del pblico segn edad, preferencias, vestimenta o historial.
 Validacin rpida con QR y sistema antifraude.
 Estadsticas y analtica avanzada para clubes y productores.
 Integracin con redes sociales, seguimiento de DJs y geolocalizacin de eventos.
 Privacidad cuidada: Los datos sensibles se manejan de forma responsable, cumpliendo con las normativas vigentes.`,"Trminos y condiciones":"Al usar GoUp aceptas nuestras polticas de uso, seguridad y proteccin de datos.","Poltica de privacidad":"Tu informacin est protegida bajo estndares internacionales de privacidad y cifrado."},r=()=>e(null);return m.jsxs(m.Fragment,{children:[m.jsxs("footer",{className:"bg-zinc-900 text-white mt-20 border-t border-white/10 relative z-10",children:[m.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 text-sm",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-[#8e2afc] font-bold mb-3",children:"Sobre GoUp"}),m.jsx("ul",{className:"space-y-2 text-white/80",children:["Qu es GoUp?","Nuestra Promesa","Preguntas frecuentes"].map(i=>m.jsx("li",{children:m.jsx("button",{onClick:()=>e(i),className:"hover:underline text-left",children:i})},i))})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-[#8e2afc] font-bold mb-3",children:"Tu Evento"}),m.jsx("ul",{className:"space-y-2 text-white/80",children:["Eres productor?","Crea tu evento","Que nos hace nicos"].map(i=>m.jsx("li",{children:m.jsx("button",{onClick:()=>e(i),className:"hover:underline text-left",children:i})},i))})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-[#8e2afc] font-bold mb-3",children:"Legal"}),m.jsx("ul",{className:"space-y-2 text-white/80",children:["Trminos y condiciones","Poltica de privacidad"].map(i=>m.jsx("li",{children:m.jsx("button",{onClick:()=>e(i),className:"hover:underline text-left",children:i})},i))})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-[#8e2afc] font-bold mb-3",children:"Contacto"}),m.jsxs("ul",{className:"space-y-2 text-white/80",children:[m.jsx("li",{children:m.jsx("span",{children:"contacto@goup.cl"})}),m.jsx("li",{children:m.jsx("span",{children:"+56 9 9435 4820"})}),m.jsx("li",{children:m.jsx("span",{children:"Lun a Vie: 10:00 a 18:00 hrs"})})]})]})]}),m.jsxs("div",{className:"border-t border-white/10 text-center text-white/50 text-xs py-4",children:[" ",new Date().getFullYear()," GoUp. Todos los derechos reservados."]})]}),m.jsx(vf,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(ef.div,{className:"fixed inset-0 bg-black/60 z-40",onClick:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),m.jsxs(ef.div,{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 text-white p-6 z-50 rounded-t-2xl shadow-2xl border-t border-[#8e2afc] max-h-[70vh] overflow-y-auto",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",bounce:.2},children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h2",{className:"text-lg font-bold text-[#8e2afc]",children:t}),m.jsx("button",{onClick:r,className:"text-white/70 hover:text-white",children:""})]}),m.jsx(p5,{text:n[t]})]})]})})]})}function y5(){const t=hs();return m.jsxs("div",{className:"min-h-screen overflow-x-hidden flex flex-col bg-[#090909]",children:[m.jsx(m5,{}),m.jsx(vf,{mode:"wait",children:m.jsx(ef.main,{className:"pt-48 flex-1",initial:{opacity:0,x:100},animate:{opacity:1,x:0},transition:{duration:1.5,ease:"easeInOut"},children:m.jsx(T2,{})},t.pathname)}),m.jsx(g5,{})]})}const _5={admin:"/admin",club_owner:"/club",productor:"/productora"};var zk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},QS=Lt.createContext&&Lt.createContext(zk),v5=["attr","size","title"];function w5(t,e){if(t==null)return{};var n=x5(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function x5(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Op(){return Op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Op.apply(this,arguments)}function YS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YS(Object(n),!0).forEach(function(r){b5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b5(t,e,n){return e=T5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T5(t){var e=E5(t,"string");return typeof e=="symbol"?e:e+""}function E5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bk(t){return t&&t.map((e,n)=>Lt.createElement(e.tag,Vp({key:n},e.attr),Bk(e.child)))}function S5(t){return e=>Lt.createElement(C5,Op({attr:Vp({},t.attr)},e),Bk(t.child))}function C5(t){var e=n=>{var{attr:r,size:i,title:a}=t,u=w5(t,v5),h=i||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),Lt.createElement("svg",Op({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,u,{className:f,style:Vp(Vp({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),a&&Lt.createElement("title",null,a),t.children)};return QS!==void 0?Lt.createElement(QS.Consumer,null,n=>e(n)):e(zk)}function I5(t){return S5({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const P5=new URL("/assets/goup_logo-Bd4Ovu8L.png",import.meta.url).href;function A5(){const{signInWithGoogle:t,loading:e,user:n,dbUser:r}=ir(),i=Li(),a=hs();return N.useEffect(()=>{if(!e&&n){const u=r?_5[r.rol]??"/":a.state?.from?.pathname??"/";i(u,{replace:!0})}},[e,n,r,i,a]),e?null:m.jsx("main",{className:"",children:m.jsxs("header",{className:"max-w-md mx-auto flex flex-col items-center space-y-6 text-center",children:[m.jsx("img",{src:P5,alt:"GoUp",className:"w-28"}),m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-extrabold",children:["CONCTATE ",m.jsx("span",{className:"text-[#8e2afc]",children:"Y"})," REGSTRATE"]}),m.jsx("p",{className:"text-white/70",children:"CON NOSOTROS"})]}),m.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-6 py-2 bg-white text-gray-800 rounded-lg shadow-md hover:shadow-lg transition",children:[m.jsx(I5,{size:24}),m.jsx("span",{className:"text-sm font-medium",children:"Continuar con Google"})]})]})})}function $k(){return m.jsx("main",{className:"w-screen h-screen grid place-items-center text-white",children:m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("h1",{className:"text-4xl font-bold",children:"403"}),m.jsx("p",{className:"text-white/70",children:"No tienes permisos para ver esta pgina."}),m.jsx(Pr,{to:"/",className:"text-[#8e2afc] underline",children:"Volver al inicio"})]})})}var xf=t=>t.type==="checkbox",Du=t=>t instanceof Date,Br=t=>t==null;const Hk=t=>typeof t=="object";var In=t=>!Br(t)&&!Array.isArray(t)&&Hk(t)&&!Du(t),k5=t=>In(t)&&t.target?xf(t.target)?t.target.checked:t.target.value:t,N5=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,R5=(t,e)=>t.has(N5(e)),L5=t=>{const e=t.constructor&&t.constructor.prototype;return In(e)&&e.hasOwnProperty("isPrototypeOf")},Vx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function nr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Vx&&(t instanceof Blob||r))&&(n||In(t)))if(e=n?[]:{},!n&&!L5(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=nr(t[i]));else return t;return e}var Pg=t=>/^\w*$/.test(t),Vn=t=>t===void 0,Fx=t=>Array.isArray(t)?t.filter(Boolean):[],Ux=t=>Fx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),$e=(t,e,n)=>{if(!e||!In(t))return n;const r=(Pg(e)?[e]:Ux(e)).reduce((i,a)=>Br(i)?i:i[a],t);return Vn(r)||r===t?Vn(t[e])?n:t[e]:r},ho=t=>typeof t=="boolean",Kt=(t,e,n)=>{let r=-1;const i=Pg(e)?[e]:Ux(e),a=i.length,u=a-1;for(;++r<a;){const h=i[r];let f=n;if(r!==u){const _=t[h];f=In(_)||Array.isArray(_)?_:isNaN(+i[r+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=f,t=t[h]}};const XS={BLUR:"blur",FOCUS_OUT:"focusout"},Ms={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},na={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zx=Lt.createContext(null);zx.displayName="HookFormContext";const bf=()=>Lt.useContext(zx),Ta=t=>{const{children:e,...n}=t;return Lt.createElement(zx.Provider,{value:n},e)};var j5=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const u=a;return e._proxyFormState[u]!==Ms.all&&(e._proxyFormState[u]=!r||Ms.all),t[u]}});return i};const Wk=typeof window<"u"?Lt.useLayoutEffect:Lt.useEffect;var fo=t=>typeof t=="string",qk=(t,e,n,r,i)=>fo(t)?(r&&e.watch.add(t),$e(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),$e(n,a))):(r&&(e.watchAll=!0),n),Mv=t=>Br(t)||!Hk(t);function sa(t,e,n=new WeakSet){if(Mv(t)||Mv(e))return t===e;if(Du(t)&&Du(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const u=t[a];if(!i.includes(a))return!1;if(a!=="ref"){const h=e[a];if(Du(u)&&Du(h)||In(u)&&In(h)||Array.isArray(u)&&Array.isArray(h)?!sa(u,h,n):u!==h)return!1}}return!0}function Ov(t){const e=bf(),{control:n=e.control,name:r,defaultValue:i,disabled:a,exact:u,compute:h}=t||{},f=Lt.useRef(i),_=Lt.useRef(h),v=Lt.useRef(void 0);_.current=h;const T=Lt.useMemo(()=>n._getWatch(r,f.current),[n,r]),[E,A]=Lt.useState(_.current?_.current(T):T);return Wk(()=>n._subscribe({name:r,formState:{values:!0},exact:u,callback:D=>{if(!a){const U=qk(r,n._names,D.values||n._formValues,!1,f.current);if(_.current){const H=_.current(U);sa(H,v.current)||(A(H),v.current=H)}else A(U)}}}),[n,a,r,u]),Lt.useEffect(()=>n._removeUnmounted()),E}var Zk=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},jh=t=>Array.isArray(t)?t:[t],JS=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},ci=t=>In(t)&&!Object.keys(t).length,Bx=t=>t.type==="file",Os=t=>typeof t=="function",Fp=t=>{if(!Vx)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Gk=t=>t.type==="select-multiple",$x=t=>t.type==="radio",D5=t=>$x(t)||xf(t),S_=t=>Fp(t)&&t.isConnected;function M5(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Vn(t)?r++:t[e[r++]];return t}function O5(t){for(const e in t)if(t.hasOwnProperty(e)&&!Vn(t[e]))return!1;return!0}function jn(t,e){const n=Array.isArray(e)?e:Pg(e)?[e]:Ux(e),r=n.length===1?t:M5(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(In(r)&&ci(r)||Array.isArray(r)&&O5(r))&&jn(t,n.slice(0,-1)),t}var Kk=t=>{for(const e in t)if(Os(t[e]))return!0;return!1};function Up(t,e={}){const n=Array.isArray(t);if(In(t)||n)for(const r in t)Array.isArray(t[r])||In(t[r])&&!Kk(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Up(t[r],e[r])):Br(t[r])||(e[r]=!0);return e}function Qk(t,e,n){const r=Array.isArray(t);if(In(t)||r)for(const i in t)Array.isArray(t[i])||In(t[i])&&!Kk(t[i])?Vn(e)||Mv(n[i])?n[i]=Array.isArray(t[i])?Up(t[i],[]):{...Up(t[i])}:Qk(t[i],Br(e)?{}:e[i],n[i]):n[i]=!sa(t[i],e[i]);return n}var hh=(t,e)=>Qk(t,e,Up(e));const e1={value:!1,isValid:!1},t1={value:!0,isValid:!0};var Yk=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Vn(t[0].attributes.value)?Vn(t[0].value)||t[0].value===""?t1:{value:t[0].value,isValid:!0}:t1:e1}return e1},Xk=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Vn(t)?t:e?t===""?NaN:t&&+t:n&&fo(t)?new Date(t):r?r(t):t;const n1={isValid:!1,value:null};var Jk=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,n1):n1;function r1(t){const e=t.ref;return Bx(e)?e.files:$x(e)?Jk(t.refs).value:Gk(e)?[...e.selectedOptions].map(({value:n})=>n):xf(e)?Yk(t.refs).value:Xk(Vn(e.value)?t.ref.value:e.value,t)}var V5=(t,e,n,r)=>{const i={};for(const a of t){const u=$e(e,a);u&&Kt(i,a,u._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},zp=t=>t instanceof RegExp,fh=t=>Vn(t)?t:zp(t)?t.source:In(t)?zp(t.value)?t.value.source:t.value:t,i1=t=>({isOnSubmit:!t||t===Ms.onSubmit,isOnBlur:t===Ms.onBlur,isOnChange:t===Ms.onChange,isOnAll:t===Ms.all,isOnTouch:t===Ms.onTouched});const s1="AsyncFunction";var F5=t=>!!t&&!!t.validate&&!!(Os(t.validate)&&t.validate.constructor.name===s1||In(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===s1)),U5=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),o1=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Dh=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=$e(t,i);if(a){const{_f:u,...h}=a;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],i)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(Dh(h,e))break}else if(In(h)&&Dh(h,e))break}}};function a1(t,e,n){const r=$e(t,n);if(r||Pg(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),u=$e(e,a),h=$e(t,a);if(u&&!Array.isArray(u)&&n!==a)return{name:n};if(h&&h.type)return{name:a,error:h};if(h&&h.root&&h.root.type)return{name:`${a}.root`,error:h.root};i.pop()}return{name:n}}var z5=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return ci(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(u=>e[u]===(!r||Ms.all))},B5=(t,e,n)=>!t||!e||t===e||jh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),$5=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,H5=(t,e)=>!Fx($e(t,e)).length&&jn(t,e),W5=(t,e,n)=>{const r=jh($e(t,n));return Kt(r,"root",e[n]),Kt(t,n,r),t},sp=t=>fo(t);function l1(t,e,n="validate"){if(sp(t)||Array.isArray(t)&&t.every(sp)||ho(t)&&!t)return{type:n,message:sp(t)?t:"",ref:e}}var Vc=t=>In(t)&&!zp(t)?t:{value:t,message:""},u1=async(t,e,n,r,i,a)=>{const{ref:u,refs:h,required:f,maxLength:_,minLength:v,min:T,max:E,pattern:A,validate:D,name:U,valueAsNumber:H,mount:W}=t._f,G=$e(n,U);if(!W||e.has(U))return{};const $=h?h[0]:u,se=M=>{i&&$.reportValidity&&($.setCustomValidity(ho(M)?"":M||""),$.reportValidity())},oe={},ee=$x(u),F=xf(u),j=ee||F,V=(H||Bx(u))&&Vn(u.value)&&Vn(G)||Fp(u)&&u.value===""||G===""||Array.isArray(G)&&!G.length,B=Zk.bind(null,U,r,oe),z=(M,k,le,me=na.maxLength,ve=na.minLength)=>{const Ee=M?k:le;oe[U]={type:M?me:ve,message:Ee,ref:u,...B(M?me:ve,Ee)}};if(a?!Array.isArray(G)||!G.length:f&&(!j&&(V||Br(G))||ho(G)&&!G||F&&!Yk(h).isValid||ee&&!Jk(h).isValid)){const{value:M,message:k}=sp(f)?{value:!!f,message:f}:Vc(f);if(M&&(oe[U]={type:na.required,message:k,ref:$,...B(na.required,k)},!r))return se(k),oe}if(!V&&(!Br(T)||!Br(E))){let M,k;const le=Vc(E),me=Vc(T);if(!Br(G)&&!isNaN(G)){const ve=u.valueAsNumber||G&&+G;Br(le.value)||(M=ve>le.value),Br(me.value)||(k=ve<me.value)}else{const ve=u.valueAsDate||new Date(G),Ee=he=>new Date(new Date().toDateString()+" "+he),J=u.type=="time",xe=u.type=="week";fo(le.value)&&G&&(M=J?Ee(G)>Ee(le.value):xe?G>le.value:ve>new Date(le.value)),fo(me.value)&&G&&(k=J?Ee(G)<Ee(me.value):xe?G<me.value:ve<new Date(me.value))}if((M||k)&&(z(!!M,le.message,me.message,na.max,na.min),!r))return se(oe[U].message),oe}if((_||v)&&!V&&(fo(G)||a&&Array.isArray(G))){const M=Vc(_),k=Vc(v),le=!Br(M.value)&&G.length>+M.value,me=!Br(k.value)&&G.length<+k.value;if((le||me)&&(z(le,M.message,k.message),!r))return se(oe[U].message),oe}if(A&&!V&&fo(G)){const{value:M,message:k}=Vc(A);if(zp(M)&&!G.match(M)&&(oe[U]={type:na.pattern,message:k,ref:u,...B(na.pattern,k)},!r))return se(k),oe}if(D){if(Os(D)){const M=await D(G,n),k=l1(M,$);if(k&&(oe[U]={...k,...B(na.validate,k.message)},!r))return se(k.message),oe}else if(In(D)){let M={};for(const k in D){if(!ci(M)&&!r)break;const le=l1(await D[k](G,n),$,k);le&&(M={...le,...B(k,le.message)},se(le.message),r&&(oe[U]=M))}if(!ci(M)&&(oe[U]={ref:$,...M},!r))return oe}}return se(!0),oe};const q5={mode:Ms.onSubmit,reValidateMode:Ms.onChange,shouldFocusError:!0};function Z5(t={}){let e={...q5,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Os(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=In(e.defaultValues)||In(e.values)?nr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:nr(i),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,_=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let T={...v};const E={array:JS(),state:JS()},A=e.criteriaMode===Ms.all,D=K=>ie=>{clearTimeout(_),_=setTimeout(K,ie)},U=async K=>{if(!e.disabled&&(v.isValid||T.isValid||K)){const ie=e.resolver?ci((await F()).errors):await V(r,!0);ie!==n.isValid&&E.state.next({isValid:ie})}},H=(K,ie)=>{!e.disabled&&(v.isValidating||v.validatingFields||T.isValidating||T.validatingFields)&&((K||Array.from(h.mount)).forEach(pe=>{pe&&(ie?Kt(n.validatingFields,pe,ie):jn(n.validatingFields,pe))}),E.state.next({validatingFields:n.validatingFields,isValidating:!ci(n.validatingFields)}))},W=(K,ie=[],pe,Ne,Ae=!0,Ce=!0)=>{if(Ne&&pe&&!e.disabled){if(u.action=!0,Ce&&Array.isArray($e(r,K))){const Re=pe($e(r,K),Ne.argA,Ne.argB);Ae&&Kt(r,K,Re)}if(Ce&&Array.isArray($e(n.errors,K))){const Re=pe($e(n.errors,K),Ne.argA,Ne.argB);Ae&&Kt(n.errors,K,Re),H5(n.errors,K)}if((v.touchedFields||T.touchedFields)&&Ce&&Array.isArray($e(n.touchedFields,K))){const Re=pe($e(n.touchedFields,K),Ne.argA,Ne.argB);Ae&&Kt(n.touchedFields,K,Re)}(v.dirtyFields||T.dirtyFields)&&(n.dirtyFields=hh(i,a)),E.state.next({name:K,isDirty:z(K,ie),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Kt(a,K,ie)},G=(K,ie)=>{Kt(n.errors,K,ie),E.state.next({errors:n.errors})},$=K=>{n.errors=K,E.state.next({errors:n.errors,isValid:!1})},se=(K,ie,pe,Ne)=>{const Ae=$e(r,K);if(Ae){const Ce=$e(a,K,Vn(pe)?$e(i,K):pe);Vn(Ce)||Ne&&Ne.defaultChecked||ie?Kt(a,K,ie?Ce:r1(Ae._f)):le(K,Ce),u.mount&&U()}},oe=(K,ie,pe,Ne,Ae)=>{let Ce=!1,Re=!1;const tt={name:K};if(!e.disabled){if(!pe||Ne){(v.isDirty||T.isDirty)&&(Re=n.isDirty,n.isDirty=tt.isDirty=z(),Ce=Re!==tt.isDirty);const wt=sa($e(i,K),ie);Re=!!$e(n.dirtyFields,K),wt?jn(n.dirtyFields,K):Kt(n.dirtyFields,K,!0),tt.dirtyFields=n.dirtyFields,Ce=Ce||(v.dirtyFields||T.dirtyFields)&&Re!==!wt}if(pe){const wt=$e(n.touchedFields,K);wt||(Kt(n.touchedFields,K,pe),tt.touchedFields=n.touchedFields,Ce=Ce||(v.touchedFields||T.touchedFields)&&wt!==pe)}Ce&&Ae&&E.state.next(tt)}return Ce?tt:{}},ee=(K,ie,pe,Ne)=>{const Ae=$e(n.errors,K),Ce=(v.isValid||T.isValid)&&ho(ie)&&n.isValid!==ie;if(e.delayError&&pe?(f=D(()=>G(K,pe)),f(e.delayError)):(clearTimeout(_),f=null,pe?Kt(n.errors,K,pe):jn(n.errors,K)),(pe?!sa(Ae,pe):Ae)||!ci(Ne)||Ce){const Re={...Ne,...Ce&&ho(ie)?{isValid:ie}:{},errors:n.errors,name:K};n={...n,...Re},E.state.next(Re)}},F=async K=>{H(K,!0);const ie=await e.resolver(a,e.context,V5(K||h.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return H(K),ie},j=async K=>{const{errors:ie}=await F(K);if(K)for(const pe of K){const Ne=$e(ie,pe);Ne?Kt(n.errors,pe,Ne):jn(n.errors,pe)}else n.errors=ie;return ie},V=async(K,ie,pe={valid:!0})=>{for(const Ne in K){const Ae=K[Ne];if(Ae){const{_f:Ce,...Re}=Ae;if(Ce){const tt=h.array.has(Ce.name),wt=Ae._f&&F5(Ae._f);wt&&v.validatingFields&&H([Ne],!0);const Pn=await u1(Ae,h.disabled,a,A,e.shouldUseNativeValidation&&!ie,tt);if(wt&&v.validatingFields&&H([Ne]),Pn[Ce.name]&&(pe.valid=!1,ie))break;!ie&&($e(Pn,Ce.name)?tt?W5(n.errors,Pn,Ce.name):Kt(n.errors,Ce.name,Pn[Ce.name]):jn(n.errors,Ce.name))}!ci(Re)&&await V(Re,ie,pe)}}return pe.valid},B=()=>{for(const K of h.unMount){const ie=$e(r,K);ie&&(ie._f.refs?ie._f.refs.every(pe=>!S_(pe)):!S_(ie._f.ref))&&dt(K)}h.unMount=new Set},z=(K,ie)=>!e.disabled&&(K&&ie&&Kt(a,K,ie),!sa(he(),i)),M=(K,ie,pe)=>qk(K,h,{...u.mount?a:Vn(ie)?i:fo(K)?{[K]:ie}:ie},pe,ie),k=K=>Fx($e(u.mount?a:i,K,e.shouldUnregister?$e(i,K,[]):[])),le=(K,ie,pe={})=>{const Ne=$e(r,K);let Ae=ie;if(Ne){const Ce=Ne._f;Ce&&(!Ce.disabled&&Kt(a,K,Xk(ie,Ce)),Ae=Fp(Ce.ref)&&Br(ie)?"":ie,Gk(Ce.ref)?[...Ce.ref.options].forEach(Re=>Re.selected=Ae.includes(Re.value)):Ce.refs?xf(Ce.ref)?Ce.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(Ae)?Re.checked=!!Ae.find(tt=>tt===Re.value):Re.checked=Ae===Re.value||!!Ae)}):Ce.refs.forEach(Re=>Re.checked=Re.value===Ae):Bx(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Ae,Ce.ref.type||E.state.next({name:K,values:nr(a)})))}(pe.shouldDirty||pe.shouldTouch)&&oe(K,Ae,pe.shouldTouch,pe.shouldDirty,!0),pe.shouldValidate&&xe(K)},me=(K,ie,pe)=>{for(const Ne in ie){if(!ie.hasOwnProperty(Ne))return;const Ae=ie[Ne],Ce=K+"."+Ne,Re=$e(r,Ce);(h.array.has(K)||In(Ae)||Re&&!Re._f)&&!Du(Ae)?me(Ce,Ae,pe):le(Ce,Ae,pe)}},ve=(K,ie,pe={})=>{const Ne=$e(r,K),Ae=h.array.has(K),Ce=nr(ie);Kt(a,K,Ce),Ae?(E.array.next({name:K,values:nr(a)}),(v.isDirty||v.dirtyFields||T.isDirty||T.dirtyFields)&&pe.shouldDirty&&E.state.next({name:K,dirtyFields:hh(i,a),isDirty:z(K,Ce)})):Ne&&!Ne._f&&!Br(Ce)?me(K,Ce,pe):le(K,Ce,pe),o1(K,h)&&E.state.next({...n,name:K}),E.state.next({name:u.mount?K:void 0,values:nr(a)})},Ee=async K=>{u.mount=!0;const ie=K.target;let pe=ie.name,Ne=!0;const Ae=$e(r,pe),Ce=wt=>{Ne=Number.isNaN(wt)||Du(wt)&&isNaN(wt.getTime())||sa(wt,$e(a,pe,wt))},Re=i1(e.mode),tt=i1(e.reValidateMode);if(Ae){let wt,Pn;const mr=ie.type?r1(Ae._f):k5(K),$n=K.type===XS.BLUR||K.type===XS.FOCUS_OUT,ys=!U5(Ae._f)&&!e.resolver&&!$e(n.errors,pe)&&!Ae._f.deps||$5($n,$e(n.touchedFields,pe),n.isSubmitted,tt,Re),Oi=o1(pe,h,$n);Kt(a,pe,mr),$n?(Ae._f.onBlur&&Ae._f.onBlur(K),f&&f(0)):Ae._f.onChange&&Ae._f.onChange(K);const gi=oe(pe,mr,$n),Zs=!ci(gi)||Oi;if(!$n&&E.state.next({name:pe,type:K.type,values:nr(a)}),ys)return(v.isValid||T.isValid)&&(e.mode==="onBlur"?$n&&U():$n||U()),Zs&&E.state.next({name:pe,...Oi?{}:gi});if(!$n&&Oi&&E.state.next({...n}),e.resolver){const{errors:Gs}=await F([pe]);if(Ce(mr),Ne){const yi=a1(n.errors,r,pe),Vi=a1(Gs,r,yi.name||pe);wt=Vi.error,pe=Vi.name,Pn=ci(Gs)}}else H([pe],!0),wt=(await u1(Ae,h.disabled,a,A,e.shouldUseNativeValidation))[pe],H([pe]),Ce(mr),Ne&&(wt?Pn=!1:(v.isValid||T.isValid)&&(Pn=await V(r,!0)));Ne&&(Ae._f.deps&&xe(Ae._f.deps),ee(pe,Pn,wt,gi))}},J=(K,ie)=>{if($e(n.errors,ie)&&K.focus)return K.focus(),1},xe=async(K,ie={})=>{let pe,Ne;const Ae=jh(K);if(e.resolver){const Ce=await j(Vn(K)?K:Ae);pe=ci(Ce),Ne=K?!Ae.some(Re=>$e(Ce,Re)):pe}else K?(Ne=(await Promise.all(Ae.map(async Ce=>{const Re=$e(r,Ce);return await V(Re&&Re._f?{[Ce]:Re}:Re)}))).every(Boolean),!(!Ne&&!n.isValid)&&U()):Ne=pe=await V(r);return E.state.next({...!fo(K)||(v.isValid||T.isValid)&&pe!==n.isValid?{}:{name:K},...e.resolver||!K?{isValid:pe}:{},errors:n.errors}),ie.shouldFocus&&!Ne&&Dh(r,J,K?Ae:h.mount),Ne},he=K=>{const ie={...u.mount?a:i};return Vn(K)?ie:fo(K)?$e(ie,K):K.map(pe=>$e(ie,pe))},Y=(K,ie)=>({invalid:!!$e((ie||n).errors,K),isDirty:!!$e((ie||n).dirtyFields,K),error:$e((ie||n).errors,K),isValidating:!!$e(n.validatingFields,K),isTouched:!!$e((ie||n).touchedFields,K)}),ge=K=>{K&&jh(K).forEach(ie=>jn(n.errors,ie)),E.state.next({errors:K?n.errors:{}})},Le=(K,ie,pe)=>{const Ne=($e(r,K,{_f:{}})._f||{}).ref,Ae=$e(n.errors,K)||{},{ref:Ce,message:Re,type:tt,...wt}=Ae;Kt(n.errors,K,{...wt,...ie,ref:Ne}),E.state.next({name:K,errors:n.errors,isValid:!1}),pe&&pe.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},qe=(K,ie)=>Os(K)?E.state.subscribe({next:pe=>"values"in pe&&K(M(void 0,ie),pe)}):M(K,ie,!0),Oe=K=>E.state.subscribe({next:ie=>{B5(K.name,ie.name,K.exact)&&z5(ie,K.formState||v,ps,K.reRenderRoot)&&K.callback({values:{...a},...n,...ie,defaultValues:i})}}).unsubscribe,De=K=>(u.mount=!0,T={...T,...K.formState},Oe({...K,formState:T})),dt=(K,ie={})=>{for(const pe of K?jh(K):h.mount)h.mount.delete(pe),h.array.delete(pe),ie.keepValue||(jn(r,pe),jn(a,pe)),!ie.keepError&&jn(n.errors,pe),!ie.keepDirty&&jn(n.dirtyFields,pe),!ie.keepTouched&&jn(n.touchedFields,pe),!ie.keepIsValidating&&jn(n.validatingFields,pe),!e.shouldUnregister&&!ie.keepDefaultValue&&jn(i,pe);E.state.next({values:nr(a)}),E.state.next({...n,...ie.keepDirty?{isDirty:z()}:{}}),!ie.keepIsValid&&U()},gt=({disabled:K,name:ie})=>{(ho(K)&&u.mount||K||h.disabled.has(ie))&&(K?h.disabled.add(ie):h.disabled.delete(ie))},Nt=(K,ie={})=>{let pe=$e(r,K);const Ne=ho(ie.disabled)||ho(e.disabled);return Kt(r,K,{...pe||{},_f:{...pe&&pe._f?pe._f:{ref:{name:K}},name:K,mount:!0,...ie}}),h.mount.add(K),pe?gt({disabled:ho(ie.disabled)?ie.disabled:e.disabled,name:K}):se(K,!0,ie.value),{...Ne?{disabled:ie.disabled||e.disabled}:{},...e.progressive?{required:!!ie.required,min:fh(ie.min),max:fh(ie.max),minLength:fh(ie.minLength),maxLength:fh(ie.maxLength),pattern:fh(ie.pattern)}:{},name:K,onChange:Ee,onBlur:Ee,ref:Ae=>{if(Ae){Nt(K,ie),pe=$e(r,K);const Ce=Vn(Ae.value)&&Ae.querySelectorAll&&Ae.querySelectorAll("input,select,textarea")[0]||Ae,Re=D5(Ce),tt=pe._f.refs||[];if(Re?tt.find(wt=>wt===Ce):Ce===pe._f.ref)return;Kt(r,K,{_f:{...pe._f,...Re?{refs:[...tt.filter(S_),Ce,...Array.isArray($e(i,K))?[{}]:[]],ref:{type:Ce.type,name:K}}:{ref:Ce}}}),se(K,!1,void 0,Ce)}else pe=$e(r,K,{}),pe._f&&(pe._f.mount=!1),(e.shouldUnregister||ie.shouldUnregister)&&!(R5(h.array,K)&&u.action)&&h.unMount.add(K)}}},Qt=()=>e.shouldFocusError&&Dh(r,J,h.mount),Rr=K=>{ho(K)&&(E.state.next({disabled:K}),Dh(r,(ie,pe)=>{const Ne=$e(r,pe);Ne&&(ie.disabled=Ne._f.disabled||K,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(Ae=>{Ae.disabled=Ne._f.disabled||K}))},0,!1))},Lr=(K,ie)=>async pe=>{let Ne;pe&&(pe.preventDefault&&pe.preventDefault(),pe.persist&&pe.persist());let Ae=nr(a);if(E.state.next({isSubmitting:!0}),e.resolver){const{errors:Ce,values:Re}=await F();n.errors=Ce,Ae=nr(Re)}else await V(r);if(h.disabled.size)for(const Ce of h.disabled)jn(Ae,Ce);if(jn(n.errors,"root"),ci(n.errors)){E.state.next({errors:{}});try{await K(Ae,pe)}catch(Ce){Ne=Ce}}else ie&&await ie({...n.errors},pe),Qt(),setTimeout(Qt);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ci(n.errors)&&!Ne,submitCount:n.submitCount+1,errors:n.errors}),Ne)throw Ne},Wr=(K,ie={})=>{$e(r,K)&&(Vn(ie.defaultValue)?ve(K,nr($e(i,K))):(ve(K,ie.defaultValue),Kt(i,K,nr(ie.defaultValue))),ie.keepTouched||jn(n.touchedFields,K),ie.keepDirty||(jn(n.dirtyFields,K),n.isDirty=ie.defaultValue?z(K,nr($e(i,K))):z()),ie.keepError||(jn(n.errors,K),v.isValid&&U()),E.state.next({...n}))},Di=(K,ie={})=>{const pe=K?nr(K):i,Ne=nr(pe),Ae=ci(K),Ce=Ae?i:Ne;if(ie.keepDefaultValues||(i=pe),!ie.keepValues){if(ie.keepDirtyValues){const Re=new Set([...h.mount,...Object.keys(hh(i,a))]);for(const tt of Array.from(Re))$e(n.dirtyFields,tt)?Kt(Ce,tt,$e(a,tt)):ve(tt,$e(Ce,tt))}else{if(Vx&&Vn(K))for(const Re of h.mount){const tt=$e(r,Re);if(tt&&tt._f){const wt=Array.isArray(tt._f.refs)?tt._f.refs[0]:tt._f.ref;if(Fp(wt)){const Pn=wt.closest("form");if(Pn){Pn.reset();break}}}}if(ie.keepFieldsRef)for(const Re of h.mount)ve(Re,$e(Ce,Re));else r={}}a=e.shouldUnregister?ie.keepDefaultValues?nr(i):{}:nr(Ce),E.array.next({values:{...Ce}}),E.state.next({values:{...Ce}})}h={mount:ie.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!v.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,u.watch=!!e.shouldUnregister,E.state.next({submitCount:ie.keepSubmitCount?n.submitCount:0,isDirty:Ae?!1:ie.keepDirty?n.isDirty:!!(ie.keepDefaultValues&&!sa(K,i)),isSubmitted:ie.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ae?{}:ie.keepDirtyValues?ie.keepDefaultValues&&a?hh(i,a):n.dirtyFields:ie.keepDefaultValues&&K?hh(i,K):ie.keepDirty?n.dirtyFields:{},touchedFields:ie.keepTouched?n.touchedFields:{},errors:ie.keepErrors?n.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Mi=(K,ie)=>Di(Os(K)?K(a):K,ie),Ws=(K,ie={})=>{const pe=$e(r,K),Ne=pe&&pe._f;if(Ne){const Ae=Ne.refs?Ne.refs[0]:Ne.ref;Ae.focus&&(Ae.focus(),ie.shouldSelect&&Os(Ae.select)&&Ae.select())}},ps=K=>{n={...n,...K}},gs={control:{register:Nt,unregister:dt,getFieldState:Y,handleSubmit:Lr,setError:Le,_subscribe:Oe,_runSchema:F,_focusError:Qt,_getWatch:M,_getDirty:z,_setValid:U,_setFieldArray:W,_setDisabledField:gt,_setErrors:$,_getFieldArray:k,_reset:Di,_resetDefaultValues:()=>Os(e.defaultValues)&&e.defaultValues().then(K=>{Mi(K,e.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:B,_disableForm:Rr,_subjects:E,_proxyFormState:v,get _fields(){return r},get _formValues(){return a},get _state(){return u},set _state(K){u=K},get _defaultValues(){return i},get _names(){return h},set _names(K){h=K},get _formState(){return n},get _options(){return e},set _options(K){e={...e,...K}}},subscribe:De,trigger:xe,register:Nt,handleSubmit:Lr,watch:qe,setValue:ve,getValues:he,reset:Mi,resetField:Wr,clearErrors:ge,unregister:dt,setError:Le,setFocus:Ws,getFieldState:Y};return{...gs,formControl:gs}}function Ea(t={}){const e=Lt.useRef(void 0),n=Lt.useRef(void 0),[r,i]=Lt.useState({isDirty:!1,isValidating:!1,isLoading:Os(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Os(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Os(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=Z5(t);e.current={...h,formState:r}}const a=e.current.control;return a._options=t,Wk(()=>{const u=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(h=>({...h,isReady:!0})),a._formState.isReady=!0,u},[a]),Lt.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Lt.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),Lt.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),Lt.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),Lt.useEffect(()=>{if(a._proxyFormState.isDirty){const u=a._getDirty();u!==r.isDirty&&a._subjects.state.next({isDirty:u})}},[a,r.isDirty]),Lt.useEffect(()=>{t.values&&!sa(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,i(u=>({...u}))):a._resetDefaultValues()},[a,t.values]),Lt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=j5(r,a),e.current}var Mt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const u of i)a[u]=u;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(h=>typeof i[i[h]]!="number"),u={};for(const h of a)u[h]=i[h];return t.objectValues(u)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const u in i)Object.prototype.hasOwnProperty.call(i,u)&&a.push(u);return a},t.find=(i,a)=>{for(const u of i)if(a(u))return u},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(u=>typeof u=="string"?`'${u}'`:u).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Mt||(Mt={}));var c1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(c1||(c1={}));const Ge=Mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),El=t=>{switch(typeof t){case"undefined":return Ge.undefined;case"string":return Ge.string;case"number":return Number.isNaN(t)?Ge.nan:Ge.number;case"boolean":return Ge.boolean;case"function":return Ge.function;case"bigint":return Ge.bigint;case"symbol":return Ge.symbol;case"object":return Array.isArray(t)?Ge.array:t===null?Ge.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ge.promise:typeof Map<"u"&&t instanceof Map?Ge.map:typeof Set<"u"&&t instanceof Set?Ge.set:typeof Date<"u"&&t instanceof Date?Ge.date:Ge.object;default:return Ge.unknown}},Pe=Mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const u of a.issues)if(u.code==="invalid_union")u.unionErrors.map(i);else if(u.code==="invalid_return_type")i(u.returnTypeError);else if(u.code==="invalid_arguments")i(u.argumentsError);else if(u.path.length===0)r._errors.push(n(u));else{let h=r,f=0;for(;f<u.path.length;){const _=u.path[f];f===u.path.length-1?(h[_]=h[_]||{_errors:[]},h[_]._errors.push(n(u))):h[_]=h[_]||{_errors:[]},h=h[_],f++}}};return i(this),r}static assert(e){if(!(e instanceof xa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}xa.create=t=>new xa(t);const Vv=(t,e)=>{let n;switch(t.code){case Pe.invalid_type:t.received===Ge.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Pe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Mt.jsonStringifyReplacer)}`;break;case Pe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Mt.joinValues(t.keys,", ")}`;break;case Pe.invalid_union:n="Invalid input";break;case Pe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Mt.joinValues(t.options)}`;break;case Pe.invalid_enum_value:n=`Invalid enum value. Expected ${Mt.joinValues(t.options)}, received '${t.received}'`;break;case Pe.invalid_arguments:n="Invalid function arguments";break;case Pe.invalid_return_type:n="Invalid function return type";break;case Pe.invalid_date:n="Invalid date";break;case Pe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Mt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Pe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Pe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Pe.custom:n="Invalid input";break;case Pe.invalid_intersection_types:n="Intersection results could not be merged";break;case Pe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Pe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Mt.assertNever(t)}return{message:n}};let G5=Vv;function K5(){return G5}const Q5=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],u={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let h="";const f=r.filter(_=>!!_).slice().reverse();for(const _ of f)h=_(u,{data:e,defaultError:h}).message;return{...i,path:a,message:h}};function Fe(t,e){const n=K5(),r=Q5({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Vv?void 0:Vv].filter(i=>!!i)});t.common.issues.push(r)}class Ri{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ft;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,u=await i.value;r.push({key:a,value:u})}return Ri.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:u}=i;if(a.status==="aborted"||u.status==="aborted")return ft;a.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof u.value<"u"||i.alwaysSet)&&(r[a.value]=u.value)}return{status:e.value,value:r}}}const ft=Object.freeze({status:"aborted"}),wh=t=>({status:"dirty",value:t}),ms=t=>({status:"valid",value:t}),d1=t=>t.status==="aborted",h1=t=>t.status==="dirty",yd=t=>t.status==="valid",Bp=t=>typeof Promise<"u"&&t instanceof Promise;var Qe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Qe||(Qe={}));class Zl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const f1=(t,e)=>{if(yd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xa(t.common.issues);return this._error=n,this._error}}};function Tt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(u,h)=>{const{message:f}=t;return u.code==="invalid_enum_value"?{message:f??h.defaultError}:typeof h.data>"u"?{message:f??r??h.defaultError}:u.code!=="invalid_type"?{message:h.defaultError}:{message:f??n??h.defaultError}},description:i}}class jt{get description(){return this._def.description}_getType(e){return El(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:El(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ri,ctx:{common:e.parent.common,data:e.data,parsedType:El(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Bp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:El(e)},i=this._parseSync({data:e,path:r.path,parent:r});return f1(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:El(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return yd(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>yd(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:El(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Bp(i)?i:Promise.resolve(i));return f1(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const u=e(i),h=()=>a.addIssue({code:Pe.custom,...r(i)});return typeof Promise<"u"&&u instanceof Promise?u.then(f=>f?!0:(h(),!1)):u?!0:(h(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new wd({schema:this,typeName:mt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ol.create(this,this._def)}nullable(){return xd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return To.create(this)}promise(){return qp.create(this,this._def)}or(e){return Hp.create([this,e],this._def)}and(e){return Wp.create(this,e,this._def)}transform(e){return new wd({...Tt(this._def),schema:this,typeName:mt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Bv({...Tt(this._def),innerType:this,defaultValue:n,typeName:mt.ZodDefault})}brand(){return new v9({typeName:mt.ZodBranded,type:this,...Tt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new $v({...Tt(this._def),innerType:this,catchValue:n,typeName:mt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Hx.create(this,e)}readonly(){return Hv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Y5=/^c[^\s-]{8,}$/i,X5=/^[0-9a-z]+$/,J5=/^[0-9A-HJKMNP-TV-Z]{26}$/i,e9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,t9=/^[a-z0-9_-]{21}$/i,n9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,r9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,i9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,s9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let C_;const o9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,l9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,u9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,c9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,d9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eN="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",h9=new RegExp(`^${eN}$`);function tN(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function f9(t){return new RegExp(`^${tN(t)}$`)}function m9(t){let e=`${eN}T${tN(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function p9(t,e){return!!((e==="v4"||!e)&&o9.test(t)||(e==="v6"||!e)&&l9.test(t))}function g9(t,e){if(!n9.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function y9(t,e){return!!((e==="v4"||!e)&&a9.test(t)||(e==="v6"||!e)&&u9.test(t))}class la extends jt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ge.string){const a=this._getOrReturnCtx(e);return Fe(a,{code:Pe.invalid_type,expected:Ge.string,received:a.parsedType}),ft}const r=new Ri;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const u=e.data.length>a.value,h=e.data.length<a.value;(u||h)&&(i=this._getOrReturnCtx(e,i),u?Fe(i,{code:Pe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):h&&Fe(i,{code:Pe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")i9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"email",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")C_||(C_=new RegExp(s9,"u")),C_.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"emoji",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")e9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"uuid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")t9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"nanoid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Y5.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"cuid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")X5.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"cuid2",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")J5.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"ulid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Fe(i,{validation:"url",code:Pe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"regex",code:Pe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?m9(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?h9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?f9(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?r9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"duration",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?p9(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"ip",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?g9(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"jwt",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?y9(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"cidr",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?c9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"base64",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?d9.test(e.data)||(i=this._getOrReturnCtx(e,i),Fe(i,{validation:"base64url",code:Pe.invalid_string,message:a.message}),r.dirty()):Mt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Pe.invalid_string,...Qe.errToObj(r)})}_addCheck(e){return new la({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Qe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Qe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Qe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Qe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Qe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Qe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Qe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Qe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Qe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Qe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Qe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Qe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Qe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Qe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Qe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Qe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Qe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Qe.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Qe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Qe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Qe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Qe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Qe.errToObj(n)})}nonempty(e){return this.min(1,Qe.errToObj(e))}trim(){return new la({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new la({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new la({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}la.create=t=>new la({checks:[],typeName:mt.ZodString,coerce:t?.coerce??!1,...Tt(t)});function _9(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),u=Number.parseInt(e.toFixed(i).replace(".",""));return a%u/10**i}class Zu extends jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ge.number){const a=this._getOrReturnCtx(e);return Fe(a,{code:Pe.invalid_type,expected:Ge.number,received:a.parsedType}),ft}let r;const i=new Ri;for(const a of this._def.checks)a.kind==="int"?Mt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?_9(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.not_finite,message:a.message}),i.dirty()):Mt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qe.toString(n))}setLimit(e,n,r,i){return new Zu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qe.toString(i)}]})}_addCheck(e){return new Zu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Qe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Qe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Mt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Zu.create=t=>new Zu({checks:[],typeName:mt.ZodNumber,coerce:t?.coerce||!1,...Tt(t)});class Gu extends jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ge.bigint)return this._getInvalidInput(e);let r;const i=new Ri;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Fe(r,{code:Pe.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Mt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Fe(n,{code:Pe.invalid_type,expected:Ge.bigint,received:n.parsedType}),ft}gte(e,n){return this.setLimit("min",e,!0,Qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qe.toString(n))}setLimit(e,n,r,i){return new Gu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qe.toString(i)}]})}_addCheck(e){return new Gu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Gu.create=t=>new Gu({checks:[],typeName:mt.ZodBigInt,coerce:t?.coerce??!1,...Tt(t)});class $p extends jt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ge.boolean){const r=this._getOrReturnCtx(e);return Fe(r,{code:Pe.invalid_type,expected:Ge.boolean,received:r.parsedType}),ft}return ms(e.data)}}$p.create=t=>new $p({typeName:mt.ZodBoolean,coerce:t?.coerce||!1,...Tt(t)});class _d extends jt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ge.date){const a=this._getOrReturnCtx(e);return Fe(a,{code:Pe.invalid_type,expected:Ge.date,received:a.parsedType}),ft}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Fe(a,{code:Pe.invalid_date}),ft}const r=new Ri;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Fe(i,{code:Pe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Mt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new _d({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Qe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Qe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}_d.create=t=>new _d({checks:[],coerce:t?.coerce||!1,typeName:mt.ZodDate,...Tt(t)});class m1 extends jt{_parse(e){if(this._getType(e)!==Ge.symbol){const r=this._getOrReturnCtx(e);return Fe(r,{code:Pe.invalid_type,expected:Ge.symbol,received:r.parsedType}),ft}return ms(e.data)}}m1.create=t=>new m1({typeName:mt.ZodSymbol,...Tt(t)});class p1 extends jt{_parse(e){if(this._getType(e)!==Ge.undefined){const r=this._getOrReturnCtx(e);return Fe(r,{code:Pe.invalid_type,expected:Ge.undefined,received:r.parsedType}),ft}return ms(e.data)}}p1.create=t=>new p1({typeName:mt.ZodUndefined,...Tt(t)});class g1 extends jt{_parse(e){if(this._getType(e)!==Ge.null){const r=this._getOrReturnCtx(e);return Fe(r,{code:Pe.invalid_type,expected:Ge.null,received:r.parsedType}),ft}return ms(e.data)}}g1.create=t=>new g1({typeName:mt.ZodNull,...Tt(t)});class Fv extends jt{constructor(){super(...arguments),this._any=!0}_parse(e){return ms(e.data)}}Fv.create=t=>new Fv({typeName:mt.ZodAny,...Tt(t)});class y1 extends jt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ms(e.data)}}y1.create=t=>new y1({typeName:mt.ZodUnknown,...Tt(t)});class Gl extends jt{_parse(e){const n=this._getOrReturnCtx(e);return Fe(n,{code:Pe.invalid_type,expected:Ge.never,received:n.parsedType}),ft}}Gl.create=t=>new Gl({typeName:mt.ZodNever,...Tt(t)});class _1 extends jt{_parse(e){if(this._getType(e)!==Ge.undefined){const r=this._getOrReturnCtx(e);return Fe(r,{code:Pe.invalid_type,expected:Ge.void,received:r.parsedType}),ft}return ms(e.data)}}_1.create=t=>new _1({typeName:mt.ZodVoid,...Tt(t)});class To extends jt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ge.array)return Fe(n,{code:Pe.invalid_type,expected:Ge.array,received:n.parsedType}),ft;if(i.exactLength!==null){const u=n.data.length>i.exactLength.value,h=n.data.length<i.exactLength.value;(u||h)&&(Fe(n,{code:u?Pe.too_big:Pe.too_small,minimum:h?i.exactLength.value:void 0,maximum:u?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Fe(n,{code:Pe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Fe(n,{code:Pe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((u,h)=>i.type._parseAsync(new Zl(n,u,n.path,h)))).then(u=>Ri.mergeArray(r,u));const a=[...n.data].map((u,h)=>i.type._parseSync(new Zl(n,u,n.path,h)));return Ri.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new To({...this._def,minLength:{value:e,message:Qe.toString(n)}})}max(e,n){return new To({...this._def,maxLength:{value:e,message:Qe.toString(n)}})}length(e,n){return new To({...this._def,exactLength:{value:e,message:Qe.toString(n)}})}nonempty(e){return this.min(1,e)}}To.create=(t,e)=>new To({type:t,minLength:null,maxLength:null,exactLength:null,typeName:mt.ZodArray,...Tt(e)});function Kc(t){if(t instanceof On){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ol.create(Kc(r))}return new On({...t._def,shape:()=>e})}else return t instanceof To?new To({...t._def,type:Kc(t.element)}):t instanceof Ol?Ol.create(Kc(t.unwrap())):t instanceof xd?xd.create(Kc(t.unwrap())):t instanceof Ku?Ku.create(t.items.map(e=>Kc(e))):t}class On extends jt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Mt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ge.object){const _=this._getOrReturnCtx(e);return Fe(_,{code:Pe.invalid_type,expected:Ge.object,received:_.parsedType}),ft}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:u}=this._getCached(),h=[];if(!(this._def.catchall instanceof Gl&&this._def.unknownKeys==="strip"))for(const _ in i.data)u.includes(_)||h.push(_);const f=[];for(const _ of u){const v=a[_],T=i.data[_];f.push({key:{status:"valid",value:_},value:v._parse(new Zl(i,T,i.path,_)),alwaysSet:_ in i.data})}if(this._def.catchall instanceof Gl){const _=this._def.unknownKeys;if(_==="passthrough")for(const v of h)f.push({key:{status:"valid",value:v},value:{status:"valid",value:i.data[v]}});else if(_==="strict")h.length>0&&(Fe(i,{code:Pe.unrecognized_keys,keys:h}),r.dirty());else if(_!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const _=this._def.catchall;for(const v of h){const T=i.data[v];f.push({key:{status:"valid",value:v},value:_._parse(new Zl(i,T,i.path,v)),alwaysSet:v in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const _=[];for(const v of f){const T=await v.key,E=await v.value;_.push({key:T,value:E,alwaysSet:v.alwaysSet})}return _}).then(_=>Ri.mergeObjectSync(r,_)):Ri.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Qe.errToObj,new On({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Qe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new On({...this._def,unknownKeys:"strip"})}passthrough(){return new On({...this._def,unknownKeys:"passthrough"})}extend(e){return new On({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new On({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:mt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new On({...this._def,catchall:e})}pick(e){const n={};for(const r of Mt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new On({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Mt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new On({...this._def,shape:()=>n})}deepPartial(){return Kc(this)}partial(e){const n={};for(const r of Mt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new On({...this._def,shape:()=>n})}required(e){const n={};for(const r of Mt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ol;)a=a._def.innerType;n[r]=a}return new On({...this._def,shape:()=>n})}keyof(){return nN(Mt.objectKeys(this.shape))}}On.create=(t,e)=>new On({shape:()=>t,unknownKeys:"strip",catchall:Gl.create(),typeName:mt.ZodObject,...Tt(e)});On.strictCreate=(t,e)=>new On({shape:()=>t,unknownKeys:"strict",catchall:Gl.create(),typeName:mt.ZodObject,...Tt(e)});On.lazycreate=(t,e)=>new On({shape:t,unknownKeys:"strip",catchall:Gl.create(),typeName:mt.ZodObject,...Tt(e)});class Hp extends jt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const h of a)if(h.result.status==="valid")return h.result;for(const h of a)if(h.result.status==="dirty")return n.common.issues.push(...h.ctx.common.issues),h.result;const u=a.map(h=>new xa(h.ctx.common.issues));return Fe(n,{code:Pe.invalid_union,unionErrors:u}),ft}if(n.common.async)return Promise.all(r.map(async a=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(i);{let a;const u=[];for(const f of r){const _={...n,common:{...n.common,issues:[]},parent:null},v=f._parseSync({data:n.data,path:n.path,parent:_});if(v.status==="valid")return v;v.status==="dirty"&&!a&&(a={result:v,ctx:_}),_.common.issues.length&&u.push(_.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const h=u.map(f=>new xa(f));return Fe(n,{code:Pe.invalid_union,unionErrors:h}),ft}}get options(){return this._def.options}}Hp.create=(t,e)=>new Hp({options:t,typeName:mt.ZodUnion,...Tt(e)});function Uv(t,e){const n=El(t),r=El(e);if(t===e)return{valid:!0,data:t};if(n===Ge.object&&r===Ge.object){const i=Mt.objectKeys(e),a=Mt.objectKeys(t).filter(h=>i.indexOf(h)!==-1),u={...t,...e};for(const h of a){const f=Uv(t[h],e[h]);if(!f.valid)return{valid:!1};u[h]=f.data}return{valid:!0,data:u}}else if(n===Ge.array&&r===Ge.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const u=t[a],h=e[a],f=Uv(u,h);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return n===Ge.date&&r===Ge.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Wp extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,u)=>{if(d1(a)||d1(u))return ft;const h=Uv(a.value,u.value);return h.valid?((h1(a)||h1(u))&&n.dirty(),{status:n.value,value:h.data}):(Fe(r,{code:Pe.invalid_intersection_types}),ft)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,u])=>i(a,u)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Wp.create=(t,e,n)=>new Wp({left:t,right:e,typeName:mt.ZodIntersection,...Tt(n)});class Ku extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.array)return Fe(r,{code:Pe.invalid_type,expected:Ge.array,received:r.parsedType}),ft;if(r.data.length<this._def.items.length)return Fe(r,{code:Pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ft;!this._def.rest&&r.data.length>this._def.items.length&&(Fe(r,{code:Pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((u,h)=>{const f=this._def.items[h]||this._def.rest;return f?f._parse(new Zl(r,u,r.path,h)):null}).filter(u=>!!u);return r.common.async?Promise.all(a).then(u=>Ri.mergeArray(n,u)):Ri.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Ku({...this._def,rest:e})}}Ku.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ku({items:t,typeName:mt.ZodTuple,rest:null,...Tt(e)})};class v1 extends jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.map)return Fe(r,{code:Pe.invalid_type,expected:Ge.map,received:r.parsedType}),ft;const i=this._def.keyType,a=this._def.valueType,u=[...r.data.entries()].map(([h,f],_)=>({key:i._parse(new Zl(r,h,r.path,[_,"key"])),value:a._parse(new Zl(r,f,r.path,[_,"value"]))}));if(r.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const f of u){const _=await f.key,v=await f.value;if(_.status==="aborted"||v.status==="aborted")return ft;(_.status==="dirty"||v.status==="dirty")&&n.dirty(),h.set(_.value,v.value)}return{status:n.value,value:h}})}else{const h=new Map;for(const f of u){const _=f.key,v=f.value;if(_.status==="aborted"||v.status==="aborted")return ft;(_.status==="dirty"||v.status==="dirty")&&n.dirty(),h.set(_.value,v.value)}return{status:n.value,value:h}}}}v1.create=(t,e,n)=>new v1({valueType:e,keyType:t,typeName:mt.ZodMap,...Tt(n)});class tf extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ge.set)return Fe(r,{code:Pe.invalid_type,expected:Ge.set,received:r.parsedType}),ft;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Fe(r,{code:Pe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Fe(r,{code:Pe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function u(f){const _=new Set;for(const v of f){if(v.status==="aborted")return ft;v.status==="dirty"&&n.dirty(),_.add(v.value)}return{status:n.value,value:_}}const h=[...r.data.values()].map((f,_)=>a._parse(new Zl(r,f,r.path,_)));return r.common.async?Promise.all(h).then(f=>u(f)):u(h)}min(e,n){return new tf({...this._def,minSize:{value:e,message:Qe.toString(n)}})}max(e,n){return new tf({...this._def,maxSize:{value:e,message:Qe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}tf.create=(t,e)=>new tf({valueType:t,minSize:null,maxSize:null,typeName:mt.ZodSet,...Tt(e)});class w1 extends jt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}w1.create=(t,e)=>new w1({getter:t,typeName:mt.ZodLazy,...Tt(e)});class zv extends jt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Fe(n,{received:n.data,code:Pe.invalid_literal,expected:this._def.value}),ft}return{status:"valid",value:e.data}}get value(){return this._def.value}}zv.create=(t,e)=>new zv({value:t,typeName:mt.ZodLiteral,...Tt(e)});function nN(t,e){return new vd({values:t,typeName:mt.ZodEnum,...Tt(e)})}class vd extends jt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Fe(n,{expected:Mt.joinValues(r),received:n.parsedType,code:Pe.invalid_type}),ft}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Fe(n,{received:n.data,code:Pe.invalid_enum_value,options:r}),ft}return ms(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return vd.create(e,{...this._def,...n})}exclude(e,n=this._def){return vd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}vd.create=nN;class x1 extends jt{_parse(e){const n=Mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ge.string&&r.parsedType!==Ge.number){const i=Mt.objectValues(n);return Fe(r,{expected:Mt.joinValues(i),received:r.parsedType,code:Pe.invalid_type}),ft}if(this._cache||(this._cache=new Set(Mt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Mt.objectValues(n);return Fe(r,{received:r.data,code:Pe.invalid_enum_value,options:i}),ft}return ms(e.data)}get enum(){return this._def.values}}x1.create=(t,e)=>new x1({values:t,typeName:mt.ZodNativeEnum,...Tt(e)});class qp extends jt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ge.promise&&n.common.async===!1)return Fe(n,{code:Pe.invalid_type,expected:Ge.promise,received:n.parsedType}),ft;const r=n.parsedType===Ge.promise?n.data:Promise.resolve(n.data);return ms(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}qp.create=(t,e)=>new qp({type:t,typeName:mt.ZodPromise,...Tt(e)});class wd extends jt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:u=>{Fe(r,u),u.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const u=i.transform(r.data,a);if(r.common.async)return Promise.resolve(u).then(async h=>{if(n.value==="aborted")return ft;const f=await this._def.schema._parseAsync({data:h,path:r.path,parent:r});return f.status==="aborted"?ft:f.status==="dirty"||n.value==="dirty"?wh(f.value):f});{if(n.value==="aborted")return ft;const h=this._def.schema._parseSync({data:u,path:r.path,parent:r});return h.status==="aborted"?ft:h.status==="dirty"||n.value==="dirty"?wh(h.value):h}}if(i.type==="refinement"){const u=h=>{const f=i.refinement(h,a);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(r.common.async===!1){const h=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return h.status==="aborted"?ft:(h.status==="dirty"&&n.dirty(),u(h.value),{status:n.value,value:h.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(h=>h.status==="aborted"?ft:(h.status==="dirty"&&n.dirty(),u(h.value).then(()=>({status:n.value,value:h.value}))))}if(i.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!yd(u))return ft;const h=i.transform(u.value,a);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>yd(u)?Promise.resolve(i.transform(u.value,a)).then(h=>({status:n.value,value:h})):ft);Mt.assertNever(i)}}wd.create=(t,e,n)=>new wd({schema:t,typeName:mt.ZodEffects,effect:e,...Tt(n)});wd.createWithPreprocess=(t,e,n)=>new wd({schema:e,effect:{type:"preprocess",transform:t},typeName:mt.ZodEffects,...Tt(n)});class Ol extends jt{_parse(e){return this._getType(e)===Ge.undefined?ms(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ol.create=(t,e)=>new Ol({innerType:t,typeName:mt.ZodOptional,...Tt(e)});class xd extends jt{_parse(e){return this._getType(e)===Ge.null?ms(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xd.create=(t,e)=>new xd({innerType:t,typeName:mt.ZodNullable,...Tt(e)});class Bv extends jt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Bv.create=(t,e)=>new Bv({innerType:t,typeName:mt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Tt(e)});class $v extends jt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Bp(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xa(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}$v.create=(t,e)=>new $v({innerType:t,typeName:mt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Tt(e)});class b1 extends jt{_parse(e){if(this._getType(e)!==Ge.nan){const r=this._getOrReturnCtx(e);return Fe(r,{code:Pe.invalid_type,expected:Ge.nan,received:r.parsedType}),ft}return{status:"valid",value:e.data}}}b1.create=t=>new b1({typeName:mt.ZodNaN,...Tt(t)});class v9 extends jt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Hx extends jt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ft:a.status==="dirty"?(n.dirty(),wh(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ft:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Hx({in:e,out:n,typeName:mt.ZodPipeline})}}class Hv extends jt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(yd(i)&&(i.value=Object.freeze(i.value)),i);return Bp(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Hv.create=(t,e)=>new Hv({innerType:t,typeName:mt.ZodReadonly,...Tt(e)});var mt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(mt||(mt={}));const fe=la.create,Nl=Zu.create;Gu.create;const Ot=$p.create;_d.create;const Kn=Fv.create;Gl.create;const Zp=To.create,cs=On.create,kt=Hp.create;Wp.create;Ku.create;const Je=zv.create,Fc=vd.create;qp.create;Ol.create;xd.create;const Rl={string:t=>la.create({...t,coerce:!0}),number:t=>Zu.create({...t,coerce:!0}),boolean:t=>$p.create({...t,coerce:!0}),bigint:t=>Gu.create({...t,coerce:!0}),date:t=>_d.create({...t,coerce:!0})},T1=(t,e,n)=>{if(t&&"reportValidity"in t){const r=$e(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},rN=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?T1(r.ref,n,t):r.refs&&r.refs.forEach(i=>T1(i,n,t))}},w9=(t,e)=>{e.shouldUseNativeValidation&&rN(t,e);const n={};for(const r in t){const i=$e(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(x9(e.names||Object.keys(t),r)){const u=Object.assign({},$e(n,r));Kt(u,"root",a),Kt(n,r,u)}else Kt(n,r,a)}return n},x9=(t,e)=>t.some(n=>n.startsWith(e+"."));var b9=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,u=r.path.join(".");if(!n[u])if("unionErrors"in r){var h=r.unionErrors[0].errors[0];n[u]={message:h.message,type:h.code}}else n[u]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(v){return v.errors.forEach(function(T){return t.push(T)})}),e){var f=n[u].types,_=f&&f[r.code];n[u]=Zk(u,e,n,i,_?[].concat(_,r.message):r.message)}t.shift()}return n},Sa=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(u,h){try{var f=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(_){return a.shouldUseNativeValidation&&rN({},a),{errors:{},values:n.raw?r:_}})}catch(_){return h(_)}return f&&f.then?f.then(void 0,h):f}(0,function(u){if(function(h){return Array.isArray(h?.errors)}(u))return{values:{},errors:w9(b9(u.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw u}))}catch(u){return Promise.reject(u)}}};let T9={data:""},E9=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||T9,S9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,C9=/\/\*[^]*?\*\/|  +/g,E1=/\n+/g,Pl=(t,e)=>{let n="",r="",i="";for(let a in t){let u=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+u+";":r+=a[1]=="f"?Pl(u,a):a+"{"+Pl(u,a[1]=="k"?"":e)+"}":typeof u=="object"?r+=Pl(u,e?e.replace(/([^,])+/g,h=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,f=>/&/.test(f)?f.replace(/&/g,h):h?h+" "+f:f)):a):u!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Pl.p?Pl.p(a,u):a+":"+u+";")}return n+(e&&i?e+"{"+i+"}":i)+r},ra={},iN=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+iN(t[n]);return e}return t},I9=(t,e,n,r,i)=>{let a=iN(t),u=ra[a]||(ra[a]=(f=>{let _=0,v=11;for(;_<f.length;)v=101*v+f.charCodeAt(_++)>>>0;return"go"+v})(a));if(!ra[u]){let f=a!==t?t:(_=>{let v,T,E=[{}];for(;v=S9.exec(_.replace(C9,""));)v[4]?E.shift():v[3]?(T=v[3].replace(E1," ").trim(),E.unshift(E[0][T]=E[0][T]||{})):E[0][v[1]]=v[2].replace(E1," ").trim();return E[0]})(t);ra[u]=Pl(i?{["@keyframes "+u]:f}:f,n?"":"."+u)}let h=n&&ra.g?ra.g:null;return n&&(ra.g=ra[u]),((f,_,v,T)=>{T?_.data=_.data.replace(T,f):_.data.indexOf(f)===-1&&(_.data=v?f+_.data:_.data+f)})(ra[u],e,r,h),u},P9=(t,e,n)=>t.reduce((r,i,a)=>{let u=e[a];if(u&&u.call){let h=u(n),f=h&&h.props&&h.props.className||/^go/.test(h)&&h;u=f?"."+f:h&&typeof h=="object"?h.props?"":Pl(h,""):h===!1?"":h}return r+i+(u??"")},"");function Ag(t){let e=this||{},n=t.call?t(e.p):t;return I9(n.unshift?n.raw?P9(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,E9(e.target),e.g,e.o,e.k)}let sN,Wv,qv;Ag.bind({g:1});let ba=Ag.bind({k:1});function A9(t,e,n,r){Pl.p=e,sN=t,Wv=n,qv=r}function tu(t,e){let n=this||{};return function(){let r=arguments;function i(a,u){let h=Object.assign({},a),f=h.className||i.className;n.p=Object.assign({theme:Wv&&Wv()},h),n.o=/ *go\d+/.test(f),h.className=Ag.apply(n,r)+(f?" "+f:"");let _=t;return t[0]&&(_=h.as||t,delete h.as),qv&&_[0]&&qv(h),sN(_,h)}return i}}var k9=t=>typeof t=="function",Gp=(t,e)=>k9(t)?t(e):t,N9=(()=>{let t=0;return()=>(++t).toString()})(),oN=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),R9=20,aN=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,R9)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return aN(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},op=[],Mu={toasts:[],pausedAt:void 0},rc=t=>{Mu=aN(Mu,t),op.forEach(e=>{e(Mu)})},L9={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},j9=(t={})=>{let[e,n]=N.useState(Mu),r=N.useRef(Mu);N.useEffect(()=>(r.current!==Mu&&n(Mu),op.push(n),()=>{let a=op.indexOf(n);a>-1&&op.splice(a,1)}),[]);let i=e.toasts.map(a=>{var u,h,f;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((u=t[a.type])==null?void 0:u.removeDelay)||t?.removeDelay,duration:a.duration||((h=t[a.type])==null?void 0:h.duration)||t?.duration||L9[a.type],style:{...t.style,...(f=t[a.type])==null?void 0:f.style,...a.style}}});return{...e,toasts:i}},D9=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||N9()}),Tf=t=>(e,n)=>{let r=D9(e,t,n);return rc({type:2,toast:r}),r.id},Fn=(t,e)=>Tf("blank")(t,e);Fn.error=Tf("error");Fn.success=Tf("success");Fn.loading=Tf("loading");Fn.custom=Tf("custom");Fn.dismiss=t=>{rc({type:3,toastId:t})};Fn.remove=t=>rc({type:4,toastId:t});Fn.promise=(t,e,n)=>{let r=Fn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Gp(e.success,i):void 0;return a?Fn.success(a,{id:r,...n,...n?.success}):Fn.dismiss(r),i}).catch(i=>{let a=e.error?Gp(e.error,i):void 0;a?Fn.error(a,{id:r,...n,...n?.error}):Fn.dismiss(r)}),t};var M9=(t,e)=>{rc({type:1,toast:{id:t,height:e}})},O9=()=>{rc({type:5,time:Date.now()})},Mh=new Map,V9=1e3,F9=(t,e=V9)=>{if(Mh.has(t))return;let n=setTimeout(()=>{Mh.delete(t),rc({type:4,toastId:t})},e);Mh.set(t,n)},U9=t=>{let{toasts:e,pausedAt:n}=j9(t);N.useEffect(()=>{if(n)return;let a=Date.now(),u=e.map(h=>{if(h.duration===1/0)return;let f=(h.duration||0)+h.pauseDuration-(a-h.createdAt);if(f<0){h.visible&&Fn.dismiss(h.id);return}return setTimeout(()=>Fn.dismiss(h.id),f)});return()=>{u.forEach(h=>h&&clearTimeout(h))}},[e,n]);let r=N.useCallback(()=>{n&&rc({type:6,time:Date.now()})},[n]),i=N.useCallback((a,u)=>{let{reverseOrder:h=!1,gutter:f=8,defaultPosition:_}=u||{},v=e.filter(A=>(A.position||_)===(a.position||_)&&A.height),T=v.findIndex(A=>A.id===a.id),E=v.filter((A,D)=>D<T&&A.visible).length;return v.filter(A=>A.visible).slice(...h?[E+1]:[0,E]).reduce((A,D)=>A+(D.height||0)+f,0)},[e]);return N.useEffect(()=>{e.forEach(a=>{if(a.dismissed)F9(a.id,a.removeDelay);else{let u=Mh.get(a.id);u&&(clearTimeout(u),Mh.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:M9,startPause:O9,endPause:r,calculateOffset:i}}},z9=ba`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,B9=ba`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$9=ba`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,H9=tu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${z9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${B9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,W9=ba`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,q9=tu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${W9} 1s linear infinite;
`,Z9=ba`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,G9=ba`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,K9=tu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Z9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${G9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Q9=tu("div")`
  position: absolute;
`,Y9=tu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,X9=ba`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,J9=tu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${X9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,e8=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(J9,null,e):e:n==="blank"?null:N.createElement(Y9,null,N.createElement(q9,{...r}),n!=="loading"&&N.createElement(Q9,null,n==="error"?N.createElement(H9,{...r}):N.createElement(K9,{...r})))},t8=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,n8=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,r8="0%{opacity:0;} 100%{opacity:1;}",i8="0%{opacity:1;} 100%{opacity:0;}",s8=tu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,o8=tu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,a8=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=oN()?[r8,i8]:[t8(n),n8(n)];return{animation:e?`${ba(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ba(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},l8=N.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?a8(t.position||e||"top-center",t.visible):{opacity:0},a=N.createElement(e8,{toast:t}),u=N.createElement(o8,{...t.ariaProps},Gp(t.message,t));return N.createElement(s8,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:u}):N.createElement(N.Fragment,null,a,u))});A9(N.createElement);var u8=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=N.useCallback(u=>{if(u){let h=()=>{let f=u.getBoundingClientRect().height;r(t,f)};h(),new MutationObserver(h).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return N.createElement("div",{ref:a,className:e,style:n},i)},c8=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:oN()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},d8=Ag`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Dm=16,h8=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:u})=>{let{toasts:h,handlers:f}=U9(n);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Dm,left:Dm,right:Dm,bottom:Dm,pointerEvents:"none",...a},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map(_=>{let v=_.position||e,T=f.calculateOffset(_,{reverseOrder:t,gutter:r,defaultPosition:e}),E=c8(v,T);return N.createElement(u8,{id:_.id,key:_.id,onHeightUpdate:f.updateHeight,className:_.visible?d8:"",style:E},_.type==="custom"?Gp(_.message,_):i?i(_):N.createElement(l8,{toast:_,position:v}))}))},Et=Fn;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebasestorage.googleapis.com",uN="storageBucket",f8=120*1e3,m8=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends fs{constructor(e,n,r=0){super(I_(e),`Firebase Storage: ${n} (${I_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return I_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vn||(vn={}));function I_(t){return"storage/"+t}function Wx(){const t="An unknown error occurred, please check the error payload for server response.";return new wn(vn.UNKNOWN,t)}function p8(t){return new wn(vn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function g8(t){return new wn(vn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function y8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wn(vn.UNAUTHENTICATED,t)}function _8(){return new wn(vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function v8(t){return new wn(vn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function w8(){return new wn(vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x8(){return new wn(vn.CANCELED,"User canceled the upload/download.")}function b8(t){return new wn(vn.INVALID_URL,"Invalid URL '"+t+"'.")}function T8(t){return new wn(vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function E8(){return new wn(vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uN+"' property when initializing the app?")}function S8(){return new wn(vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C8(){return new wn(vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I8(t){return new wn(vn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zv(t){return new wn(vn.INVALID_ARGUMENT,t)}function cN(){return new wn(vn.APP_DELETED,"The Firebase app was deleted.")}function P8(t){return new wn(vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Oh(t,e){return new wn(vn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mh(t){throw new wn(vn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ki.makeFromUrl(e,n)}catch{return new ki(e,"")}if(r.path==="")return r;throw T8(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+i+u,"i"),f={bucket:1,path:3};function _(se){se.path_=decodeURIComponent(se.path)}const v="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",A=new RegExp(`^https?://${T}/${v}/b/${i}/o${E}`,"i"),D={bucket:1,path:3},U=n===lN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,H="([^?#]*)",W=new RegExp(`^https?://${U}/${i}/${H}`,"i"),$=[{regex:h,indices:f,postModify:a},{regex:A,indices:D,postModify:_},{regex:W,indices:{bucket:1,path:2},postModify:_}];for(let se=0;se<$.length;se++){const oe=$[se],ee=oe.regex.exec(e);if(ee){const F=ee[oe.indices.bucket];let j=ee[oe.indices.path];j||(j=""),r=new ki(F,j),oe.postModify(r);break}}if(r==null)throw b8(e);return r}}class A8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t,e,n){let r=1,i=null,a=null,u=!1,h=0;function f(){return h===2}let _=!1;function v(...H){_||(_=!0,e.apply(null,H))}function T(H){i=setTimeout(()=>{i=null,t(A,f())},H)}function E(){a&&clearTimeout(a)}function A(H,...W){if(_){E();return}if(H){E(),v.call(null,H,...W);return}if(f()||u){E(),v.call(null,H,...W);return}r<64&&(r*=2);let $;h===1?(h=2,$=0):$=(r+Math.random())*1e3,T($)}let D=!1;function U(H){D||(D=!0,E(),!_&&(i!==null?(H||(h=2),clearTimeout(i),T(0)):H||(h=1)))}return T(0),a=setTimeout(()=>{u=!0,U(!0)},n),U}function N8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(t){return t!==void 0}function L8(t){return typeof t=="object"&&!Array.isArray(t)}function qx(t){return typeof t=="string"||t instanceof String}function S1(t){return Zx()&&t instanceof Blob}function Zx(){return typeof Blob<"u"}function C1(t,e,n,r){if(r<e)throw Zv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function dN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var zu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zu||(zu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n,r,i,a,u,h,f,_,v,T,E=!0,A=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=v,this.connectionFactory_=T,this.retry=E,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,U)=>{this.resolve_=D,this.reject_=U,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Mm(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{const f=h.loaded,_=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,_)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===zu.NO_ERROR,f=a.getStatus();if(!h||j8(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===zu.ABORT;r(!1,new Mm(!1,null,v));return}const _=this.successCodes_.indexOf(f)!==-1;r(!0,new Mm(_,a))})},n=(r,i)=>{const a=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());R8(f)?a(f):a()}catch(f){u(f)}else if(h!==null){const f=Wx();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(i.canceled){const f=this.appDelete_?cN():x8();u(f)}else{const f=w8();u(f)}};this.canceled_?n(!1,new Mm(!1,null,!0)):this.backoffId_=k8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function M8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function O8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function V8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function F8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function U8(t,e,n,r,i,a,u=!0,h=!1){const f=dN(t.urlParams),_=t.url+f,v=Object.assign({},t.headers);return V8(v,e),M8(v,n),O8(v,a),F8(v,r),new D8(_,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function B8(...t){const e=z8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zx())return new Blob(t);throw new wn(vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t){if(typeof atob>"u")throw I8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class P_{constructor(e,n){this.data=e,this.contentType=n||null}}function W8(t,e){switch(t){case mo.RAW:return new P_(hN(e));case mo.BASE64:case mo.BASE64URL:return new P_(fN(t,e));case mo.DATA_URL:return new P_(Z8(e),G8(e))}throw Wx()}function hN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=t.charCodeAt(++n);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function q8(t){let e;try{e=decodeURIComponent(t)}catch{throw Oh(mo.DATA_URL,"Malformed data URL.")}return hN(e)}function fN(t,e){switch(t){case mo.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Oh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case mo.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Oh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=H8(e)}catch(i){throw i.message.includes("polyfill")?i:Oh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class mN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Oh(mo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=K8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Z8(t){const e=new mN(t);return e.base64?fN(mo.BASE64,e.rest):q8(e.rest)}function G8(t){return new mN(t).contentType}function K8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){let r=0,i="";S1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(S1(this.data_)){const r=this.data_,i=$8(r,e,n);return i===null?null:new Al(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Al(r,!0)}}static getBlob(...e){if(Zx()){const n=e.map(r=>r instanceof Al?r.data_:r);return new Al(B8.apply(null,n))}else{const n=e.map(u=>qx(u)?W8(mo.RAW,u).data:u.data_);let r=0;n.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(u=>{for(let h=0;h<u.length;h++)i[a++]=u[h]}),new Al(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){let e;try{e=JSON.parse(t)}catch{return null}return L8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Y8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function gN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t,e){return e}class zr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||X8}}let Om=null;function J8(t){return!qx(t)||t.length<2?t:gN(t)}function yN(){if(Om)return Om;const t=[];t.push(new zr("bucket")),t.push(new zr("generation")),t.push(new zr("metageneration")),t.push(new zr("name","fullPath",!0));function e(a,u){return J8(u)}const n=new zr("name");n.xform=e,t.push(n);function r(a,u){return u!==void 0?Number(u):u}const i=new zr("size");return i.xform=r,t.push(i),t.push(new zr("timeCreated")),t.push(new zr("updated")),t.push(new zr("md5Hash",null,!0)),t.push(new zr("cacheControl",null,!0)),t.push(new zr("contentDisposition",null,!0)),t.push(new zr("contentEncoding",null,!0)),t.push(new zr("contentLanguage",null,!0)),t.push(new zr("contentType",null,!0)),t.push(new zr("metadata","customMetadata",!0)),Om=t,Om}function e$(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new ki(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function t$(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const u=n[a];r[u.local]=u.xform(r,e[u.server])}return e$(r,t),r}function _N(t,e,n){const r=pN(e);return r===null?null:t$(t,r,n)}function n$(t,e,n,r){const i=pN(e);if(i===null||!qx(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(_=>{const v=t.bucket,T=t.fullPath,E="/b/"+u(v)+"/o/"+u(T),A=Gx(E,n,r),D=dN({alt:"media",token:_});return A+D})[0]}function r$(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class vN{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){if(!t)throw Wx()}function i$(t,e){function n(r,i){const a=_N(t,i,e);return wN(a!==null),a}return n}function s$(t,e){function n(r,i){const a=_N(t,i,e);return wN(a!==null),n$(a,i,t.host,t._protocol)}return n}function xN(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=_8():i=y8():n.getStatus()===402?i=g8(t.bucket):n.getStatus()===403?i=v8(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function o$(t){const e=xN(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=p8(t.path)),a.serverResponse=i.serverResponse,a}return n}function a$(t,e,n){const r=e.fullServerUrl(),i=Gx(r,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,h=new vN(i,a,s$(t,n),u);return h.errorHandler=o$(e),h}function l$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function u$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=l$(null,e)),r}function c$(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let $="";for(let se=0;se<2;se++)$=$+Math.random().toString().slice(2);return $}const f=h();u["Content-Type"]="multipart/related; boundary="+f;const _=u$(e,r,i),v=r$(_,n),T="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+f+`\r
Content-Type: `+_.contentType+`\r
\r
`,E=`\r
--`+f+"--",A=Al.getBlob(T,r,E);if(A===null)throw S8();const D={name:_.fullPath},U=Gx(a,t.host,t._protocol),H="POST",W=t.maxUploadRetryTime,G=new vN(U,H,i$(t,n),W);return G.urlParams=D,G.headers=u,G.body=A.uploadData(),G.errorHandler=xN(e),G}class d${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw mh("cannot .send() more than once");if(Kl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class h$ extends d${initXhr(){this.xhr_.responseType="text"}}function bN(){return new h$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this._service=e,n instanceof ki?this._location=n:this._location=ki.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qu(e,n)}get root(){const e=new ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gN(this._location.path)}get storage(){return this._service}get parent(){const e=Q8(this._location.path);if(e===null)return null;const n=new ki(this._location.bucket,e);return new Qu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw P8(e)}}function f$(t,e,n){t._throwIfRoot("uploadBytes");const r=c$(t.storage,t._location,yN(),new Al(e,!0),n);return t.storage.makeRequestWithTokens(r,bN).then(i=>({metadata:i,ref:t}))}function m$(t){t._throwIfRoot("getDownloadURL");const e=a$(t.storage,t._location,yN());return t.storage.makeRequestWithTokens(e,bN).then(n=>{if(n===null)throw C8();return n})}function p$(t,e){const n=Y8(t._location.path,e),r=new ki(t._location.bucket,n);return new Qu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t){return/^[A-Za-z]+:\/\//.test(t)}function y$(t,e){return new Qu(t,e)}function TN(t,e){if(t instanceof Kx){const n=t;if(n._bucket==null)throw E8();const r=new Qu(n,n._bucket);return e!=null?TN(r,e):r}else return e!==void 0?p$(t,e):t}function _$(t,e){if(e&&g$(e)){if(t instanceof Kx)return y$(t,e);throw Zv("To use ref(service, url), the first argument must be a Storage instance.")}else return TN(t,e)}function I1(t,e){const n=e?.[uN];return n==null?null:ki.makeFromBucketSpec(n,t)}function v$(t,e,n,r={}){t.host=`${e}:${n}`;const i=Kl(e);i&&(sw(`https://${t.host}/b`),ow("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:wC(a,t.app.options.projectId))}class Kx{constructor(e,n,r,i,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=lN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=f8,this._maxUploadRetryTime=m8,this._requests=new Set,i!=null?this._bucket=ki.makeFromBucketSpec(i,this._host):this._bucket=I1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ki.makeFromBucketSpec(this._url,e):this._bucket=I1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qu(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new A8(cN());{const u=U8(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const P1="@firebase/storage",A1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="storage";function Ca(t,e,n){return t=ln(t),f$(t,e,n)}function Ia(t){return t=ln(t),m$(t)}function Pa(t,e){return t=ln(t),_$(t,e)}function Aa(t=Jp(),e){t=ln(t);const r=Ql(t,EN).getImmediate({identifier:e}),i=yC("storage");return i&&w$(r,...i),r}function w$(t,e,n,r={}){v$(t,e,n,r)}function x$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Kx(n,r,i,e,Xu)}function b$(){zs(new us(EN,x$,"PUBLIC").setMultipleInstances(!0)),mi(P1,A1,""),mi(P1,A1,"esm2020")}b$();function Ef(){const t=bf();if(!t)throw new Error("useFormContextSafe debe usarse dentro de <FormProvider />");return t}function SN({errors:t}){return t.length===0?null:m.jsxs("div",{className:"rounded-md border border-red-500/20 bg-red-500/10 p-4 text-sm text-red-400",children:[m.jsx("p",{className:"font-semibold mb-2",children:"Corrige estos campos:"}),m.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.map((e,n)=>m.jsx("li",{children:e},n))})]})}function ze({name:t,label:e,helper:n,type:r="text",placeholder:i,...a}){const{register:u,formState:{errors:h}}=Ef(),f=kg(h,t)?.message;return m.jsxs("label",{className:"flex flex-col gap-1",children:[m.jsx("span",{className:"text-sm font-medium",children:e}),m.jsx("input",{type:r,placeholder:i,...u(t),...a,className:`rounded-md px-3 py-2 bg-[#0f0f16] border ${f?"border-red-500":"border-[#3a3357]"} focus:outline-none focus:border-[#8e2afc] placeholder:text-white/30`}),n&&m.jsx("span",{className:"text-xs text-white/40",children:n}),f&&m.jsx("span",{className:"text-xs text-red-500",children:f})]})}function Dd({name:t,label:e,helper:n,rows:r=4,placeholder:i,...a}){const{register:u,formState:{errors:h}}=Ef(),f=kg(h,t)?.message;return m.jsxs("label",{className:"flex flex-col gap-1",children:[m.jsx("span",{className:"text-sm font-medium",children:e}),m.jsx("textarea",{rows:r,placeholder:i,...u(t),...a,className:`rounded-md px-3 py-2 bg-[#0f0f16] border ${f?"border-red-500":"border-[#3a3357]"} focus:outline-none focus:border-[#8e2afc] placeholder:text-white/30`}),n&&m.jsx("span",{className:"text-xs text-white/40",children:n}),f&&m.jsx("span",{className:"text-xs text-red-500",children:f})]})}function xt({name:t,label:e,options:n,placeholder:r}){const{register:i,formState:{errors:a}}=Ef(),u=kg(a,t)?.message;return m.jsxs("label",{className:"flex flex-col gap-1",children:[m.jsx("span",{className:"text-sm font-medium",children:e}),m.jsxs("select",{...i(t),className:`rounded-md px-3 py-2 bg-[#0f0f16] border ${u?"border-red-500":"border-[#3a3357]"} focus:outline-none focus:border-[#8e2afc]`,defaultValue:"",children:[r&&m.jsx("option",{value:"",disabled:!0,children:r}),n.map(h=>m.jsx("option",{value:h,children:h},h))]}),u&&m.jsx("span",{className:"text-xs text-red-500",children:u})]})}function Hr({name:t,label:e,accept:n="image/*"}){const{setValue:r,formState:{errors:i}}=Ef(),a=kg(i,t)?.message;return m.jsxs("label",{className:"flex flex-col gap-1",children:[m.jsx("span",{className:"text-sm font-medium",children:e}),m.jsxs("div",{className:`flex items-center gap-2 bg-[#0f0f16] border ${a?"border-red-500":"border-[#3a3357]"} rounded-md p-2`,children:[m.jsx(d5,{size:18,className:"text-[#8e2afc]"}),m.jsx("input",{type:"file",accept:n,onChange:u=>{const h=u.target.files?.[0]??null;r(t,h,{shouldValidate:!0})},className:"flex-1 bg-transparent focus:outline-none text-white file:mr-2 file:rounded file:border-none file:bg-[#8e2afc] file:px-2 file:py-1 file:text-white"})]}),a&&m.jsx("span",{className:"text-xs text-red-500",children:a})]})}function CN({name:t,label:e,options:n}){const{watch:r,setValue:i}=Ef(),a=r(t)??[],u=h=>i(t,a.includes(h)?a.filter(f=>f!==h):[...a,h],{shouldValidate:!0});return m.jsxs("div",{className:"mt-2",children:[m.jsx("p",{className:"text-sm font-medium mb-2",children:e}),m.jsx("div",{className:"grid sm:grid-cols-2 gap-2",children:n.map(h=>m.jsxs("label",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:a.includes(h),onChange:()=>u(h)}),m.jsx("span",{children:h})]},h))})]})}function kg(t,e){return $e(t,e)}function T$({title:t,description:e,loading:n=!1,onConfirm:r,onCancel:i}){return m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60",children:m.jsxs("div",{className:"bg-neutral-900 rounded-md p-6 w-[90vw] max-w-sm text-center border border-white/10",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:t}),m.jsx("p",{className:"text-white/70 mb-5",children:e}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{className:"px-4 py-2 rounded border border-white/20 hover:bg-white/10",onClick:i,disabled:n,children:"Cancelar"}),m.jsx("button",{className:`px-4 py-2 rounded ${n?"opacity-60 cursor-not-allowed":"bg-[#8e2afc] hover:bg-[#7b1fe0]"}`,onClick:r,disabled:n,children:n?"Guardando":"S, guardar"})]})]})})}const E$=cs({nombre:fe().min(1,"El nombre es obligatorio"),phone_number:fe().optional().or(Je("")),rut:fe().optional().or(Je("")),direccion:fe().optional().or(Je("")),sexo:fe().optional().or(Je("")),fecha_nacimiento:fe().optional().or(Je("")),photo_url:Kn().optional().nullable()});function S$(){const{user:t,dbUser:e,loading:n,signOut:r}=ir(),[i,a]=N.useState(!0),[u,h]=N.useState(!1),[f,_]=N.useState(!1),[v,T]=N.useState(!1),[E,A]=N.useState(null),D=N.useRef(null),[U,H]=N.useState(0),[W,G]=N.useState(0),$=Ea({resolver:Sa(E$),defaultValues:void 0,mode:"onChange"});N.useEffect(()=>{(async()=>{if(!n){if(!t?.uid){a(!1);return}try{const le=Bn(rn,"usersWeb",t.uid),me=await _a(le),ve=me.exists()?me.data():{uid:t.uid,email:t.email,nombre:t.displayName,phone_number:"",rut:"",direccion:"",sexo:"",fecha_nacimiento:"",photo_url:t.photoURL};A(ve);const Ee={nombre:ve.nombre??"",phone_number:ve.phone_number??"",rut:ve.rut??"",direccion:ve.direccion??"",sexo:typeof ve.sexo=="string"?ve.sexo:"",fecha_nacimiento:ve.fecha_nacimiento?.seconds?new Date(ve.fecha_nacimiento.seconds*1e3).toISOString().split("T")[0]:ve.fecha_nacimiento??"",photo_url:null};$.reset(Ee),D.current=Ee}catch{Et.error("No se pudo cargar tu perfil")}finally{a(!1)}}})()},[n,t,$]),N.useEffect(()=>{(async()=>{if(!E?.uid)return;const le=ga(fr(rn,"Eventos"),ya("uid_usersWeb","==","/usersWeb/"+E.uid)),ve=(await Nr(le)).docs.map(xe=>xe.data());H(ve.length);const Ee=Date.now(),J=ve.filter(xe=>{const he=xe.horaCierre||xe.horaInicio||"00:00";return Ee>new Date(`${xe.fecha}T${he}`).getTime()}).length;G(J)})()},[E]);const se=N.useMemo(()=>E?.photo_url??"",[E]),oe=async le=>{const me=Aa(),ve=le.name.split(".").pop()?.toLowerCase()||"jpg",Ee=`avatars/${t.uid}/avatar.${ve}`,J=Pa(me,Ee);return await Ca(J,le),await Ia(J)},ee=()=>{D.current&&$.reset(D.current),_(!1)};function F({name:le,label:me,options:ve}){const{register:Ee,formState:{errors:J}}=bf();return m.jsxs("div",{children:[m.jsx("label",{className:"block text-white text-sm font-medium mb-1",children:me}),m.jsxs("select",{...Ee(le),className:"bg-zinc-800 border border-zinc-600 text-white rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#8e2afc]",children:[m.jsx("option",{value:"",children:"Selecciona una opcin"}),ve.map(xe=>m.jsx("option",{value:xe.value,children:xe.label},xe.value))]}),J[le]&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:J[le]?.message})]})}const j=$.handleSubmit(async le=>{if(!(!t?.uid||!E)){h(!0);try{let me=E.photo_url;le.photo_url instanceof File&&(me=await oe(le.photo_url),await xT(Zh.currentUser,{photoURL:me}));const ve={...E,...le,...le.sexo&&le.sexo!==""?{sexo:le.sexo}:{},photo_url:me||null};ve.photo_url||delete ve.photo_url,ve.sexo||delete ve.sexo;const Ee=Bn(rn,"usersWeb",t.uid);(await _a(Ee)).exists()?await Jl(Ee,ve):await Nd(Ee,ve),await xT(Zh.currentUser,{displayName:le.nombre}),A(ve),$.reset({...le,photo_url:null}),D.current={...le,photo_url:null},Et.success("Perfil actualizado"),_(!1),T(!1)}catch(me){console.error(me),Et.error("No se pudo guardar")}finally{h(!1)}}}),V=E?.nombre||"Usuario",B=E?.email||"",z=Math.max(0,U-W),M=E?.fecha_nacimiento?.seconds?new Date(E.fecha_nacimiento.seconds*1e3).toISOString().split("T")[0]:E?.fecha_nacimiento||"",k=le=>{switch(le){case"admin":return"Administrador";case"club_owner":return"Administrador de Club";case"productor":return"Administrador de Productora";default:return"Usuario pendiente de evaluacin"}};return i||!E?m.jsx("p",{className:"text-white text-center mt-8",children:"Cargando perfil..."}):m.jsxs("main",{className:"text-white",children:[m.jsx("div",{className:"relative md:h-40 overflow-hidden"}),m.jsxs("div",{className:"max-w-3xl mx-auto px-4 -mt-28 relative z-10 text-center",children:[m.jsx("div",{className:"mx-auto h-48 w-48 rounded-full overflow-hidden border-4 border-[#8e2afc] bg-white/10",children:se?m.jsx("img",{src:se,alt:V,className:"w-full h-full object-cover"}):m.jsx("div",{className:"grid place-items-center h-full text-4xl",children:V[0].toUpperCase()})}),m.jsx("h1",{className:"text-3xl font-extrabold mt-4",children:V}),m.jsx("p",{className:"text-white/70",children:B}),m.jsxs("p",{className:"bg-[#8e2afc]/20 border border-[#8e2afc]/50 rounded-full px-3 py-0.5 text-sm inline-block mt-2",children:["Eventos: ",m.jsx("strong",{children:U})]}),m.jsxs("p",{className:"bg-[#8e2afc]/20 border border-[#8e2afc]/50 rounded-full px-3 py-0.5 text-sm inline-block mt-2",children:["Realizados: ",m.jsx("strong",{children:W})]}),m.jsxs("p",{className:"bg-[#8e2afc]/20 border border-[#8e2afc]/50 rounded-full px-3 py-0.5 text-sm inline-block mt-2",children:["Prximos: ",m.jsx("strong",{children:z})]}),m.jsxs("div",{className:"mt-4 flex justify-center gap-3",children:[!f&&m.jsx("button",{onClick:()=>_(!0),className:"text-sm px-3 py-1 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] transition",children:"Editar datos"}),m.jsx("button",{onClick:r,className:"text-sm px-3 py-1 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] transition",children:"Cerrar sesin"})]})]}),m.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:f?m.jsx(Ta,{...$,children:m.jsxs("form",{onSubmit:le=>{le.preventDefault(),T(!0)},className:"space-y-6",noValidate:!0,children:[m.jsxs(k1,{title:"Informacin personal",children:[m.jsx(ze,{name:"nombre",label:"Nombre *"}),m.jsx(ze,{name:"phone_number",label:"Telfono"}),m.jsx(ze,{name:"rut",label:"RUT"}),m.jsx(ze,{name:"direccion",label:"Direccin"}),m.jsx(F,{name:"sexo",label:"Sexo",options:[{value:"Femenino",label:"Femenino"},{value:"Masculino",label:"Masculino"},{value:"No binario",label:"No binario"},{value:"Prefiero no decirlo",label:"Prefiero no decirlo"},{value:"Otro",label:"Otro"}]}),m.jsx(ze,{name:"fecha_nacimiento",label:"Fecha de nacimiento",type:"date"})]}),m.jsx(k1,{title:"Avatar",children:m.jsx(Hr,{name:"photo_url",label:"Reemplazar avatar (opcional)"})}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{type:"button",onClick:ee,className:"text-sm px-3 py-1 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] transition",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:u,className:"text-sm px-3 py-1 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] transition",children:"Guardar cambios"})]})]})}):m.jsxs(C$,{title:"Informacin personal",children:[m.jsx(Iu,{k:"Nombre",v:E.nombre}),m.jsx(Iu,{k:"Telfono",v:E.phone_number}),m.jsx(Iu,{k:"RUT",v:E.rut}),m.jsx(Iu,{k:"Direccin",v:E.direccion}),m.jsx(Iu,{k:"Sexo",v:E.sexo}),m.jsx(Iu,{k:"Fecha de nacimiento",v:M}),m.jsx(Iu,{k:"Rol",v:m.jsx(I$,{text:k(e?.rol??"")})})]})}),v&&m.jsx(T$,{title:"Guardar los cambios?",description:"Se actualizarn los datos de tu perfil.",loading:u,onConfirm:j,onCancel:()=>T(!1)})]})}function C$({title:t,children:e}){return m.jsxs("section",{className:"rounded-xl border border-white/10 bg-white/[0.03] backdrop-blur p-5",children:[m.jsx("h3",{className:"font-semibold text-[#cbb3ff] mb-3",children:t}),m.jsx("div",{className:"space-y-2",children:e})]})}function Iu({k:t,v:e}){return m.jsxs("p",{className:"flex justify-between text-sm text-white/80 border-b border-white/10 py-2",children:[m.jsx("span",{className:"text-white/60",children:t}),m.jsx("span",{children:e||""})]})}function k1({title:t,children:e}){return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#cbb3ff]",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}function I$({text:t}){return m.jsx("span",{className:"bg-[#8e2afc]/20 border border-[#8e2afc]/50 rounded-full px-3 py-0.5 text-sm text-white",children:t||""})}function IN(t){const[e,n]=N.useState(0),r=t.length,i=t[e];return{current:e,total:r,step:i,steps:t,next:()=>n(f=>Math.min(f+1,r-1)),prev:()=>n(f=>Math.max(f-1,0)),goTo:f=>n(Math.max(0,Math.min(f,r-1)))}}function PN(t,e){const n=N.useRef(e);N.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const P$=1;function A$(t){return Object.freeze({__version:P$,map:t})}function k$(t,e){return Object.freeze({...t,...e})}const AN=N.createContext(null),kN=AN.Provider;function Qx(){const t=N.useContext(AN);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function N$(t){function e(n,r){const{instance:i,context:a}=t(n).current;return N.useImperativeHandle(r,()=>i),n.children==null?null:Lt.createElement(kN,{value:a},n.children)}return N.forwardRef(e)}function R$(t){function e(n,r){const[i,a]=N.useState(!1),{instance:u}=t(n,a).current;N.useImperativeHandle(r,()=>u),N.useEffect(function(){i&&u.update()},[u,i,n.children]);const h=u._contentNode;return h?rL.createPortal(n.children,h):null}return N.forwardRef(e)}function L$(t){function e(n,r){const{instance:i}=t(n).current;return N.useImperativeHandle(r,()=>i),null}return N.forwardRef(e)}function NN(t,e){const n=N.useRef();N.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Yx(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function j$(t,e){return function(r,i){const a=Qx(),u=t(Yx(r,a),a);return PN(a.map,r.attribution),NN(u.current,r.eventHandlers),e(u.current,a,r,i),u}}var xh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var D$=xh.exports,N1;function M$(){return N1||(N1=1,function(t,e){(function(n,r){r(e)})(D$,function(n){var r="1.9.4";function i(o){var c,g,w,C;for(g=1,w=arguments.length;g<w;g++){C=arguments[g];for(c in C)o[c]=C[c]}return o}var a=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function u(o,c){var g=Array.prototype.slice;if(o.bind)return o.bind.apply(o,g.call(arguments,1));var w=g.call(arguments,2);return function(){return o.apply(c,w.length?w.concat(g.call(arguments)):arguments)}}var h=0;function f(o){return"_leaflet_id"in o||(o._leaflet_id=++h),o._leaflet_id}function _(o,c,g){var w,C,R,Z;return Z=function(){w=!1,C&&(R.apply(g,C),C=!1)},R=function(){w?C=arguments:(o.apply(g,arguments),setTimeout(Z,c),w=!0)},R}function v(o,c,g){var w=c[1],C=c[0],R=w-C;return o===w&&g?o:((o-C)%R+R)%R+C}function T(){return!1}function E(o,c){if(c===!1)return o;var g=Math.pow(10,c===void 0?6:c);return Math.round(o*g)/g}function A(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function D(o){return A(o).split(/\s+/)}function U(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?a(o.options):{});for(var g in c)o.options[g]=c[g];return o.options}function H(o,c,g){var w=[];for(var C in o)w.push(encodeURIComponent(g?C.toUpperCase():C)+"="+encodeURIComponent(o[C]));return(!c||c.indexOf("?")===-1?"?":"&")+w.join("&")}var W=/\{ *([\w_ -]+) *\}/g;function G(o,c){return o.replace(W,function(g,w){var C=c[w];if(C===void 0)throw new Error("No value provided for variable "+g);return typeof C=="function"&&(C=C(c)),C})}var $=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function se(o,c){for(var g=0;g<o.length;g++)if(o[g]===c)return g;return-1}var oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var F=0;function j(o){var c=+new Date,g=Math.max(0,16-(c-F));return F=c+g,window.setTimeout(o,g)}var V=window.requestAnimationFrame||ee("RequestAnimationFrame")||j,B=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function z(o,c,g){if(g&&V===j)o.call(c);else return V.call(window,u(o,c))}function M(o){o&&B.call(window,o)}var k={__proto__:null,extend:i,create:a,bind:u,get lastId(){return h},stamp:f,throttle:_,wrapNum:v,falseFn:T,formatNum:E,trim:A,splitWords:D,setOptions:U,getParamString:H,template:G,isArray:$,indexOf:se,emptyImageUrl:oe,requestFn:V,cancelFn:B,requestAnimFrame:z,cancelAnimFrame:M};function le(){}le.extend=function(o){var c=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,w=a(g);w.constructor=c,c.prototype=w;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(c[C]=this[C]);return o.statics&&i(c,o.statics),o.includes&&(me(o.includes),i.apply(null,[w].concat(o.includes))),i(w,o),delete w.statics,delete w.includes,w.options&&(w.options=g.options?a(g.options):{},i(w.options,o.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,Z=w._initHooks.length;R<Z;R++)w._initHooks[R].call(this)}},c},le.include=function(o){var c=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},le.mergeOptions=function(o){return i(this.prototype.options,o),this},le.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),g=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function me(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=$(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ve={on:function(o,c,g){if(typeof o=="object")for(var w in o)this._on(w,o[w],c);else{o=D(o);for(var C=0,R=o.length;C<R;C++)this._on(o[C],c,g)}return this},off:function(o,c,g){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var w in o)this._off(w,o[w],c);else{o=D(o);for(var C=arguments.length===1,R=0,Z=o.length;R<Z;R++)C?this._off(o[R]):this._off(o[R],c,g)}return this},_on:function(o,c,g,w){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,g)===!1){g===this&&(g=void 0);var C={fn:c,ctx:g};w&&(C.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(C)}},_off:function(o,c,g){var w,C,R;if(this._events&&(w=this._events[o],!!w)){if(arguments.length===1){if(this._firingCount)for(C=0,R=w.length;C<R;C++)w[C].fn=T;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Z=this._listens(o,c,g);if(Z!==!1){var ne=w[Z];this._firingCount&&(ne.fn=T,this._events[o]=w=w.slice()),w.splice(Z,1)}}},fire:function(o,c,g){if(!this.listens(o,g))return this;var w=i({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var C=this._events[o];if(C){this._firingCount=this._firingCount+1||1;for(var R=0,Z=C.length;R<Z;R++){var ne=C[R],ue=ne.fn;ne.once&&this.off(o,ue,ne.ctx),ue.call(ne.ctx||this,w)}this._firingCount--}}return g&&this._propagateEvent(w),this},listens:function(o,c,g,w){typeof o!="string"&&console.warn('"string" type argument expected');var C=c;typeof c!="function"&&(w=!!c,C=void 0,g=void 0);var R=this._events&&this._events[o];if(R&&R.length&&this._listens(o,C,g)!==!1)return!0;if(w){for(var Z in this._eventParents)if(this._eventParents[Z].listens(o,c,g,w))return!0}return!1},_listens:function(o,c,g){if(!this._events)return!1;var w=this._events[o]||[];if(!c)return!!w.length;g===this&&(g=void 0);for(var C=0,R=w.length;C<R;C++)if(w[C].fn===c&&w[C].ctx===g)return C;return!1},once:function(o,c,g){if(typeof o=="object")for(var w in o)this._on(w,o[w],c,!0);else{o=D(o);for(var C=0,R=o.length;C<R;C++)this._on(o[C],c,g,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[f(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[f(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};ve.addEventListener=ve.on,ve.removeEventListener=ve.clearAllEventListeners=ve.off,ve.addOneTimeEventListener=ve.once,ve.fireEvent=ve.fire,ve.hasEventListeners=ve.listens;var Ee=le.extend(ve);function J(o,c,g){this.x=g?Math.round(o):o,this.y=g?Math.round(c):c}var xe=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(o){return this.clone()._add(he(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(he(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new J(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new J(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xe(this.x),this.y=xe(this.y),this},distanceTo:function(o){o=he(o);var c=o.x-this.x,g=o.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(o){return o=he(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=he(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function he(o,c,g){return o instanceof J?o:$(o)?new J(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new J(o.x,o.y):new J(o,c,g)}function Y(o,c){if(o)for(var g=c?[o,c]:o,w=0,C=g.length;w<C;w++)this.extend(g[w])}Y.prototype={extend:function(o){var c,g;if(!o)return this;if(o instanceof J||typeof o[0]=="number"||"x"in o)c=g=he(o);else if(o=ge(o),c=o.min,g=o.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(o){return he((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return he(this.min.x,this.max.y)},getTopRight:function(){return he(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,g;return typeof o[0]=="number"||o instanceof J?o=he(o):o=ge(o),o instanceof Y?(c=o.min,g=o.max):c=g=o,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(o){o=ge(o);var c=this.min,g=this.max,w=o.min,C=o.max,R=C.x>=c.x&&w.x<=g.x,Z=C.y>=c.y&&w.y<=g.y;return R&&Z},overlaps:function(o){o=ge(o);var c=this.min,g=this.max,w=o.min,C=o.max,R=C.x>c.x&&w.x<g.x,Z=C.y>c.y&&w.y<g.y;return R&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,g=this.max,w=Math.abs(c.x-g.x)*o,C=Math.abs(c.y-g.y)*o;return ge(he(c.x-w,c.y-C),he(g.x+w,g.y+C))},equals:function(o){return o?(o=ge(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ge(o,c){return!o||o instanceof Y?o:new Y(o,c)}function Le(o,c){if(o)for(var g=c?[o,c]:o,w=0,C=g.length;w<C;w++)this.extend(g[w])}Le.prototype={extend:function(o){var c=this._southWest,g=this._northEast,w,C;if(o instanceof Oe)w=o,C=o;else if(o instanceof Le){if(w=o._southWest,C=o._northEast,!w||!C)return this}else return o?this.extend(De(o)||qe(o)):this;return!c&&!g?(this._southWest=new Oe(w.lat,w.lng),this._northEast=new Oe(C.lat,C.lng)):(c.lat=Math.min(w.lat,c.lat),c.lng=Math.min(w.lng,c.lng),g.lat=Math.max(C.lat,g.lat),g.lng=Math.max(C.lng,g.lng)),this},pad:function(o){var c=this._southWest,g=this._northEast,w=Math.abs(c.lat-g.lat)*o,C=Math.abs(c.lng-g.lng)*o;return new Le(new Oe(c.lat-w,c.lng-C),new Oe(g.lat+w,g.lng+C))},getCenter:function(){return new Oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Oe||"lat"in o?o=De(o):o=qe(o);var c=this._southWest,g=this._northEast,w,C;return o instanceof Le?(w=o.getSouthWest(),C=o.getNorthEast()):w=C=o,w.lat>=c.lat&&C.lat<=g.lat&&w.lng>=c.lng&&C.lng<=g.lng},intersects:function(o){o=qe(o);var c=this._southWest,g=this._northEast,w=o.getSouthWest(),C=o.getNorthEast(),R=C.lat>=c.lat&&w.lat<=g.lat,Z=C.lng>=c.lng&&w.lng<=g.lng;return R&&Z},overlaps:function(o){o=qe(o);var c=this._southWest,g=this._northEast,w=o.getSouthWest(),C=o.getNorthEast(),R=C.lat>c.lat&&w.lat<g.lat,Z=C.lng>c.lng&&w.lng<g.lng;return R&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=qe(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function qe(o,c){return o instanceof Le?o:new Le(o,c)}function Oe(o,c,g){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,g!==void 0&&(this.alt=+g)}Oe.prototype={equals:function(o,c){if(!o)return!1;o=De(o);var g=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return g<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+E(this.lat,o)+", "+E(this.lng,o)+")"},distanceTo:function(o){return gt.distance(this,De(o))},wrap:function(){return gt.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,g=c/Math.cos(Math.PI/180*this.lat);return qe([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new Oe(this.lat,this.lng,this.alt)}};function De(o,c,g){return o instanceof Oe?o:$(o)&&typeof o[0]!="object"?o.length===3?new Oe(o[0],o[1],o[2]):o.length===2?new Oe(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Oe(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new Oe(o,c,g)}var dt={latLngToPoint:function(o,c){var g=this.projection.project(o),w=this.scale(c);return this.transformation._transform(g,w)},pointToLatLng:function(o,c){var g=this.scale(c),w=this.transformation.untransform(o,g);return this.projection.unproject(w)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(o),w=this.transformation.transform(c.min,g),C=this.transformation.transform(c.max,g);return new Y(w,C)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?v(o.lng,this.wrapLng,!0):o.lng,g=this.wrapLat?v(o.lat,this.wrapLat,!0):o.lat,w=o.alt;return new Oe(g,c,w)},wrapLatLngBounds:function(o){var c=o.getCenter(),g=this.wrapLatLng(c),w=c.lat-g.lat,C=c.lng-g.lng;if(w===0&&C===0)return o;var R=o.getSouthWest(),Z=o.getNorthEast(),ne=new Oe(R.lat-w,R.lng-C),ue=new Oe(Z.lat-w,Z.lng-C);return new Le(ne,ue)}},gt=i({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var g=Math.PI/180,w=o.lat*g,C=c.lat*g,R=Math.sin((c.lat-o.lat)*g/2),Z=Math.sin((c.lng-o.lng)*g/2),ne=R*R+Math.cos(w)*Math.cos(C)*Z*Z,ue=2*Math.atan2(Math.sqrt(ne),Math.sqrt(1-ne));return this.R*ue}}),Nt=6378137,Qt={R:Nt,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,g=this.MAX_LATITUDE,w=Math.max(Math.min(g,o.lat),-g),C=Math.sin(w*c);return new J(this.R*o.lng*c,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(o){var c=180/Math.PI;return new Oe((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=Nt*Math.PI;return new Y([-o,-o],[o,o])}()};function Rr(o,c,g,w){if($(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=g,this._d=w}Rr.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new J((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function Lr(o,c,g,w){return new Rr(o,c,g,w)}var Wr=i({},gt,{code:"EPSG:3857",projection:Qt,transformation:function(){var o=.5/(Math.PI*Qt.R);return Lr(o,.5,-o,.5)}()}),Di=i({},Wr,{code:"EPSG:900913"});function Mi(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Ws(o,c){var g="",w,C,R,Z,ne,ue;for(w=0,R=o.length;w<R;w++){for(ne=o[w],C=0,Z=ne.length;C<Z;C++)ue=ne[C],g+=(C?"L":"M")+ue.x+" "+ue.y;g+=c?We.svg?"z":"x":""}return g||"M0 0"}var ps=document.documentElement.style,qs="ActiveXObject"in window,gs=qs&&!document.addEventListener,K="msLaunchUri"in navigator&&!("documentMode"in document),ie=Qn("webkit"),pe=Qn("android"),Ne=Qn("android 2")||Qn("android 3"),Ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ce=pe&&Qn("Google")&&Ae<537&&!("AudioNode"in window),Re=!!window.opera,tt=!K&&Qn("chrome"),wt=Qn("gecko")&&!ie&&!Re&&!qs,Pn=!tt&&Qn("safari"),mr=Qn("phantom"),$n="OTransition"in ps,ys=navigator.platform.indexOf("Win")===0,Oi=qs&&"transition"in ps,gi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ne,Zs="MozPerspective"in ps,Gs=!window.L_DISABLE_3D&&(Oi||gi||Zs)&&!$n&&!mr,yi=typeof orientation<"u"||Qn("mobile"),Vi=yi&&ie,ka=yi&&gi,Co=!window.PointerEvent&&window.MSPointerEvent,jr=!!(window.PointerEvent||Co),_i="ontouchstart"in window||!!window.TouchEvent,Na=!window.L_NO_TOUCH&&(_i||jr),Fi=yi&&Re,nu=yi&&wt,Io=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ru=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",T,c),window.removeEventListener("testPassiveEventSupport",T,c)}catch{}return o}(),_s=function(){return!!document.createElement("canvas").getContext}(),Po=!!(document.createElementNS&&Mi("svg").createSVGRect),un=!!Po&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ra=!Po&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),vi=navigator.platform.indexOf("Mac")===0,Ao=navigator.platform.indexOf("Linux")===0;function Qn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var We={ie:qs,ielt9:gs,edge:K,webkit:ie,android:pe,android23:Ne,androidStock:Ce,opera:Re,chrome:tt,gecko:wt,safari:Pn,phantom:mr,opera12:$n,win:ys,ie3d:Oi,webkit3d:gi,gecko3d:Zs,any3d:Gs,mobile:yi,mobileWebkit:Vi,mobileWebkit3d:ka,msPointer:Co,pointer:jr,touch:Na,touchNative:_i,mobileOpera:Fi,mobileGecko:nu,retina:Io,passiveEvents:ru,canvas:_s,svg:Po,vml:Ra,inlineSvg:un,mac:vi,linux:Ao},qr=We.msPointer?"MSPointerDown":"pointerdown",La=We.msPointer?"MSPointerMove":"pointermove",ic=We.msPointer?"MSPointerUp":"pointerup",ko=We.msPointer?"MSPointerCancel":"pointercancel",ja={touchstart:qr,touchmove:La,touchend:ic,touchcancel:ko},Zr={touchstart:qt,touchmove:Va,touchend:Va,touchcancel:Va},Gr={},Kr=!1;function sc(o,c,g){return c==="touchstart"&&oc(),Zr[c]?(g=Zr[c].bind(this,g),o.addEventListener(ja[c],g,!1),g):(console.warn("wrong event specified:",c),T)}function iu(o,c,g){if(!ja[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(ja[c],g,!1)}function Da(o){Gr[o.pointerId]=o}function Ma(o){Gr[o.pointerId]&&(Gr[o.pointerId]=o)}function Oa(o){delete Gr[o.pointerId]}function oc(){Kr||(document.addEventListener(qr,Da,!0),document.addEventListener(La,Ma,!0),document.addEventListener(ic,Oa,!0),document.addEventListener(ko,Oa,!0),Kr=!0)}function Va(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in Gr)c.touches.push(Gr[g]);c.changedTouches=[c],o(c)}}function qt(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Wt(c),Va(o,c)}function ac(o){var c={},g,w;for(w in o)g=o[w],c[w]=g&&g.bind?g.bind(o):g;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var No=200;function Ks(o,c){o.addEventListener("dblclick",c);var g=0,w;function C(R){if(R.detail!==1){w=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var Z=zi(R);if(!(Z.some(function(ue){return ue instanceof HTMLLabelElement&&ue.attributes.for})&&!Z.some(function(ue){return ue instanceof HTMLInputElement||ue instanceof HTMLSelectElement}))){var ne=Date.now();ne-g<=No?(w++,w===2&&c(ac(R))):w=1,g=ne}}}return o.addEventListener("click",C),{dblclick:c,simDblclick:C}}function Qr(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var Ro=xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qs=xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ys=Qs==="webkitTransition"||Qs==="OTransition"?Qs+"End":"transitionend";function pr(o){return typeof o=="string"?document.getElementById(o):o}function Xs(o,c){var g=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(o,null);g=w?w[c]:null}return g==="auto"?null:g}function ot(o,c,g){var w=document.createElement(o);return w.className=c||"",g&&g.appendChild(w),w}function $t(o){var c=o.parentNode;c&&c.removeChild(o)}function Lo(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function vs(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function wi(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function Js(o,c){if(o.classList!==void 0)return o.classList.contains(c);var g=Yr(o);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function it(o,c){if(o.classList!==void 0)for(var g=D(c),w=0,C=g.length;w<C;w++)o.classList.add(g[w]);else if(!Js(o,c)){var R=Yr(o);su(o,(R?R+" ":"")+c)}}function Ht(o,c){o.classList!==void 0?o.classList.remove(c):su(o,A((" "+Yr(o)+" ").replace(" "+c+" "," ")))}function su(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function Yr(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Yt(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&jo(o,c)}function jo(o,c){var g=!1,w="DXImageTransform.Microsoft.Alpha";try{g=o.filters.item(w)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):o.style.filter+=" progid:"+w+"(opacity="+c+")"}function xi(o){for(var c=document.documentElement.style,g=0;g<o.length;g++)if(o[g]in c)return o[g];return!1}function gr(o,c,g){var w=c||new J(0,0);o.style[Ro]=(We.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(g?" scale("+g+")":"")}function at(o,c){o._leaflet_pos=c,We.any3d?gr(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function yr(o){return o._leaflet_pos||new J(0,0)}var _t,Xr,Fa;if("onselectstart"in document)_t=function(){Ye(window,"selectstart",Wt)},Xr=function(){Ft(window,"selectstart",Wt)};else{var Ui=xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_t=function(){if(Ui){var o=document.documentElement.style;Fa=o[Ui],o[Ui]="none"}},Xr=function(){Ui&&(document.documentElement.style[Ui]=Fa,Fa=void 0)}}function Ua(){Ye(window,"dragstart",Wt)}function za(){Ft(window,"dragstart",Wt)}var Do,Mo;function Jr(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(pn(),Do=o,Mo=o.style.outlineStyle,o.style.outlineStyle="none",Ye(window,"keydown",pn))}function pn(){Do&&(Do.style.outlineStyle=Mo,Do=void 0,Mo=void 0,Ft(window,"keydown",pn))}function ei(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Dr(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var eo={__proto__:null,TRANSFORM:Ro,TRANSITION:Qs,TRANSITION_END:Ys,get:pr,getStyle:Xs,create:ot,remove:$t,empty:Lo,toFront:vs,toBack:wi,hasClass:Js,addClass:it,removeClass:Ht,setClass:su,getClass:Yr,setOpacity:Yt,testProp:xi,setTransform:gr,setPosition:at,getPosition:yr,get disableTextSelection(){return _t},get enableTextSelection(){return Xr},disableImageDrag:Ua,enableImageDrag:za,preventOutline:Jr,restoreOutline:pn,getSizedParentNode:ei,getScale:Dr};function Ye(o,c,g,w){if(c&&typeof c=="object")for(var C in c)au(o,C,c[C],g);else{c=D(c);for(var R=0,Z=c.length;R<Z;R++)au(o,c[R],g,w)}return this}var xn="_leaflet_events";function Ft(o,c,g,w){if(arguments.length===1)ou(o),delete o[xn];else if(c&&typeof c=="object")for(var C in c)Ba(o,C,c[C],g);else if(c=D(c),arguments.length===2)ou(o,function(ne){return se(c,ne)!==-1});else for(var R=0,Z=c.length;R<Z;R++)Ba(o,c[R],g,w);return this}function ou(o,c){for(var g in o[xn]){var w=g.split(/\d/)[0];(!c||c(w))&&Ba(o,w,null,null,g)}}var Yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function au(o,c,g,w){var C=c+f(g)+(w?"_"+f(w):"");if(o[xn]&&o[xn][C])return this;var R=function(ne){return g.call(w||o,ne||window.event)},Z=R;!We.touchNative&&We.pointer&&c.indexOf("touch")===0?R=sc(o,c,R):We.touch&&c==="dblclick"?R=Ks(o,R):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(Yn[c]||c,R,We.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(R=function(ne){ne=ne||window.event,Oo(o,ne)&&Z(ne)},o.addEventListener(Yn[c],R,!1)):o.addEventListener(c,Z,!1):o.attachEvent("on"+c,R),o[xn]=o[xn]||{},o[xn][C]=R}function Ba(o,c,g,w,C){C=C||c+f(g)+(w?"_"+f(w):"");var R=o[xn]&&o[xn][C];if(!R)return this;!We.touchNative&&We.pointer&&c.indexOf("touch")===0?iu(o,c,R):We.touch&&c==="dblclick"?Qr(o,R):"removeEventListener"in o?o.removeEventListener(Yn[c]||c,R,!1):o.detachEvent("on"+c,R),o[xn][C]=null}function sr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function ws(o){return au(o,"wheel",sr),this}function to(o){return Ye(o,"mousedown touchstart dblclick contextmenu",sr),o._leaflet_disable_click=!0,this}function Wt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Hn(o){return Wt(o),sr(o),this}function zi(o){if(o.composedPath)return o.composedPath();for(var c=[],g=o.target;g;)c.push(g),g=g.parentNode;return c}function xs(o,c){if(!c)return new J(o.clientX,o.clientY);var g=Dr(c),w=g.boundingClientRect;return new J((o.clientX-w.left)/g.x-c.clientLeft,(o.clientY-w.top)/g.y-c.clientTop)}var Xt=We.linux&&We.chrome?window.devicePixelRatio:We.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function lc(o){return We.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Xt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Oo(o,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==o;)g=g.parentNode}catch{return!1}return g!==o}var Vo={__proto__:null,on:Ye,off:Ft,stopPropagation:sr,disableScrollPropagation:ws,disableClickPropagation:to,preventDefault:Wt,stop:Hn,getPropagationPath:zi,getMousePosition:xs,getWheelDelta:lc,isExternalTarget:Oo,addListener:Ye,removeListener:Ft},Fo=Ee.extend({run:function(o,c,g,w){this.stop(),this._el=o,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=yr(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var g=this._startPos.add(this._offset.multiplyBy(o));c&&g._round(),at(this._el,g),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),vt=Ee.extend({options:{crs:Wr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=U(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(De(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qs&&We.any3d&&!We.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ye(this._proxy,Ys,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(De(o),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var w=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,g.zoom):this._tryAnimatedPan(o,g.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,g){var w=this.getZoomScale(c),C=this.getSize().divideBy(2),R=o instanceof J?o:this.latLngToContainerPoint(o),Z=R.subtract(C).multiplyBy(1-1/w),ne=this.containerPointToLatLng(C.add(Z));return this.setView(ne,c,{zoom:g})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():qe(o);var g=he(c.paddingTopLeft||c.padding||[0,0]),w=he(c.paddingBottomRight||c.padding||[0,0]),C=this.getBoundsZoom(o,!1,g.add(w));if(C=typeof c.maxZoom=="number"?Math.min(c.maxZoom,C):C,C===1/0)return{center:o.getCenter(),zoom:C};var R=w.subtract(g).divideBy(2),Z=this.project(o.getSouthWest(),C),ne=this.project(o.getNorthEast(),C),ue=this.unproject(Z.add(ne).divideBy(2).add(R),C);return{center:ue,zoom:C}},fitBounds:function(o,c){if(o=qe(o),!o.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(o,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=he(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){it(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,g){if(g=g||{},g.animate===!1||!We.any3d)return this.setView(o,c,g);this._stop();var w=this.project(this.getCenter()),C=this.project(o),R=this.getSize(),Z=this._zoom;o=De(o),c=c===void 0?Z:c;var ne=Math.max(R.x,R.y),ue=ne*this.getZoomScale(Z,c),we=C.distanceTo(w)||1,je=1.42,et=je*je;function yt(zt){var ll=zt?-1:1,Dg=zt?ue:ne,Mg=ue*ue-ne*ne+ll*et*et*we*we,qo=2*Dg*et*we,Zo=Mg/qo,Go=Math.sqrt(Zo*Zo+1)-Zo,bc=Go<1e-9?-18:Math.log(Go);return bc}function Wn(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function Rn(zt){return(Math.exp(zt)+Math.exp(-zt))/2}function Vr(zt){return Wn(zt)/Rn(zt)}var wr=yt(0);function ol(zt){return ne*(Rn(wr)/Rn(wr+je*zt))}function Gd(zt){return ne*(Rn(wr)*Vr(wr+je*zt)-Wn(wr))/et}function oo(zt){return 1-Math.pow(1-zt,1.5)}var Of=Date.now(),Wo=(yt(1)-wr)/je,qi=g.duration?1e3*g.duration:1e3*Wo*.8;function al(){var zt=(Date.now()-Of)/qi,ll=oo(zt)*Wo;zt<=1?(this._flyToFrame=z(al,this),this._move(this.unproject(w.add(C.subtract(w).multiplyBy(Gd(ll)/we)),Z),this.getScaleZoom(ne/ol(ll),Z),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),al.call(this),this},flyToBounds:function(o,c){var g=this._getBoundsCenterZoom(o,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(o){return o=qe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var g=this.getCenter(),w=this._limitCenter(g,this._zoom,qe(o));return g.equals(w)||this.panTo(w,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var g=he(c.paddingTopLeft||c.padding||[0,0]),w=he(c.paddingBottomRight||c.padding||[0,0]),C=this.project(this.getCenter()),R=this.project(o),Z=this.getPixelBounds(),ne=ge([Z.min.add(g),Z.max.subtract(w)]),ue=ne.getSize();if(!ne.contains(R)){this._enforcingBounds=!0;var we=R.subtract(ne.getCenter()),je=ne.extend(R).getSize().subtract(ue);C.x+=we.x<0?-je.x:je.x,C.y+=we.y<0?-je.y:je.y,this.panTo(this.unproject(C),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),w=c.divideBy(2).round(),C=g.divideBy(2).round(),R=w.subtract(C);return!R.x&&!R.y?this:(o.animate&&o.pan?this.panBy(R):(o.pan&&this._rawPanBy(R),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,o):navigator.geolocation.getCurrentPosition(c,g,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,g=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,g=o.coords.longitude,w=new Oe(c,g),C=w.toBounds(o.coords.accuracy*2),R=this._locateOptions;if(R.setView){var Z=this.getBoundsZoom(C);this.setView(w,R.maxZoom?Math.min(Z,R.maxZoom):Z)}var ne={latlng:w,bounds:C,timestamp:o.timestamp};for(var ue in o.coords)typeof o.coords[ue]=="number"&&(ne[ue]=o.coords[ue]);this.fire("locationfound",ne)}},addHandler:function(o,c){if(!c)return this;var g=this[o]=new c(this);return this._handlers.push(g),this.options[o]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)$t(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var g="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),w=ot("div",g,c||this._mapPane);return o&&(this._panes[o]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),g=this.unproject(o.getTopRight());return new Le(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,g){o=qe(o),g=he(g||[0,0]);var w=this.getZoom()||0,C=this.getMinZoom(),R=this.getMaxZoom(),Z=o.getNorthWest(),ne=o.getSouthEast(),ue=this.getSize().subtract(g),we=ge(this.project(ne,w),this.project(Z,w)).getSize(),je=We.any3d?this.options.zoomSnap:1,et=ue.x/we.x,yt=ue.y/we.y,Wn=c?Math.max(et,yt):Math.min(et,yt);return w=this.getScaleZoom(Wn,w),je&&(w=Math.round(w/(je/100))*(je/100),w=c?Math.ceil(w/je)*je:Math.floor(w/je)*je),Math.max(C,Math.min(R,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var g=this._getTopLeftPoint(o,c);return new Y(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(o)/g.scale(c)},getScaleZoom:function(o,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var w=g.zoom(o*g.scale(c));return isNaN(w)?1/0:w},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(De(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(he(o),c)},layerPointToLatLng:function(o){var c=he(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(De(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(De(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(qe(o))},distance:function(o,c){return this.options.crs.distance(De(o),De(c))},containerPointToLayerPoint:function(o){return he(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return he(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(he(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(De(o)))},mouseEventToContainerPoint:function(o){return xs(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=pr(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ye(c,"scroll",this._onScroll,this),this._containerId=f(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&We.any3d,it(o,"leaflet-container"+(We.touch?" leaflet-touch":"")+(We.retina?" leaflet-retina":"")+(We.ielt9?" leaflet-oldie":"")+(We.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Xs(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(it(o.markerPane,"leaflet-zoom-hide"),it(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,g){at(this._mapPane,new J(0,0));var w=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var C=this._zoom!==c;this._moveStart(C,g)._move(o,c)._moveEnd(C),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,g,w){c===void 0&&(c=this._zoom);var C=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),w?g&&g.pinch&&this.fire("zoom",g):((C||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){at(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[f(this._container)]=this;var c=o?Ft:Ye;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),We.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var g=[],w,C=c==="mouseout"||c==="mouseover",R=o.target||o.srcElement,Z=!1;R;){if(w=this._targets[f(R)],w&&(c==="click"||c==="preclick")&&this._draggableMoved(w)){Z=!0;break}if(w&&w.listens(c,!0)&&(C&&!Oo(R,o)||(g.push(w),C))||R===this._container)break;R=R.parentNode}return!g.length&&!Z&&!C&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var g=o.type;g==="mousedown"&&Jr(c),this._fireDOMEvent(o,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,g){if(o.type==="click"){var w=i({},o);w.type="preclick",this._fireDOMEvent(w,w.type,g)}var C=this._findEventTargets(o,c);if(g){for(var R=[],Z=0;Z<g.length;Z++)g[Z].listens(c,!0)&&R.push(g[Z]);C=R.concat(C)}if(C.length){c==="contextmenu"&&Wt(o);var ne=C[0],ue={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var we=ne.getLatLng&&(!ne._radius||ne._radius<=10);ue.containerPoint=we?this.latLngToContainerPoint(ne.getLatLng()):this.mouseEventToContainerPoint(o),ue.layerPoint=this.containerPointToLayerPoint(ue.containerPoint),ue.latlng=we?ne.getLatLng():this.layerPointToLatLng(ue.layerPoint)}for(Z=0;Z<C.length;Z++)if(C[Z].fire(c,ue,!0),ue.originalEvent._stopped||C[Z].options.bubblingMouseEvents===!1&&se(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return yr(this._mapPane)||new J(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var g=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var g=this.getSize()._divideBy(2);return this.project(o,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,g){var w=this._getNewPixelOrigin(g,c);return this.project(o,c)._subtract(w)},_latLngBoundsToNewLayerBounds:function(o,c,g){var w=this._getNewPixelOrigin(g,c);return ge([this.project(o.getSouthWest(),c)._subtract(w),this.project(o.getNorthWest(),c)._subtract(w),this.project(o.getSouthEast(),c)._subtract(w),this.project(o.getNorthEast(),c)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,g){if(!g)return o;var w=this.project(o,c),C=this.getSize().divideBy(2),R=new Y(w.subtract(C),w.add(C)),Z=this._getBoundsOffset(R,g,c);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?o:this.unproject(w.add(Z),c)},_limitOffset:function(o,c){if(!c)return o;var g=this.getPixelBounds(),w=new Y(g.min.add(o),g.max.add(o));return o.add(this._getBoundsOffset(w,c))},_getBoundsOffset:function(o,c,g){var w=ge(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),C=w.min.subtract(o.min),R=w.max.subtract(o.max),Z=this._rebound(C.x,-R.x),ne=this._rebound(C.y,-R.y);return new J(Z,ne)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),g=this.getMaxZoom(),w=We.any3d?this.options.zoomSnap:1;return w&&(o=Math.round(o/w)*w),Math.max(c,Math.min(g,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var g=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var o=this._proxy=ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var g=Ro,w=this._proxy.style[g];gr(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),w===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();gr(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(c),C=this._getCenterOffset(o)._divideBy(1-1/w);return g.animate!==!0&&!this.getSize().contains(C)?!1:(z(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,g,w){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,it(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mr(o,c){return new vt(o,c)}var Xn=le.extend({options:{position:"topright"},initialize:function(o){U(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),g=this.getPosition(),w=o._controlCorners[g];return it(c,"leaflet-control"),g.indexOf("bottom")!==-1?w.insertBefore(c,w.firstChild):w.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),An=function(o){return new Xn(o)};vt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",g=this._controlContainer=ot("div",c+"control-container",this._container);function w(C,R){var Z=c+C+" "+c+R;o[C+R]=ot("div",Z,g)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)$t(this._controlCorners[o]);$t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $a=Xn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,g,w){return g<w?-1:w<g?1:0}},initialize:function(o,c,g){U(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in o)this._addLayer(o[w],w);for(w in c)this._addLayer(c[w],w,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Xn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(f(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){it(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(it(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=ot("div",o),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),to(c),ws(c);var w=this._section=ot("section",o+"-list");g&&(this._map.on("click",this.collapse,this),Ye(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=ot("a",o+"-toggle",c);C.href="#",C.title="Layers",C.setAttribute("role","button"),Ye(C,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Wt(R),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=ot("div",o+"-base",w),this._separator=ot("div",o+"-separator",w),this._overlaysList=ot("div",o+"-overlays",w),c.appendChild(w)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&f(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,g){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(w,C){return this.options.sortFunction(w.layer,C.layer,w.name,C.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Lo(this._baseLayersList),Lo(this._overlaysList),this._layerControlInputs=[];var o,c,g,w,C=0;for(g=0;g<this._layers.length;g++)w=this._layers[g],this._addItem(w),c=c||w.overlay,o=o||!w.overlay,C+=w.overlay?0:1;return this.options.hideSingleBase&&(o=o&&C>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(f(o.target)),g=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(o,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=g,w.firstChild},_addItem:function(o){var c=document.createElement("label"),g=this._map.hasLayer(o.layer),w;o.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=g):w=this._createRadioElement("leaflet-base-layers_"+f(this),g),this._layerControlInputs.push(w),w.layerId=f(o.layer),Ye(w,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+o.name;var R=document.createElement("span");c.appendChild(R),R.appendChild(w),R.appendChild(C);var Z=o.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,g,w=[],C=[];this._handlingClick=!0;for(var R=o.length-1;R>=0;R--)c=o[R],g=this._getLayer(c.layerId).layer,c.checked?w.push(g):c.checked||C.push(g);for(R=0;R<C.length;R++)this._map.hasLayer(C[R])&&this._map.removeLayer(C[R]);for(R=0;R<w.length;R++)this._map.hasLayer(w[R])||this._map.addLayer(w[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,g,w=this._map.getZoom(),C=o.length-1;C>=0;C--)c=o[C],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&w<g.options.minZoom||g.options.maxZoom!==void 0&&w>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Ye(o,"click",Wt),this.expand();var c=this;setTimeout(function(){Ft(o,"click",Wt),c._preventClick=!1})}}),Ha=function(o,c,g){return new $a(o,c,g)},ti=Xn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",g=ot("div",c+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,g,w,C){var R=ot("a",g,w);return R.innerHTML=o,R.href="#",R.title=c,R.setAttribute("role","button"),R.setAttribute("aria-label",c),to(R),Ye(R,"click",Hn),Ye(R,"click",C,this),Ye(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Ht(this._zoomInButton,c),Ht(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(it(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(it(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ti,this.addControl(this.zoomControl))});var lu=function(o){return new ti(o)},kn=Xn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",g=ot("div",c),w=this.options;return this._addScales(w,c+"-line",g),o.on(w.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),g},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,g){o.metric&&(this._mScale=ot("div",c,g)),o.imperial&&(this._iScale=ot("div",c,g))},_update:function(){var o=this._map,c=o.getSize().y/2,g=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/o)},_updateImperial:function(o){var c=o*3.2808399,g,w,C;c>5280?(g=c/5280,w=this._getRoundNum(g),this._updateScale(this._iScale,w+" mi",w/g)):(C=this._getRoundNum(c),this._updateScale(this._iScale,C+" ft",C/c))},_updateScale:function(o,c,g){o.style.width=Math.round(this.options.maxWidth*g)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),g=o/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),bi=function(o){return new kn(o)},Wa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ni=Xn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(We.inlineSvg?Wa+" ":"")+"Leaflet</a>"},initialize:function(o){U(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=ot("div","leaflet-control-attribution"),to(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),o.length&&g.push(o.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new ni().addTo(this)});var Md=function(o){return new ni(o)};Xn.Layers=$a,Xn.Zoom=ti,Xn.Scale=kn,Xn.Attribution=ni,An.layers=Ha,An.zoom=lu,An.scale=bi,An.attribution=Md;var or=le.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});or.addTo=function(o,c){return o.addHandler(c,this),this};var bs={Events:ve},Ts=We.touch?"touchstart mousedown":"mousedown",_r=Ee.extend({options:{clickTolerance:3},initialize:function(o,c,g,w){U(this,w),this._element=o,this._dragStartTarget=c||o,this._preventOutline=g},enable:function(){this._enabled||(Ye(this._dragStartTarget,Ts,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_r._dragging===this&&this.finishDrag(!0),Ft(this._dragStartTarget,Ts,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Js(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){_r._dragging===this&&this.finishDrag();return}if(!(_r._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(_r._dragging=this,this._preventOutline&&Jr(this._element),Ua(),_t(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,g=ei(this._element);this._startPoint=new J(c.clientX,c.clientY),this._startPos=yr(this._element),this._parentScale=Dr(g);var w=o.type==="mousedown";Ye(document,w?"mousemove":"touchmove",this._onMove,this),Ye(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,g=new J(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,Wt(o),this._moved||(this.fire("dragstart"),this._moved=!0,it(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),it(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),at(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Ht(document.body,"leaflet-dragging"),this._lastTarget&&(Ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ft(document,"mousemove touchmove",this._onMove,this),Ft(document,"mouseup touchend touchcancel",this._onUp,this),za(),Xr();var c=this._moved&&this._moving;this._moving=!1,_r._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Uo(o,c,g){var w,C=[1,4,2,8],R,Z,ne,ue,we,je,et,yt;for(R=0,je=o.length;R<je;R++)o[R]._code=Bi(o[R],c);for(ne=0;ne<4;ne++){for(et=C[ne],w=[],R=0,je=o.length,Z=je-1;R<je;Z=R++)ue=o[R],we=o[Z],ue._code&et?we._code&et||(yt=Nn(we,ue,et,c,g),yt._code=Bi(yt,c),w.push(yt)):(we._code&et&&(yt=Nn(we,ue,et,c,g),yt._code=Bi(yt,c),w.push(yt)),w.push(ue));o=w}return o}function qa(o,c){var g,w,C,R,Z,ne,ue,we,je;if(!o||o.length===0)throw new Error("latlngs not passed");p(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var et=De([0,0]),yt=qe(o),Wn=yt.getNorthWest().distanceTo(yt.getSouthWest())*yt.getNorthEast().distanceTo(yt.getNorthWest());Wn<1700&&(et=Za(o));var Rn=o.length,Vr=[];for(g=0;g<Rn;g++){var wr=De(o[g]);Vr.push(c.project(De([wr.lat-et.lat,wr.lng-et.lng])))}for(ne=ue=we=0,g=0,w=Rn-1;g<Rn;w=g++)C=Vr[g],R=Vr[w],Z=C.y*R.x-R.y*C.x,ue+=(C.x+R.x)*Z,we+=(C.y+R.y)*Z,ne+=Z*3;ne===0?je=Vr[0]:je=[ue/ne,we/ne];var ol=c.unproject(he(je));return De([ol.lat+et.lat,ol.lng+et.lng])}function Za(o){for(var c=0,g=0,w=0,C=0;C<o.length;C++){var R=De(o[C]);c+=R.lat,g+=R.lng,w++}return De([c/w,g/w])}var Ga={__proto__:null,clipPolygon:Uo,polygonCenter:qa,centroid:Za};function zo(o,c){if(!c||!o.length)return o.slice();var g=c*c;return o=cc(o,g),o=uc(o,g),o}function uu(o,c,g){return Math.sqrt(vr(o,c,g,!0))}function Es(o,c,g){return vr(o,c,g)}function uc(o,c){var g=o.length,w=typeof Uint8Array<"u"?Uint8Array:Array,C=new w(g);C[0]=C[g-1]=1,Ka(o,C,c,0,g-1);var R,Z=[];for(R=0;R<g;R++)C[R]&&Z.push(o[R]);return Z}function Ka(o,c,g,w,C){var R=0,Z,ne,ue;for(ne=w+1;ne<=C-1;ne++)ue=vr(o[ne],o[w],o[C],!0),ue>R&&(Z=ne,R=ue);R>g&&(c[Z]=1,Ka(o,c,g,w,Z),Ka(o,c,g,Z,C))}function cc(o,c){for(var g=[o[0]],w=1,C=0,R=o.length;w<R;w++)dc(o[w],o[C])>c&&(g.push(o[w]),C=w);return C<R-1&&g.push(o[R-1]),g}var Qa;function Bo(o,c,g,w,C){var R=w?Qa:Bi(o,g),Z=Bi(c,g),ne,ue,we;for(Qa=Z;;){if(!(R|Z))return[o,c];if(R&Z)return!1;ne=R||Z,ue=Nn(o,c,ne,g,C),we=Bi(ue,g),ne===R?(o=ue,R=we):(c=ue,Z=we)}}function Nn(o,c,g,w,C){var R=c.x-o.x,Z=c.y-o.y,ne=w.min,ue=w.max,we,je;return g&8?(we=o.x+R*(ue.y-o.y)/Z,je=ue.y):g&4?(we=o.x+R*(ne.y-o.y)/Z,je=ne.y):g&2?(we=ue.x,je=o.y+Z*(ue.x-o.x)/R):g&1&&(we=ne.x,je=o.y+Z*(ne.x-o.x)/R),new J(we,je,C)}function Bi(o,c){var g=0;return o.x<c.min.x?g|=1:o.x>c.max.x&&(g|=2),o.y<c.min.y?g|=4:o.y>c.max.y&&(g|=8),g}function dc(o,c){var g=c.x-o.x,w=c.y-o.y;return g*g+w*w}function vr(o,c,g,w){var C=c.x,R=c.y,Z=g.x-C,ne=g.y-R,ue=Z*Z+ne*ne,we;return ue>0&&(we=((o.x-C)*Z+(o.y-R)*ne)/ue,we>1?(C=g.x,R=g.y):we>0&&(C+=Z*we,R+=ne*we)),Z=o.x-C,ne=o.y-R,w?Z*Z+ne*ne:new J(C,R)}function p(o){return!$(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function b(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),p(o)}function I(o,c){var g,w,C,R,Z,ne,ue,we;if(!o||o.length===0)throw new Error("latlngs not passed");p(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var je=De([0,0]),et=qe(o),yt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());yt<1700&&(je=Za(o));var Wn=o.length,Rn=[];for(g=0;g<Wn;g++){var Vr=De(o[g]);Rn.push(c.project(De([Vr.lat-je.lat,Vr.lng-je.lng])))}for(g=0,w=0;g<Wn-1;g++)w+=Rn[g].distanceTo(Rn[g+1])/2;if(w===0)we=Rn[0];else for(g=0,R=0;g<Wn-1;g++)if(Z=Rn[g],ne=Rn[g+1],C=Z.distanceTo(ne),R+=C,R>w){ue=(R-w)/C,we=[ne.x-ue*(ne.x-Z.x),ne.y-ue*(ne.y-Z.y)];break}var wr=c.unproject(he(we));return De([wr.lat+je.lat,wr.lng+je.lng])}var O={__proto__:null,simplify:zo,pointToSegmentDistance:uu,closestPointOnSegment:Es,clipSegment:Bo,_getEdgeIntersection:Nn,_getBitCode:Bi,_sqClosestPointOnSegment:vr,isFlat:p,_flat:b,polylineCenter:I},te={project:function(o){return new J(o.lng,o.lat)},unproject:function(o){return new Oe(o.y,o.x)},bounds:new Y([-180,-90],[180,90])},de={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,g=this.R,w=o.lat*c,C=this.R_MINOR/g,R=Math.sqrt(1-C*C),Z=R*Math.sin(w),ne=Math.tan(Math.PI/4-w/2)/Math.pow((1-Z)/(1+Z),R/2);return w=-g*Math.log(Math.max(ne,1e-10)),new J(o.lng*c*g,w)},unproject:function(o){for(var c=180/Math.PI,g=this.R,w=this.R_MINOR/g,C=Math.sqrt(1-w*w),R=Math.exp(-o.y/g),Z=Math.PI/2-2*Math.atan(R),ne=0,ue=.1,we;ne<15&&Math.abs(ue)>1e-7;ne++)we=C*Math.sin(Z),we=Math.pow((1-we)/(1+we),C/2),ue=Math.PI/2-2*Math.atan(R*we)-Z,Z+=ue;return new Oe(Z*c,o.x*c/g)}},ke={__proto__:null,LonLat:te,Mercator:de,SphericalMercator:Qt},Vt=i({},gt,{code:"EPSG:3395",projection:de,transformation:function(){var o=.5/(Math.PI*de.R);return Lr(o,.5,-o,.5)}()}),gn=i({},gt,{code:"EPSG:4326",projection:te,transformation:Lr(1/180,1,-1/180,.5)}),St=i({},dt,{projection:te,transformation:Lr(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var g=c.lng-o.lng,w=c.lat-o.lat;return Math.sqrt(g*g+w*w)},infinite:!0});dt.Earth=gt,dt.EPSG3395=Vt,dt.EPSG3857=Wr,dt.EPSG900913=Di,dt.EPSG4326=gn,dt.Simple=St;var Ut=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[f(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[f(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=f(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=f(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return f(o)in this._layers},eachLayer:function(o,c){for(var g in this._layers)o.call(c,this._layers[g]);return this},_addLayers:function(o){o=o?$(o)?o:[o]:[];for(var c=0,g=o.length;c<g;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[f(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=f(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,g=this._getZoomSpan();for(var w in this._zoomBoundLayers){var C=this._zoomBoundLayers[w].options;o=C.minZoom===void 0?o:Math.min(o,C.minZoom),c=C.maxZoom===void 0?c:Math.max(c,C.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Gt=Ut.extend({initialize:function(o,c){U(this,c),this._layers={};var g,w;if(o)for(g=0,w=o.length;g<w;g++)this.addLayer(o[g])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),g,w;for(g in this._layers)w=this._layers[g],w[o]&&w[o].apply(w,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var g in this._layers)o.call(c,this._layers[g]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return f(o)}}),ri=function(o,c){return new Gt(o,c)},cn=Gt.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Gt.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Gt.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Le;for(var c in this._layers){var g=this._layers[c];o.extend(g.getBounds?g.getBounds():g.getLatLng())}return o}}),$o=function(o,c){return new cn(o,c)},Ti=le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){U(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var g=this._getIconUrl(o);if(!g){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(w,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(o,c){var g=this.options,w=g[c+"Size"];typeof w=="number"&&(w=[w,w]);var C=he(w),R=he(c==="shadow"&&g.shadowAnchor||g.iconAnchor||C&&C.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(g.className||""),R&&(o.style.marginLeft=-R.x+"px",o.style.marginTop=-R.y+"px"),C&&(o.style.width=C.x+"px",o.style.height=C.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return We.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Cf(o){return new Ti(o)}var Ya=Ti.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Ya.imagePath!="string"&&(Ya.imagePath=this._detectIconPath()),(this.options.imagePath||Ya.imagePath)+Ti.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(g,w,C){var R=w.exec(g);return R&&R[C]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=ot("div","leaflet-default-icon-path",document.body),c=Xs(o,"background-image")||Xs(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Od=or.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new _r(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),it(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,g=c._map,w=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,R=yr(c._icon),Z=g.getPixelBounds(),ne=g.getPixelOrigin(),ue=ge(Z.min._subtract(ne).add(C),Z.max._subtract(ne).subtract(C));if(!ue.contains(R)){var we=he((Math.max(ue.max.x,R.x)-ue.max.x)/(Z.max.x-ue.max.x)-(Math.min(ue.min.x,R.x)-ue.min.x)/(Z.min.x-ue.min.x),(Math.max(ue.max.y,R.y)-ue.max.y)/(Z.max.y-ue.max.y)-(Math.min(ue.min.y,R.y)-ue.min.y)/(Z.min.y-ue.min.y)).multiplyBy(w);g.panBy(we,{animate:!1}),this._draggable._newPos._add(we),this._draggable._startPos._add(we),at(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=z(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,g=c._shadow,w=yr(c._icon),C=c._map.layerPointToLatLng(w);g&&at(g,w),c._latlng=C,o.latlng=C,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ss=Ut.extend({options:{icon:new Ya,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){U(this,c),this._latlng=De(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=De(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=o.icon.createIcon(this._icon),w=!1;g!==this._icon&&(this._icon&&this._removeIcon(),w=!0,o.title&&(g.title=o.title),g.tagName==="IMG"&&(g.alt=o.alt||"")),it(g,c),o.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ye(g,"focus",this._panOnFocus,this);var C=o.icon.createShadow(this._shadow),R=!1;C!==this._shadow&&(this._removeShadow(),R=!0),C&&(it(C,c),C.alt=""),this._shadow=C,o.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&R&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(this._icon,"focus",this._panOnFocus,this),$t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$t(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&at(this._icon,o),this._shadow&&at(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(it(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Od)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Od(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Yt(this._icon,o),this._shadow&&Yt(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,g=c.iconSize?he(c.iconSize):he(0,0),w=c.iconAnchor?he(c.iconAnchor):he(0,0);o.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:g.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ng(o,c){return new Ss(o,c)}var no=Ut.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return U(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hc=no.extend({options:{fill:!0,radius:10},initialize:function(o,c){U(this,c),this._latlng=De(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=De(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return no.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,g=this._clickTolerance(),w=[o+g,c+g];this._pxBounds=new Y(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function If(o,c){return new hc(o,c)}var fc=hc.extend({initialize:function(o,c,g){if(typeof c=="number"&&(c=i({},g,{radius:c})),U(this,c),this._latlng=De(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Le(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:no.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,g=this._map,w=g.options.crs;if(w.distance===gt.distance){var C=Math.PI/180,R=this._mRadius/gt.R/C,Z=g.project([c+R,o]),ne=g.project([c-R,o]),ue=Z.add(ne).divideBy(2),we=g.unproject(ue).lat,je=Math.acos((Math.cos(R*C)-Math.sin(c*C)*Math.sin(we*C))/(Math.cos(c*C)*Math.cos(we*C)))/C;(isNaN(je)||je===0)&&(je=R/Math.cos(Math.PI/180*c)),this._point=ue.subtract(g.getPixelOrigin()),this._radius=isNaN(je)?0:ue.x-g.project([we,o-je]).x,this._radiusY=ue.y-Z.y}else{var et=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(et).x}this._updateBounds()}});function cu(o,c,g){return new fc(o,c,g)}var Or=no.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){U(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,g=null,w=vr,C,R,Z=0,ne=this._parts.length;Z<ne;Z++)for(var ue=this._parts[Z],we=1,je=ue.length;we<je;we++){C=ue[we-1],R=ue[we];var et=w(o,C,R,!0);et<c&&(c=et,g=w(o,C,R))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return I(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=De(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Le,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return p(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],g=p(o),w=0,C=o.length;w<C;w++)g?(c[w]=De(o[w]),this._bounds.extend(c[w])):c[w]=this._convertLatLngs(o[w]);return c},_project:function(){var o=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new J(o,o);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,g){var w=o[0]instanceof Oe,C=o.length,R,Z;if(w){for(Z=[],R=0;R<C;R++)Z[R]=this._map.latLngToLayerPoint(o[R]),g.extend(Z[R]);c.push(Z)}else for(R=0;R<C;R++)this._projectLatlngs(o[R],c,g)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,w,C,R,Z,ne,ue;for(g=0,C=0,R=this._rings.length;g<R;g++)for(ue=this._rings[g],w=0,Z=ue.length;w<Z-1;w++)ne=Bo(ue[w],ue[w+1],o,w,!0),ne&&(c[C]=c[C]||[],c[C].push(ne[0]),(ne[1]!==ue[w+1]||w===Z-2)&&(c[C].push(ne[1]),C++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,g=0,w=o.length;g<w;g++)o[g]=zo(o[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var g,w,C,R,Z,ne,ue=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(g=0,R=this._parts.length;g<R;g++)for(ne=this._parts[g],w=0,Z=ne.length,C=Z-1;w<Z;C=w++)if(!(!c&&w===0)&&uu(o,ne[C],ne[w])<=ue)return!0;return!1}});function Rg(o,c){return new Or(o,c)}Or._flat=b;var Cs=Or.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Or.prototype._convertLatLngs.call(this,o),g=c.length;return g>=2&&c[0]instanceof Oe&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(o){Or.prototype._setLatLngs.call(this,o),p(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return p(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,g=new J(c,c);if(o=new Y(o.min.subtract(g),o.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,C=this._rings.length,R;w<C;w++)R=Uo(this._rings[w],o,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,g,w,C,R,Z,ne,ue,we;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(R=0,ue=this._parts.length;R<ue;R++)for(g=this._parts[R],Z=0,we=g.length,ne=we-1;Z<we;ne=Z++)w=g[Z],C=g[ne],w.y>o.y!=C.y>o.y&&o.x<(C.x-w.x)*(o.y-w.y)/(C.y-w.y)+w.x&&(c=!c);return c||Or.prototype._containsPoint.call(this,o,!0)}});function Lg(o,c){return new Cs(o,c)}var $i=cn.extend({initialize:function(o,c){U(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=$(o)?o:o.features,g,w,C;if(c){for(g=0,w=c.length;g<w;g++)C=c[g],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var R=this.options;if(R.filter&&!R.filter(o))return this;var Z=Xa(o,R);return Z?(Z.feature=_c(o),Z.defaultOptions=Z.options,this.resetStyle(Z),R.onEachFeature&&R.onEachFeature(o,Z),this.addLayer(Z)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function Xa(o,c){var g=o.type==="Feature"?o.geometry:o,w=g?g.coordinates:null,C=[],R=c&&c.pointToLayer,Z=c&&c.coordsToLatLng||pc,ne,ue,we,je;if(!w&&!g)return null;switch(g.type){case"Point":return ne=Z(w),mc(R,o,ne,c);case"MultiPoint":for(we=0,je=w.length;we<je;we++)ne=Z(w[we]),C.push(mc(R,o,ne,c));return new cn(C);case"LineString":case"MultiLineString":return ue=du(w,g.type==="LineString"?0:1,Z),new Or(ue,c);case"Polygon":case"MultiPolygon":return ue=du(w,g.type==="Polygon"?1:2,Z),new Cs(ue,c);case"GeometryCollection":for(we=0,je=g.geometries.length;we<je;we++){var et=Xa({geometry:g.geometries[we],type:"Feature",properties:o.properties},c);et&&C.push(et)}return new cn(C);case"FeatureCollection":for(we=0,je=g.features.length;we<je;we++){var yt=Xa(g.features[we],c);yt&&C.push(yt)}return new cn(C);default:throw new Error("Invalid GeoJSON object.")}}function mc(o,c,g,w){return o?o(c,g):new Ss(g,w&&w.markersInheritOptions&&w)}function pc(o){return new Oe(o[1],o[0],o[2])}function du(o,c,g){for(var w=[],C=0,R=o.length,Z;C<R;C++)Z=c?du(o[C],c-1,g):(g||pc)(o[C]),w.push(Z);return w}function gc(o,c){return o=De(o),o.alt!==void 0?[E(o.lng,c),E(o.lat,c),E(o.alt,c)]:[E(o.lng,c),E(o.lat,c)]}function yc(o,c,g,w){for(var C=[],R=0,Z=o.length;R<Z;R++)C.push(c?yc(o[R],p(o[R])?0:c-1,g,w):gc(o[R],w));return!c&&g&&C.length>0&&C.push(C[0].slice()),C}function Ja(o,c){return o.feature?i({},o.feature,{geometry:c}):_c(c)}function _c(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Vd={toGeoJSON:function(o){return Ja(this,{type:"Point",coordinates:gc(this.getLatLng(),o)})}};Ss.include(Vd),fc.include(Vd),hc.include(Vd),Or.include({toGeoJSON:function(o){var c=!p(this._latlngs),g=yc(this._latlngs,c?1:0,!1,o);return Ja(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),Cs.include({toGeoJSON:function(o){var c=!p(this._latlngs),g=c&&!p(this._latlngs[0]),w=yc(this._latlngs,g?2:c?1:0,!0,o);return c||(w=[w]),Ja(this,{type:(g?"Multi":"")+"Polygon",coordinates:w})}}),Gt.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(o).geometry.coordinates)}),Ja(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var g=c==="GeometryCollection",w=[];return this.eachLayer(function(C){if(C.toGeoJSON){var R=C.toGeoJSON(o);if(g)w.push(R.geometry);else{var Z=_c(R);Z.type==="FeatureCollection"?w.push.apply(w,Z.features):w.push(Z)}}}),g?Ja(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function Pf(o,c){return new $i(o,c)}var Ei=Pf,ro=Ut.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,g){this._url=o,this._bounds=qe(c),U(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(it(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&vs(this._image),this},bringToBack:function(){return this._map&&wi(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=qe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:ot("img");if(it(c,"leaflet-image-layer"),this._zoomAnimated&&it(c,"leaflet-zoom-animated"),this.options.className&&it(c,this.options.className),c.onselectstart=T,c.onmousemove=T,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;gr(this._image,g,c)},_reset:function(){var o=this._image,c=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();at(o,c.min),o.style.width=g.x+"px",o.style.height=g.y+"px"},_updateOpacity:function(){Yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Af=function(o,c,g){return new ro(o,c,g)},Fd=ro.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:ot("video");if(it(c,"leaflet-image-layer"),this._zoomAnimated&&it(c,"leaflet-zoom-animated"),this.options.className&&it(c,this.options.className),c.onselectstart=T,c.onmousemove=T,c.onloadeddata=u(this.fire,this,"load"),o){for(var g=c.getElementsByTagName("source"),w=[],C=0;C<g.length;C++)w.push(g[C].src);this._url=g.length>0?w:[c.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var Z=ot("source");Z.src=this._url[R],c.appendChild(Z)}}});function kf(o,c,g){return new Fd(o,c,g)}var Ud=ro.extend({_initImage:function(){var o=this._image=this._url;it(o,"leaflet-image-layer"),this._zoomAnimated&&it(o,"leaflet-zoom-animated"),this.options.className&&it(o,this.options.className),o.onselectstart=T,o.onmousemove=T}});function zd(o,c,g){return new Ud(o,c,g)}var Hi=Ut.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof Oe||$(o))?(this._latlng=De(o),U(this,c)):(U(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Yt(this._container,1),this.bringToFront(),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Yt(this._container,0),this._removeTimeout=setTimeout(u($t,void 0,this._container),200)):$t(this._container),this.options.interactive&&(Ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=De(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vs(this._container),this},bringToBack:function(){return this._map&&wi(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof cn){c=null;var g=this._source._layers;for(var w in g)if(g[w]._map){c=g[w];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=he(this.options.offset),g=this._getAnchor();this._zoomAnimated?at(this._container,o.add(g)):c=c.add(o).add(g);var w=this._containerBottom=-c.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=w+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(o,c,g,w){var C=c;return C instanceof o||(C=new o(w).setContent(c)),g&&C.setLatLng(g),C}}),Ut.include({_initOverlay:function(o,c,g,w){var C=g;return C instanceof o?(U(C,w),C._source=this):(C=c&&!w?c:new o(w,this),C.setContent(g)),C}});var vc=Hi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Hi.prototype.openOn.call(this,o)},onAdd:function(o){Hi.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof no||this._source.on("preclick",sr))},onRemove:function(o){Hi.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof no||this._source.off("preclick",sr))},getEvents:function(){var o=Hi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=ot("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=ot("div",o+"-content-wrapper",c);if(this._contentNode=ot("div",o+"-content",g),to(c),ws(this._contentNode),Ye(c,"contextmenu",sr),this._tipContainer=ot("div",o+"-tip-container",c),this._tip=ot("div",o+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=ot("a",o+"-close-button",c);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',Ye(w,"click",function(C){Wt(C),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var g=o.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var w=o.offsetHeight,C=this.options.maxHeight,R="leaflet-popup-scrolled";C&&w>C?(c.height=C+"px",it(o,R)):Ht(o,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),g=this._getAnchor();at(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(Xs(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,w=this._containerWidth,C=new J(this._containerLeft,-g-this._containerBottom);C._add(yr(this._container));var R=o.layerPointToContainerPoint(C),Z=he(this.options.autoPanPadding),ne=he(this.options.autoPanPaddingTopLeft||Z),ue=he(this.options.autoPanPaddingBottomRight||Z),we=o.getSize(),je=0,et=0;R.x+w+ue.x>we.x&&(je=R.x+w-we.x+ue.x),R.x-je-ne.x<0&&(je=R.x-ne.x),R.y+g+ue.y>we.y&&(et=R.y+g-we.y+ue.y),R.y-et-ne.y<0&&(et=R.y-ne.y),(je||et)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([je,et]))}},_getAnchor:function(){return he(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),el=function(o,c){return new vc(o,c)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(o,c,g){return this._initOverlay(vc,o,c,g).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ut.include({bindPopup:function(o,c){return this._popup=this._initOverlay(vc,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof cn||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Hn(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof no)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var tl=Hi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Hi.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Hi.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Hi.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ot("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,g,w=this._map,C=this._container,R=w.latLngToContainerPoint(w.getCenter()),Z=w.layerPointToContainerPoint(o),ne=this.options.direction,ue=C.offsetWidth,we=C.offsetHeight,je=he(this.options.offset),et=this._getAnchor();ne==="top"?(c=ue/2,g=we):ne==="bottom"?(c=ue/2,g=0):ne==="center"?(c=ue/2,g=we/2):ne==="right"?(c=0,g=we/2):ne==="left"?(c=ue,g=we/2):Z.x<R.x?(ne="right",c=0,g=we/2):(ne="left",c=ue+(je.x+et.x)*2,g=we/2),o=o.subtract(he(c,g,!0)).add(je).add(et),Ht(C,"leaflet-tooltip-right"),Ht(C,"leaflet-tooltip-left"),Ht(C,"leaflet-tooltip-top"),Ht(C,"leaflet-tooltip-bottom"),it(C,"leaflet-tooltip-"+ne),at(C,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Yt(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return he(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hu=function(o,c){return new tl(o,c)};vt.include({openTooltip:function(o,c,g){return this._initOverlay(tl,o,c,g).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ut.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tl,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof cn||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(Ye(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Ye(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,g,w;this._tooltip.options.sticky&&o.originalEvent&&(g=this._map.mouseEventToContainerPoint(o.originalEvent),w=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(c)}});var wc=Ti.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Lo(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var w=he(g.bgPos);c.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Nf(o){return new wc(o)}Ti.Default=Ya;var io=Ut.extend({options:{tileSize:256,opacity:1,updateWhenIdle:We.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){U(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),$t(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof J?o:new J(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,g=-o(-1/0,1/0),w=0,C=c.length,R;w<C;w++)R=c[w].style.zIndex,c[w]!==this._container&&R&&(g=o(g,+R));isFinite(g)&&(this.options.zIndex=g+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!We.ielt9){Yt(this._container,this.options.opacity);var o=+new Date,c=!1,g=!1;for(var w in this._tiles){var C=this._tiles[w];if(!(!C.current||!C.loaded)){var R=Math.min(1,(o-C.loaded)/200);Yt(C.el,R),R<1?c=!0:(C.active?g=!0:this._onOpaqueTile(C),C.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(M(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===o?(this._levels[g].el.style.zIndex=c-Math.abs(o-g),this._onUpdateLevel(g)):($t(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var w=this._levels[o],C=this._map;return w||(w=this._levels[o]={},w.el=ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=c,w.origin=C.project(C.unproject(C.getPixelOrigin()),o).round(),w.zoom=o,this._setZoomTransform(w,C.getCenter(),C.getZoom()),T(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var o,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var w=c.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)$t(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,g,w){var C=Math.floor(o/2),R=Math.floor(c/2),Z=g-1,ne=new J(+C,+R);ne.z=+Z;var ue=this._tileCoordsToKey(ne),we=this._tiles[ue];return we&&we.active?(we.retain=!0,!0):(we&&we.loaded&&(we.retain=!0),Z>w?this._retainParent(C,R,Z,w):!1)},_retainChildren:function(o,c,g,w){for(var C=2*o;C<2*o+2;C++)for(var R=2*c;R<2*c+2;R++){var Z=new J(C,R);Z.z=g+1;var ne=this._tileCoordsToKey(Z),ue=this._tiles[ne];if(ue&&ue.active){ue.retain=!0;continue}else ue&&ue.loaded&&(ue.retain=!0);g+1<w&&this._retainChildren(C,R,g+1,w)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,g,w){var C=Math.round(c);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var R=this.options.updateWhenZooming&&C!==this._tileZoom;(!w||R)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(o),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],o,c)},_setZoomTransform:function(o,c,g){var w=this._map.getZoomScale(g,o.zoom),C=o.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(c,g)).round();We.any3d?gr(o.el,C,w):at(o.el,C)},_resetGrid:function(){var o=this._map,c=o.options.crs,g=this._tileSize=this.getTileSize(),w=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],w).x/g.x),Math.ceil(o.project([0,c.wrapLng[1]],w).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],w).y/g.x),Math.ceil(o.project([c.wrapLat[1],0],w).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),w=c.getZoomScale(g,this._tileZoom),C=c.project(o,this._tileZoom).floor(),R=c.getSize().divideBy(w*2);return new Y(C.subtract(R),C.add(R))},_update:function(o){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(o),C=this._pxBoundsToTileRange(w),R=C.getCenter(),Z=[],ne=this.options.keepBuffer,ue=new Y(C.getBottomLeft().subtract([ne,-ne]),C.getTopRight().add([ne,-ne]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var we in this._tiles){var je=this._tiles[we].coords;(je.z!==this._tileZoom||!ue.contains(new J(je.x,je.y)))&&(this._tiles[we].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(o,g);return}for(var et=C.min.y;et<=C.max.y;et++)for(var yt=C.min.x;yt<=C.max.x;yt++){var Wn=new J(yt,et);if(Wn.z=this._tileZoom,!!this._isValidTile(Wn)){var Rn=this._tiles[this._tileCoordsToKey(Wn)];Rn?Rn.current=!0:Z.push(Wn)}}if(Z.sort(function(wr,ol){return wr.distanceTo(R)-ol.distanceTo(R)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vr=document.createDocumentFragment();for(yt=0;yt<Z.length;yt++)this._addTile(Z[yt],Vr);this._level.el.appendChild(Vr)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(o.x<g.min.x||o.x>g.max.x)||!c.wrapLat&&(o.y<g.min.y||o.y>g.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(o);return qe(this.options.bounds).overlaps(w)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,g=this.getTileSize(),w=o.scaleBy(g),C=w.add(g),R=c.unproject(w,o.z),Z=c.unproject(C,o.z);return[R,Z]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),g=new Le(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),g=new J(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(o){var c=this._tiles[o];c&&($t(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){it(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=T,o.onmousemove=T,We.ielt9&&this.options.opacity<1&&Yt(o,this.options.opacity)},_addTile:function(o,c){var g=this._getTilePos(o),w=this._tileCoordsToKey(o),C=this.createTile(this._wrapCoords(o),u(this._tileReady,this,o));this._initTile(C),this.createTile.length<2&&z(u(this._tileReady,this,o,null,C)),at(C,g),this._tiles[w]={el:C,coords:o,current:!0},c.appendChild(C),this.fire("tileloadstart",{tile:C,coords:o})},_tileReady:function(o,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:o});var w=this._tileCoordsToKey(o);g=this._tiles[w],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Yt(g.el,0),M(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(it(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),We.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new J(this._wrapX?v(o.x,this._wrapX):o.x,this._wrapY?v(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new Y(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function nl(o){return new io(o)}var so=io.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=U(this,c),c.detectRetina&&We.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var g=document.createElement("img");return Ye(g,"load",u(this._tileOnLoad,this,c,g)),Ye(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(o),g},getTileUrl:function(o){var c={r:We.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=g),c["-y"]=g}return G(this._url,i(c,this.options))},_tileOnLoad:function(o,c){We.ielt9?setTimeout(u(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,g){var w=this.options.errorTileUrl;w&&c.getAttribute("src")!==w&&(c.src=w),o(g,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,w=this.options.zoomOffset;return g&&(o=c-o),o+w},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=T,c.onerror=T,!c.complete)){c.src=oe;var g=this._tiles[o].coords;$t(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",oe),io.prototype._removeTile.call(this,o)},_tileReady:function(o,c,g){if(!(!this._map||g&&g.getAttribute("src")===oe))return io.prototype._tileReady.call(this,o,c,g)}});function Bd(o,c){return new so(o,c)}var fu=so.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var g=i({},this.defaultWmsParams);for(var w in c)w in this.options||(g[w]=c[w]);c=U(this,c);var C=c.detectRetina&&We.retina?2:1,R=this.getTileSize();g.width=R.x*C,g.height=R.y*C,this.wmsParams=g},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,so.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),g=this._crs,w=ge(g.project(c[0]),g.project(c[1])),C=w.min,R=w.max,Z=(this._wmsVersion>=1.3&&this._crs===gn?[C.y,C.x,R.y,R.x]:[C.x,C.y,R.x,R.y]).join(","),ne=so.prototype.getTileUrl.call(this,o);return ne+H(this.wmsParams,ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(o,c){return i(this.wmsParams,o),c||this.redraw(),this}});function Rf(o,c){return new fu(o,c)}so.WMS=fu,Bd.wms=Rf;var Wi=Ut.extend({options:{padding:.1},initialize:function(o){U(this,o),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),it(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var g=this._map.getZoomScale(c,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,c),R=w.multiplyBy(-g).add(C).subtract(this._map._getNewPixelOrigin(o,c));We.any3d?gr(this._container,R,g):at(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new Y(g,g.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$d=Wi.extend({options:{tolerance:0},getEvents:function(){var o=Wi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Ye(o,"mousemove",this._onMouseMove,this),Ye(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ye(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,$t(this._container),Ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var o=this._bounds,c=this._container,g=o.getSize(),w=We.retina?2:1;at(c,o.min),c.width=w*g.x,c.height=w*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",We.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[f(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,g=c.next,w=c.prev;g?g.prev=w:this._drawLast=w,w?w.next=g:this._drawFirst=g,delete o._order,delete this._layers[f(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),g=[],w,C;for(C=0;C<c.length;C++){if(w=Number(c[C]),isNaN(w))return;g.push(w)}o.options._dashArray=g}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)o=w.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var g,w,C,R,Z=o._parts,ne=Z.length,ue=this._ctx;if(ne){for(ue.beginPath(),g=0;g<ne;g++){for(w=0,C=Z[g].length;w<C;w++)R=Z[g][w],ue[w?"lineTo":"moveTo"](R.x,R.y);c&&ue.closePath()}this._fillStroke(ue,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,g=this._ctx,w=Math.max(Math.round(o._radius),1),C=(Math.max(Math.round(o._radiusY),1)||w)/w;C!==1&&(g.save(),g.scale(1,C)),g.beginPath(),g.arc(c.x,c.y/C,w,0,Math.PI*2,!1),C!==1&&g.restore(),this._fillStroke(g,o)}},_fillStroke:function(o,c){var g=c.options;g.fill&&(o.globalAlpha=g.fillOpacity,o.fillStyle=g.fillColor||g.color,o.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=g.opacity,o.lineWidth=g.weight,o.strokeStyle=g.color,o.lineCap=g.lineCap,o.lineJoin=g.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),g,w,C=this._drawFirst;C;C=C.next)g=C.layer,g.options.interactive&&g._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(g))&&(w=g);this._fireEvent(w?[w]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Ht(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var g,w,C=this._drawFirst;C;C=C.next)g=C.layer,g.options.interactive&&g._containsPoint(c)&&(w=g);w!==this._hoveredLayer&&(this._handleMouseOut(o),w&&(it(this._container,"leaflet-interactive"),this._fireEvent([w],o,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,g){this._map._fireDOMEvent(c,g||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var g=c.next,w=c.prev;if(g)g.prev=w;else return;w?w.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var g=c.next,w=c.prev;if(w)w.next=g;else return;g?g.prev=w:w&&(this._drawLast=w),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function Hd(o){return We.canvas?new $d(o):null}var rl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Lf={_initContainer:function(){this._container=ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=rl("shape");it(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=rl("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[f(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;$t(c),o.removeInteractiveTarget(c),delete this._layers[f(o)]},_updateStyle:function(o){var c=o._stroke,g=o._fill,w=o.options,C=o._container;C.stroked=!!w.stroke,C.filled=!!w.fill,w.stroke?(c||(c=o._stroke=rl("stroke")),C.appendChild(c),c.weight=w.weight+"px",c.color=w.color,c.opacity=w.opacity,w.dashArray?c.dashStyle=$(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=w.lineCap.replace("butt","flat"),c.joinstyle=w.lineJoin):c&&(C.removeChild(c),o._stroke=null),w.fill?(g||(g=o._fill=rl("fill")),C.appendChild(g),g.color=w.fillColor||w.color,g.opacity=w.fillOpacity):g&&(C.removeChild(g),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),g=Math.round(o._radius),w=Math.round(o._radiusY||g);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+w+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){vs(o._container)},_bringToBack:function(o){wi(o._container)}},Si=We.vml?rl:Mi,Ho=Wi.extend({_initContainer:function(){this._container=Si("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Si("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$t(this._container),Ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var o=this._bounds,c=o.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),at(g,o.min),g.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=Si("path");o.options.className&&it(c,o.options.className),o.options.interactive&&it(c,"leaflet-interactive"),this._updateStyle(o),this._layers[f(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){$t(o._path),o.removeInteractiveTarget(o._path),delete this._layers[f(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,g=o.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,Ws(o._parts,c))},_updateCircle:function(o){var c=o._point,g=Math.max(Math.round(o._radius),1),w=Math.max(Math.round(o._radiusY),1)||g,C="a"+g+","+w+" 0 1,0 ",R=o._empty()?"M0 0":"M"+(c.x-g)+","+c.y+C+g*2+",0 "+C+-g*2+",0 ";this._setPath(o,R)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){vs(o._path)},_bringToBack:function(o){wi(o._path)}});We.vml&&Ho.include(Lf);function xc(o){return We.svg||We.vml?new Ho(o):null}vt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&Hd(o)||xc(o)}});var jf=Cs.extend({initialize:function(o,c){Cs.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=qe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function jg(o,c){return new jf(o,c)}Ho.create=Si,Ho.pointsToPath=Ws,$i.geometryToLayer=Xa,$i.coordsToLatLng=pc,$i.coordsToLatLngs=du,$i.latLngToCoords=gc,$i.latLngsToCoords=yc,$i.getFeature=Ja,$i.asFeature=_c,vt.mergeOptions({boxZoom:!0});var il=or.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_t(),Ua(),this._startPoint=this._map.mouseEventToContainerPoint(o),Ye(document,{contextmenu:Hn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=ot("div","leaflet-zoom-box",this._container),it(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new Y(this._point,this._startPoint),g=c.getSize();at(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&($t(this._box),Ht(this._container,"leaflet-crosshair")),Xr(),za(),Ft(document,{contextmenu:Hn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new Le(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",il),vt.mergeOptions({doubleClickZoom:!0});var Df=or.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,g=c.getZoom(),w=c.options.zoomDelta,C=o.originalEvent.shiftKey?g-w:g+w;c.options.doubleClickZoom==="center"?c.setZoom(C):c.setZoomAround(o.containerPoint,C)}});vt.addInitHook("addHandler","doubleClickZoom",Df),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wd=or.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new _r(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}it(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ht(this._map._container,"leaflet-grab"),Ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=qe(this._map.options.maxBounds);this._offsetLimit=ge(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),g=this._initialWorldOffset,w=this._draggable._newPos.x,C=(w-c+g)%o+c-g,R=(w+c+g)%o-c-g,Z=Math.abs(C+g)<Math.abs(R+g)?C:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(o){var c=this._map,g=c.options,w=!g.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),w)c.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,Z=g.easeLinearity,ne=C.multiplyBy(Z/R),ue=ne.distanceTo([0,0]),we=Math.min(g.inertiaMaxSpeed,ue),je=ne.multiplyBy(we/ue),et=we/(g.inertiaDeceleration*Z),yt=je.multiplyBy(-et/2).round();!yt.x&&!yt.y?c.fire("moveend"):(yt=c._limitOffset(yt,c.options.maxBounds),z(function(){c.panBy(yt,{duration:et,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",Wd),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qd=or.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Ye(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,g=o.scrollTop||c.scrollTop,w=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(w,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},g=this.keyCodes,w,C;for(w=0,C=g.left.length;w<C;w++)c[g.left[w]]=[-1*o,0];for(w=0,C=g.right.length;w<C;w++)c[g.right[w]]=[o,0];for(w=0,C=g.down.length;w<C;w++)c[g.down[w]]=[0,o];for(w=0,C=g.up.length;w<C;w++)c[g.up[w]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},g=this.keyCodes,w,C;for(w=0,C=g.zoomIn.length;w<C;w++)c[g.zoomIn[w]]=o;for(w=0,C=g.zoomOut.length;w<C;w++)c[g.zoomOut[w]]=-o},_addHooks:function(){Ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,g=this._map,w;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(w=this._panKeys[c],o.shiftKey&&(w=he(w).multiplyBy(3)),g.options.maxBounds&&(w=g._limitOffset(he(w),g.options.maxBounds)),g.options.worldCopyJump){var C=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(w)));g.panTo(C)}else g.panBy(w)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;Hn(o)}}});vt.addInitHook("addHandler","keyboard",qd),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zt=or.extend({addHooks:function(){Ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=lc(o),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var w=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),w),Hn(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),g=this._map.options.zoomSnap||0;o._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,R=g?Math.ceil(C/g)*g:C,Z=o._limitZoom(c+(this._delta>0?R:-R))-c;this._delta=0,this._startTime=null,Z&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+Z):o.setZoomAround(this._lastMousePos,c+Z))}});vt.addInitHook("addHandler","scrollWheelZoom",Zt);var Zd=600;vt.mergeOptions({tapHold:We.touchNative&&We.safari&&We.mobile,tapTolerance:15});var mu=or.extend({addHooks:function(){Ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new J(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ye(document,"touchend",Wt),Ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Zd),Ye(document,"touchend touchcancel contextmenu",this._cancel,this),Ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Ft(document,"touchend",Wt),Ft(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new J(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var g=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});vt.addInitHook("addHandler","tapHold",mu),vt.mergeOptions({touchZoom:We.touch,bounceAtZoomLimits:!0});var sl=or.extend({addHooks:function(){it(this._map._container,"leaflet-touch-zoom"),Ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ht(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(o.touches[0]),w=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(w)._divideBy(2))),this._startDist=g.distanceTo(w),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ye(document,"touchmove",this._onTouchMove,this),Ye(document,"touchend touchcancel",this._onTouchEnd,this),Wt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(o.touches[0]),w=c.mouseEventToContainerPoint(o.touches[1]),C=g.distanceTo(w)/this._startDist;if(this._zoom=c.getScaleZoom(C,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&C<1||this._zoom>c.getMaxZoom()&&C>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var R=g._add(w)._divideBy(2)._subtract(this._centerPoint);if(C===1&&R.x===0&&R.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var Z=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(Z,this,!0),Wt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",sl),vt.BoxZoom=il,vt.DoubleClickZoom=Df,vt.Drag=Wd,vt.Keyboard=qd,vt.ScrollWheelZoom=Zt,vt.TapHold=mu,vt.TouchZoom=sl,n.Bounds=Y,n.Browser=We,n.CRS=dt,n.Canvas=$d,n.Circle=fc,n.CircleMarker=hc,n.Class=le,n.Control=Xn,n.DivIcon=wc,n.DivOverlay=Hi,n.DomEvent=Vo,n.DomUtil=eo,n.Draggable=_r,n.Evented=Ee,n.FeatureGroup=cn,n.GeoJSON=$i,n.GridLayer=io,n.Handler=or,n.Icon=Ti,n.ImageOverlay=ro,n.LatLng=Oe,n.LatLngBounds=Le,n.Layer=Ut,n.LayerGroup=Gt,n.LineUtil=O,n.Map=vt,n.Marker=Ss,n.Mixin=bs,n.Path=no,n.Point=J,n.PolyUtil=Ga,n.Polygon=Cs,n.Polyline=Or,n.Popup=vc,n.PosAnimation=Fo,n.Projection=ke,n.Rectangle=jf,n.Renderer=Wi,n.SVG=Ho,n.SVGOverlay=Ud,n.TileLayer=so,n.Tooltip=tl,n.Transformation=Rr,n.Util=k,n.VideoOverlay=Fd,n.bind=u,n.bounds=ge,n.canvas=Hd,n.circle=cu,n.circleMarker=If,n.control=An,n.divIcon=Nf,n.extend=i,n.featureGroup=$o,n.geoJSON=Pf,n.geoJson=Ei,n.gridLayer=nl,n.icon=Cf,n.imageOverlay=Af,n.latLng=De,n.latLngBounds=qe,n.layerGroup=ri,n.map=Mr,n.marker=Ng,n.point=he,n.polygon=Lg,n.polyline=Rg,n.popup=el,n.rectangle=jg,n.setOptions=U,n.stamp=f,n.svg=xc,n.svgOverlay=zd,n.tileLayer=Bd,n.tooltip=hu,n.transformation=Lr,n.version=r,n.videoOverlay=kf;var Mf=window.L;n.noConflict=function(){return window.L=Mf,this},window.L=n})}(xh,xh.exports)),xh.exports}var Sf=M$();const RN=Kv(Sf);function Xx(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Jx(t,e){return e==null?function(r,i){const a=N.useRef();return a.current||(a.current=t(r,i)),a}:function(r,i){const a=N.useRef();a.current||(a.current=t(r,i));const u=N.useRef(r),{instance:h}=a.current;return N.useEffect(function(){u.current!==r&&(e(h,r,u.current),u.current=r)},[h,r,i]),a}}function O$(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function LN(t){return function(n){const r=Qx(),i=t(Yx(n,r),r);return PN(r.map,n.attribution),NN(i.current,n.eventHandlers),O$(i.current,r),i}}function V$(t,e){const n=Jx(t,e),r=LN(n);return N$(r)}function F$(t,e){const n=Jx(t),r=j$(n,e);return R$(r)}function U$(t,e){const n=Jx(t,e),r=LN(n);return L$(r)}function z$(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function B$(){return Qx().map}function Gv(){return Gv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gv.apply(this,arguments)}function $$({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:u,style:h,whenReady:f,zoom:_,...v},T){const[E]=N.useState({className:i,id:a,style:h}),[A,D]=N.useState(null);N.useImperativeHandle(T,()=>A?.map??null,[A]);const U=N.useCallback(W=>{if(W!==null&&A===null){const G=new Sf.Map(W,v);n!=null&&_!=null?G.setView(n,_):t!=null&&G.fitBounds(t,e),f!=null&&G.whenReady(f),D(A$(G))}},[]);N.useEffect(()=>()=>{A?.map.remove()},[A]);const H=A?Lt.createElement(kN,{value:A},r):u??null;return Lt.createElement("div",Gv({},E,{ref:U}),H)}const jN=N.forwardRef($$),DN=V$(function({position:e,...n},r){const i=new Sf.Marker(e,n);return Xx(i,k$(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),H$=F$(function(e,n){const r=new Sf.Popup(e,n.overlayContainer);return Xx(r,n)},function(e,n,{position:r},i){N.useEffect(function(){const{instance:u}=e;function h(_){_.popup===u&&(u.update(),i(!0))}function f(_){_.popup===u&&i(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){n.map.off({popupopen:h,popupclose:f}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(u)}},[e,n,i,r])}),MN=U$(function({url:e,...n},r){const i=new Sf.TileLayer(e,Yx(n,r));return Xx(i,r)},function(e,n,r){z$(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),W$=new RN.Icon({iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function q$({lat:t,lng:e}){const n=B$();return N.useEffect(()=>{!t||!e||n.flyTo([t,e],16,{duration:.7})},[t,e]),null}function ON({nameDireccion:t="direccion",nameLat:e="latitud",nameLng:n="longitud",label:r="Direccin *"}){const{register:i,setValue:a,watch:u,formState:{errors:h}}=bf(),[f,_]=N.useState([]),[v,T]=N.useState(!1),E=u(t),A=u(e),D=u(n),U=async $=>{if(!$||$.length<4)return _([]);const se=`https://corsproxy.io/?https://nominatim.openstreetmap.org/search?format=json&countrycodes=cl&q=${encodeURIComponent($)}`;try{const oe=await fetch(se);if(!oe.ok)throw new Error("Network error");const ee=await oe.json();_(ee.slice(0,6))}catch{_([])}},H=$=>{a(t,$.display_name,{shouldValidate:!0}),a(e,parseFloat($.lat)),a(n,parseFloat($.lon)),_([]),T(!1)},W=N.useRef(null),G=()=>{W.current=setTimeout(()=>T(!1),150)};return m.jsxs("div",{className:"space-y-2 relative",children:[m.jsx("label",{className:"block text-white text-sm font-medium",children:r}),m.jsx("input",{...i(t,{required:!0}),className:"w-full bg-zinc-800 text-white rounded px-3 py-2",placeholder:"Calle, ciudad...",autoComplete:"off",value:E,onChange:$=>{i(t).onChange($),U($.target.value),T(!0)},onFocus:()=>T(!0),onBlur:G}),h[t]&&m.jsx("span",{className:"text-red-500 text-sm",children:h[t]?.message}),v&&f.length>0&&m.jsx("ul",{className:"bg-white text-black rounded shadow-lg absolute z-50 max-h-48 overflow-auto w-full mt-1",children:f.map($=>m.jsx("li",{className:"px-3 py-2 cursor-pointer hover:bg-[#8e2afc] hover:text-white transition",onMouseDown:()=>H($),children:$.display_name},$.place_id))}),A&&D?m.jsx("div",{className:"mt-4 rounded overflow-hidden border border-[#8e2afc]/30 shadow-lg",style:{height:260},children:m.jsxs(jN,{center:[A,D],zoom:16,style:{height:"100%",width:"100%"},children:[m.jsx(q$,{lat:A,lng:D}),m.jsx(MN,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),m.jsx(DN,{position:[A,D],icon:W$,children:m.jsx(H$,{children:E})})]})}):m.jsx("div",{className:"mt-4 text-white/50 text-sm",children:"Busca y selecciona una direccin para previsualizar el mapa."})]})}const e0="/assets/goup_logo-Bd4Ovu8L.png",Z$=cs({nombre:fe().min(1,"El nombre es obligatorio"),descripcion:fe().min(1,"La descripcin es obligatoria"),direccion:fe().min(1,"La direccin es obligatoria"),ciudad:fe().min(1,"La ciudad es obligatoria"),pais:fe().min(1,"El pas es obligatorio"),latitud:Nl().optional().nullable(),longitud:Nl().optional().nullable(),telefono:fe().optional().or(Je("")),email:fe().email("Email invlido").optional().or(Je("")),sitio_web:fe().url("URL invlida").optional().or(Je("")),instagram:fe().optional().or(Je("")),imagen:Kn().nullable(),banner:Kn().nullable(),accesibilidad:kt([Ot(),Fc(["S","No"])]).default("No"),estacionamientos:kt([Ot(),Fc(["S","No"])]).default("No"),guardaropia:kt([Ot(),Fc(["S","No"])]).default("No"),terraza:kt([Ot(),Fc(["S","No"])]).default("No"),fumadores:kt([Ot(),Fc(["S","No"])]).default("No"),wifi:kt([Ot(),Fc(["S","No"])]).default("No"),ambientes:kt([Nl(),fe()]).optional().or(Je("")),banos:kt([Nl(),fe()]).optional().or(Je(""))}),R1={nombre:"",descripcion:"",direccion:"",ciudad:"",pais:"",latitud:null,longitud:null,telefono:"",email:"",sitio_web:"",instagram:"",imagen:null,banner:null,accesibilidad:"No",estacionamientos:"No",guardaropia:"No",terraza:"No",fumadores:"No",wifi:"No",ambientes:"",banos:""};function G$(){return[{icon:"",title:"Identidad & contacto",content:m.jsxs(A_,{title:"Identidad & contacto",children:[m.jsx(ze,{name:"nombre",label:"Nombre del club *"}),m.jsx(Dd,{name:"descripcion",label:"Descripcin *",rows:4}),m.jsx(ON,{}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ciudad",label:"Ciudad *"}),m.jsx(ze,{name:"pais",label:"Pas *"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"telefono",label:"Telfono"}),m.jsx(ze,{name:"email",label:"Email"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"sitio_web",label:"Sitio web"}),m.jsx(ze,{name:"instagram",label:"Instagram"})]})]})},{icon:"",title:"Medios",content:m.jsxs(A_,{title:"Medios",children:[m.jsx(Hr,{name:"imagen",label:"Imagen principal"}),m.jsx(Hr,{name:"banner",label:"Banner"})]})},{icon:"",title:"Servicios & capacidades",content:m.jsxs(A_,{title:"Servicios & capacidades",children:[m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(xt,{name:"accesibilidad",label:"Accesibilidad",options:["S","No"]}),m.jsx(xt,{name:"estacionamientos",label:"Estacionamientos",options:["S","No"]}),m.jsx(xt,{name:"guardaropia",label:"Guardarropa",options:["S","No"]}),m.jsx(xt,{name:"terraza",label:"Terraza",options:["S","No"]}),m.jsx(xt,{name:"fumadores",label:"Zona de fumadores",options:["S","No"]}),m.jsx(xt,{name:"wifi",label:"Wi-Fi",options:["S","No"]})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ambientes",type:"number",label:"Ambientes",placeholder:"Ej: 3"}),m.jsx(ze,{name:"banos",type:"number",label:"Baos",placeholder:"Ej: 2"})]})]})}]}function K$({step:t,total:e}){return m.jsx("div",{className:"flex items-center justify-center gap-2",children:Array.from({length:e}).map((n,r)=>m.jsx("span",{className:`h-2 w-2 rounded-full ${r===t?"bg-[#8e2afc]":"bg-white/20"}`},r))})}function L1({loading:t,children:e,...n}){return m.jsx("button",{className:"inline-flex items-center justify-center rounded-md bg-[#8e2afc] px-4 py-2 text-sm font-medium hover:bg-[#7b1fe0] disabled:opacity-50",disabled:t,...n,children:t?"Procesando":e})}function A_({title:t,children:e}){return m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-2xl font-extrabold text-[#8e2afc] flex items-center gap-2",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}function Q$(){return m.jsx(Y$,{})}function Y$(){const t=Ea({resolver:Sa(Z$),defaultValues:R1,mode:"onChange"}),e=G$(),{current:n,total:r,next:i,prev:a}=IN(e),[u,h]=N.useState(!1),[f,_]=N.useState([]),[v,T]=N.useState(!1),E=Li(),{user:A}=ir(),D=[["nombre","descripcion","direccion","ciudad","pais","telefono","email","sitio_web","instagram"],["imagen","banner"],["accesibilidad","estacionamientos","guardaropia","terraza","fumadores","wifi","ambientes","banos"]],U=async()=>{const W=D[n]||[];if(!await t.trigger(W,{shouldFocus:!0})){const $=W.map(se=>t.formState.errors[se]?.message).filter(se=>!!se);_($),Et.error($[0]||"Corrige los campos para continuar.");return}_([]),i(),window.scrollTo({top:0,behavior:"smooth"})},H=t.handleSubmit(async W=>{if(!v){if(!A?.uid){Et.error("Debes iniciar sesin");return}h(!0);try{const G=fr(rn,"club"),$=fr(rn,"usersWeb"),se=ga(G,ya("uid_usersWeb","==",A.uid)),oe=ga($,ya("rol","==","club_owner")),ee=await Nr(oe);if(!(await Nr(se)).empty&&ee.empty){Et.error("Ya tienes un club creado."),E("/dashboard/mi-club");return}const j=async(k,le)=>{if(!k)return null;const me=Aa(),ve=k.name.split(".").pop()||"jpg",Ee=`club/${A.uid}/${le}/${Date.now()}.${ve}`,J=Pa(me,Ee);return await Ca(J,k),Ia(J)},V=await j(W.imagen,"imagen"),B=await j(W.banner,"banner"),M={id_club:Date.now(),uid_usersWeb:A.uid,nombre:W.nombre,descripcion:W.descripcion,direccion:W.direccion,ciudad:W.ciudad,pais:W.pais,latitud:typeof W.latitud=="number"?W.latitud:null,longitud:typeof W.longitud=="number"?W.longitud:null,telefono:W.telefono||null,email:W.email||null,sitio_web:W.sitio_web||null,instagram:W.instagram||null,imagen:V,banner:B,accesibilidad:W.accesibilidad===!0||W.accesibilidad==="S",estacionamientos:W.estacionamientos===!0||W.estacionamientos==="S",guardaropia:W.guardaropia===!0||W.guardaropia==="S",terraza:W.terraza===!0||W.terraza==="S",fumadores:W.fumadores===!0||W.fumadores==="S",wifi:W.wifi===!0||W.wifi==="S",ambientes:Number(W.ambientes)||0,banos:Number(W.banos)||0,seguidores:0,seguridad:!1,createdAt:new Date().toISOString()};await Nd(Bn(G),M),Et.success("Club creado con xito!"),T(!0),t.reset(R1),E("/dashboard/mi-club")}catch(G){console.error(G),Et.error(G.message||"Error al crear el club")}finally{h(!1)}}});return m.jsxs("main",{className:"px-4 py-8 text-white",children:[m.jsxs("header",{className:"text-center space-y-2 mb-8",children:[m.jsx("img",{src:e0,alt:"GoUp",className:"mx-auto w-28"}),m.jsxs("h1",{className:"text-3xl font-extrabold",children:["CREAR ",m.jsx("span",{className:"text-[#8e2afc]",children:"CLUB"})]}),m.jsx("p",{className:"text-white/70",children:"Publica tu club con fotos y detalles."})]}),m.jsx(Ta,{...t,children:m.jsxs("form",{onSubmit:W=>{W.preventDefault(),n===r-1?H():U()},noValidate:!0,className:"max-w-3xl mx-auto space-y-8",children:[m.jsx(K$,{step:n,total:r}),m.jsx(SN,{errors:f}),m.jsx(vf,{mode:"wait",children:m.jsx(ef.div,{initial:{opacity:0,x:24},animate:{opacity:1,x:0},exit:{opacity:0,x:-24},transition:{duration:.15},className:"space-y-6",children:e[n].content},n)}),m.jsxs("div",{className:"flex justify-between",children:[n>0?m.jsx(L1,{type:"button",onClick:a,children:"Atrs"}):m.jsx("span",{}),m.jsx(L1,{loading:u,type:"submit",children:n===r-1?"Crear club":"Siguiente"})]})]})})]})}const X$=cs({nombre:fe().min(1,"El nombre es obligatorio"),telefono:fe().optional().or(Je("")),correo:fe().email("Correo invlido"),imagen:Kn().optional().nullable()});function J$(){const{user:t}=ir(),[e,n]=N.useState(!0),[r,i]=N.useState(!1),[a,u]=N.useState(null),[h,f]=N.useState(null),[_,v]=N.useState(!1),[T,E]=N.useState(!1),A=N.useRef(null),D=Ea({resolver:Sa(X$),defaultValues:void 0,mode:"onChange"});if(N.useEffect(()=>{(async()=>{if(!t?.uid)return;n(!0);const $=ga(fr(rn,"productora"),ya("uid","==",t.uid)),se=await Nr($);if(se.empty)u(null),f(null);else{const oe=se.docs[0];f(oe.id);const ee=oe.data();u(ee);const F={nombre:ee.nombre??"",telefono:ee.telefono??"",correo:ee.correo??t.email??"",imagen:null};D.reset(F),A.current=F}n(!1)})()},[t,D]),e)return m.jsx("div",{className:"text-white",children:"Cargando mi productora"});if(!a)return m.jsxs("div",{className:"text-white/80 bg-neutral-900/60 border border-white/10 rounded-xl p-6",children:[m.jsx("p",{className:"mb-4",children:"An no has creado tu productora."}),m.jsx(Pr,{to:"/productora/crear",className:"inline-flex items-center justify-center rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0] px-4 py-2 text-sm font-semibold",children:"Crear productora"})]});const U=async $=>{if(!$||!t)return null;const se=Aa(),oe=`productora/${t.uid}/${Date.now()}_${$.name}`,ee=Pa(se,oe);return await Ca(ee,$),Ia(ee)},H=()=>{A.current&&D.reset(A.current),v(!1)},W=()=>E(!0),G=D.handleSubmit(async $=>{if(t?.uid){i(!0);try{const se=await U($.imagen),oe={uid:t.uid,nombre:$.nombre,telefono:$.telefono||null,correo:$.correo,imagen:se??a.imagen??null};h?await Jl(Bn(rn,"productora",h),oe):(await Nd(Bn(rn,"productora",t.uid),oe),f(t.uid)),Et.success("Datos guardados"),u(oe);const ee={nombre:oe.nombre??"",telefono:oe.telefono??"",correo:oe.correo??"",imagen:null};D.reset(ee),A.current=ee,v(!1),E(!1)}catch(se){console.error(se),Et.error(se.message??"No se pudo guardar")}finally{i(!1)}}});return _?m.jsxs("div",{className:"max-w-5xl mx-auto",children:[m.jsx(Ta,{...D,children:m.jsx("form",{onSubmit:$=>{$.preventDefault(),W()},className:"space-y-6",noValidate:!0,children:m.jsxs("section",{className:"rounded-xl border p-5 bg-white/[0.03] backdrop-blur",children:[m.jsx("h2",{className:"text-xl font-bold text-[#cbb3ff]",children:"Editar productora"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(ze,{name:"nombre",label:"Nombre *"}),m.jsx(ze,{name:"telefono",label:"Telfono"}),m.jsx(ze,{name:"correo",label:"Correo"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Logo actual"}),m.jsx("div",{className:"h-40 w-full mb-2 bg-white/5 flex items-center justify-center border border-white/10",children:a.imagen?m.jsx("img",{src:a.imagen,alt:"logo",className:"h-full"}):m.jsx("span",{className:"text-white/40",children:"Sin logo"})}),m.jsx(Hr,{name:"imagen",label:"Reemplazar logo"})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 rounded border border-white/20 hover:bg-white/10",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] disabled:opacity-60",children:"Guardar"})]})]})})}),T&&m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60",children:m.jsxs("div",{className:"bg-neutral-900 rounded-md p-6 max-w-md w-[90vw] text-center border border-white/10",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Guardar los cambios?"}),m.jsx("p",{className:"text-white/70 mb-5",children:"Se actualizarn los datos de la productora."}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 rounded border border-white/20 hover:bg-white/10",children:"No"}),m.jsx("button",{onClick:G,disabled:r,className:"px-4 py-2 rounded bg-[#8e2afc] hover:bg-[#7b1fe0]",children:"S, guardar"})]})]})})]}):m.jsx("div",{className:"max-w-5xl mx-auto",children:m.jsxs("div",{className:"relative bg-neutral-900 rounded-lg overflow-hidden border border-white/10 shadow-md",children:[m.jsx("div",{className:"px-6 pt-4 relative z-20",children:m.jsxs("div",{className:"flex items-end justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"relative -mt-10 z-30 h-20 w-20 rounded-full overflow-hidden border-4 border-[#8e2afc] bg-white/10",children:a.imagen?m.jsx("img",{src:a.imagen,alt:"logo",className:"h-full w-full object-cover"}):m.jsx("div",{className:"h-full w-full grid place-items-center text-3xl",children:(a.nombre?.[0]??"P").toUpperCase()})}),m.jsxs("div",{className:"text-white",children:[m.jsx("h1",{className:"text-2xl font-extrabold",children:a.nombre}),m.jsxs("p",{className:"text-white/70 text-sm",children:[a.correo??""," ",a.telefono?` ${a.telefono}`:""]})]})]}),m.jsx("button",{onClick:()=>v(!0),className:"h-10 px-4 rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0]",children:"Editar datos"})]})}),m.jsxs("div",{className:"p-6 text-white grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx(j1,{label:"Correo",value:a.correo??""}),m.jsx(j1,{label:"Telfono",value:a.telefono??""})]})]})})}function j1({label:t,value:e}){return m.jsxs("div",{className:"rounded-md bg-white/5 border border-white/10 px-3 py-2",children:[m.jsx("p",{className:"text-white/60 text-xs",children:t}),m.jsx("p",{className:"text-white break-words",children:e})]})}function e7(){return m.jsxs("div",{className:"p-6 max-w-5xl mx-auto text-white",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Mi productora"}),m.jsx(J$,{})]})}cs({nombre:fe().min(2,"El nombre es obligatorio"),email:fe().email("Email invlido").optional().or(Je("")),tel:fe().optional().or(Je("")),desc:fe().optional().or(Je("")),direccion:fe().optional().or(Je("")),comuna:fe().optional().or(Je("")),aforo:Nl({invalid_type_error:"Debes indicar el aforo"}).int().positive().or(fe().transform(t=>t?Number(t):void 0)),banos:Nl().int().nonnegative().optional().or(fe().transform(t=>t?Number(t):void 0)),amb:Nl().int().nonnegative().optional().or(fe().transform(t=>t?Number(t):void 0)),servicios:cs({estacionamiento:Ot(),guardarropia:Ot(),terraza:Ot(),accesibilidad:Ot(),wifi:Ot(),fumadores:Ot()}),img_perfil:Kn().optional(),img_banner:Kn().optional()});cs({nombre:fe().min(2,"El nombre es obligatorio"),correo:fe().email("Correo invlido"),tel:fe().min(5,"Telfono requerido"),rut:fe().min(5,"RUT requerido"),rs:fe().min(2,"Razn social requerida"),img_perfil_prod:Kn().optional(),img_banner_prod:Kn().optional(),instagram:fe().optional().or(Je("")),web:fe().optional().or(Je(""))});const t7=cs({nombre:fe().min(1,"Nombre requerido"),tipo:fe().min(1,"Tipo requerido"),fecha:fe().min(1,"Fecha requerida"),horaInicio:fe().min(1,"Hora de inicio requerida"),horaCierre:fe().min(1,"Hora de cierre requerida"),capacidad:fe().min(1,"Seleccione capacidad aproximada"),presupuesto:fe().optional().default(""),promotor:fe().min(1,"Promotor requerido"),telefono:fe().min(1,"Telfono requerido"),email:fe().email("Email invlido"),desc:fe().min(1,"Descripcin requerida"),generos:Zp(fe()).min(1,"Selecciona al menos un gnero"),flyer:Kn().nullable().optional(),imgSec:Kn().nullable().optional(),edad:fe().transform(t=>parseInt(t,10)).refine(t=>t>=18,{message:"La edad mnima debe ser 18 aos o ms"}),tieneVip:fe().optional(),vip:fe().optional(),reservas:fe().transform(t=>t==="S"),tieneLineup:fe().transform(t=>t==="S"),cantidadDJs:fe().optional(),djs:Zp(fe()).optional(),dress_code:fe({required_error:"Debes seleccionar un cdigo de vestimenta"}),generosOtro:fe().optional()});function VN(){const{control:t}=bf(),e=Ov({control:t,name:"tieneLineup"}),n=Ov({control:t,name:"cantidadDJs"}),r=n==="Ms de 5"?6:parseInt(n||"0",10);return e!=="S"&&e!==!0?null:m.jsxs("div",{className:"space-y-4 mt-4",children:[m.jsx(xt,{name:"cantidadDJs",label:"Cantidad de DJs",options:["1","2","3","4","5","Ms de 5"]}),[...Array(isNaN(r)?0:r>5?6:r)].map((i,a)=>m.jsx(ze,{name:`djs.${a}`,label:`DJ ${a===0?"Principal":`Secundario ${a}`}`},a))]})}const D1={nombre:"",tipo:"",fecha:"",horaInicio:"",horaCierre:"",capacidad:"",presupuesto:"",promotor:"",telefono:"",email:"",desc:"",generos:[],flyer:null,imgSec:null,edad:18,tieneVip:"",vip:"",reservas:!1,tieneLineup:!1,cantidadDJs:"",djs:[],dress_code:""};function n7(t){return typeof t=="object"&&t!==null&&"message"in t}function FN(t,e=""){const n={};for(const[r,i]of Object.entries(t)){const a=e?`${e}.${r}`:r;n7(i)&&typeof i.message=="string"?n[a]=i.message:i&&typeof i=="object"&&Object.assign(n,FN(i,a))}return n}function r7(t,e){const n=FN(t);return e.map(r=>n[r]).filter(Boolean)}const M1=t=>{if(typeof t=="boolean")return t;if(t==null)return!1;const e=String(t).toLowerCase();return e==="si"||e==="s"||e==="true"||e==="1"},i7=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},UN=t=>{const e=String(t);if(e.toLowerCase()==="no"||e===""||e==="0")return 0;if(e.toLowerCase().includes("ms de"))return 6;const n=Number(e);return Number.isFinite(n)?n:0},s7=t=>UN(t)>0;function o7({step:t,total:e}){return m.jsx("div",{className:"flex items-center justify-center gap-2",children:Array.from({length:e}).map((n,r)=>m.jsx("span",{className:`h-2 w-2 rounded-full ${r===t?"bg-[#8e2afc]":"bg-white/20"}`},r))})}function O1({loading:t,variant:e="solid",children:n,className:r="",...i}){const a="inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition disabled:opacity-50",u=e==="outline"?"border border-white/20 bg-transparent hover:bg-white/10":"bg-[#8e2afc] hover:bg-[#7b1fe0]";return m.jsx("button",{className:`${a} ${u} ${r}`,disabled:t,...i,children:t?"...":n})}function bl({title:t,children:e}){return m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-2xl font-extrabold tracking-tight text-[#8e2afc] flex items-center gap-2",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}function a7({open:t,title:e,subtitle:n,onClose:r}){return t?m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm",children:m.jsxs("div",{className:"max-w-md rounded-md bg-neutral-900 p-6 text-center shadow-lg",children:[m.jsx("h2",{className:"mb-2 text-2xl font-semibold text-green-400",children:e}),n&&m.jsx("p",{className:"text-white/70",children:n}),m.jsx("button",{className:"mt-6 rounded bg-[#8e2afc] px-4 py-2 text-sm font-medium hover:bg-[#7b1fe0]",onClick:r,children:"Cerrar"})]})}):null}function l7(){return m.jsx(u7,{})}function u7(){const t=Ea({resolver:Sa(t7),defaultValues:D1,mode:"onChange"}),[e,n]=N.useState(!1),[r,i]=N.useState([]),[a,u]=N.useState(!1),[h,f]=N.useState(""),_=c7(t,h,f),{current:v,total:T,next:E,prev:A}=IN(_),D=Li(),{user:U}=ir(),H=[["nombre","tipo"],["fecha","horaInicio","horaCierre"],["capacidad"],["promotor","telefono","email"],["desc","generos"],["edad","dress_code","tieneVip","reservas","tieneLineup","djs"],["flyer","imgSec"],[]],W=async()=>{const $=H[v];if(!await t.trigger($,{shouldFocus:!0})){const oe=r7(t.formState.errors,$);i(oe),Et.error(oe[0]??"Corrige los campos para continuar.");return}i([]),Et.success("Paso guardado "),E(),window.scrollTo({top:0,behavior:"smooth"})},G=async $=>{if(!a){if(!U?.uid){Et.error("Debes iniciar sesin");return}n(!0);try{const se=async(M,k)=>{if(!M)return null;const le=Aa(),me=M.name.split(".").pop()||"jpg",ve=`Eventos/${U.uid}/${k}/${Date.now()}.${me}`,Ee=Pa(le,ve);return await Ca(Ee,M),Ia(Ee)},oe=await se($.flyer,"flyer"),ee=await se($.imgSec,"imgSec"),F=($.djs||[]).map(M=>(M??"").toString().trim()).filter(Boolean),j=$.generos.includes("Otros")&&h.trim()?[...$.generos.filter(M=>M!=="Otros"),h.trim()]:$.generos,V={nombre:$.nombre,tipo:$.tipo,fecha:$.fecha,horaInicio:$.horaInicio,horaCierre:$.horaCierre,capacidad:$.capacidad,presupuesto:$.presupuesto,promotor:$.promotor,telefono:$.telefono,email:$.email,desc:$.desc,generos:j,edad:i7($.edad,18),dress_code:$.dress_code,tieneVip:s7($.tieneVip),cantidadZonasVip:UN($.tieneVip),aceptaReservas:M1($.reservas),tieneLineup:M1($.tieneLineup),cantidadDJs:F.length,djs:F,flyer:oe,imgSec:ee,uid_usersWeb:"/usersWeb/"+U.uid,createdAt:new Date().toISOString()},B=fr(rn,"Eventos"),z=Bn(B);await Nd(z,V),Et.success("Evento creado con xito!"),u(!0),t.reset(D1),setTimeout(()=>D("/mis-eventos"),1500)}catch(se){console.error("Error creando evento:",se),Et.error(se.message||"Error inesperado")}finally{n(!1)}}};return m.jsxs("main",{className:"relative text-white px-4 py-8 overflow-x-hidden",children:[m.jsxs("header",{className:"max-w-3xl mx-auto space-y-2 mb-8 text-center",children:[m.jsx("img",{src:e0,alt:"GoUp",className:"mx-auto w-28"}),m.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold",children:["CREAR ",m.jsx("span",{className:"text-[#8e2afc]",children:"EVENTO"})]}),m.jsx("p",{className:"text-white/70",children:"Organiza la experiencia perfecta con GoUp"})]}),m.jsx(Ta,{...t,children:m.jsxs("form",{onSubmit:$=>{$.preventDefault(),v===T-1?t.handleSubmit(G)():W()},noValidate:!0,className:"max-w-3xl mx-auto space-y-8",children:[m.jsx(o7,{step:v,total:T}),m.jsx(SN,{errors:r}),m.jsx(vf,{mode:"wait",children:m.jsx(ef.div,{initial:{opacity:0,x:24},animate:{opacity:1,x:0},exit:{opacity:0,x:-24},transition:{duration:.15},className:"space-y-6",children:_[v].content},v)}),m.jsxs("div",{className:"flex justify-between pt-6",children:[v>0?m.jsx(O1,{type:"button",variant:"outline",onClick:A,children:"Atrs"}):m.jsx("span",{}),m.jsx(O1,{loading:e,type:"submit",children:v===T-1?"Enviar formulario":"Siguiente"})]})]})}),m.jsx(a7,{open:a,title:"Evento enviado!",subtitle:"Nos pondremos en contacto contigo pronto.",onClose:()=>u(!1)})]})}function c7(t,e,n){const r=["Reguetn","Techno","House","Pop","Salsa","Hardstyle","Trance","Hip-Hop","Urbano","Guaracha","Otros"];return[{icon:"",title:"Informacin del Evento",content:m.jsxs(bl,{title:"Informacin del Evento",children:[m.jsx(ze,{name:"nombre",label:"Nombre del Evento *",placeholder:"Ej: PURPLE NIGHTS  MIDNIGHT VIBES"}),m.jsx(xt,{name:"tipo",label:"Tipo de Evento *",options:["Club","Festival","After","Privado","Open Air","Bar"]})]})},{icon:"",title:"Fecha & Horario",content:m.jsxs(bl,{title:"Fecha & Horario",children:[m.jsx(ze,{name:"fecha",type:"date",label:"Fecha *"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"horaInicio",type:"time",label:"Inicio *"}),m.jsx(ze,{name:"horaCierre",type:"time",label:"Cierre *"})]})]})},{icon:"",title:"Capacidad",content:m.jsx(bl,{title:"Capacidad",children:m.jsx(xt,{name:"capacidad",label:"Capacidad esperada *",options:["0 a 200","201 a 500","501 a 1000","Ms de 1000"]})})},{icon:"",title:"Contacto organizador",content:m.jsxs(bl,{title:"Contacto organizador",children:[m.jsx(ze,{name:"promotor",label:"Promotor *"}),m.jsx(ze,{name:"telefono",label:"Telfono *"}),m.jsx(ze,{name:"email",type:"email",label:"Email *"})]})},{icon:"",title:"Concepto & Experiencia",content:m.jsxs(bl,{title:"Concepto & Experiencia",children:[m.jsx(Dd,{name:"desc",label:"Descripcin *",rows:4}),m.jsx(CN,{name:"generos",label:"Gneros musicales *",options:[...r]}),t.watch("generos")?.includes("Otros")&&m.jsx(ze,{name:"generosOtro",label:"Cul otro gnero?",value:e,onChange:i=>n(i.target.value)})]})},{icon:"",title:"Polticas del evento",content:m.jsxs(bl,{title:"Polticas del evento",children:[m.jsx(xt,{name:"edad",label:"Edad mnima *",options:Array.from({length:53},(i,a)=>`${a+18}`)}),m.jsx(xt,{name:"dress_code",label:"Dress code *",options:["Casual","Formal","Semi-formal","Urbano","Temtico"]}),m.jsx(xt,{name:"tieneVip",label:"Zonas VIP?",options:["No","1","2","Ms de 5"]}),m.jsx(xt,{name:"reservas",label:"Acepta reservas?",options:["S","No"]}),m.jsx(xt,{name:"tieneLineup",label:"Tendr Lineup?",options:["S","No"]}),m.jsx(VN,{})]})},{icon:"",title:"Flyer & Seguridad",content:m.jsxs(bl,{title:"Flyer & Seguridad",children:[m.jsx(Hr,{name:"flyer",label:"Flyer del evento"}),m.jsx(Hr,{name:"imgSec",label:"Imagen secundaria"})]})},{icon:"",title:"Revisin",content:m.jsx(bl,{title:"Revisin final",children:m.jsx("p",{className:"text-white/70",children:"Revisa todos los datos antes de enviar."})})}]}const V1=["user","productor","club_owner","admin"],zN=["admin","club_owner","productor","user"],d7=["productor","club_owner","ambos"],h7=["pendiente","aprobada","rechazada"];function f7(t){return zN.includes(String(t))?t:"user"}function m7(t){return t==null||t===""?null:zN.includes(String(t))?t:null}function p7(t){return t==null||t===""?null:d7.includes(String(t))?t:null}function g7(t){return t==null||t===""?null:h7.includes(String(t))?t:null}function y7(t){return t===!0||t==="true"||t===1||t==="1"}function _7(t){return{uid:String(t.uid),nombre:t.nombre??null,correo:t.correo??null,rol:f7(t.rol),rol_extra:m7(t.rol_extra),can_create_event:y7(t.can_create_event),solicitud_tipo:p7(t.solicitud_tipo),solicitud_estado:g7(t.solicitud_estado),solicitud_enviada_at:t.solicitud_enviada_at??null,is_active:t.is_active!==!1}}function F1(t,e){return e&&t===e?{r1:t,r2:null}:{r1:t,r2:e??null}}function k_(t,e){const n=t.rol==="admin"||t.rol_extra==="admin",r=[];n&&r.push("admin");for(const u of e){if(r.length>=2)break;r.includes(u)||r.push(u)}const i=[t.rol,...t.rol_extra?[t.rol_extra]:[]];for(const u of i){if(r.length>=2)break;r.includes(u)||r.push(u)}r.length===0&&r.push("user"),r.length===1&&!r.includes("user")&&r.push("user");const a=Array.from(new Set(r)).slice(0,2);return{rol:a[0],rol_extra:a[1]??null}}function v7(t){const e={rol:t.rol,rol_extra:t.rol_extra},n=t.solicitud_tipo;return n?n==="productor"?k_(e,["productor"]):n==="club_owner"?k_(e,["club_owner"]):k_(e,["productor","club_owner"]):e}function ap(t){const e=["admin","productor","club_owner"];return e.includes(t.rol)||!!t.rol_extra&&e.includes(t.rol_extra)}function lp(t){return!!t}function up(t){return ap(t)||t.solicitud_estado==="aprobada"}function U1(t){return t.is_active&&lp(t.solicitud_enviada_at)&&!up(t)&&t.solicitud_estado!=="rechazada"}function z1(t){if(!t)return 0;const e=new Date(t).getTime();return Number.isFinite(e)?e:0}function w7(){const{dbUser:t,loading:e}=ir(),[n,r]=N.useState([]),[i,a]=N.useState({}),[u,h]=N.useState(!0),[f,_]=N.useState(!1),[v,T]=N.useState(null),[E,A]=N.useState("none"),[D,U]=N.useState("active");if(N.useEffect(()=>{let M=!0;return(async()=>{h(!0),T(null);try{const le=(await Nr(fr(rn,"usersWeb"))).docs.map(me=>_7({uid:me.id,...me.data()}));M&&r(le)}catch(k){console.error("load usersWeb:",k),T(k.message),r([])}M&&h(!1)})(),()=>{M=!1}},[]),!e&&t&&t.rol!=="admin")return m.jsx($k,{});const H=M=>a(k=>({...k,[M.uid]:M})),W=(M,k)=>{r(le=>le.map(me=>{if(me.uid!==M)return me;const{r1:ve,r2:Ee}=F1(k,me.rol_extra),J={...me,rol:ve,rol_extra:Ee};return H(J),J}))},G=(M,k)=>{const le=k||"";r(me=>me.map(ve=>{if(ve.uid!==M)return ve;if(le===""){const he={...ve,rol_extra:null};return H(he),he}const{r1:Ee,r2:J}=F1(ve.rol,le),xe={...ve,rol:Ee,rol_extra:J};return H(xe),xe}))},$=(M,k)=>{r(me=>me.map(ve=>ve.uid===M?{...ve,can_create_event:k}:ve));const le=n.find(me=>me.uid===M);le&&H({...le,can_create_event:k})},se=M=>{r(k=>k.map(le=>{if(le.uid!==M)return le;const me=v7(le),ve={...le,...me,is_active:!0,can_create_event:!0,solicitud_estado:"aprobada"};return H(ve),ve})),Fn.success("Usuario confirmado (recuerda Guardar cambios).")},oe=M=>{r(k=>k.map(le=>{if(le.uid!==M)return le;const me={...le,is_active:!1,can_create_event:!1,solicitud_estado:"rechazada"};return H(me),me})),Fn("Usuario deshabilitado (recuerda Guardar cambios).",{icon:""})},ee=M=>{r(k=>k.map(le=>{if(le.uid!==M)return le;const me={...le,is_active:!0,solicitud_estado:le.solicitud_enviada_at?le.solicitud_estado:null};return H(me),me})),Fn.success("Usuario habilitado (recuerda Guardar cambios).")},F=async()=>{const M=Object.values(i);if(M.length!==0)try{_(!0),await Promise.all(M.map(k=>{const le=k.is_active?ap(k)?"aprobada":k.solicitud_estado??null:"rechazada",me=k.is_active?k.can_create_event:!1,ve=Bn(rn,"usersWeb",k.uid);return Jl(ve,{rol:k.rol,rol_extra:k.rol_extra,can_create_event:me,is_active:k.is_active,solicitud_estado:le})})),r(k=>k.map(le=>{const me=M.find(J=>J.uid===le.uid);if(!me)return le;const ve=me.is_active?ap(me)?"aprobada":me.solicitud_estado??null:"rechazada",Ee=me.is_active?me.can_create_event:!1;return{...le,...me,solicitud_estado:ve,can_create_event:Ee}})),Fn.success("Cambios guardados"),a({})}catch(k){console.error("update usersWeb:",k),Fn.error(k.message||"Error guardando cambios")}finally{_(!1)}},j=Object.keys(i).length>0,V=N.useMemo(()=>n.filter(M=>M.is_active&&lp(M.solicitud_enviada_at)&&M.solicitud_estado!=="aprobada"&&M.solicitud_estado!=="rechazada"&&!ap(M)).length,[n]),B=N.useMemo(()=>{const M=[...n];return E==="pending-first"?M.sort((k,le)=>{const me=U1(k)?1:0,ve=U1(le)?1:0;if(ve!==me)return ve-me;if(me&&ve){const Ee=z1(k.solicitud_enviada_at),J=z1(le.solicitud_enviada_at);if(J!==Ee)return J-Ee}return(k.nombre??"").toLowerCase().localeCompare((le.nombre??"").toLowerCase())}):E==="approved-first"?M.sort((k,le)=>{const me=up(k)?1:0,ve=up(le)?1:0;return ve!==me?ve-me:(k.nombre??"").toLowerCase().localeCompare((le.nombre??"").toLowerCase())}):M.sort((k,le)=>(k.nombre??"").toLowerCase().localeCompare((le.nombre??"").toLowerCase())),M},[n,E]),z=N.useMemo(()=>D==="all"?B:D==="active"?B.filter(M=>M.is_active):B.filter(M=>!M.is_active),[B,D]);return e||u?m.jsx("main",{className:"bg-black text-white px-4 py-16",children:m.jsx("div",{className:"max-w-5xl mx-auto",children:"Cargando"})}):m.jsx("main",{className:"text-white px-4 py-16",children:m.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[m.jsxs("header",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-extrabold",children:["Panel ",m.jsx("span",{className:"text-[#8e2afc]",children:"de usuarios"})]}),V>0&&m.jsxs("p",{className:"text-sm text-amber-300 mt-1",children:["Hay ",V," solicitud(es) pendientes de revisin."]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[m.jsxs("div",{className:"inline-flex rounded-md border border-white/10 overflow-hidden",children:[m.jsx("button",{className:`px-3 py-1.5 text-sm ${D==="active"?"bg-white/10 text-white":"text-white/70 hover:bg-white/5"}`,onClick:()=>U("active"),children:"Activos"}),m.jsx("button",{className:`px-3 py-1.5 text-sm ${D==="disabled"?"bg-white/10 text-white":"text-white/70 hover:bg-white/5"}`,onClick:()=>U("disabled"),children:"Deshabilitados"}),m.jsx("button",{className:`px-3 py-1.5 text-sm ${D==="all"?"bg-white/10 text-white":"text-white/70 hover:bg-white/5"}`,onClick:()=>U("all"),children:"Todos"})]}),m.jsxs("label",{className:"text-sm text-white/80",children:["Ordenar:",m.jsxs("select",{className:"bg-zinc-800 border border-zinc-700 rounded px-2 py-1 text-white",value:E,onChange:M=>A(M.target.value),children:[m.jsx("option",{value:"none",children:"Sin orden especial"}),m.jsx("option",{value:"pending-first",children:"Pendientes primero"}),m.jsx("option",{value:"approved-first",children:"Aprobados primero"})]})]}),m.jsx("button",{className:`rounded-md px-4 py-2 font-semibold transition ${j?"bg-[#8e2afc] text-white hover:opacity-90":"bg-zinc-700 text-zinc-400 cursor-not-allowed"}`,disabled:!j||f,onClick:F,children:f?"Guardando":"Guardar cambios"})]})]}),v&&m.jsxs("p",{className:"text-red-400",children:["Error: ",v]}),m.jsx("div",{className:"overflow-x-auto rounded-lg border border-zinc-800",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{className:"bg-zinc-900/60 text-left",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Nombre"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Correo"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Estado"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rol 1"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rol 2 (opcional)"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Puede crear eventos"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Solicitud"}),m.jsx("th",{className:"px-4 py-3 font-semibold",children:"Acciones"})]})}),m.jsx("tbody",{children:z.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-zinc-400",children:"No hay usuarios en esta vista."})}):z.map(M=>{const k=V1.filter(xe=>xe!==M.rol),le=up(M),me=M.solicitud_estado==="rechazada",ve=M.is_active?"text-emerald-300 bg-emerald-500/15 border-emerald-400/30":"text-rose-300 bg-rose-500/15 border-rose-400/30",Ee=le?"text-emerald-300 bg-emerald-500/15 border-emerald-400/30":me?"text-rose-300 bg-rose-500/15 border-rose-400/30":lp(M.solicitud_enviada_at)?"text-amber-300 bg-amber-500/15 border-amber-400/30":"text-white/60 bg-white/10 border-white/20",J=le?"aprobada":me?"rechazada":lp(M.solicitud_enviada_at)?"pendiente":"";return m.jsxs("tr",{className:"border-t border-zinc-800 hover:bg-zinc-900/30",children:[m.jsx("td",{className:"px-4 py-3",children:M.nombre??""}),m.jsx("td",{className:"px-4 py-3",children:M.correo??""}),m.jsx("td",{className:"px-4 py-3",children:m.jsx("span",{className:`inline-flex w-fit items-center rounded-full border px-2 py-0.5 text-[11px] ${ve}`,children:M.is_active?"Activo":"Deshabilitado"})}),m.jsx("td",{className:"px-4 py-3",children:m.jsx("select",{className:"bg-zinc-800 border border-zinc-700 rounded px-2 py-1",value:M.rol,onChange:xe=>W(M.uid,xe.target.value),disabled:!M.is_active,title:M.is_active?void 0:"Usuario deshabilitado",children:V1.map(xe=>m.jsx("option",{value:xe,children:xe},xe))})}),m.jsx("td",{className:"px-4 py-3",children:m.jsxs("select",{className:"bg-zinc-800 border border-zinc-700 rounded px-2 py-1",value:M.rol_extra??"",onChange:xe=>G(M.uid,xe.target.value),disabled:!M.is_active,title:M.is_active?void 0:"Usuario deshabilitado",children:[m.jsx("option",{value:"",children:" ninguno "}),k.map(xe=>m.jsx("option",{value:xe,children:xe},xe))]})}),m.jsx("td",{className:"px-4 py-3",children:m.jsxs("label",{className:"inline-flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-[#8e2afc]",checked:M.can_create_event,onChange:xe=>$(M.uid,xe.target.checked),disabled:!M.is_active}),m.jsx("span",{className:"text-sm text-zinc-300",children:"S"})]})}),m.jsx("td",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx("span",{className:`inline-flex w-fit items-center rounded-full border px-2 py-0.5 text-[11px] ${Ee}`,children:J}),m.jsx("span",{className:"text-xs text-white/70",children:M.solicitud_tipo?`Tipo: ${M.solicitud_tipo}`:"Tipo: "}),m.jsx("span",{className:"text-xs text-white/50",children:M.solicitud_enviada_at?new Date(M.solicitud_enviada_at).toLocaleString():"Sin envo"})]})}),m.jsx("td",{className:"px-4 py-3",children:M.is_active?le?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] text-emerald-300 bg-emerald-500/15 border-emerald-400/30",children:"Aprobado"}),m.jsx("button",{className:"px-3 py-1.5 rounded bg-rose-600/90 hover:bg-rose-600 text-white text-xs",onClick:()=>oe(M.uid),children:"Deshabilitar"})]}):m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{className:"px-3 py-1.5 rounded bg-emerald-600/90 hover:bg-emerald-600 text-white text-xs",onClick:()=>se(M.uid),children:"Confirmar"}),m.jsx("button",{className:"px-3 py-1.5 rounded bg-rose-600/90 hover:bg-rose-600 text-white text-xs",onClick:()=>oe(M.uid),children:"Deshabilitar"})]}):m.jsx("button",{className:"px-3 py-1.5 rounded bg-sky-600/90 hover:bg-sky-600 text-white text-xs",onClick:()=>ee(M.uid),children:"Habilitar"})})]},M.uid)})})]})}),j&&m.jsx("p",{className:"text-xs text-zinc-400",children:"Tienes cambios sin guardar."})]})})}function x7(){const{user:t,dbUser:e,rol:n,loading:r}=ir();return r?m.jsx("p",{className:"text-white",children:"Cargando contexto de autenticacin"}):m.jsxs("div",{className:"p-6 bg-neutral-900 text-white rounded-md",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:" Debug Firebase Auth & Firestore"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("strong",{children:"Firebase Auth User:"}),m.jsx("pre",{className:"overflow-auto max-h-48 bg-black/50 p-2 rounded",children:JSON.stringify(t,null,2)})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("strong",{children:"Firestore usersWeb Doc:"}),m.jsx("pre",{className:"overflow-auto max-h-48 bg-black/50 p-2 rounded",children:JSON.stringify(e,null,2)})]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Rol:"})," ",m.jsx("code",{children:n??""})]})]})}function b7(){const[t,e]=N.useState([]),[n,r]=N.useState(0),[i,a]=N.useState(!0),u=Li();N.useEffect(()=>{(async()=>{const v=(await Nr(fr(rn,"Eventos"))).docs.map(T=>({id:T.id,nombre:T.data().nombre,flyer:T.data().flyer}));e(v)})()},[]),N.useEffect(()=>{if(t.length===0)return;const f=setInterval(()=>{a(!1),setTimeout(()=>{r(_=>(_+1)%t.length),a(!0)},1e3)},5e3);return()=>clearInterval(f)},[t]);const h=t[n];return h?m.jsxs("div",{className:`relative h-[300px] sm:h-[400px] md:h-[500px] w-full cursor-pointer transition-opacity duration-500 ${i?"opacity-100":"opacity-0"}`,onClick:()=>u(`/mis-eventos/${h.id}`),children:[m.jsx("img",{src:h.flyer,alt:h.nombre,className:"w-full h-full object-cover absolute inset-0"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-black/20 flex items-end px-6 pb-4 z-10",children:m.jsx("h1",{className:"text-white text-2xl md:text-4xl font-bold",children:h.nombre})})]}):null}function T7(){const[t,e]=N.useState([]),n=N.useRef(null),r=Li();return N.useEffect(()=>{(async()=>{const u=(await Nr(fr(rn,"club"))).docs.map(h=>({id:h.id,nombre:h.data().nombre,imagen:h.data().imagen}));e(u)})()},[]),N.useEffect(()=>{const i=setInterval(()=>{if(n.current){const{scrollLeft:a,scrollWidth:u,clientWidth:h}=n.current;a+h>=u?n.current.scrollTo({left:0,behavior:"smooth"}):n.current.scrollBy({left:180,behavior:"smooth"})}},1500);return()=>clearInterval(i)},[]),m.jsx("div",{className:"w-full overflow-x-hidden",children:m.jsx("div",{ref:n,className:"flex gap-4 px-4 py-2 overflow-x-auto no-scrollbar scroll-smooth",children:t.map(i=>m.jsxs("div",{className:"min-w-[160px] sm:min-w-[180px] cursor-pointer",onClick:()=>{localStorage.setItem("adminSelectedClubId",i.id),r("/miClub")},children:[m.jsx("img",{src:i.imagen,alt:i.nombre,className:"rounded-lg w-full h-[140px] object-cover"}),m.jsx("p",{className:"mt-2 text-white text-sm text-center truncate",children:i.nombre})]},i.id))})})}function E7(){const[t,e]=N.useState(""),[n,r]=N.useState([]),[i,a]=N.useState([]),[u,h]=N.useState(!1),f=Li(),_=N.useRef(null);N.useEffect(()=>{(async()=>{const D=(await Nr(fr(rn,"club"))).docs.map(U=>({id:U.id,nombre:U.data().nombre}));a(D)})()},[]),N.useEffect(()=>{const E=A=>{_.current&&!_.current.contains(A.target)&&h(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const v=E=>{const A=E.target.value;if(e(A),h(!0),A.trim()===""){const D=[...i].sort(()=>.5-Math.random()).slice(0,10);r(D)}else{const D=i.filter(U=>U.nombre.toLowerCase().includes(A.toLowerCase())).slice(0,10);r(D)}},T=E=>{localStorage.setItem("adminSelectedClubId",E),f("/club"),h(!1)};return m.jsxs("div",{className:"w-full px-4 md:px-12 mt-4 relative z-20",ref:_,children:[m.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-full px-4 py-2",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-white",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"})}),m.jsx("input",{type:"text",placeholder:"Busca clubes, eventos o productoras",className:"bg-transparent text-white outline-none placeholder:text-white/60 flex-1",value:t,onChange:v,onFocus:()=>v({target:{value:t}})})]}),u&&n.length>0&&m.jsx("ul",{className:"absolute mt-2 w-full bg-black/90 border border-white/10 rounded-xl shadow-lg overflow-hidden max-h-60 overflow-y-auto",children:n.map(E=>m.jsx("li",{onClick:()=>T(E.id),className:"px-4 py-2 text-white hover:bg-white/10 cursor-pointer",children:E.nombre},E.id))})]})}function S7({clubs:t}){const[e,n]=N.useState([]),r=Li();return N.useEffect(()=>{(async()=>{const u=(await Nr(fr(rn,"club"))).docs.map(h=>({id:h.id,...h.data()}));n(u)})()},[]),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 px-4 mb-10",children:t.map(i=>m.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-2xl overflow-hidden cursor-pointer hover:scale-105 transition",onClick:()=>{localStorage.setItem("adminSelectedClubId",i.id),r("/miClub")},children:[m.jsx("img",{src:i.imagen,alt:i.nombre,className:"w-full h-36 object-cover"}),m.jsxs("div",{className:"p-3 text-white",children:[m.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:i.nombre}),i.direccion&&m.jsx("p",{className:"text-sm opacity-70 line-clamp-1",children:i.direccion})]})]},i.id))})}function C7({value:t,setValue:e,min:n=1,max:r=50,step:i=1}){return m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 my-6",children:[m.jsxs("div",{className:"flex items-center gap-2 text-white/70 font-medium",children:[m.jsx(f5,{className:"w-5 h-5 text-[#8e2afc]"}),m.jsx("span",{children:"Buscar clubes en:"})]}),m.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[m.jsx("input",{type:"range",min:n,max:r,value:t,step:i,onChange:a=>e(Number(a.target.value)),className:"distance-slider w-full accent-[#8e2afc] ",style:{accentColor:"#8e2afc",background:`linear-gradient(90deg, #8e2afc ${(t-n)/(r-n)*100}%, #fff1 0%)`}}),m.jsxs("div",{className:"w-20 flex flex-col items-center justify-center py-2 rounded-lg bg-gradient-to-br from-[#8e2afc] to-[#381a63] shadow-xl text-white font-bold text-lg ring-2 ring-[#8e2afc] animate-pulse",style:{minWidth:60},children:[m.jsx("span",{children:t}),m.jsx("span",{className:"text-xs font-normal text-white/80",children:"km"})]})]})]})}function I7(t,e,n,r){const a=(n-t)*Math.PI/180,u=(r-e)*Math.PI/180,h=.5-Math.cos(a)/2+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*(1-Math.cos(u))/2;return 6371*2*Math.asin(Math.sqrt(h))}function B1(){const[t,e]=N.useState([]),[n,r]=N.useState(20),[i,a]=N.useState(null);N.useEffect(()=>{async function h(){const f=fr(rn,"club"),v=(await Nr(f)).docs.map(T=>({id:T.id,...T.data()}));e(v),console.log("Clubes cargados:",v)}h()},[]),N.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(h=>{a({lat:h.coords.latitude,lng:h.coords.longitude}),console.log("Ubicacin obtenida:",h.coords.latitude,h.coords.longitude)},h=>{a(null),console.error("Error obteniendo ubicacin:",h)})},[]);const u=Lt.useMemo(()=>i?t.filter(h=>{if(!h.latitud||!h.longitud)return console.log("Club sin coordenadas:",h),!1;const f=I7(i.lat,i.lng,h.latitud,h.longitud);return console.log(`Club ${h.nombre}: lat=${h.latitud} lng=${h.longitud} distancia=${f}km filtro=${n}km`),f<=n}):(console.log("userLocation es null, mostrando todos los clubes"),t),[t,i,n]);return m.jsxs("div",{className:"space-y-12",children:[m.jsx(b7,{}),m.jsxs("div",{className:"px-4 sm:px-8",children:[m.jsx(T7,{}),m.jsx(E7,{}),m.jsx("div",{className:"mt-4",children:m.jsx(C7,{value:n,setValue:r})}),m.jsx(S7,{clubs:u})]})]})}const P7=t=>{if(Array.isArray(t))return t;if(typeof t=="string"){const e=t.split(/[,;|]/).map(n=>n.trim()).filter(Boolean);return e.length>0?e:[]}return[]};function Uc(t){const e=t.fecha,n=t.horaInicio??"00:00";return e.includes("T")?new Date(e):new Date(`${e}T${n}`)}function A7(){const{user:t}=ir(),[e,n]=N.useState([]),[r,i]=N.useState(!0),[a,u]=N.useState("upcoming");N.useEffect(()=>{(async()=>{if(t){i(!0);try{const E=fr(rn,"Eventos"),A=ga(E,ya("uid_usersWeb","==","/usersWeb/"+t.uid)),U=(await Nr(A)).docs.map(H=>{const W=H.data();return{id_evento:H.id,uid_usersWeb:W.uid,nombre:W.nombre,tipo:W.tipo,fecha:W.fecha,horaInicio:W.horaInicio??null,horaCierre:W.horaCierre??null,flyer:W.flyer??null,imgSec:W.imgSec??null,desc:W.desc??null,generos:W.generos??null}});n(U)}catch(E){console.error("Error cargando eventos:",E)}finally{i(!1)}}})()},[t]);const h=new Date,{upcoming:f,past:_}=N.useMemo(()=>{const T=[],E=[];for(const A of e){const D=Uc(A);isNaN(D.getTime())||D<=h?E.push(A):T.push(A)}return T.sort((A,D)=>Uc(A).getTime()-Uc(D).getTime()),E.sort((A,D)=>Uc(D).getTime()-Uc(A).getTime()),{upcoming:T,past:E}},[e]),v=a==="upcoming"?f:_;return r?m.jsx("p",{className:"text-white",children:"Cargando eventos..."}):e.length===0?m.jsx("p",{className:"text-white/80",children:"No tienes eventos registrados."}):m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"flex gap-2 mb-6 bg-white/5 p-1 rounded-lg border border-white/10 w-fit",children:[m.jsxs("button",{onClick:()=>u("upcoming"),className:`px-4 py-2 rounded-md text-sm transition ${a==="upcoming"?"bg-[#8e2afc] text-white":"text-white/80 hover:text-white"}`,children:["Prximos (",f.length,")"]}),m.jsxs("button",{onClick:()=>u("past"),className:`px-4 py-2 rounded-md text-sm transition ${a==="past"?"bg-[#8e2afc] text-white":"text-white/80 hover:text-white"}`,children:["Realizados (",_.length,")"]})]}),m.jsx("p",{className:"text-white/70 mb-4",children:a==="upcoming"?"Eventos posteriores a la fecha/hora actual.":"Eventos que ya se realizaron."}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>{const E=P7(T.generos),A=Uc(T),D=isNaN(A.getTime())?T.fecha:A.toLocaleString();return m.jsxs("div",{className:"bg-neutral-900 rounded-lg overflow-hidden border border-white/10 shadow-md hover:shadow-[#8e2afc]/20 transition",children:[T.flyer?m.jsx("img",{src:T.flyer,alt:T.nombre,className:"w-full h-48 object-cover"}):m.jsx("div",{className:"w-full h-48 bg-white/10 flex items-center justify-center text-white/40 text-sm",children:"Sin imagen"}),m.jsxs("div",{className:"p-4 text-white space-y-2",children:[m.jsx("h3",{className:"text-lg font-semibold",children:T.nombre}),m.jsxs("p",{className:"text-sm text-white/70",children:[m.jsx("span",{className:"font-medium",children:"Tipo:"})," ",T.tipo]}),m.jsxs("p",{className:"text-sm text-white/70",children:[m.jsx("span",{className:"font-medium",children:"Fecha:"})," ",D]}),T.desc&&m.jsx("p",{className:"text-sm text-white/70 mt-1 line-clamp-2",children:T.desc}),E.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:E.map(U=>m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/20 text-[#cbb3ff] border border-[#8e2afc]/30",children:U},U))}),m.jsx("div",{className:"pt-3",children:m.jsx(Pr,{to:`/mis-eventos/${T.id_evento}`,className:"inline-flex items-center justify-center px-3 py-2 rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0] text-sm",children:"Ir a mi evento"})})]})]},T.id_evento)})}),v.length===0&&m.jsx("div",{className:"text-white/70 mt-6",children:a==="upcoming"?"No tienes eventos prximos.":"No tienes eventos realizados."})]})}function k7(){return m.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4 text-white",children:"Mis eventos"}),m.jsx(A7,{})]})}const N7=t=>{if(typeof t=="boolean")return t;if(t==null)return!1;const e=String(t).toLowerCase();return e==="si"||e==="s"||e==="true"||e==="1"},R7=t=>{const e=String(t??"");if(e.toLowerCase()==="no"||e===""||e==="0")return 0;if(e.toLowerCase().includes("ms de"))return 6;const n=Number(e);return Number.isFinite(n)?n:0},L7=t=>!t||t<=0?"No":t>5?"Ms de 5":String(t),j7=t=>t?"S":"No",$1=t=>{if(Array.isArray(t))return t;if(typeof t=="string"){const e=t.split(/[,;|]/).map(n=>n.trim()).filter(Boolean);return e.length?e:t?[t]:[]}return[]},D7=cs({nombre:fe().min(1),tipo:fe().min(1),fecha:fe().min(1),horaInicio:fe().optional().or(Je("")),horaCierre:fe().optional().or(Je("")),capacidad:fe().min(1),presupuesto:fe().optional().or(Je("")),promotor:fe().min(1),telefono:fe().min(1),email:fe().email(),desc:fe().optional().or(Je("")),generos:Zp(fe()).optional().default([]),edad:fe().refine(t=>{const e=Number(t);return Number.isInteger(e)&&e>=18&&e<=70},{message:"Selecciona una edad vlida"}),dress_code:fe().min(1),tieneVip:fe().optional().default("No"),reservas:kt([Ot(),fe()]).default("No"),tieneLineup:kt([Ot(),fe()]).default("No"),djs:Zp(fe()).optional().default([]),flyer:Kn().optional().nullable(),imgSec:Kn().optional().nullable(),generosOtro:fe().optional(),cantidadDJs:Nl()}),M7=["Reguetn","Techno","House","Pop","Salsa","Hardstyle","Trance","Hip-Hop","Urbano","Guaracha","Otros"],H1=t=>{try{return new Intl.DateTimeFormat("es",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}).format(new Date(t))}catch{return t}},W1=t=>t?t.slice(0,5):"",O7=(t,e)=>{const n=W1(t),r=W1(e);return n&&r?`${n}  ${r}`:n||r||""};function V7(){const{id:t}=u2(),e=Li(),[n,r]=N.useState(!0),[i,a]=N.useState(!1),[u,h]=N.useState(!1),[f,_]=N.useState(null),[v,T]=N.useState(!1),[E,A]=N.useState(!1),[D,U]=N.useState(!1),H=N.useRef(null),W=N.useRef(null),G=Ea({resolver:Sa(D7),defaultValues:void 0,mode:"onChange"});N.useEffect(()=>{(async()=>{if(!t)return;r(!0);const k=Bn(rn,"Eventos",t),le=await _a(k);if(!le.exists()){Et.error("No se pudo cargar el evento"),r(!1);return}const me=le.data();me.id_evento=t,_(me);const ve=me.lineup||Array.isArray(me.djs)&&me.djs.length>0?"S":"No",Ee=me.edad!==null&&me.edad!==void 0?String(me.edad):"18",J=$1(me.generos),xe={nombre:me.nombre,tipo:me.tipo,fecha:me.fecha,horaInicio:me.horaInicio??"",horaCierre:me.horaCierre??"",capacidad:me.capacidad??"",presupuesto:me.presupuesto??"",promotor:me.promotor??"",telefono:me.telefono??"",email:me.email??"",desc:me.desc??"",generos:J,edad:Ee,dress_code:me.dress_code??"",tieneVip:L7(me.cantidadZonasVip),reservas:j7(me.aceptaReservas),tieneLineup:ve,djs:Array.isArray(me.djs)?me.djs:[],flyer:"",imgSec:"",generosOtro:"",cantidadDJs:Number(me.cantidadDJs)};G.reset(xe),H.current=xe,r(!1)})()},[t]);const $=N.useMemo(()=>{if(!f?.fecha)return!1;const k=f.horaCierre||f.horaInicio||"00:00";return Date.now()>new Date(`${f.fecha}T${k}`).getTime()},[f]),oe=Ov({name:"generos",control:G.control})?.includes("Otros")??!1,ee=async(k,le)=>{if(!k)return null;const me=Aa(),ve=k.name.split(".").pop()||"jpg",Ee=`Eventos/${t}/${le}/${Date.now()}.${ve}`,J=Pa(me,Ee);return await Ca(J,k),Ia(J)},F=async k=>{if(f){a(!0);try{let le=[...k.generos??[]];k.generos.includes("Otros")&&k.generosOtro?.trim()&&(le=le.filter(Y=>Y!=="Otros"),le.push(k.generosOtro.trim()));const me=k.flyer instanceof File?await ee(k.flyer,"flyer"):null,ve=k.imgSec instanceof File?await ee(k.imgSec,"imgSec"):null,Ee={nombre:k.nombre,tipo:k.tipo,fecha:k.fecha,horaInicio:k.horaInicio||null,horaCierre:k.horaCierre||null,capacidad:k.capacidad,presupuesto:k.presupuesto||null,promotor:k.promotor,telefono:k.telefono,email:k.email,desc:k.desc||null,generos:le,edad:Number(k.edad),dress_code:k.dress_code,cantidadZonasVip:R7(k.tieneVip),aceptaReservas:N7(k.reservas),lineup:k.tieneLineup==="S",cantidadDJs:Number(k.cantidadDJs),djs:k.djs,flyer:me??f.flyer??null,imgSec:ve??f.imgSec??null},J=Bn(rn,"Eventos",t);await Jl(J,Ee),Et.success("Datos guardados");const xe={...f,...Ee};_(xe);const he={...k};G.reset(he),H.current=he,T(!1),A(!1)}catch(le){console.error(le),Et.error(le.message||"No se pudo guardar")}finally{a(!1)}}},j=async()=>{h(!0);try{const k=Bn(rn,"Eventos",t);await v3(k),Et.success("Evento eliminado"),U(!1),e("/mis-eventos")}catch(k){console.error(k),Et.error(k.message||"No se pudo eliminar el evento")}finally{h(!1)}};if(n)return m.jsx("div",{className:"p-6 text-white",children:"Cargando..."});if(!f)return m.jsxs("div",{className:"p-6 text-white",children:[m.jsx("p",{children:"No se encontr el evento."}),m.jsx(Pr,{to:"/mis-eventos",className:"text-[#8e2afc] underline",children:"Volver a mis eventos"})]});const V=$1(f.generos),B=O7(f.horaInicio,f.horaCierre),z=()=>U(!0),M=()=>{H.current&&G.reset(H.current),T(!1)};return m.jsxs("div",{className:"text-white",children:[m.jsxs("div",{className:"relative w-full h-[320px] md:h-[420px] overflow-hidden",children:[f.flyer?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:f.flyer,alt:"Flyer",className:"absolute w-full h-full object-cover scale-105"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-black/50 to-black"})]}):m.jsx("div",{className:"absolute bg-gradient-to-br from-[#25123e] via-[#381a63] to-[#8e2afc]"}),m.jsxs("div",{className:"relative h-full max-w-6xl mx-auto px-4 flex flex-col justify-end pb-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("span",{className:`text-xs px-2 py-1 rounded ${$?"bg-white/20 border border-white/20 text-Black/80":"bg-[#8e2afc]/60 border-[#8e2afc]/40 text-[#e4d7ff]"}`,children:$?"Realizado":"Prximo"}),!!f.dress_code&&m.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-[#151515]/80 border border-white/10",children:["Dress code: ",f.dress_code]}),!!f.edad&&m.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-[#151515]/80 border border-white/10",children:["+",f.edad]})]}),m.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold drop-shadow",children:f.nombre}),m.jsxs("p",{className:"text-white mt-1",children:[H1(f.fecha),"  ",B]}),V.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:V.map(k=>m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-[#e3d6ff] border border-[#8e2afc]/40",children:k},k))})]})]}),!$&&m.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:m.jsx("button",{type:"button",onClick:()=>T(!0),className:" px-5 py-2 rounded-md bg-[#8e2afc]/40 hover:bg-[#7b1fe0] transition",children:"Editar datos"})}),m.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[!v&&m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.desc&&m.jsxs("section",{className:"rounded-xl border border-white/10 bg-white/[0.03] backdrop-blur p-5",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-2",children:"Descripcin"}),m.jsx("p",{className:"text-white/80 leading-relaxed",children:f.desc})]}),m.jsxs("section",{className:"rounded-xl border border-white/10 bg-white/[0.03] backdrop-blur p-5",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff]",children:"Line-up"}),m.jsx("span",{className:"text-xs text-white/60",children:f.lineup?"Con line-up":"Sin line-up"})]}),Array.isArray(f.djs)&&f.djs.length>0?m.jsx("ul",{className:"mt-3 grid sm:grid-cols-2 gap-2",children:f.djs.map((k,le)=>m.jsxs("li",{className:"px-3 py-2 rounded border border-white/10 bg-white/5 text-sm flex items-center gap-2",children:[m.jsx("span",{className:"inline-flex w-6 h-6 rounded-full bg-[#8e2afc]/30 border border-[#8e2afc]/50 text-center items-center justify-center text-xs",children:le+1}),m.jsx("span",{className:"truncate",children:k})]},`${k}-${le}`))}):m.jsx("p",{className:"text-white/60 mt-2 text-sm",children:"No se registraron DJs."})]}),m.jsxs("section",{className:"rounded-xl border border-white/10 bg-white/[0.03] backdrop-blur p-5",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-3",children:"Galera"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx("figure",{className:"rounded-lg overflow-hidden border border-white/10",children:f.flyer?m.jsx("img",{src:f.flyer,className:"w-full h-64 object-cover",alt:"Flyer"}):m.jsx("div",{className:"w-full h-64 grid place-items-center text-white/40 bg-white/5",children:"Sin flyer"})}),m.jsx("figure",{className:"rounded-lg overflow-hidden border border-white/10",children:f.imgSec?m.jsx("img",{src:f.imgSec,className:"w-full h-64 object-cover",alt:"Imagen secundaria"}):m.jsx("div",{className:"w-full h-64 grid place-items-center text-white/40 bg-white/5",children:"Sin imagen secundaria"})})]})]})]}),m.jsxs("aside",{className:"space-y-6",children:[m.jsxs(N_,{title:"Resumen",children:[m.jsx(js,{k:"Tipo",v:f.tipo}),m.jsx(js,{k:"Fecha",v:H1(f.fecha)}),m.jsx(js,{k:"Horario",v:B}),m.jsx(js,{k:"Capacidad",v:f.capacidad||""}),f.presupuesto&&m.jsx(js,{k:"Presupuesto",v:f.presupuesto}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[m.jsx(q1,{label:`+${f.edad??18}`}),m.jsx(q1,{label:`Dress code: ${f.dress_code||""}`})]})]}),m.jsxs(N_,{title:"Polticas",children:[m.jsx(js,{k:"Zonas VIP",v:f.cantidadZonasVip+" zona(s)"}),m.jsx(js,{k:"Reservas",v:f.aceptaReservas?"S":"No"}),m.jsx(js,{k:"Line-up",v:f.lineup?`S  ${f.cantidadDJs??0} DJ(s)`:"No"})]}),m.jsxs(N_,{title:"Contacto",children:[m.jsx(js,{k:"Promotor",v:f.promotor||""}),m.jsx(js,{k:"Telfono",v:f.telefono?m.jsx("a",{href:`tel:${f.telefono}`,className:"text-[#cbb3ff] hover:underline",children:f.telefono}):""}),m.jsx(js,{k:"Email",v:f.email?m.jsx("a",{href:`mailto:${f.email}`,className:"text-[#cbb3ff] hover:underline",children:f.email}):""})]})]})]}),v&&m.jsx(Ta,{...G,children:m.jsxs("form",{ref:W,onSubmit:G.handleSubmit(()=>A(!0)),className:"space-y-6 mt-2",noValidate:!0,children:[m.jsxs("section",{className:"rounded-xl border border-rose-500/30 bg-rose-500/10 p-4",children:[m.jsx("h3",{className:"text-sm font-semibold text-rose-300 mb-1",children:"Zona peligrosa"}),m.jsxs("p",{className:"text-white/70 text-sm mb-3",children:["Eliminar este evento es ",m.jsx("b",{children:"irreversible"}),". Se borrarn sus datos y no hay vuelta atrs."]}),m.jsxs("div",{className:"flex gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:z,disabled:u,className:"px-4 py-2 rounded bg-rose-600 hover:bg-rose-500 text-white disabled:opacity-60",children:u?"Eliminando":"Eliminar evento"}),m.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] disabled:opacity-60",children:"Cancelar"})]})]}),m.jsxs(zc,{title:"Informacin del Evento",children:[m.jsx(ze,{name:"nombre",label:"Nombre del Evento *",placeholder:"Ej: PURPLE NIGHTS  MIDNIGHT VIBES"}),m.jsx(xt,{name:"tipo",label:"Tipo de Evento *",options:["Club","Festival","After","Privado","Open Air","Bar"],placeholder:"Selecciona el tipo"})]}),m.jsxs(zc,{title:"Fecha & Horario",children:[m.jsx(ze,{name:"fecha",type:"date",label:"Fecha del Evento *"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"horaInicio",type:"time",label:"Hora de Inicio *"}),m.jsx(ze,{name:"horaCierre",type:"time",label:"Hora de Cierre *"})]})]}),m.jsxs(zc,{title:"Capacidad & Contacto",children:[m.jsx(xt,{name:"capacidad",label:"Capacidad esperada *",options:["0 a 200","201 a 500","501 a 1000","1001 a 2000","Ms de 2000"],placeholder:"Selecciona una opcin"}),m.jsx(ze,{name:"promotor",label:"Nombre del Promotor *",placeholder:"Tu nombre o nombre artstico"}),m.jsx(ze,{name:"telefono",label:"WhatsApp/Telfono *",placeholder:"+56 9 1234 5678"}),m.jsx(ze,{name:"email",type:"email",label:"Email *",placeholder:"promotor@goup.com"}),m.jsx(ze,{name:"presupuesto",label:"Presupuesto (opcional)",placeholder:"USD/CLP/etc."})]}),m.jsxs(zc,{title:"Concepto & Experiencia",children:[m.jsx(Dd,{name:"desc",label:"Describe la atmsfera, msica, efectos especiales, dress code, etc. *",rows:5,placeholder:"Gnero musical, DJ lineup, luces, mquinas de humo, dress code, ..."}),m.jsx(CN,{name:"generos",label:"Gneros musicales (puedes elegir varios) *",options:[...M7]}),oe&&m.jsx(ze,{name:"generosOtro",label:"Especifica el otro gnero musical",placeholder:"Ej: Funk Carioca, Experimental, Indie, etc."})]}),m.jsxs(zc,{title:"Polticas del evento",children:[m.jsx(xt,{name:"edad",label:"Edad mnima para el ingreso *",options:Array.from({length:53},(k,le)=>`${le+18}`),placeholder:"Selecciona edad mnima"}),m.jsx(xt,{name:"dress_code",label:"Cdigo de vestimenta *",options:["Casual","Formal","Semi-formal","Urbano","Fiesta temtica"],placeholder:"Selecciona el cdigo"}),m.jsx(xt,{name:"tieneVip",label:"Tiene zonas VIP?",options:["No","1","2","3","4","5","Ms de 5"]}),m.jsx(xt,{name:"reservas",label:"Acepta reservas?",options:["S","No"]}),m.jsx(xt,{name:"tieneLineup",label:"Tendr DJs con line-up?",options:["S","No"]}),m.jsx(VN,{})]}),m.jsx(zc,{title:"Imgenes",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 text-sm mb-2",children:"Flyer actual"}),m.jsx("div",{className:"rounded overflow-hidden border border-white/10 mb-3",children:f.flyer?m.jsx("img",{src:f.flyer,alt:"Flyer actual",className:"w-full h-48 object-cover"}):m.jsx("div",{className:"w-full h-48 bg-white/10 grid place-items-center text-white/40",children:"Sin flyer"})}),m.jsx(Hr,{name:"flyer",label:"Reemplazar flyer (opcional)"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 text-sm mb-2",children:"Imagen secundaria actual"}),m.jsx("div",{className:"rounded overflow-hidden border border-white/10 mb-3",children:f.imgSec?m.jsx("img",{src:f.imgSec,alt:"Imagen secundaria actual",className:"w-full h-48 object-cover"}):m.jsx("div",{className:"w-full h-48 bg-white/10 grid place-items-center text-white/40",children:"Sin imagen secundaria"})}),m.jsx(Hr,{name:"imgSec",label:"Reemplazar imagen secundaria (opcional)"})]})]})}),m.jsxs("div",{className:"flex gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 rounded border border-white/20 hover:bg-white/10",children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] disabled:opacity-60",children:"Guardar cambios"})]})]})}),E&&m.jsx("div",{className:"fixed z-50 inset-0 grid place-items-center bg-black/60",children:m.jsxs("div",{className:"bg-neutral-900 rounded-md p-6 w-[92vw] max-w-md text-center border border-white/10",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Guardar los cambios?"}),m.jsx("p",{className:"text-white/70 mb-5",children:"Se actualizarn los datos del evento."}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{className:"px-4 py-2 rounded border border-white/20 hover:bg-white/10",onClick:()=>A(!1),children:"No"}),m.jsx("button",{className:"px-4 py-2 rounded bg-[#8e2afc] hover:bg-[#7b1fe0]",disabled:i,onClick:G.handleSubmit(F),children:"S, guardar"})]})]})}),D&&m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/70",children:m.jsxs("div",{className:"bg-neutral-900 rounded-md p-6 w-[92vw] max-w-md text-center border border-rose-500/30",children:[m.jsx("h3",{className:"text-lg font-semibold text-rose-300 mb-2",children:"Borrar este evento?"}),m.jsxs("p",{className:"text-white/70 mb-5",children:["Esta accin es ",m.jsx("b",{children:"permanente"})," y no hay vuelta atrs."]}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{className:"px-4 py-2 rounded border border-white/20 hover:bg-white/10",onClick:()=>U(!1),disabled:u,children:"No, cancelar"}),m.jsx("button",{className:"px-4 py-2 rounded bg-rose-600 hover:bg-rose-500 disabled:opacity-60",onClick:j,disabled:u,children:u?"Eliminando":"S, borrar"})]})]})})]})]})}function N_({title:t,children:e}){return m.jsxs("section",{className:"rounded-xl border border-white/10 bg-white/[0.03] backdrop-blur p-5",children:[m.jsx("h3",{className:"font-semibold text-[#cbb3ff] mb-3",children:t}),m.jsx("div",{className:"space-y-2",children:e})]})}function js({k:t,v:e}){return m.jsxs("p",{className:"text-sm text-white/80 flex items-baseline justify-between gap-3",children:[m.jsx("span",{className:"text-white/60",children:t}),m.jsx("span",{className:"text-right",children:e??""})]})}function q1({label:t}){return m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/20 text-[#e4d7ff] border border-[#8e2afc]/30",children:t})}function zc({title:t,children:e}){return m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#cbb3ff]",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}const ts=t=>t?"S":"No",Bc=t=>{if(typeof t=="boolean")return t;const e=String(t??"").toLowerCase();return e==="s"||e==="si"||e==="true"||e==="1"},Z1=t=>{const e=Number(t);return Number.isFinite(e)?e:null},F7=cs({nombre:fe().min(1),descripcion:fe().optional().or(Je("")),direccion:fe().optional().or(Je("")),ciudad:fe().optional().or(Je("")),pais:fe().optional().or(Je("")),telefono:fe().optional().or(Je("")),email:fe().email().optional().or(Je("")),sitio_web:fe().optional().or(Je("")),instagram:fe().optional().or(Je("")),accesibilidad:kt([Ot(),fe()]).default("No"),estacionamientos:kt([Ot(),fe()]).default("No"),guardaropia:kt([Ot(),fe()]).default("No"),terraza:kt([Ot(),fe()]).default("No"),fumadores:kt([Ot(),fe()]).default("No"),wifi:kt([Ot(),fe()]).default("No"),ambientes:kt([Rl.number(),fe()]).optional().or(Je("")),banos:kt([Rl.number(),fe()]).optional().or(Je("")),imagenFile:Kn().optional().nullable(),bannerFile:Kn().optional().nullable()}),Vm="inline-flex items-center justify-center rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0] px-4 py-2 text-sm font-semibold disabled:opacity-60 transition",R_="inline-flex items-center justify-center px-4 py-2 rounded border border-white/20 hover:bg-white/10 text-sm font-semibold";function L_({title:t,children:e}){return m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#8e2afc]",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}function Fm({label:t,value:e}){return m.jsxs("div",{className:"rounded-md bg-white/5 border border-white/10 px-3 py-2",children:[m.jsx("p",{className:"text-white/60 text-xs",children:t}),m.jsx("p",{className:"text-white break-words",children:e})]})}function U7(){const{user:t}=ir(),[e,n]=N.useState(null),[r,i]=N.useState(null),[a,u]=N.useState(!0),[h,f]=N.useState(!1),[_,v]=N.useState(!1),[T,E]=N.useState(!1),A=N.useRef(null),D=Ea({resolver:Sa(F7),defaultValues:void 0,mode:"onChange"}),U=kd(),H=Aa();N.useEffect(()=>{(async()=>{if(!t){u(!1);return}u(!0);const ee=fr(U,"club"),F=ga(ee,ya("uid_usersWeb","==",t.uid)),j=await Nr(F);if(!j.empty){const V=j.docs[0],B=V.data();n(B),i(V.id);const z={nombre:B.nombre,descripcion:B.descripcion??"",direccion:B.direccion??"",ciudad:B.ciudad??"",pais:B.pais??"",telefono:B.telefono??"",email:B.email??"",sitio_web:B.sitio_web??"",instagram:B.instagram??"",accesibilidad:ts(B.accesibilidad),estacionamientos:ts(B.estacionamientos),guardaropia:ts(B.guardaropia),terraza:ts(B.terraza),fumadores:ts(B.fumadores),wifi:ts(B.wifi),ambientes:B.ambientes??"",banos:B.banos??"",imagenFile:null,bannerFile:null};D.reset(z),A.current=z}u(!1)})()},[t]);const W=async(ee,F)=>{if(!ee||!t)return null;const j=`${F}/${t.uid}/${Date.now()}_${ee.name}`,V=Pa(H,j),B=await Ca(V,ee);return Ia(B.ref)},G=()=>{A.current&&D.reset(A.current),f(!1)},$=()=>E(!0),se=D.handleSubmit(async ee=>{if(!(!r||!t)){v(!0);try{const F=await W(ee.imagenFile,"imagen"),j=await W(ee.bannerFile,"banner"),V={nombre:ee.nombre,descripcion:ee.descripcion||null,direccion:ee.direccion||null,ciudad:ee.ciudad||null,pais:ee.pais||null,telefono:ee.telefono||null,email:ee.email||null,sitio_web:ee.sitio_web||null,instagram:ee.instagram||null,accesibilidad:Bc(ee.accesibilidad),estacionamientos:Bc(ee.estacionamientos),guardaropia:Bc(ee.guardaropia),terraza:Bc(ee.terraza),fumadores:Bc(ee.fumadores),wifi:Bc(ee.wifi),ambientes:Z1(ee.ambientes),banos:Z1(ee.banos),imagen:F??e?.imagen??null,banner:j??e?.banner??null},B=Bn(U,"club",r);await Jl(B,V),Et.success("Datos guardados"),n(k=>k&&{...k,...V});const z={...e,...V},M={nombre:z.nombre,descripcion:z.descripcion??"",direccion:z.direccion??"",ciudad:z.ciudad??"",pais:z.pais??"",telefono:z.telefono??"",email:z.email??"",sitio_web:z.sitio_web??"",instagram:z.instagram??"",accesibilidad:ts(z.accesibilidad),estacionamientos:ts(z.estacionamientos),guardaropia:ts(z.guardaropia),terraza:ts(z.terraza),fumadores:ts(z.fumadores),wifi:ts(z.wifi),ambientes:z.ambientes??"",banos:z.banos??"",imagenFile:null,bannerFile:null};D.reset(M),A.current=M,E(!1),f(!1)}catch(F){console.error(F),Et.error(F.message||"No se pudo guardar")}finally{v(!1)}}});return a?m.jsx("div",{className:"p-6 text-white",children:"Cargando mi club"}):e?m.jsxs("div",{className:"text-white",children:[m.jsxs("div",{className:"relative w-full h-[280px] md:h-[360px] overflow-hidden",children:[e.banner?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.banner,alt:"Banner",className:"absolute inset-0 w-full h-full object-cover scale-105"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-black/55 to-black"})]}):m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#25123e] via-[#381a63] to-[#8e2afc]"}),m.jsxs("div",{className:"absolute bottom-4 left-4 flex items-end gap-4 z-20",children:[m.jsx("div",{className:"h-24 w-24 rounded-full overflow-hidden border-4 border-[#8e2afc]",children:e.imagen?m.jsx("img",{src:e.imagen,alt:"Avatar",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full grid place-items-center bg-white/10 text-xl",children:e.nombre[0].toUpperCase()})}),m.jsxs("div",{className:"pb-1",children:[m.jsx("h1",{className:"text-3xl font-extrabold drop-shadow",children:e.nombre}),m.jsx("p",{className:"text-white/80",children:[e.ciudad,e.pais].filter(Boolean).join(", ")})]})]})]}),m.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[h?m.jsx(Ta,{...D,children:m.jsxs("form",{onSubmit:ee=>{ee.preventDefault(),$()},className:"space-y-6",noValidate:!0,children:[m.jsxs(L_,{title:"Identidad & contacto",children:[m.jsx(ze,{name:"nombre",label:"Nombre del club *"}),m.jsx(Dd,{name:"descripcion",label:"Descripcin",rows:3}),m.jsx(ze,{name:"direccion",label:"Direccin"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ciudad",label:"Ciudad"}),m.jsx(ze,{name:"pais",label:"Pas"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"telefono",label:"Telfono"}),m.jsx(ze,{name:"email",type:"email",label:"Email"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"sitio_web",label:"Sitio web"}),m.jsx(ze,{name:"instagram",label:"Instagram"})]})]}),m.jsxs(L_,{title:"Servicios & capacidades",children:[m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(xt,{name:"accesibilidad",label:"Accesibilidad",options:["S","No"]}),m.jsx(xt,{name:"estacionamientos",label:"Estacionamientos",options:["S","No"]}),m.jsx(xt,{name:"guardaropia",label:"Guardarropa",options:["S","No"]}),m.jsx(xt,{name:"terraza",label:"Terraza",options:["S","No"]}),m.jsx(xt,{name:"fumadores",label:"Zona fumadores",options:["S","No"]}),m.jsx(xt,{name:"wifi",label:"Wi-Fi",options:["S","No"]})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ambientes",type:"number",label:"Ambientes"}),m.jsx(ze,{name:"banos",type:"number",label:"Baos"})]})]}),m.jsx(L_,{title:"Imgenes",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 mb-2",children:"Avatar actual"}),m.jsx("div",{className:"rounded border border-white/10 mb-2 h-48 overflow-hidden",children:e.imagen?m.jsx("img",{src:e.imagen,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-white/10 grid place-items-center text-2xl",children:e.nombre[0].toUpperCase()})}),m.jsx(Hr,{name:"imagenFile",label:"Reemplazar avatar"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 mb-2",children:"Banner actual"}),m.jsx("div",{className:"rounded border border-white/10 mb-2 h-48 overflow-hidden",children:e.banner?m.jsx("img",{src:e.banner,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-white/10 grid place-items-center text-2xl",children:"Sin banner"})}),m.jsx(Hr,{name:"bannerFile",label:"Reemplazar banner"})]})]})}),m.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-black/70 backdrop-blur px-4 py-3 flex justify-end gap-3 border-t border-white/10",children:[m.jsx("button",{type:"button",onClick:G,className:R_,children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:_,className:Vm,children:"Guardar cambios"})]})]})}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-6 flex justify-between",children:[m.jsx(Pr,{to:"/mis-eventos",className:R_,children:" Ir a Mis Eventos"}),m.jsx("button",{onClick:()=>f(!0),className:Vm,children:"Editar club"})]}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.descripcion&&m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-2",children:"Descripcin"}),m.jsx("p",{className:"text-white/80 leading-relaxed",children:e.descripcion})]}),m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-3",children:"Servicios"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.accesibilidad&&m.jsx("span",{className:"chip",children:"Accesibilidad"}),e.estacionamientos&&m.jsx("span",{className:"chip",children:"Estacionamientos"}),e.guardaropia&&m.jsx("span",{className:"chip",children:"Guardarropa"}),e.terraza&&m.jsx("span",{className:"chip",children:"Terraza"}),e.fumadores&&m.jsx("span",{className:"chip",children:"Zona fumadores"}),e.wifi&&m.jsx("span",{className:"chip",children:"Wi-Fi"})]})]})]}),m.jsx("aside",{className:"space-y-6",children:m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h3",{className:"text-sm font-semibold text-[#cbb3ff] mb-2",children:"Contacto"}),m.jsxs("div",{className:"space-y-2 text-sm text-white/80",children:[e.telefono&&m.jsx(Fm,{label:"Telfono",value:e.telefono}),e.email&&m.jsx(Fm,{label:"Email",value:e.email}),e.sitio_web&&m.jsx(Fm,{label:"Web",value:e.sitio_web}),e.instagram&&m.jsx(Fm,{label:"Instagram",value:e.instagram})]})]})})]})]}),T&&m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60",children:m.jsxs("div",{className:"panel w-[90vw] max-w-md text-center p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Guardar los cambios?"}),m.jsx("p",{className:"text-white/70 mb-5",children:"Se actualizarn los datos del club."}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{className:R_,onClick:()=>E(!1),children:"No"}),m.jsx("button",{className:Vm,disabled:_,onClick:()=>se(),children:"S, guardar"})]})]})})]})]}):m.jsxs("div",{className:"text-white/80 p-6",children:[m.jsx("p",{children:"No tienes un club creado todava."}),m.jsx(Pr,{to:"/club/crear",className:Vm,children:"Crear club"})]})}function z7(){return m.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4 text-white",children:"Mi club"}),m.jsx(U7,{})]})}const B7=cs({nombre:fe().min(1,"El nombre de la productora es obligatorio"),telefono:fe().optional().or(Je("")),correo:fe().email("Correo invlido"),imagen:Kn().optional().nullable()});function $7(){const{user:t}=ir(),[e,n]=N.useState(!0),[r,i]=N.useState(!1),a=Li(),u=Ea({resolver:Sa(B7),defaultValues:{nombre:"",telefono:"",correo:t?.email??"",imagen:null},mode:"onChange"});N.useEffect(()=>{if(!t){n(!1);return}(async()=>{try{const _=fr(rn,"Productoras"),v=ga(_,ya("uid","==",t.uid)),T=await Nr(v);i(!T.empty)}catch(_){console.error("Error comprobando productora:",_),Et.error("No se pudo comprobar tu productora")}finally{n(!1)}})()},[t]);const h=async _=>{if(!_)return null;const v=Aa(),T=_.name.split(".").pop()??"jpg",E=`productoras/${t.uid}/${Date.now()}.${T}`,A=Pa(v,E);return await Ca(A,_),Ia(A)},f=u.handleSubmit(async _=>{if(!t){Et.error("Debes iniciar sesin");return}n(!0);try{const v=fr(rn,"Productoras"),T=ga(v,ya("uid","==",t.uid));if(!(await Nr(T)).empty){Et.error("Ya tienes una productora creada"),a("/dashboard/productora");return}const A=await h(_.imagen);await w3(v,{uid:t.uid,nombre:_.nombre,telefono:_.telefono||null,correo:_.correo,imagen:A,createdAt:new Date().toISOString()}),Et.success("Productora creada!"),a("/dashboard/productora")}catch(v){console.error("Error creando productora:",v),Et.error(v.message||"No se pudo crear la productora")}finally{n(!1)}});return e?m.jsx("div",{className:"p-6 text-white",children:"Cargando"}):r?m.jsx("main",{className:"text-white px-4 py-8",children:m.jsxs("div",{className:"max-w-xl mx-auto rounded-xl border border-white/10 bg-white/[0.03] p-6 text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Ya tienes una productora"}),m.jsx("p",{className:"text-white/70 mb-4",children:"Puedes administrar tus datos desde Mi productora."}),m.jsx("button",{onClick:()=>a("/dashboard/productora"),className:"px-4 py-2 rounded bg-[#8e2afc] hover:bg-[#7b1fe0]",children:"Ir a mi productora"})]})}):m.jsxs("main",{className:"text-white px-4 py-8 ",children:[m.jsxs("header",{className:"max-w-3xl mx-auto space-y-2 mb-8 text-center",children:[m.jsx("img",{src:e0,alt:"GoUp",className:"mx-auto w-28 "}),m.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold",children:["CREAR ",m.jsx("span",{className:"text-[#8e2afc]",children:"PRODUCTORA"})]}),m.jsx("p",{className:"text-white/70",children:"Publica tu productora para gestionar tus datos de contacto."})]}),m.jsx(Ta,{...u,children:m.jsxs("form",{onSubmit:f,className:"max-w-3xl mx-auto space-y-6",noValidate:!0,children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#cbb3ff]",children:"Informacin"}),m.jsx(ze,{name:"nombre",label:"Nombre de la productora *",placeholder:"Ej: Purple Nights Productions"}),m.jsx(ze,{name:"telefono",label:"Telfono",placeholder:"+56 9 1234 5678"}),m.jsx(ze,{name:"correo",label:"Correo *",type:"email",placeholder:"productora@ejemplo.com"})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#cbb3ff]",children:"Imagen de perfil"}),m.jsx(Hr,{name:"imagen",label:"Logo / avatar"})]}),m.jsx("div",{className:"flex justify-end pt-2",children:m.jsx("button",{type:"submit",className:"px-5 py-2 rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0]",children:"Crear productora"})})]})})]})}const G1=kd();function K1(){const{user:t,dbUser:e,loading:n}=ir(),r=Li(),[i,a]=N.useState(!0),[u,h]=N.useState(null),[f,_]=N.useState("productor");N.useEffect(()=>{if(!n){if(!t){r("/login",{replace:!0});return}(async()=>{const T=Bn(G1,"roleRequests",t.uid),E=await _a(T);if(E.exists()){const A=E.data();h(A.estado)}a(!1)})()}},[n,t,r]);const v=async T=>{if(T.preventDefault(),!!t){a(!0);try{const E=Bn(G1,"roleRequests",t.uid),A=await _a(E),D={uid:t.uid,tipo:f,estado:"pendiente",actualizadoAt:kE()};A.exists()?await Jl(E,D):await Nd(E,{...D,creadoAt:kE()}),h("pendiente"),Et.success("Solicitud enviada correctamente")}catch(E){console.error(E),Et.error("Error al enviar la solicitud")}finally{a(!1)}}};return i||n?m.jsx("p",{className:"text-white p-6",children:"Cargando"}):u?m.jsxs("div",{className:"max-w-md mx-auto p-6 bg-neutral-900 rounded-lg",children:[m.jsx("h2",{className:"text-xl text-white mb-4",children:"Estado de tu solicitud"}),m.jsxs("p",{className:"text-white/80 mb-2",children:["Tipo: ",m.jsx("strong",{className:"text-white",children:f})]}),m.jsxs("p",{className:"text-white/80 mb-4",children:["Estado:"," ",m.jsx("span",{className:u==="aprobada"?"text-green-400":u==="rechazada"?"text-red-400":"text-yellow-300",children:u})]}),u==="rechazada"&&m.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 bg-[#8e2afc] rounded text-white",children:"Volver a solicitar"})]}):m.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto p-6 bg-neutral-900 rounded-lg space-y-4",children:[m.jsx("h2",{className:"text-xl text-white",children:"Solicita un rol"}),m.jsxs("label",{className:"block",children:[m.jsx("span",{className:"text-white/80",children:"Tipo de solicitud"}),m.jsxs("select",{value:f,onChange:T=>_(T.target.value),className:"mt-1 w-full p-2 bg-zinc-800 text-white rounded",children:[m.jsx("option",{value:"productor",children:"Productor"}),m.jsx("option",{value:"club_owner",children:"Club Owner"}),m.jsx("option",{value:"ambos",children:"Ambos"})]})]}),m.jsx("button",{type:"submit",disabled:i,className:`w-full py-2 rounded text-white ${i?"bg-zinc-700":"bg-[#8e2afc] hover:bg-[#7b1fe0]"}`,children:i?"Enviando":"Enviar solicitud"})]})}function H7(){const{dbUser:t}=ir(),e=Li(),[n,r]=N.useState([]),[i,a]=N.useState(!0);return N.useEffect(()=>{if(t?.rol!=="admin")return;(async()=>{const h=kd(),_=(await Nr(fr(h,"club"))).docs.map(v=>({id:v.id,...v.data()}));r(_),a(!1)})()},[t]),t?.rol!=="admin"?m.jsx("p",{className:"p-6 text-white",children:"Acceso denegado."}):i?m.jsx("p",{className:"p-6 text-white",children:"Cargando clubes"}):m.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 text-white",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Todos los clubes"}),m.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(u=>m.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[u.imagen?m.jsx("img",{src:u.imagen,alt:u.nombre,className:"w-16 h-16 object-cover rounded-full border border-white/20"}):m.jsx("div",{className:"w-16 h-16 rounded-full bg-white/10 flex items-center justify-center text-xl",children:u.nombre[0]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold",children:u.nombre}),m.jsx("p",{className:"text-sm text-white/60",children:[u.ciudad,u.pais].filter(Boolean).join(", ")})]})]}),m.jsx("button",{onClick:()=>{localStorage.setItem("adminSelectedClubId",u.id),e("/miClub")},className:"text-sm px-3 py-1 rounded bg-[#8e2afc] hover:bg-[#7b1fe0] transition",children:"Ver / Editar"})]},u.id))})]})}const ns=t=>t?"S":"No",$c=t=>{if(typeof t=="boolean")return t;const e=String(t??"").toLowerCase();return e==="s"||e==="si"||e==="true"||e==="1"},Q1=t=>{const e=Number(t);return Number.isFinite(e)?e:null},W7=cs({nombre:fe().min(1),descripcion:fe().optional().or(Je("")),direccion:fe().optional().or(Je("")),ciudad:fe().optional().or(Je("")),pais:fe().optional().or(Je("")),latitud:Rl.number().optional().nullable(),longitud:Rl.number().optional().nullable(),telefono:fe().optional().or(Je("")),email:fe().email().optional().or(Je("")),sitio_web:fe().optional().or(Je("")),instagram:fe().optional().or(Je("")),accesibilidad:kt([Ot(),fe()]).default("No"),estacionamientos:kt([Ot(),fe()]).default("No"),guardaropia:kt([Ot(),fe()]).default("No"),terraza:kt([Ot(),fe()]).default("No"),fumadores:kt([Ot(),fe()]).default("No"),wifi:kt([Ot(),fe()]).default("No"),ambientes:kt([Rl.number(),fe()]).optional().or(Je("")),banos:kt([Rl.number(),fe()]).optional().or(Je("")),imagenFile:Kn().optional().nullable(),bannerFile:Kn().optional().nullable()}),Um="inline-flex items-center justify-center rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0] px-4 py-2 text-sm font-semibold disabled:opacity-60 transition",j_="inline-flex items-center justify-center px-4 py-2 rounded border border-white/20 hover:bg-white/10 text-sm font-semibold";function D_({title:t,children:e}){return m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#8e2afc]",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}function zm({label:t,value:e}){return m.jsxs("div",{className:"rounded-md bg-white/5 border border-white/10 px-3 py-2",children:[m.jsx("p",{className:"text-white/60 text-xs",children:t}),m.jsx("p",{className:"text-white break-words",children:e})]})}function q7(){const{user:t,dbUser:e}=ir(),[n,r]=N.useState(null),[i,a]=N.useState(null),[u,h]=N.useState(!0),[f,_]=N.useState(!1),[v,T]=N.useState(!1),[E,A]=N.useState(!1),D=N.useRef(null),U=Ea({resolver:Sa(W7),defaultValues:void 0,mode:"onChange"}),H=kd(),W=Aa();N.useEffect(()=>{(async()=>{const j=localStorage.getItem("adminSelectedClubId");if(!j){console.warn("No se encontr ID en localStorage"),h(!1);return}try{const V=Bn(H,"club",j),B=await _a(V);if(!B.exists()){Et.error("Club no encontrado."),h(!1);return}const z=B.data();r(z),a(B.id);const M={nombre:z.nombre,descripcion:z.descripcion??"",direccion:z.direccion??"",ciudad:z.ciudad??"",pais:z.pais??"",latitud:z.latitud??null,longitud:z.longitud??null,telefono:z.telefono??"",email:z.email??"",sitio_web:z.sitio_web??"",instagram:z.instagram??"",accesibilidad:ns(z.accesibilidad),estacionamientos:ns(z.estacionamientos),guardaropia:ns(z.guardaropia),terraza:ns(z.terraza),fumadores:ns(z.fumadores),wifi:ns(z.wifi),ambientes:z.ambientes??"",banos:z.banos??"",imagenFile:null,bannerFile:null};U.reset(M),D.current=M}catch(V){console.error("Error al cargar club:",V),Et.error("Error al cargar el club.")}finally{h(!1)}})()},[]);const G=async(F,j)=>{if(!F||!t)return null;const V=`${j}/${t.uid}/${Date.now()}_${F.name}`,B=Pa(W,V),z=await Ca(B,F);return Ia(z.ref)},$=()=>{D.current&&U.reset(D.current),_(!1)},se=()=>A(!0),oe=U.handleSubmit(async F=>{if(!(!i||!t)){T(!0);try{const j=await G(F.imagenFile,"imagen"),V=await G(F.bannerFile,"banner"),B={nombre:F.nombre,descripcion:F.descripcion||null,direccion:F.direccion||null,ciudad:F.ciudad||null,pais:F.pais||null,latitud:typeof F.latitud=="number"?F.latitud:null,longitud:typeof F.longitud=="number"?F.longitud:null,telefono:F.telefono||null,email:F.email||null,sitio_web:F.sitio_web||null,instagram:F.instagram||null,accesibilidad:$c(F.accesibilidad),estacionamientos:$c(F.estacionamientos),guardaropia:$c(F.guardaropia),terraza:$c(F.terraza),fumadores:$c(F.fumadores),wifi:$c(F.wifi),ambientes:Q1(F.ambientes),banos:Q1(F.banos),imagen:j??n?.imagen??null,banner:V??n?.banner??null},z=Bn(H,"club",i);await Jl(z,B),Et.success("Datos guardados"),r(le=>le&&{...le,...B});const M={...n,...B},k={nombre:M.nombre,descripcion:M.descripcion??"",direccion:M.direccion??"",ciudad:M.ciudad??"",pais:M.pais??"",telefono:M.telefono??"",email:M.email??"",sitio_web:M.sitio_web??"",instagram:M.instagram??"",accesibilidad:ns(M.accesibilidad),estacionamientos:ns(M.estacionamientos),guardaropia:ns(M.guardaropia),terraza:ns(M.terraza),fumadores:ns(M.fumadores),wifi:ns(M.wifi),ambientes:M.ambientes??"",banos:M.banos??"",imagenFile:null,bannerFile:null};U.reset(k),D.current=k,A(!1),_(!1)}catch(j){console.error(j),Et.error(j.message||"No se pudo guardar")}finally{T(!1)}}});return u?m.jsx("div",{className:"p-6 text-white",children:"Cargando mi club"}):n?m.jsxs("div",{className:"text-white",children:[m.jsxs("div",{className:"relative w-full h-[280px] md:h-[360px] overflow-hidden",children:[n.banner?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:n.banner,alt:"Banner",className:"absolute inset-0 w-full h-full object-cover scale-105"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-black/55 to-black"})]}):m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#25123e] via-[#381a63] to-[#8e2afc]"}),m.jsxs("div",{className:"absolute bottom-4 left-4 flex items-end gap-4 z-20",children:[m.jsx("div",{className:"h-24 w-24 rounded-full overflow-hidden border-4 border-[#8e2afc]",children:n.imagen?m.jsx("img",{src:n.imagen,alt:"Avatar",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full grid place-items-center bg-white/10 text-xl",children:n.nombre[0].toUpperCase()})}),m.jsxs("div",{className:"pb-1",children:[m.jsx("h1",{className:"text-3xl font-extrabold drop-shadow",children:n.nombre}),m.jsx("p",{className:"text-white/80",children:[n.ciudad,n.pais].filter(Boolean).join(", ")})]})]})]}),m.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[f?m.jsx(Ta,{...U,children:m.jsxs("form",{onSubmit:F=>{F.preventDefault(),se()},className:"space-y-6",noValidate:!0,children:[m.jsxs(D_,{title:"Identidad & contacto",children:[m.jsx(ze,{name:"nombre",label:"Nombre del club *"}),m.jsx(Dd,{name:"descripcion",label:"Descripcin",rows:3}),m.jsx(ON,{nameDireccion:"direccion",nameLat:"latitud",nameLng:"longitud",label:"Direccin * (autocompletar y selecciona en mapa)"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ciudad",label:"Ciudad"}),m.jsx(ze,{name:"pais",label:"Pas"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"telefono",label:"Telfono"}),m.jsx(ze,{name:"email",type:"email",label:"Email"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"sitio_web",label:"Sitio web"}),m.jsx(ze,{name:"instagram",label:"Instagram"})]})]}),m.jsxs(D_,{title:"Servicios & capacidades",children:[m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(xt,{name:"accesibilidad",label:"Accesibilidad",options:["S","No"]}),m.jsx(xt,{name:"estacionamientos",label:"Estacionamientos",options:["S","No"]}),m.jsx(xt,{name:"guardaropia",label:"Guardarropa",options:["S","No"]}),m.jsx(xt,{name:"terraza",label:"Terraza",options:["S","No"]}),m.jsx(xt,{name:"fumadores",label:"Zona fumadores",options:["S","No"]}),m.jsx(xt,{name:"wifi",label:"Wi-Fi",options:["S","No"]})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ambientes",type:"number",label:"Ambientes"}),m.jsx(ze,{name:"banos",type:"number",label:"Baos"})]})]}),m.jsx(D_,{title:"Imgenes",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 mb-2",children:"Avatar actual"}),m.jsx("div",{className:"rounded border border-white/10 mb-2 h-48 overflow-hidden",children:n.imagen?m.jsx("img",{src:n.imagen,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-white/10 grid place-items-center text-2xl",children:n.nombre[0].toUpperCase()})}),m.jsx(Hr,{name:"imagenFile",label:"Reemplazar avatar"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 mb-2",children:"Banner actual"}),m.jsx("div",{className:"rounded border border-white/10 mb-2 h-48 overflow-hidden",children:n.banner?m.jsx("img",{src:n.banner,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-white/10 grid place-items-center text-2xl",children:"Sin banner"})}),m.jsx(Hr,{name:"bannerFile",label:"Reemplazar banner"})]})]})}),m.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-black/70 backdrop-blur px-4 py-3 flex justify-end gap-3 border-t border-white/10",children:[m.jsx("button",{type:"button",onClick:$,className:j_,children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:v,className:Um,children:"Guardar cambios"})]})]})}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-6 flex justify-between",children:[m.jsx(Pr,{to:"/adminClub",className:j_,children:" Ir a Clubes"}),e?.rol==="admin"&&m.jsx("button",{onClick:()=>_(!0),className:Um,children:"Editar club"})]}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.direccion&&m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-2",children:"Direccin"}),m.jsx("p",{className:"text-white/80 leading-relaxed ",children:n.direccion+", "+n.ciudad+", "+n.pais})]}),n.descripcion&&m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-2",children:"Descripcin"}),m.jsx("p",{className:"text-white/80 leading-relaxed",children:n.descripcion})]}),m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-3",children:"Servicios"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.accesibilidad&&m.jsx("span",{className:"chip",children:"Accesibilidad"}),n.estacionamientos&&m.jsx("span",{className:"chip",children:"Estacionamientos"}),n.guardaropia&&m.jsx("span",{className:"chip",children:"Guardarropa"}),n.terraza&&m.jsx("span",{className:"chip",children:"Terraza"}),n.fumadores&&m.jsx("span",{className:"chip",children:"Zona fumadores"}),n.wifi&&m.jsx("span",{className:"chip",children:"Wi-Fi"})]})]})]}),m.jsx("aside",{className:"space-y-6",children:m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h3",{className:"text-sm font-semibold text-[#cbb3ff] mb-2",children:"Contacto"}),m.jsxs("div",{className:"space-y-2 text-sm text-white/80",children:[n.telefono&&m.jsx(zm,{label:"Telfono",value:n.telefono}),n.email&&m.jsx(zm,{label:"Email",value:n.email}),n.sitio_web&&m.jsx(zm,{label:"Web",value:n.sitio_web}),n.instagram&&m.jsx(zm,{label:"Instagram",value:n.instagram})]})]})})]}),n.latitud&&n.longitud&&m.jsx("div",{className:"mt-3 rounded overflow-hidden border border-[#8e2afc]/30 shadow-lg",style:{height:200},children:m.jsxs(jN,{center:[n.latitud,n.longitud],zoom:16,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,dragging:!1,doubleClickZoom:!1,zoomControl:!1,attributionControl:!1,children:[m.jsx(MN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),m.jsx(DN,{position:[n.latitud,n.longitud],icon:new RN.Icon({iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41]})})]})})]}),E&&m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60",children:m.jsxs("div",{className:"panel w-[90vw] max-w-md text-center p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Guardar los cambios?"}),m.jsx("p",{className:"text-white/70 mb-5",children:"Se actualizarn los datos del club."}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{className:j_,onClick:()=>A(!1),children:"No"}),m.jsx("button",{className:Um,disabled:v,onClick:()=>oe(),children:"S, guardar"})]})]})})]})]}):m.jsxs("div",{className:"text-white/80 p-6",children:[m.jsx("p",{children:"No tienes un club creado todava."}),m.jsx(Pr,{to:"/club/crear",className:Um,children:"Crear club"})]})}const rs=t=>t?"S":"No",Hc=t=>{if(typeof t=="boolean")return t;const e=String(t??"").toLowerCase();return e==="s"||e==="si"||e==="true"||e==="1"},Y1=t=>{const e=Number(t);return Number.isFinite(e)?e:null},Z7=cs({nombre:fe().min(1),descripcion:fe().optional().or(Je("")),direccion:fe().optional().or(Je("")),ciudad:fe().optional().or(Je("")),pais:fe().optional().or(Je("")),telefono:fe().optional().or(Je("")),email:fe().email().optional().or(Je("")),sitio_web:fe().optional().or(Je("")),instagram:fe().optional().or(Je("")),accesibilidad:kt([Ot(),fe()]).default("No"),estacionamientos:kt([Ot(),fe()]).default("No"),guardaropia:kt([Ot(),fe()]).default("No"),terraza:kt([Ot(),fe()]).default("No"),fumadores:kt([Ot(),fe()]).default("No"),wifi:kt([Ot(),fe()]).default("No"),ambientes:kt([Rl.number(),fe()]).optional().or(Je("")),banos:kt([Rl.number(),fe()]).optional().or(Je("")),imagenFile:Kn().optional().nullable(),bannerFile:Kn().optional().nullable()}),M_="inline-flex items-center justify-center rounded-md bg-[#8e2afc] hover:bg-[#7b1fe0] px-4 py-2 text-sm font-semibold disabled:opacity-60 transition",O_="inline-flex items-center justify-center px-4 py-2 rounded border border-white/20 hover:bg-white/10 text-sm font-semibold";function V_({title:t,children:e}){return m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-[#8e2afc]",children:t}),m.jsx("div",{className:"space-y-4",children:e})]})}function Bm({label:t,value:e}){return m.jsxs("div",{className:"rounded-md bg-white/5 border border-white/10 px-3 py-2",children:[m.jsx("p",{className:"text-white/60 text-xs",children:t}),m.jsx("p",{className:"text-white break-words",children:e})]})}function G7(){const{user:t}=ir(),[e,n]=N.useState(null),[r,i]=N.useState(null),[a,u]=N.useState(!0),[h,f]=N.useState(!1),[_,v]=N.useState(!1),[T,E]=N.useState(!1),A=N.useRef(null),D=Ea({resolver:Sa(Z7),defaultValues:void 0,mode:"onChange"}),U=kd(),H=Aa();N.useEffect(()=>{(async()=>{const F=localStorage.getItem("adminSelectedClubId");if(!F){console.warn("No se encontr ID en localStorage"),u(!1);return}try{const j=Bn(U,"club",F),V=await _a(j);if(!V.exists()){Et.error("Club no encontrado."),u(!1);return}const B=V.data();n(B),i(V.id);const z={nombre:B.nombre,descripcion:B.descripcion??"",direccion:B.direccion??"",ciudad:B.ciudad??"",pais:B.pais??"",telefono:B.telefono??"",email:B.email??"",sitio_web:B.sitio_web??"",instagram:B.instagram??"",accesibilidad:rs(B.accesibilidad),estacionamientos:rs(B.estacionamientos),guardaropia:rs(B.guardaropia),terraza:rs(B.terraza),fumadores:rs(B.fumadores),wifi:rs(B.wifi),ambientes:B.ambientes??"",banos:B.banos??"",imagenFile:null,bannerFile:null};D.reset(z),A.current=z}catch(j){console.error("Error al cargar club:",j),Et.error("Error al cargar el club.")}finally{u(!1)}})()},[]);const W=async(ee,F)=>{if(!ee||!t)return null;const j=`${F}/${t.uid}/${Date.now()}_${ee.name}`,V=Pa(H,j),B=await Ca(V,ee);return Ia(B.ref)},G=()=>{A.current&&D.reset(A.current),f(!1)},$=()=>E(!0),se=D.handleSubmit(async ee=>{if(!(!r||!t)){v(!0);try{const F=await W(ee.imagenFile,"imagen"),j=await W(ee.bannerFile,"banner"),V={nombre:ee.nombre,descripcion:ee.descripcion||null,direccion:ee.direccion||null,ciudad:ee.ciudad||null,pais:ee.pais||null,telefono:ee.telefono||null,email:ee.email||null,sitio_web:ee.sitio_web||null,instagram:ee.instagram||null,accesibilidad:Hc(ee.accesibilidad),estacionamientos:Hc(ee.estacionamientos),guardaropia:Hc(ee.guardaropia),terraza:Hc(ee.terraza),fumadores:Hc(ee.fumadores),wifi:Hc(ee.wifi),ambientes:Y1(ee.ambientes),banos:Y1(ee.banos),imagen:F??e?.imagen??null,banner:j??e?.banner??null},B=Bn(U,"club",r);await Jl(B,V),Et.success("Datos guardados"),n(k=>k&&{...k,...V});const z={...e,...V},M={nombre:z.nombre,descripcion:z.descripcion??"",direccion:z.direccion??"",ciudad:z.ciudad??"",pais:z.pais??"",telefono:z.telefono??"",email:z.email??"",sitio_web:z.sitio_web??"",instagram:z.instagram??"",accesibilidad:rs(z.accesibilidad),estacionamientos:rs(z.estacionamientos),guardaropia:rs(z.guardaropia),terraza:rs(z.terraza),fumadores:rs(z.fumadores),wifi:rs(z.wifi),ambientes:z.ambientes??"",banos:z.banos??"",imagenFile:null,bannerFile:null};D.reset(M),A.current=M,E(!1),f(!1)}catch(F){console.error(F),Et.error(F.message||"No se pudo guardar")}finally{v(!1)}}});return a?m.jsx("div",{className:"p-6 text-white",children:"Cargando mi club"}):e?m.jsxs("div",{className:"text-white",children:[m.jsxs("div",{className:"relative w-full h-[280px] md:h-[360px] overflow-hidden",children:[e.banner?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.banner,alt:"Banner",className:"absolute inset-0 w-full h-full object-cover scale-105"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-black/55 to-black"})]}):m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#25123e] via-[#381a63] to-[#8e2afc]"}),m.jsxs("div",{className:"absolute bottom-4 left-4 flex items-end gap-4 z-20",children:[m.jsx("div",{className:"h-24 w-24 rounded-full overflow-hidden border-4 border-[#8e2afc]",children:e.imagen?m.jsx("img",{src:e.imagen,alt:"Avatar",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full grid place-items-center bg-white/10 text-xl",children:e.nombre[0].toUpperCase()})}),m.jsxs("div",{className:"pb-1",children:[m.jsx("h1",{className:"text-3xl font-extrabold drop-shadow",children:e.nombre}),m.jsx("p",{className:"text-white/80",children:[e.ciudad,e.pais].filter(Boolean).join(", ")})]})]})]}),m.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[h?m.jsx(Ta,{...D,children:m.jsxs("form",{onSubmit:ee=>{ee.preventDefault(),$()},className:"space-y-6",noValidate:!0,children:[m.jsxs(V_,{title:"Identidad & contacto",children:[m.jsx(ze,{name:"nombre",label:"Nombre del club *"}),m.jsx(Dd,{name:"descripcion",label:"Descripcin",rows:3}),m.jsx(ze,{name:"direccion",label:"Direccin"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ciudad",label:"Ciudad"}),m.jsx(ze,{name:"pais",label:"Pas"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"telefono",label:"Telfono"}),m.jsx(ze,{name:"email",type:"email",label:"Email"})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"sitio_web",label:"Sitio web"}),m.jsx(ze,{name:"instagram",label:"Instagram"})]})]}),m.jsxs(V_,{title:"Servicios & capacidades",children:[m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(xt,{name:"accesibilidad",label:"Accesibilidad",options:["S","No"]}),m.jsx(xt,{name:"estacionamientos",label:"Estacionamientos",options:["S","No"]}),m.jsx(xt,{name:"guardaropia",label:"Guardarropa",options:["S","No"]}),m.jsx(xt,{name:"terraza",label:"Terraza",options:["S","No"]}),m.jsx(xt,{name:"fumadores",label:"Zona fumadores",options:["S","No"]}),m.jsx(xt,{name:"wifi",label:"Wi-Fi",options:["S","No"]})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsx(ze,{name:"ambientes",type:"number",label:"Ambientes"}),m.jsx(ze,{name:"banos",type:"number",label:"Baos"})]})]}),m.jsx(V_,{title:"Imgenes",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 mb-2",children:"Avatar actual"}),m.jsx("div",{className:"rounded border border-white/10 mb-2 h-48 overflow-hidden",children:e.imagen?m.jsx("img",{src:e.imagen,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-white/10 grid place-items-center text-2xl",children:e.nombre[0].toUpperCase()})}),m.jsx(Hr,{name:"imagenFile",label:"Reemplazar avatar"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-white/70 mb-2",children:"Banner actual"}),m.jsx("div",{className:"rounded border border-white/10 mb-2 h-48 overflow-hidden",children:e.banner?m.jsx("img",{src:e.banner,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full bg-white/10 grid place-items-center text-2xl",children:"Sin banner"})}),m.jsx(Hr,{name:"bannerFile",label:"Reemplazar banner"})]})]})}),m.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-black/70 backdrop-blur px-4 py-3 flex justify-end gap-3 border-t border-white/10",children:[m.jsx("button",{type:"button",onClick:G,className:O_,children:"Cancelar"}),m.jsx("button",{type:"submit",disabled:_,className:M_,children:"Guardar cambios"})]})]})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-6 flex justify-between",children:m.jsx(Pr,{to:"/inicio",className:O_,children:" Ir a Clubes"})}),m.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.direccion&&m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-2",children:"Direccin"}),m.jsx("p",{className:"text-white/80 leading-relaxed ",children:e.direccion+", "+e.ciudad+", "+e.pais})]}),e.descripcion&&m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-2",children:"Descripcin"}),m.jsx("p",{className:"text-white/80 leading-relaxed",children:e.descripcion})]}),m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h2",{className:"text-lg font-bold text-[#cbb3ff] mb-3",children:"Servicios"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.accesibilidad&&m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-white text-bold border border-[#8e2afc]/20",children:"Accesibilidad"}),e.estacionamientos&&m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-white text-bold border border-[#8e2afc]/20",children:"Estacionamientos"}),e.guardaropia&&m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-white text-bold border border-[#8e2afc]/20",children:"Guardarropa"}),e.terraza&&m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-white text-bold border border-[#8e2afc]/20",children:"Terraza"}),e.fumadores&&m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-white text-bold border border-[#8e2afc]/20",children:"Zona fumadores"}),e.wifi&&m.jsx("span",{className:"text-xs px-2 py-1 rounded bg-[#8e2afc]/60 text-white text-bold border border-[#8e2afc]/20",children:"Wi-Fi"})]})]})]}),m.jsx("aside",{className:"space-y-6",children:m.jsxs("section",{className:"p-5 bg-white/[0.03] rounded-xl border border-white/10",children:[m.jsx("h3",{className:"text-sm font-semibold text-[#cbb3ff] mb-2",children:"Contacto"}),m.jsxs("div",{className:"space-y-2 text-sm text-white/80",children:[e.telefono&&m.jsx(Bm,{label:"Telfono",value:e.telefono}),e.email&&m.jsx(Bm,{label:"Email",value:e.email}),e.sitio_web&&m.jsx(Bm,{label:"Web",value:e.sitio_web}),e.instagram&&m.jsx(Bm,{label:"Instagram",value:e.instagram})]})]})})]})]}),T&&m.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60",children:m.jsxs("div",{className:"panel w-[90vw] max-w-md text-center p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Guardar los cambios?"}),m.jsx("p",{className:"text-white/70 mb-5",children:"Se actualizarn los datos del club."}),m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{className:O_,onClick:()=>E(!1),children:"No"}),m.jsx("button",{className:M_,disabled:_,onClick:()=>se(),children:"S, guardar"})]})]})})]})]}):m.jsxs("div",{className:"text-white/80 p-6",children:[m.jsx("p",{children:"No tienes un club creado todava."}),m.jsx(Pr,{to:"/club/crear",className:M_,children:"Crear club"})]})}function K7(){const t=hs();return m.jsx(vf,{mode:"wait",children:m.jsx(S2,{location:t,children:m.jsxs(Tn,{element:m.jsx(y5,{}),children:[m.jsx(Tn,{index:!0,element:m.jsx(B1,{})}),m.jsx(Tn,{path:"login",element:m.jsx(A5,{})}),m.jsx(Tn,{path:"unauthorized",element:m.jsx($k,{})}),m.jsx(Tn,{path:"perfil",element:m.jsx(es,{children:m.jsx(S$,{})})}),m.jsx(Tn,{path:"club",element:m.jsx(es,{children:m.jsx(G7,{})})}),m.jsx(Tn,{path:"dashboard/mi-club",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","club_owner"],children:m.jsx(z7,{})})})}),m.jsx(Tn,{path:"/solicitud-estado",element:m.jsx(K1,{})}),m.jsx(Tn,{path:"/solicitud-acceso",element:m.jsx(Rs,{roles:["user","productor","club_owner","admin"],children:m.jsx(K1,{})})}),m.jsx(Tn,{path:"productora/crear",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","productor"],children:m.jsx($7,{})})})}),m.jsx(Tn,{path:"club/crear",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","club_owner"],children:m.jsx(Q$,{})})})}),m.jsx(Tn,{path:"dashboard/productora",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","productor"],children:m.jsx(e7,{})})})}),m.jsx(Tn,{path:"evento/crear",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","club_owner","productor"],children:m.jsx(l7,{})})})}),m.jsx(Tn,{path:"/mis-eventos",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","productor","club_owner"],children:m.jsx(k7,{})})})}),m.jsx(Tn,{path:"/mis-eventos/:id",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin","productor","club_owner"],children:m.jsx(V7,{})})})}),m.jsx(Tn,{path:"admin",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin"],children:m.jsx(w7,{})})})}),m.jsx(Tn,{path:"/miClub",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin"],children:m.jsx(q7,{})})})}),m.jsx(Tn,{path:"/adminClub",element:m.jsx(es,{children:m.jsx(Rs,{roles:["admin"],children:m.jsx(H7,{})})})}),m.jsx(Tn,{path:"/debug",element:m.jsx(x7,{})}),m.jsx(Tn,{path:"/inicio",element:m.jsx(B1,{})})]})},t.pathname)})}function Q7(){return m.jsx(P3,{children:m.jsx(G2,{children:m.jsx(K7,{})})})}function Y7(){return m.jsx(h8,{toastOptions:{style:{background:"#111",color:"#fff",border:"1px solid #2b2140"},success:{iconTheme:{primary:"#8e2afc",secondary:"#fff"}},error:{iconTheme:{primary:"#ff3b3b",secondary:"#fff"}}}})}NR.createRoot(document.getElementById("root")).render(m.jsxs(Lt.StrictMode,{children:[m.jsx(Q7,{}),m.jsx(Y7,{})]}));
